Summary,Issue key,Issue id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Description,Environment,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Outward issue link (Cloners),Outward issue link (Duplicate),Outward issue link (Incorporates),Outward issue link (Problem/Incident),Outward issue link (Reference),Outward issue link (Regression),Outward issue link (dependent),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Attachment count),Custom field (Blog - New Blog Administrators),Custom field (Blog - New Blog PMC),Custom field (Blog - Write access),Custom field (Blog Administrator?),Custom field (Blogs - Admin for blog),Custom field (Blogs - Email Address),Custom field (Blogs - Existing Blog Access Level),Custom field (Blogs - Existing Blog Name),Custom field (Blogs - New Blog Write Access),Custom field (Blogs - Username),Custom field (Bug Category),Custom field (Bugzilla - Email Notification Address),Custom field (Bugzilla - List of usernames),Custom field (Bugzilla - PMC Name),Custom field (Bugzilla - Project Name),Custom field (Bugzilla Id),Custom field (Change Category),Custom field (Complexity),Custom field (Date of First Response),Custom field (Discovered By),Custom field (Docs Text),Custom field (Enable Automatic Patch Review),Custom field (Epic Link),Custom field (Existing GitBox Approval),Custom field (External issue URL),Custom field (Flags),Custom field (Git Notification Mailing List),Custom field (Git Repository Import Path),Custom field (Git Repository Name),Custom field (Git Repository Type),Custom field (GitHub Options),Custom field (Github Integration),Custom field (Github Integrations - Other),Custom field (Global Rank),Custom field (INFRA - Subversion Repository Path),Custom field (Initial Confluence Contributors),Custom field (Last public comment date),Custom field (Machine Readable Info),Custom field (New-TLP-TLPName),Custom field (Priority),Custom field (Project),Custom field (Protected Branch),Custom field (Rank),Custom field (Rank (Obsolete)),Custom field (Severity),Custom field (Severity),Custom field (Space Description),Custom field (Space Key),Custom field (Space Name),Custom field (Test and Documentation Plan),Custom field (Testcase included),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Please delete old releases from mirroring system,WICKET-6592,13185638,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,sebb@apache.org,sebb@apache.org,17/Sep/18 21:06,18/Sep/18 11:42,14/Mar/19 03:09,18/Sep/18 10:50,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"To reduce the load on the ASF mirrors, projects are required to delete old releases [1]

Please can you remove all non-current releases?

i.e. 1.5.16

Thanks!

Before doing so, be sure to update any download pages.
Either change the URLs to use the archive server, or drop the links.

[Note that older releases are always available from the ASF archive server]
[1] http://www.apache.org/dev/release.html#when-to-archive",https://dist.apache.org/repos/dist/release/wicket,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2018-09-18 02:53:06.392,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Sep 18 11:42:55 UTC 2018,,,,,,0|i3y6mn:,9223372036854775807,,,,,,,,"18/Sep/18 02:53;solomax;I believe both 
 * [1.5.16/|https://dist.apache.org/repos/dist/release/wicket/1.5.16/]
 * [6.29.0/|https://dist.apache.org/repos/dist/release/wicket/6.29.0/]

should be deleted, 6.x will be available in archives ...","18/Sep/18 09:05;sebb@apache.org;6.29.0 is listed as being supported for security fixes, so it can be left on the mirrors.","18/Sep/18 10:49;bitstorm;[~sebb@apache.org]

I've removed 1.5.16 from mirror and updated download links to point to the archive.",18/Sep/18 11:42;sebb@apache.org;Thanks,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Under Tomcat (ver. >= 8.5) BaseWebSocketBehavior can't find session id cookie ,WICKET-6588,13185472,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,bitstorm,bitstorm,17/Sep/18 10:56,21/Sep/18 13:18,14/Mar/19 03:09,21/Sep/18 13:18,8.1.0,9.0.0,,,,,,,,,,8.2.0,9.0.0,,,,,,,,,,,,,0,,,,,,The code used BaseWebSocketBehavior to find the name of the jsession cookie fails under Tomcat as it returns null if such a value has not been explicitly set  (see Tomcat class org.apache.catalina.core.ApplicationSessionCookieConfig.java). If a null value is returned we should use the default 'JSESSIONID' as indicated in the specifications (https://docs.oracle.com/javaee/7/api/javax/servlet/SessionCookieConfig.html#getName--),,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2018-09-17 11:02:26.694,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri Sep 21 13:18:38 UTC 2018,,,,,,0|i3y5lz:,9223372036854775807,,,,,,,,17/Sep/18 11:02;solomax;Additionally MockServletContext should be updated to return non-null value (with non-null name),"17/Sep/18 12:56;mgrigorov;[https://github.com/apache/tomcat/pull/122]

Feel free to give your opinion too.","19/Sep/18 18:08;bitstorm;I would commit a fix for this issue, regardless of what Tomcat team will decide to do about it.

WDYT?","20/Sep/18 03:55;solomax;+1
This seems to affect almost all Wicket users ....","20/Sep/18 15:14;jira-bot;Commit 122ddac9dfba6f4fb223ceee94101665fe2ec73d in wicket's branch refs/heads/wicket-8.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=122ddac ]

WICKET-6588 Under Tomcat (ver. >= 8.5) BaseWebSocketBehavior can't find
session id cookie","20/Sep/18 15:17;jira-bot;Commit 5fc86bdd8628686ffcd124849750f327dccc0c77 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5fc86bd ]

WICKET-6588 Under Tomcat (ver. >= 8.5) BaseWebSocketBehavior can't find
session id cookie","20/Sep/18 16:40;jira-bot;Commit 056d726a5d8a1506c3ae180774802ad1e243f08d in wicket's branch refs/heads/master from [~solomax]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=056d726 ]

[WICKET-6588] MockServletContext is updated to return non-null sessionCookieConfig
","20/Sep/18 16:41;solomax;[~bitstorm] I just have commited additional code to master, could you take a look? if it is OK, I'll merge it to wicket-8.x","21/Sep/18 07:13;ilgrosso;[~bitstorm] with Wicket Tester, this:
{code:java}
application.getServletContext().getSessionCookieConfig(){code}
is {{null}}, hence
{code:java}
application.getServletContext().getSessionCookieConfig().getName();
{code}
raises NPE.

Am I doing something wrong?","21/Sep/18 07:15;solomax;[~ilgrosso] this is fixed in master (please see my last commit)
Will merge it to wicket-8.x in a moment","21/Sep/18 07:17;ilgrosso;[~solomax] I guess you are referring to [this commit|https://github.com/apache/wicket/commit/056d726a5d8a1506c3ae180774802ad1e243f08d] - it looks exactly what I was looking for, thanks!","21/Sep/18 07:17;jira-bot;Commit bc90a114bbc3e526030bd70eb3c091d33626eb56 in wicket's branch refs/heads/wicket-8.x from [~solomax]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=bc90a11 ]

[WICKET-6588] MockServletContext is updated to return non-null sessionCookieConfig
",21/Sep/18 07:20;mgrigorov;[~ilgrosso] you need the improvement [~solomax] did for master branch.,21/Sep/18 07:20;mgrigorov;[~solomax] the change looks good to me!,"21/Sep/18 07:21;solomax;[~mgrigorov] [~ilgrosso], code change is merged into wicket-8.x, things should be better now :)",21/Sep/18 13:18;bitstorm;Thank you [~solomax]!,,,,,,,,,,,,,,,,,
SelectOptions doesn't html-encode option values,WICKET-6553,13161995,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,svenmeier,jyrimatti,jyrimatti,25/May/18 07:26,26/May/18 18:55,14/Mar/19 03:09,26/May/18 18:55,,,,,,,,,,,,6.30.0,7.11.0,8.1.0,wicket-extensions,,,,,,,,,,,0,,,,,,"This will show a javascript alert dialog (jetty:run the attached example app):
{code:java}
add(new Select<String>(""select"")
        .add(new SelectOptions<String>(""selectOptions"", Arrays.asList(""<script>alert('hello');</script>""), new IOptionRenderer<String>() {
                @Override
                public String getDisplayValue(String arg0) {
                    return arg0;
                }
                @Override
                public IModel<String> getModel(String arg0) {
                    return Model.of(arg0);
                }
            })));{code}
 

If I understand correctly, IOptionRenderer is for the user to provide the human-readable representation of the object (in this example just a String), and shouldn't be responsible for any kind of html encoding.

Should org.apache.wicket.extensions.markup.html.form.select.SelectOptions.SimpleSelectOption do the encoding?

 ",,,,,,,,,,,,,,,,,25/May/18 07:21;jyrimatti;myproject.zip;https://issues.apache.org/jira/secure/attachment/12925107/myproject.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2018-05-26 06:45:06.976,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sat May 26 18:55:01 UTC 2018,,,,,,0|i3u5q7:,9223372036854775807,,,,,,,,"26/May/18 06:45;jira-bot;Commit a7af2ad59b52831ba07c4f2a80869af19b569ca4 in wicket's branch refs/heads/master from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a7af2ad ]

WICKET-6553 SelectionOptions escape markup
","26/May/18 06:45;jira-bot;Commit c2bf22c1f98029dcdb5287466061dc9e74c65f89 in wicket's branch refs/heads/wicket-6.x from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c2bf22c ]

WICKET-6553 SelectionOptions escape markup
","26/May/18 06:45;jira-bot;Commit 843cfdaf8f93e26f121afa777dadf168c5e3030c in wicket's branch refs/heads/wicket-7.x from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=843cfda ]

WICKET-6553 SelectionOptions escape markup
","26/May/18 06:45;jira-bot;Commit 4ad94835e74be3eccb52d37201f2a5631e002ca2 in wicket's branch refs/heads/wicket-8.x from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=4ad9483 ]

WICKET-6553 SelectionOptions escape markup
","26/May/18 18:55;svenmeier;I assume that most people will use SelectOptions to  render non-user-input.

But I agree that it should be the other way around: Escape markup by default and allow people to configure the opposite if they need it. For this SelectOptions will adher to #getEscapeModelStrings() in the future.

 ",,,,,,,,,,,,,,,,,,,,,,,,,,,,
PageStore not cleared at session end,WICKET-6465,13100715,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,svenmeier,frantam,frantam,08/Sep/17 08:30,03/Oct/17 16:44,14/Mar/19 03:09,13/Sep/17 22:18,7.8.0,,,,,,,,,,,6.28.0,7.9.0,8.0.0-M8,wicket,,,,,,,,,,,0,,,,,,"WICKET-6387 causes the page store not to be cleared at logout on Tomcat. The problem is that tomcat does not call {{valueUnbound}} or {{valueBound}} when an attribute is set to the current value (new == old).

https://github.com/apache/tomcat/blob/e28b35c9e40aeb4b7ac52a98f07ad965630e2766/java/org/apache/catalina/session/StandardSession.java#L1424",Tomcat,,,,,,,,,WICKET-6457,,,,,,,10/Sep/17 16:41;bitstorm;WICKET-6465.patch;https://issues.apache.org/jira/secure/attachment/12886308/WICKET-6465.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2017-09-08 08:52:54.574,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Oct 03 16:44:56 UTC 2017,,,,,,0|i3jt1j:,9223372036854775807,,,,,,,,"08/Sep/17 08:49;frantam;Wait, what? I can't unset the Fix Version/s - this is not fixed at all.","08/Sep/17 08:52;bitstorm;Hi,

Isn't this a clone of WICKET-6457? If so the issue has been solved. ",08/Sep/17 08:54;frantam;It has been solved for a different servlet container.,"08/Sep/17 09:05;bitstorm;ok, I've reopened it. ",09/Sep/17 10:44;svenmeier;I don't see how WICKET-6387 is related. What do you mean by 'cleared' and 'logout'?,"09/Sep/17 11:55;frantam;The description is copied from WICKET-6457, more or less. [This commit|https://github.com/apache/wicket/commit/9e50533f2d9546d46686a88146936b25e1f355dd] prevents the {{IPageStore.unbind()}} method to be called on Tomcat.","10/Sep/17 08:38;githubbot;GitHub user svenmeier opened a pull request:

    https://github.com/apache/wicket/pull/233

    WICKET-6465 prevent unbound during storeTouchedPages only

    Why so complicated? We just want to prevent valueUnbound() from doing any harm while we're resetting the attribute during storeTouchedPages.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/svenmeier/wicket master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/wicket/pull/233.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #233
    
----
commit 8c7497144311923f7761e26eadedadfc9046f48e
Author: Sven Meier <svenmeier@apache.org>
Date:   2017-09-10T08:36:00Z

    WICKET-6465 prevent unbound during storeTouchedPages only

----
","10/Sep/17 08:44;svenmeier;In Tomcat re-setting the same value does not trigger valueUnbound() nor valueBound(), thus nobody resets the ""updating"" flag.

When the session expires later on, valueUnbound() has no effect, because the ""updating"" flag is still set.","10/Sep/17 12:53;bitstorm;Hi,

I've noticed something interesting in method Session#destroy that might be part of the problem. As its JavaDoc states the method was meant to dispose  session store and page manager when session is invalidated. At the moment there's no code for page manager, it was removed in (massive) commit 4977f66. I would expect that when this method is invoked it calls IPageManager#clear (implemented by PageStoreManager). In this way we could get rid of the updating flag and its logic. 

I've attached a patch showing my fix","11/Sep/17 10:17;githubbot;Github user bitstorm commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    We should consider method Session.destroy() to remove pages when session expires. See my comment at https://issues.apache.org/jira/browse/WICKET-6465
","11/Sep/17 10:52;papegaaij;org.apache.wicket.Session#destroy() is only called when a user logs out, not on session timeout. HttpSessionBindingListener.valueUnbound is called on both explicit logout and session timeout. Therefore, the code to clean the disk store should go in valueUnbound, not destroy.","11/Sep/17 11:38;githubbot;Github user martin-g commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    When the session expires or is invalidated via API call then `#valueUnbound()` is called and this clears the storages.
    This is how it worked last time I worked in this area of the code.
","11/Sep/17 12:05;githubbot;Github user papegaaij commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    Indeed, Sesison.destroy() is only called under certain conditions, and in those conditions, valueUnbound() will also be called.
","11/Sep/17 14:09;githubbot;Github user bitstorm commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    I see. thank you for the clarification. Still, I'd like to evaluate more structural solutions, at least for Wicket 8. A good start point might be HttpSessionStore.SessionBindingListener#valueUnbound. 
    It's already used to call Session#onInvalidate and we can add Session#clear() after it.
","11/Sep/17 18:25;githubbot;Github user svenmeier commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    Currently HttpSessionStore and PageStoreManager each use their own instance of HttpSessionBindingListener.
    Yes, we might be able to unify these. But with a simple fix we don't introduce even more - possibly faulty - changes.
    
    It was unfortunate that we didn't consider all possible callbacks from Servlet containers when this problem started with WICKET-6356.
    IMHO we should go with the simplest fix: Prevent anything bad from happening, when re-setting the session attribute:
    - clustering will work (because the attribute is re-set)
    - it doesn't matter whether the container calls valueBound() or not
    - if the container calls valueUnbound(), it does nothing bad during storeTouchedPages()
    
    Andrea, what do you think?
    
    BTW do we have to take care of concurrent access to the SessionEntry? I see that Martin used an AtomicBoolean, but how does that help if there are two request simultaneously storing touched pages?
","11/Sep/17 19:43;githubbot;Github user bitstorm commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    I'm fine with this quick fix, but I warmly suggest to improve it after it has been applied, at least in master branch.
    
    About concurrent access afaik we do have to take care of concurrency. At the moment we don't have any guarantee that setSessionAttribute saves the entry for the last request submitted (for the same session). 
","12/Sep/17 06:53;githubbot;Github user papegaaij commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    I don't see why the current implementation uses `AtomicBoolean`. The current implementation could just as well use a normal boolean. If we need to take concurrent access into account (and I think we do), we should probably use a `ThreadLocal`. Of course this assumes that the servlet container will call (un)bound from the same thread, but the current implementation already has that assumption. If a container decides to make the calls async, there is no way of telling if it will happen between the setting and clearing of the boolean.
","12/Sep/17 08:18;githubbot;Github user bitstorm commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    I agree about the use of a normal boolean, but I'm not sure I've understood your idea about ThreadLocal. What I would like to do is to prevent race conditions inside storeTouchedPages. I would do it using synchronized on entry object:
    
    ```
    protected void storeTouchedPages(final List<IManageablePage> touchedPages)
    {
    	if (!touchedPages.isEmpty())
    	{
    		SessionEntry entry = getSessionEntry(true);
    		synchronized (entry) 
    		{
    			entry.setSessionCache(touchedPages);
    			for (IManageablePage page : touchedPages) 
    			{
    				// WICKET-5103 use the same sessionId as used in SessionEntry#getPage()
    				pageStore.storePage(entry.sessionId, page);
    			}
    			entry.updating.set(true);
    			setSessionAttribute(getAttributeName(), entry);
    		}
    	}
    }
    ```
    In this way two possible concurrent requests for the same session would execute storeTouchedPages one at a time.
","12/Sep/17 08:33;githubbot;Github user papegaaij commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    We don't care about concurrent calls to valueUnbound, that's fine. All code in that method is thread safe. What we don't want is multiple calls to storeTouchedPages and valueUnbound (session expiry) to interfere with each other. Synchronizing on the entry will not help as session expiry is probably done from a different thread.

","13/Sep/17 07:14;githubbot;Github user papegaaij commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    Yes, this is what I had in mind. I'm ok to merge this in 7.x and 8.
","13/Sep/17 19:27;githubbot;Github user bitstorm commented on the issue:

    https://github.com/apache/wicket/pull/233
  
    Don't forget to fix brackets indentation before commit
","13/Sep/17 22:12;jira-bot;Commit b25984d4e9b9d07c5bf2d3e50c90bbb165554409 in wicket's branch refs/heads/wicket-7.x from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b25984d ]

WICKET-6465 prevent unbound during storeTouchedPages with ThreadLocal

This closes #233
","13/Sep/17 22:13;jira-bot;Commit 68b24aa788b25a67cfb16bee08a85328dad7b91c in wicket's branch refs/heads/master from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=68b24aa ]

WICKET-6465 prevent unbound during storeTouchedPages with ThreadLocal

This closes #233
","13/Sep/17 22:13;githubbot;Github user asfgit closed the pull request at:

    https://github.com/apache/wicket/pull/233
",13/Sep/17 22:18;svenmeier;With a ThreadLocal the call of #valueUnbound() can now be ignored reliably.,"22/Sep/17 17:22;jira-bot;Commit 68b24aa788b25a67cfb16bee08a85328dad7b91c in wicket's branch refs/heads/WICKET-6105-java.time from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=68b24aa ]

WICKET-6465 prevent unbound during storeTouchedPages with ThreadLocal

This closes #233
","26/Sep/17 13:55;jira-bot;Commit 8b9e82ffece4e94317b9efcaa5018d6076d86568 in wicket's branch refs/heads/wicket-6.x from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8b9e82f ]

WICKET-6465 prevent unbound during storeTouchedPages with ThreadLocal
",03/Oct/17 16:44;frantam;Verified in 7.9.0.,,,,,
OSGi-Manifest: wicket does not declare BSN,WICKET-6402,13080816,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,laeubi,laeubi,19/Jun/17 12:53,10/Nov/17 23:29,14/Mar/19 03:09,20/Jun/17 08:54,8.0.0-M6,,,,,,,,,,,8.0.0-M7,,,,,,,,,,,,,,0,,,,,,"I try to upgrade a project to OSGi and encountered the issue that the current 8.0.0-M6 build seem to have no valid (OSGi-) Manifest
[org.apache.wicket/wicket-util/8.0.0-M6] is not a valid bundle (bundleSymbolicName and bundleName are null)

It seems that OSGi-Manifest information is lost on all jar files.
",,,,,,,,,,,,,,,WICKET-6492,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2017-06-19 19:29:53.199,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed Oct 04 06:57:36 UTC 2017,,,,,,0|i3gfxz:,9223372036854775807,,,,,,,,"19/Jun/17 19:29;mgrigorov;wicket-util's META-INF/MANIFEST.MF contains ""Bundle-SymbolicName: org.apache.wicket.util""
hat exactly is wrong with it ? And how to fix it ?

No one from us uses OSGi, so please suggest what changes have to be applied to improve the OSGi experience!","20/Jun/17 07:58;laeubi;Hi, I downloaded https://mvnrepository.com/artifact/org.apache.wicket/wicket-core/8.0.0-M6
The manifest looks like this:

{noformat}
Manifest-Version: 1.0
Implementation-Title: Wicket Core
Implementation-Version: 8.0.0-M6
Built-By: andrea
Specification-Vendor: Apache Software Foundation
Specification-Title: Wicket Core
Implementation-Vendor-Id: org.apache.wicket
Created-By: Apache Maven 3.3.9
Build-Jdk: 1.8.0_131
Specification-Version: 8.0
Implementation-URL: http://wicket.apache.org/wicket-core
Implementation-Vendor: Apache Software Foundation
{noformat}
So no BSN, no Export/Import headers... Maybe something changed in the packaging between 7 and 8?
One option to easily improve OSGi-Experience would be to use the felix-bundle plugin http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html and packaging ""bundle"" that will compute all headers automatically. For a frist start teh configuration can be as simple as (it could be tweaked later on):

{noformat}
 <plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
      <instructions>
        <Export-Package>*</Export-Package>
        <Import-Package>
          org.apache.wicket.*,
          *;resolution:=optional
        </Import-Package>
      </instructions>
    </configuration>
  </plugin>
{noformat}
This produces a good starting point and you can even use this to check semantic versioning between releases (if you are interested) :-)","20/Jun/17 08:16;mgrigorov;maven-bundle-plugin is already in place and produces all this for me here.
https://github.com/apache/wicket/blob/master/pom.xml#L726-L747
","20/Jun/17 08:20;mgrigorov;It must be the maven-jar-plugin because MANIFEST.MF looks good in wicket-core/target/classes/META-INF, but looks bad in wicket-core/target/wicket-core-8.0.0-SNAPSHOT.jar

Do we need to change the packaging to ""bundle"" too ?  https://github.com/apache/wicket/blob/master/wicket-core/pom.xml#L27","20/Jun/17 08:23;laeubi;This looks fine (y) ... any idea why the files on central is missing the information? I would suggest then to change 
{code:java}
<Import-Package>org.apache.wicket*</Import-Package>
{code}
to
{code:java}
<Import-Package>org.apache.wicket*,*;resolution:=optional</Import-Package>
{code}
that would list all packages known in advance to be listed at least as optional. In addition, as mentioned in WICKET-6401 required packages should be marked as those in the indivual sub modules.

","20/Jun/17 08:26;laeubi;For osgi I normally only use packaging=bundle don't know if the jar plugin adds any special that requires this packaging type? Since a ""bundle"" is a jar file also it normaly is no problem to have it bundled just not sure with pom-dependecies that explicitly reference a specific packaging type.","20/Jun/17 08:38;mgrigorov;Changing the packaging to ""bundle"" leads to:

{code}
mvn clean package -DskipTests 
[INFO] Scanning for projects...
[ERROR] [ERROR] Some problems were encountered while processing the POMs:
[ERROR] Unknown packaging: bundle @ org.apache.wicket:wicket-core:[unknown-version], /home/martin/git/apache/wicket/wicket-core/pom.xml, line 27, column 13
{code}

","20/Jun/17 08:54;jira-bot;Commit 2e8d465c31cf5024c471e1431042c329a822d2fe in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=2e8d465 ]

WICKET-6402 OSGi-Manifest: wicket does not declare BSN

Change the packaging type to ""bundle""
","20/Jun/17 08:54;mgrigorov;I've changed it to ""bundle"" for all ""jar"" modules. I hope nothing else broke!","20/Jun/17 08:59;laeubi;If you search here http://felix.apache.org/documentation/subprojects/apache-felix-maven-bundle-plugin-bnd.html for ""Adding OSGi metadata to existing projects without changing the packaging type"" they describe a way to keep packaging jar it seems you the need to add
{noformat}
 <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
{noformat}
for the jar plugin so it use the file as its base, maybe this is an alternative solution?","22/Jun/17 14:33;lostiniceland;Even though the issue is already solved I would like to provide an alternative solution: some time ago, a new [bnd-maven-plugin|http://njbartlett.name/2015/03/27/announcing-bnd-maven-plugin.html] was created which works on standard jar-packaging type.

The bnd-maven-plugin is imho easier to configure since it uses an additional file (bnd.bnd) next to the pom which contains all OSGi instructions. Version 3.4 of the plugin should be released within the next days. ","22/Jun/17 14:56;mgrigorov;Pull requests/patches are welcome!

I can only apply your changes and test that they do not break normal Servlet deployments.
You, the OSGi users, should test that the OSGi configurations are proper and usable.","04/Oct/17 06:57;laeubi;Manifest-Infos are now back in Wicket, Thanks for fixing this.",,,,,,,,,,,,,,,,,,,,
Fix Listing's indents in UserGuide,WICKET-6368,13070930,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,eximius,eximius,10/May/17 19:42,30/May/17 13:35,14/Mar/19 03:09,26/May/17 15:44,,,,,,,,,,,,,,,guide,,,,,,,,,,,0,,,,,,"While reading this [guide|https://ci.apache.org/projects/wicket/guide/8.x/single.pdf] I found that listing's indents on pages: 10, 12, 21, 22, 24, 33, 36, 37, 96, 97, 272 are wrong

(Notice: all page numbers referr to the page number in page footer, not in PDF reader)",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2017-05-25 07:35:05.127,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue May 30 13:35:00 UTC 2017,,,,,,0|i3esmn:,9223372036854775807,,,,,,,,"25/May/17 07:35;jira-bot;Commit 5a228b314c9644f9776a47b2f3ee99ffae48346d in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5a228b3 ]

WICKET-6368 solved some of the indent problems
","26/May/17 15:42;jira-bot;Commit 380c2d38f13c7fa63426ec1627038941a9759fcd in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=380c2d3 ]

WICKET-6368 Fix Listing's indents in UserGuide","26/May/17 15:44;bitstorm;Now indents should be ok. 
Thank you!",29/May/17 12:50;eximius;[~bitstorm] Listing at page 36 is still messed up,"30/May/17 13:35;jira-bot;Commit 1439e553b1a84d424259c8605a8235c1f898617d in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1439e55 ]

WICKET-6368 Minor adjustment",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong implementation of MarkupFragment.iterator(),WICKET-6339,13050580,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,svenackermann,svenackermann,13/Mar/17 14:51,13/Oct/17 08:31,14/Mar/19 03:09,03/May/17 20:47,7.2.0,,,,,,,,,,,7.7.0,8.0.0-M6,,wicket,,,,,,,,,,,0,,,,,,"The method returns {{getRootMarkup().iterator(startIndex, size)}}, but this only works when {{getRootMarkup() == getParentMarkup()}} or all intermediate {{MarkupFragment}}s start at index 0.

The {{startIndex}} of all intermediate {{MarkupFragment}}s must be added, otherwise the iterator starts at a wrong index.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2017-03-13 14:55:24.719,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed May 03 20:48:43 UTC 2017,,,,,,0|i3bbp3:,9223372036854775807,,,,,,,,"13/Mar/17 14:55;mgrigorov;Could you please provide a quickstart or test case that demonstrates the issue ?
Thanks!",23/Mar/17 16:13;mgrigorov;Ping!,"23/Mar/17 16:22;svenackermann;Sorry, I do not have enough time at the moment to provide a test case. Our setup is quite complex for this and I'm not allowed to provide you with our code.

The problem is actually very obvious. If I have a situation like this:
RootMarkup
- MarkupFragment 1 (startIndex=2, size=10)
-- MarkupFragment 2 (startIndex=3, size=5)

then for MarkupFragment 2 the iterator will start at root index 2, but should start at 5 (startIndex of its parent MarkupFragment 1 must be added).","24/Mar/17 09:46;mgrigorov;I'm afraid we will need a test case.
This code is in use since a very long time. Last time it has been touched was March 20 2011.
It should have failed for many applications ...","24/Mar/17 12:29;svenackermann;OK, then I will try to provide a simple test case when I find some time. Can you just keep this open until then?","24/Mar/17 12:49;mgrigorov;Sure! No problem!
We will ping you in few weeks!
Thank you!",07/Apr/17 19:44;mgrigorov;Friendly ping! :-),"11/Apr/17 09:18;svenackermann;Hi,

I tried to build a test case based on our setup, but this would get too complex. So I created a very simple test to illustrate the problem:
{code}
@Test
public void testSimple() {
	// application needed
	new WicketTester();

	// test markup
	Markup markup = Markup.of(""<html><body><wicket:panel><wicket:container wicket:id='content'><a wicket:id='link' href='https://www.google.de'>Test</a></wicket:container></wicket:panel></body></html>"");

	IMarkupFragment firstLevelfragment = markup.find(""content"");
	System.out.println(firstLevelfragment + "" "" + firstLevelfragment.size());

	// construct a new fragment for the link-Tag as sub-fragment of firstLevelfragment
	MarkupFragment secondLevelFragment = new MarkupFragment(firstLevelfragment, 1);
	System.out.println(secondLevelFragment + "" "" + secondLevelFragment.size());

	List<MarkupElement> iteratorElements = new ArrayList<>(secondLevelFragment.size());
	for (MarkupElement markupElement : secondLevelFragment) {
		iteratorElements.add(markupElement);
	}
	List<MarkupElement> getElements = new ArrayList<>(secondLevelFragment.size());
	for (int i = 0; i < secondLevelFragment.size(); i++) {
		getElements.add(secondLevelFragment.get(i));
	}

	// elements from iterator should match the ones from the get(i) method
	assertEquals(getElements, iteratorElements);
}
{code}

As I mentioned, we have a very special usecase where we use some Wicket APIs that are not commonly used. We also have a workaround (using {{MarkupFragment.get(int)}} and {{MarkupFragment.size()}} instead of {{MarkupFragment.iterator()}}). I just wanted to tell you, that there might be sth. wrong in your code. If you think it's too risky to change sth. here, I can totally understand that.

To describe our usecase a bit:
We have a special subclass of {{MarkupContainer}} that loads its content from a CMS. Within that static content we look for all links and manipulate the markup in a way that these links are replaced with Wicket AjaxLinks to add some special handling (basically sth. like a confirmation ""Do you really want to click this link?""). I know that our solution is maybe not the best way to do that, but there were some requirements to do it like this. In the setup we use the APIs of {{Markup}}, {{IMarkupFragment}}, {{AbstractMarkupParser}}, {{AbstractMarkupFilter}} and {{ComponentTag}}.
If we use the {{MarkupFragment.iterator()}} method, we get the following error which I debugged down to the described problem:
{quote}
Tag expected
 MarkupStream: [markup = org.apache.wicket.util.resource.StringResourceStream@7ce97bef: <a href=""https://www.google.de/"" target=""_blank"">Test</a>

	<wicket:container wicket:id=""content""><a href=""https://www.google.de/"" target=""_blank"">Test</a>, index = 0, current = [Raw markup]]
	at org.apache.wicket.markup.MarkupStream.throwMarkupException(MarkupStream.java:526)
	at org.apache.wicket.markup.MarkupStream.getTag(MarkupStream.java:258)
	at org.apache.wicket.Component.internalRenderComponent(Component.java:2517)
	at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1698)
	at org.apache.wicket.Component.internalRender(Component.java:2380)
	at org.apache.wicket.Component.render(Component.java:2308)
	at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1524)
	at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1759)
	at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1734)
	at org.apache.wicket.MarkupContainer.renderAssociatedMarkup(MarkupContainer.java:797)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.renderAssociatedMarkup(AssociatedMarkupSourcingStrategy.java:77)
	at org.apache.wicket.markup.html.panel.PanelMarkupSourcingStrategy.onComponentTagBody(PanelMarkupSourcingStrategy.java:112)
	at org.apache.wicket.Component.internalRenderComponent(Component.java:2565)
	at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1698)
	at org.apache.wicket.Component.internalRender(Component.java:2380)
	at org.apache.wicket.Component.render(Component.java:2308)
	at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1524)
	at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1759)
	at org.apache.wicket.Page.onRender(Page.java:879)
	at org.apache.wicket.markup.html.WebPage.onRender(WebPage.java:141)
	at org.apache.wicket.Component.internalRender(Component.java:2380)
	at org.apache.wicket.Component.render(Component.java:2308)
	at org.apache.wicket.Page.renderPage(Page.java:1018)
	at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:124)
	at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:236)
	at org.apache.wicket.util.tester.BaseWicketTester$LastPageRecordingPageRendererProvider$1.respond(BaseWicketTester.java:2747)
	at org.apache.wicket.core.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:175)
	at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:895)
	at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
	at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:265)
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:222)
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:293)
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:718)
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:657)
	at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:887)
	at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:904)
	at org.apache.wicket.util.tester.BaseWicketTester.startComponentInPage(BaseWicketTester.java:1466)
	at org.apache.wicket.util.tester.BaseWicketTester.startComponentInPage(BaseWicketTester.java:1386)
{quote}","03/May/17 20:46;jira-bot;Commit fb0460b36bb72fff9f5008dd3d3fe5e8d666877b in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fb0460b ]

WICKET-6339 Wrong implementation of MarkupFragment.iterator()
","03/May/17 20:46;jira-bot;Commit c0cc33aaff140d4cff28d8e9e25199b4b129c51c in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c0cc33a ]

WICKET-6339 Wrong implementation of MarkupFragment.iterator()
","03/May/17 20:47;mgrigorov;Fixing the iterator doesn't break any Wicket tests!
My apps also work fine, but we don't do anything fancy with MarkupFragments ourselves.",03/May/17 20:48;mgrigorov;[~svenackermann] Thank you for the report and the test case!,,,,,,,,,,,,,,,,,,,,,
Missing Images,WICKET-6313,13039144,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,jan.luehr@anderscore.com,jan.luehr@anderscore.com,31/Jan/17 10:03,13/Feb/17 13:14,14/Mar/19 03:09,13/Feb/17 13:14,7.6.0,8.0.0-M4,,,,,,,,,,7.6.0,8.0.0-M4,,guide,,,,,,,,,,,0,,,,,,"Some Images - some UML class-diagrams - are not included in the PDF-Version when building the guide with mvn -Pguide install. These files are included in the html-Version (see screenshot)

I noticed some .png-inclusion related warnings during the build:
asciidoctor: WARNING: could not embed image

/tmp/wicket/wicket-user-guide/src/main/asciidoc/img/inmethod-grid2.png;
PNG uses unsupported interlace method","Debian GNU/Linux ""Jessie""",,,,,,,,,,,,,,,,31/Jan/17 10:03;jan.luehr@anderscore.com;pdf_vs_html.png;https://issues.apache.org/jira/secure/attachment/12850174/pdf_vs_html.png,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2017-02-10 16:11:53.78,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Mon Feb 13 13:14:11 UTC 2017,,,,,,0|i39etb:,9223372036854775807,,,,,,,,"10/Feb/17 16:11;jira-bot;Commit e8aea229e28bcdf7ef52997532054255f8098115 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e8aea22 ]

WICKET-6313 images reconverted to be embedded in the pdf
","10/Feb/17 16:57;jira-bot;Commit 0f96729c43db55d749dba3fa4777b390a751e847 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0f96729 ]

WICKET-6313 images reconverted to be embedded in the pdf
","13/Feb/17 05:16;jira-bot;Commit ede069b9b9617eb96b1705ab3515cc5ebe530279 in wicket's branch refs/heads/WICKET-6318-configurable-property-expression-resolver from Pedro Henrique Oliveira dos Santos
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ede069b ]

WICKET-6313 simplified IPropertyExpressionResolver, keeping one CachingPropertyLocator per OGNLPropertyExpressionResolver instance, javadoc
","13/Feb/17 05:16;jira-bot;Commit fa0f12624c97e99a37f2fbe0f9b8e41215bedb1f in wicket's branch refs/heads/WICKET-6318-configurable-property-expression-resolver from Pedro Henrique Oliveira dos Santos
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=fa0f126 ]

WICKET-6313 updating wicket-bean-validation project to use the new property resolution api
","13/Feb/17 05:26;pedrosans;Hi Andera, ignore the last two notifications on this ticket, I mistyped the ticket number in the commit message. I meant WICKET-6318","13/Feb/17 13:14;bitstorm;hi [~pedrosans],

no problem.",,,,,,,,,,,,,,,,,,,,,,,,,,,
"Markup not found for Component id =_header_ and WICKET-6231, regression ?",WICKET-6298,13029154,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,guiom.mary,guiom.mary,19/Dec/16 14:54,22/Dec/16 16:18,14/Mar/19 03:09,21/Dec/16 16:10,7.5.0,8.0.0-M2,,,,,,,,,,7.6.0,8.0.0-M3,,wicket,,,,,,,,,,,0,,,,,,"After upgrade from Wicket 7.4.0 to 7.5.0 I get the following error on some of my pages:
org.apache.wicket.markup.MarkupNotFoundException: Markup not found for Component: [WicketHeadContainer [Component id = _header_]]

After some analysis I found that it was related to the markup of those pages that inherit from a parent one and override it with a <wicket:head>, combined with the override of getVariation(). I have no issue on pages that don't override getVariation()

See description on http://apache-wicket.1842946.n4.nabble.com/Markup-not-found-for-Component-id-header-and-WICKET-6231-regression-td4676478.html",,,,,,,,,,,,,,,,,19/Dec/16 14:56;guiom.mary;testwicket.zip;https://issues.apache.org/jira/secure/attachment/12843871/testwicket.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2016-12-21 14:22:57.115,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Dec 22 16:18:40 UTC 2016,,,,,,0|i37ruv:,9223372036854775807,,,,,,,,"19/Dec/16 14:56;guiom.mary;Quickstart for reproduction. TestExtendedHomePageOK is green, TestExtendedHomePageKO fails. The only difference is the override of getVariation() on ExtendedHomePageKO.java","21/Dec/16 14:22;jira-bot;Commit 330357a5dc1d0d67a5957076e536e4971f6210ee in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=330357a ]

WICKET-6298 now AssociatedMarkupSourcingStrategy#getMarkup cleans any
previous markup loaded for container's children","21/Dec/16 14:22;jira-bot;Commit 43b8e60b6750f68b78343186fb86222c28398ae1 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=43b8e60 ]

WICKET-6298 added wicket:head tag to test HeaderPartContainer markup
","21/Dec/16 15:11;jira-bot;Commit 3c0ef2586f1b32aa12620ac72f8b6369810f0722 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3c0ef25 ]

WICKET-6298 now AssociatedMarkupSourcingStrategy#getMarkup cleans any
previous markup loaded for container's children","21/Dec/16 15:11;jira-bot;Commit 094435ed6b79e4e6cb791c6f50c17a0c99e10f28 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=094435e ]

WICKET-6298 added wicket:head tag to test HeaderPartContainer markup
","22/Dec/16 14:51;guiom.mary;Thanks ! I've just give it a try with the 7.6.0-SNAPSHOT and it solves the problem.

Any idea of the 7.6.0 release date ?","22/Dec/16 16:18;bitstorm;You'are welcome! There's no release date so far, I will try to work to the new release before the new year. In the worst case the new version should come out on January.",,,,,,,,,,,,,,,,,,,,,,,,,,
CssUrlReplacer doesn't understand data: urls and breaks them,WICKET-6290,13023415,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,cmenzel,cmenzel,cmenzel,25/Nov/16 15:20,04/Jan/17 09:43,14/Mar/19 03:09,05/Dec/16 10:52,1.5.17,6.25.0,7.5.0,8.0.0-M2,,,,,,,,7.6.0,8.0.0-M3,,,,,,,,,,,,,0,,,,,,"CssUrlReplacer tries to replace data: urls that are used to embed base64-encoded small images directly in CSS files. This leads to the following (from an adapted CssUrlReplacerTest I haven't pushed yet):

{code}
Expected :.class {background-image: url(data:image/gif;base64,R0lGODlhEAAQAMQAAORHH);}
Actual   :.class {background-image: url('./wicket/resource/org.apache.wicket.resource.CssUrlReplacerTest/res/css/data:image/gif;base64,R0lGODlhEAAQAMQAAORHH--decorated');}
{code}

It should really just leave those URLs alone. I'll prepare a pull request.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-11-28 13:29:29.243,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Mon Dec 05 10:52:44 UTC 2016,,,,,,0|i36sfr:,9223372036854775807,,,,,,,,"28/Nov/16 13:29;githubbot;GitHub user duesenklipper opened a pull request:

    https://github.com/apache/wicket/pull/200

    WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/duesenklipper/wicket wicket8/WICKET-6290-cssurlreplacer-data-urls

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/wicket/pull/200.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #200
    
----
commit a8823997fbcd326baa8fafbccfc386ff01c14c4d
Author: Carl-Eric Menzel <cmenzel@apache.org>
Date:   2016-11-28T13:27:40Z

    WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs

----
","28/Nov/16 13:59;githubbot;GitHub user duesenklipper opened a pull request:

    https://github.com/apache/wicket/pull/201

    WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs

    

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/duesenklipper/wicket wicket7/WICKET-6290-cssurlreplacer-data-urls

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/wicket/pull/201.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #201
    
----
commit 3db582cfe3ef755707aace9029b0c2ba9f46a706
Author: Carl-Eric Menzel <cmenzel@apache.org>
Date:   2016-11-28T13:27:40Z

    WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs

----
","01/Dec/16 21:43;githubbot;Github user martin-g commented on the issue:

    https://github.com/apache/wicket/pull/202
  
    :+1: 
","02/Dec/16 00:35;githubbot;Github user klopfdreh commented on the issue:

    https://github.com/apache/wicket/pull/202
  
    Really great change! +1
","05/Dec/16 10:36;jira-bot;Commit 6400416cd238052ac41a6365e70369d1b4593151 in wicket's branch refs/heads/wicket-6.x from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=6400416 ]

WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs
Merge branch 'wicket6/WICKET-6290-cssurlreplacer-data-urls' into wicket-6.x
","05/Dec/16 10:36;jira-bot;Commit 6400416cd238052ac41a6365e70369d1b4593151 in wicket's branch refs/heads/wicket-6.x from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=6400416 ]

WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs
Merge branch 'wicket6/WICKET-6290-cssurlreplacer-data-urls' into wicket-6.x
","05/Dec/16 10:38;jira-bot;Commit 3db582cfe3ef755707aace9029b0c2ba9f46a706 in wicket's branch refs/heads/wicket-7.x from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3db582c ]

WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs
","05/Dec/16 10:39;githubbot;Github user asfgit closed the pull request at:

    https://github.com/apache/wicket/pull/201
","05/Dec/16 10:49;jira-bot;Commit a8823997fbcd326baa8fafbccfc386ff01c14c4d in wicket's branch refs/heads/master from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a882399 ]

WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs
","05/Dec/16 10:49;jira-bot;Commit b8e1d5ce84a711551cae9cd8cf5389f126493870 in wicket's branch refs/heads/master from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b8e1d5c ]

WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs

Merge branch 'wicket8/WICKET-6290-cssurlreplacer-data-urls'
","05/Dec/16 10:49;jira-bot;Commit b8e1d5ce84a711551cae9cd8cf5389f126493870 in wicket's branch refs/heads/master from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b8e1d5c ]

WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs

Merge branch 'wicket8/WICKET-6290-cssurlreplacer-data-urls'
","05/Dec/16 10:49;githubbot;Github user asfgit closed the pull request at:

    https://github.com/apache/wicket/pull/200
","05/Dec/16 10:51;jira-bot;Commit 4d91c314c45682067d06665b5c0ea8eab8971891 in wicket's branch refs/heads/wicket-6.x from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=4d91c31 ]

WICKET-6290 fix CssUrlReplacer so it does not mangle data URIs
","05/Dec/16 10:51;jira-bot;Commit 7e42573b13ca198cbee68f7242775b389139d8a6 in wicket's branch refs/heads/wicket-6.x from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7e42573 ]

Merge branch 'wicket6/WICKET-6290-cssurlreplacer-data-urls' into wicket-6.x
","05/Dec/16 10:51;githubbot;Github user asfgit closed the pull request at:

    https://github.com/apache/wicket/pull/202
","05/Dec/16 10:52;cmenzel;Pull requests merged for 6, 7 and 8.",,,,,,,,,,,,,,,,,
NoRecordsToolbar should override onConfigure rather than isVisible,WICKET-6285,13022492,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,cmenzel,cmenzel,cmenzel,22/Nov/16 13:04,22/Nov/16 14:01,14/Mar/19 03:09,22/Nov/16 14:00,7.5.0,8.0.0-M2,,,,,,,,,,7.6.0,8.0.0-M3,,,,,,,,,,,,,0,,,,,,"Overriding isVisible is discouraged, visibility should be set just once. I know the rowcount is cached nowadays, but some time ago this actually bit us (admittedly in some way that I don't remember now, but I think by getRowCount being called too early in a request).",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-11-22 13:16:02.874,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Nov 22 14:00:45 UTC 2016,,,,,,0|i36mqn:,9223372036854775807,,,,,,,,"22/Nov/16 13:16;jira-bot;Commit 72ad2383b7ccd33a0ec72f2de0e6b84c392d9641 in wicket's branch refs/heads/wicket-7.x from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=72ad238 ]

WICKET-6285 make NoRecordsToolbar use onConfigure/setVisible instead of overriding isVisible
Merge remote-tracking branch 'github/feature/fix-no-records-toolbar' into wicket-7.x
","22/Nov/16 14:00;jira-bot;Commit 0b71bd97b4873eeccb029d00227ba5efef373de8 in wicket's branch refs/heads/master from [~cmenzel]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0b71bd9 ]

WICKET-6285 make NoRecordsToolbar use onConfigure/setVisible instead of overriding isVisible
",22/Nov/16 14:00;cmenzel;Fix merged.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation,WICKET-6279,13021703,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,svenackermann,svenackermann,18/Nov/16 08:20,13/Oct/17 08:31,14/Mar/19 03:09,19/Nov/16 12:36,7.2.0,,,,,,,,,,,7.6.0,8.0.0-M3,,wicket,,,,,,,,,,,0,attribute,behavior,,,,"The magic values {{AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE}} and {{AttributeModifier.VALUELESS_ATTRIBUTE_ADD}} do not work correctly after they have been deserialized.

Imagine you have a page with a component that has sth. added like this:
{code:java}
component.add(AttributeModifier.replace(""myattribute"", AttributeModifier.VALUELESS_ATTRIBUTE_ADD));

component.add(AttributeModifier.replace(""anotherattribute"", Model.of(AttributeModifier.VALUELESS_ATTRIBUTE_ADD)));

component.add(AttributeModifier.replace(""thirdattribute"", new StringResourceModel(""myresourcekey"").setDefaultValue(AttributeModifier.VALUELESS_ATTRIBUTE_ADD)));
{code}

Once we navigate away from the page, it gets serialized including the String value ""VA_ADD"" for {{AttributeModifier.VALUELESS_ATTRIBUTE_ADD}}. When we go back (e.g. with browser back button), it is deserialized. But then the deserialized String ""VA_ADD"" is not anymore the same as {{AttributeModifier.VALUELESS_ATTRIBUTE_ADD}}, so we have an attribute added to our component with value ""VA_ADD"".

I'm not sure how this can be resolved or if it can be resolved at all. My workaround is to use an {{AbstractReadOnlyModel}} that always returns {{AttributeModifier.VALUELESS_ATTRIBUTE_ADD}}, so that special value is not serialized at all.

If it's not possible to manage the deserialisation, then there should be at least some documentation about this problem and maybe convenience code using my workaround with {{AbstractReadOnlyModel}} could be provided.

Thanks,
Sven","Tomcat 7.0
Windows 7",,,,,,,,,,,,,,WICKET-3934,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-11-18 10:23:45.785,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sat Nov 19 21:28:47 UTC 2016,,,,,,0|i36hvb:,9223372036854775807,,,,,,,,"18/Nov/16 10:23;mgrigorov;Thank you for the report!

Yes, I think the only workaround is to return a dynamic model (like AROM) that returns these special values. This way they are not serialized at all.

I think the problem could be fixed by implementing AttributeModifier#readResolve() that checks whether the deserialized object is one of those and return the special constants in this case.
[~dashorst] You are the expert here! :-)","18/Nov/16 22:11;jira-bot;Commit b523a40ec0c1586aa90af7125498077aa9c3b4f5 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b523a40 ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation
","18/Nov/16 22:11;jira-bot;Commit dd5108c90e008913f1a48eff0f9740450a3c0dcf in wicket's branch refs/heads/wicket-6.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=dd5108c ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation
",18/Nov/16 22:12;mgrigorov;#readObject() did the job!,"18/Nov/16 22:12;jira-bot;Commit 0c40a9d21b5adcca4457a84e3d4ea69b5d16359d in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0c40a9d ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation
","19/Nov/16 09:26;svenmeier;If #readObject() does an equals-check now, we could equally well just check for equality in #replaceAttributeValue(). As it is now, you can't write ""VA_ADD"" into an attribute.","19/Nov/16 09:56;svenackermann;Thanks for the quick fix. But that solution won't work for StringResourceModel with default value AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE, because it only handles the class Model. It also won't work with any custom model class that serializes its value.
And as [~svenmeier] pointed out, it makes the whole mechanism with {{AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE == replacementValue}} useless, so if one really wants to have the value ""VA_ADD"", it will be removed after deserialisation.","19/Nov/16 11:50;mgrigorov;Good catch, [~svenmeier] !

I think the patch attached to WICKET-3934 would be the best solution. I'll apply it shortly.","19/Nov/16 12:09;jira-bot;Commit 7ffeceaca25d4cc0c6c3caf432640de89fb0b38f in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7ffecea ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation

Use Enum for the special values for valueless attributes
","19/Nov/16 12:27;jira-bot;Commit 5e77d642eef1873ac5e9d486088505a48163a96f in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5e77d64 ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation

Use AbstractReadOnlyModel for the special VALUELESS_ATTRIBUTE_** values
","19/Nov/16 12:33;jira-bot;Commit 42c7f9118ec74cec5040dd00ccd97ffdee344905 in wicket's branch refs/heads/wicket-6.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=42c7f91 ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation

Use AbstractReadOnlyModel for the special VALUELESS_ATTRIBUTE_** values
","19/Nov/16 12:36;mgrigorov;8.x now uses Enum for those special values.
6.x and 7.x use AROM instead of Model.of() for them, as a best effort solution.","19/Nov/16 12:49;svenackermann;The solution for 7.0 still does not work when using StringResourceModel with default value VALUELESS_ATTRIBUTE_**. It would help if the both AROM instances would be public, so one could use them as default value instead of the String constants.","19/Nov/16 21:27;jira-bot;Commit 986aa7d3dc23077118ba960bed5ecbeca63b1207 in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=986aa7d ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation

Introduce dynamic models for the special marker values VALUELESS_ATTRIBUTE_ADD and VALUELESS_ATTRIBUTE_REMOVE that should be used when using the constructor accepting model
","19/Nov/16 21:28;jira-bot;Commit d450a34acfc75c311bfd8c521aedaddee79533f9 in wicket's branch refs/heads/wicket-6.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d450a34 ]

WICKET-6279 AttributeModifier.VALUELESS_ATTRIBUTE_REMOVE does not work after deserialisation

Introduce dynamic models for the special marker values VALUELESS_ATTRIBUTE_ADD and VALUELESS_ATTRIBUTE_REMOVE that should be used when using the constructor accepting model
","19/Nov/16 21:28;mgrigorov;Thank you for the feedback, [~svenackermann]!",,,,,,,,,,,,,,,,,
Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off,WICKET-6277,13020840,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,jan-krakora,jan-krakora,15/Nov/16 16:26,16/Nov/16 09:51,14/Mar/19 03:09,15/Nov/16 20:53,7.4.0,,,,,,,,,,,7.6.0,8.0.0-M3,,wicket-native-websocket,,,,,,,,,,,0,,,,,,"Whenever is the servlet container (Tomcat in my case) turned off it closes all established ws connections. Wicket reacts to that by broadcasting a {{ClosedMessage}} to a {{Page}} bounded to that connection. And that is a problem since before that, {{org.apache.wicket.protocol.http.WicketFilter#destroy()}} is called and (among others) the {{IPageManager}} is destroyed.

It leads to a NPE:
{code}
java.lang.NullPointerException: null
	at org.apache.wicket.page.PageStoreManager$SessionEntry.getPage(PageStoreManager.java:203)
	at org.apache.wicket.page.PageStoreManager$PersistentRequestAdapter.getPage(PageStoreManager.java:357)
	at org.apache.wicket.page.AbstractPageManager.getPage(AbstractPageManager.java:82)
	at org.apache.wicket.page.PageManagerDecorator.getPage(PageManagerDecorator.java:50)
	at org.apache.wicket.page.PageAccessSynchronizer$2.getPage(PageAccessSynchronizer.java:246)
	at org.apache.wicket.protocol.ws.api.AbstractWebSocketProcessor.getPage(AbstractWebSocketProcessor.java:315)
	at org.apache.wicket.protocol.ws.api.AbstractWebSocketProcessor.broadcastMessage(AbstractWebSocketProcessor.java:243)
	at org.apache.wicket.protocol.ws.api.AbstractWebSocketProcessor.onClose(AbstractWebSocketProcessor.java:182)
	at org.apache.wicket.protocol.ws.javax.WicketEndpoint.onClose(WicketEndpoint.java:71)
	at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:541)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:490)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:454)
	at org.apache.tomcat.websocket.WsWebSocketContainer.destroy(WsWebSocketContainer.java:926)
	at org.apache.tomcat.websocket.server.WsServerContainer.destroy(WsServerContainer.java:285)
	at org.apache.tomcat.websocket.server.WsContextListener.contextDestroyed(WsContextListener.java:48)
	at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4856)
	at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5474)
	at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:224)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1424)
	at org.apache.catalina.core.ContainerBase$StopChild.call(ContainerBase.java:1413)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
{code}

I think it would be good idea to NOT broadcast {{ClosedMessage}} when the Application is already destroyed.","Windows 10, Tomcat 8.0.33, JDK 1.8.0_91",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-11-15 20:43:39.05,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed Nov 16 09:51:44 UTC 2016,,,,,,0|i36cjj:,9223372036854775807,,,,,,,,"15/Nov/16 20:43;jira-bot;Commit 21837bcccd78bb529c2f33fbcd947ff5b9732739 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=21837bc ]

WICKET-6277 Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off

Do not notify the websocket behaviors/resources when the application is already destroyed.
Add non-null checks for IPageStore in PageStoreManager.
","15/Nov/16 20:44;jira-bot;Commit bcd212963eadfb4cb68773f6761724d55a2c230d in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=bcd2129 ]

WICKET-6277 Broadcasting ClosedMessage about the JSR 356 WebSocket connection after the container was turned off

Do not notify the websocket behaviors/resources when the application is already destroyed.
Add non-null checks for IPageStore in PageStoreManager.
",15/Nov/16 20:53;mgrigorov;Thanks!,"16/Nov/16 09:51;jan-krakora;Good job, as always. Thank you.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FileUploadField does not deteach models and fails to null the reference to the transient fileUploads field if forceCloseStreamsOnDetach is false,WICKET-6250,13008581,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,svenmeier,tkrah,tkrah,29/Sep/16 16:02,04/Jan/17 09:43,14/Mar/19 03:09,01/Oct/16 21:45,6.24.0,,,,,,,,,,,7.5.0,8.0.0-M2,,wicket,,,,,,,,,,,0,file_upload,,,,,"FileUpload does not clear our references and its model when the forceCloseStreamsOnDetach is false - which does not match the expectation from the javadoc:

{code}
  /**                                                                 
   * The FileUploadField will close any input streams you have opened in its FileUpload by
   * default. If you wish to manage the stream yourself (e.g. you want to use it in another
   * thread) then you can override this method to prevent this behavior.
   *                                                                  
   * @return <code>true</code> if stream should be closed at the end of request
   */   
{code}

So it just is about not closing the streams.
However the fileupload component does not only *not* close the streams - it also *fails* (if you return false from the *forceCloseStreamsOnDetach* method) to reset the model and forget about the current file uploads cached in the transient fileUploads variable.

{code}
  protected void onDetach()                                           
  {                                                                   
    if ((fileUploads != null) && forceCloseStreamsOnDetach())         
    {                                                                 
      for (FileUpload fu : fileUploads)                               
      {                                                               
        fu.closeStreams();                                            
      }                                                               
      fileUploads = null;                                             
                                                                      
      if (getModel() != null)                                         
      {                                                               
        getModel().setObject(null);                                   
      }                                                               
    }                                                                 
    super.onDetach();                                                 
  }  
{code}

Shouldn't that read more like this:

{code}
  protected void onDetach()                                           
  {                                                                   
    if ((fileUploads != null))         
    { 
      if(forceCloseStreamsOnDetach() {
	 for (FileUpload fu : fileUploads)                               
	 {                                                               
	  fu.closeStreams();                                            
	 }                                                               
      }
      fileUploads = null;                                             
                                                                      
      if (getModel() != null)                                         
      {                                                               
        getModel().setObject(null);                                   
      }                                                               
    }                                                                 
    super.onDetach();                                                 
  }  
{code}

In this case my streams wouldn't be closed but you could provide new streams in the next request.

As the variable is private and i don't want to close the stream i have to use reflection at the moment to reset the field to null in an overridden onDeteach().
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-10-01 21:24:12.578,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sat Oct 01 21:45:52 UTC 2016,,,,,,0|i3492n:,9223372036854775807,,,,,,,,"01/Oct/16 21:24;svenmeier;Changes for uploading of multiple files introduced a performance optimization in #getFileUploads() to parse the request once only.

If the page does not get serialized, the previous fileUploads are still present on the next request.","01/Oct/16 21:41;jira-bot;Commit c615cca9e0d1a6236f321e4692da4b0a3f99b9fe in wicket's branch refs/heads/master from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c615cca ]

WICKET-6250 always clear reference to fileUploads in onDetach()
","01/Oct/16 21:41;jira-bot;Commit 4b251c03bdfc0afb00fea2f51ab46eabc01cac44 in wicket's branch refs/heads/wicket-6.x from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=4b251c0 ]

WICKET-6250 always clear reference to fileUploads in onDetach()
","01/Oct/16 21:42;jira-bot;Commit 30d2669eed71f34b3dabd0870380d1504b6edac9 in wicket's branch refs/heads/wicket-7.x from [~svenmeier]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=30d2669 ]

WICKET-6250 always clear reference to fileUploads in onDetach()
","01/Oct/16 21:45;svenmeier;#fileUploads are always cleared now in #onDetach().

Models are *not* set to null though - this is how #forceCloseStreamsOnDetach worked before introduction of multiple file uploads.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Invalid state of LoadableDetachableModel with exception during load(),WICKET-6249,13007930,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,27/Sep/16 13:39,26/Oct/16 12:23,14/Mar/19 03:09,26/Oct/16 12:23,7.4.0,,,,,,,,,,,7.5.0,8.0.0-M2,,wicket,,,,,,,,,,,0,,,,,,"When an Exception occurs during the `load()` phase of a LoadableDetachableModel, the state of the LDM is ""ATTACHING"", but it can't ever recover from it through detaching.

Detaching should always happen when the model doesn't have a state (state == null) and the model hasn't been detached prior during the request. (the inverse happens for attaching).",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-09-27 13:43:39.781,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed Oct 26 08:42:16 UTC 2016,,,,,,0|i3451z:,9223372036854775807,,,,,,,,"27/Sep/16 13:43;jira-bot;Commit 6045149e004efd6073e660473b69f8e0f82cae7a in wicket's branch refs/heads/wicket-7.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=6045149 ]

Detaches LDM after exception during load()

When an Exception occurs during the `load()` phase of a
LoadableDetachableModel, the state of the LDM is ""ATTACHING"", but it
can't ever recover from it through detaching. Detaching should always
happen when the model doesn't have a state (state == null) and the
model hasn't been detached prior during the request. (the inverse
happens for attaching).

Fixes WICKET-6249
","27/Sep/16 13:45;jira-bot;Commit 165faa3f73df4a2e2c13b51b958f05e4d820d3b6 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=165faa3 ]

Detaches LDM after exception during load()

When an Exception occurs during the `load()` phase of a
LoadableDetachableModel, the state of the LDM is ""ATTACHING"", but it
can't ever recover from it through detaching. Detaching should always
happen when the model doesn't have a state (state == null) and the
model hasn't been detached prior during the request. (the inverse
happens for attaching).

Fixes WICKET-6249
","26/Oct/16 08:42;mgrigorov;The previous commits are in 7.5.0/8.0.0-M2.
Why the fix version has been set to next versions ?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Open up CsrfPreventionRequestCycleListener for extension,WICKET-6245,13005897,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,19/Sep/16 12:55,18/Nov/16 23:03,14/Mar/19 03:09,26/Oct/16 12:19,6.20.0,6.21.0,6.22.0,6.23.0,6.24.0,7.0.0,7.1.0,7.2.0,7.3.0,7.4.0,8.0.0-M1,6.25.0,7.5.0,8.0.0-M2,wicket,,,,,,,,,,,0,,,,,,"The design of the CsrfPreventionRequestCycleListener is such that it is open for extension, but fails to provide the right hooks for implementors. We should allow private methods to be called from event handlers, and allow overriding of  several checkpoints in the API.",,,,,,,,,,,,,,WICKET-6274,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-09-19 13:27:43.239,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri Nov 18 23:03:49 UTC 2016,,,,,,0|i33sjr:,9223372036854775807,,,,,,,,"19/Sep/16 13:27;jira-bot;Commit 3320821343f7957a4850f2d9b61ab18eec55fa62 in wicket's branch refs/heads/wicket-6.x from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3320821 ]

WICKET-6245: open up CsrfPreventionRequestCycleListener for extension
","19/Sep/16 13:27;jira-bot;Commit 5c345567c75b3cc1f7e4cce6dcf3e692870b4823 in wicket's branch refs/heads/wicket-7.x from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5c34556 ]

WICKET-6245: open up CsrfPreventionRequestCycleListener for extension
","19/Sep/16 13:39;jira-bot;Commit dbfe3461e5caa4c6d9f2d65b248a1a3e42946d0b in wicket's branch refs/heads/master from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=dbfe346 ]

WICKET-6245: fix testcase to reflect change in behavior: no origin is blocked
","19/Sep/16 13:39;jira-bot;Commit 89a2aac8c6851ee03ada2ab0c71e8675d31e39d9 in wicket's branch refs/heads/wicket-6.x from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=89a2aac ]

WICKET-6245: fix testcase to reflect change in behavior: no origin is blocked
","19/Sep/16 13:39;jira-bot;Commit f2c165cf994f60753016459ce0d94b3787f6727c in wicket's branch refs/heads/wicket-7.x from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f2c165c ]

WICKET-6245: fix testcase to reflect change in behavior: no origin is blocked
","20/Sep/16 20:08;jira-bot;Commit 247619ab176c64acc3d07adcc45725e019e11a62 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=247619a ]

WICKET-6245 Open up CsrfPreventionRequestCycleListener for extension

Wrap a debug logiing in LOG.isDebugEnabled()
","20/Sep/16 20:08;jira-bot;Commit 6cd10f970d49ee1cd275c5038aa3c58c9738efaf in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=6cd10f9 ]

WICKET-6245 Open up CsrfPreventionRequestCycleListener for extension

Wrap a debug logiing in LOG.isDebugEnabled()
","27/Sep/16 14:37;jira-bot;Commit 6637e363bec2eb49de0d2edce3505a1fdb7586bd in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=6637e36 ]

WICKET-6245 Remove 'final' modifier for the modified methods because this breaks Clirr (correctly or not)

Discussion: https://mail-archives.apache.org/mod_mbox/wicket-dev/201609.mbox/%3CCAB63Y-drhdSVkNX+ARz51bDBGBX_req_d6DGRNW=67nR5rb_jQ@mail.gmail.com%3E
","27/Sep/16 14:38;jira-bot;Commit be8833cd133a665ca8c76ddd0f468e810c345f28 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=be8833c ]

WICKET-6245 Remove 'final' modifier for the modified methods because this breaks Clirr (correctly or not)

Discussion: https://mail-archives.apache.org/mod_mbox/wicket-dev/201609.mbox/%3CCAB63Y-drhdSVkNX+ARz51bDBGBX_req_d6DGRNW=67nR5rb_jQ@mail.gmail.com%3E
","05/Nov/16 17:13;githubbot;GitHub user amichalowski opened a pull request:

    https://github.com/apache/wicket/pull/187

    Add origin header to ajax requests in BaseWicketTester

    In commits assigned to this issue:
    [https://issues.apache.org/jira/browse/WICKET-6245](https://issues.apache.org/jira/browse/WICKET-6245)
    
    There are following changes in `CsrfPreventionRequestCycleListener`:
    - If origin header doesn't exist referer header can be used.
    - Default no origin behavior was changed to abort.
    
    But the wicket tester doesn't send Origin or Referer header.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/amichalowski/wicket wicket-tester-origin-header

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/wicket/pull/187.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #187
    
----
commit 893579c88c98b8dfbc6612ff7c2e1b3ac024e6f6
Author: Artur Michałowski <amichalowski92@gmail.com>
Date:   2016-11-05T16:59:56Z

    Add origin header to ajax requests in BaseWicketTester

----
","18/Nov/16 23:03;githubbot;Github user amichalowski closed the pull request at:

    https://github.com/apache/wicket/pull/187
",,,,,,,,,,,,,,,,,,,,,,
renderHead not called with anonymous inner Border class,WICKET-6222,12995162,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,bhuism,bhuism,05/Aug/16 09:46,05/Aug/16 13:25,14/Mar/19 03:09,05/Aug/16 13:25,7.4.0,8.0.0-M1,,,,,,,,,,7.5.0,8.0.0-M2,,wicket,,,,,,,,,,,0,easyfix,,,,,"Commit https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8c43b38 introduced a bug that renderHead is not called on children if a Border is an nonymous inner class.

line Border.java:679 the statement

{{containerClass.equals(getClass())}}

returns false when containerClass is an anonymous inner class.

fix:

If the line:

{{boolean isBorderBodyTag = containerClass == null || containerClass.equals(getClass());}}

is changed to:

{{boolean isBorderBodyTag = containerClass == null || containerClass.isAssignableFrom(getClass());}}

It works again, but I don't trust myself with this fix.",,,,,,,,,,,WICKET-6221,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-08-05 10:51:11.237,,,no_permission,,,,Patch,,,,,,,,9223372036854775807,,,Fri Aug 05 13:21:16 UTC 2016,,,,,,0|i31ycn:,9223372036854775807,,,,,,,,"05/Aug/16 10:51;bitstorm;Hi,

this issue was actually the culprit for  WICKET-6221. It should be already fixed in the SNAPSHOT version (see the [commit|https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=2273b397b5f348668fda3d7d8fb9f3806290a11d]). Could you test your code against this version?
","05/Aug/16 12:08;bhuism;Works fine again with origin/wicket-7.x, thanks Andrea.",05/Aug/16 13:21;bitstorm;You're welcome!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update user guide to cover lambda support,WICKET-6190,12983157,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,bitstorm,bitstorm,25/Jun/16 17:13,21/Oct/16 10:08,14/Mar/19 03:09,21/Oct/16 10:08,8.0.0-M1,,,,,,,,,,,8.0.0-M2,,,,,,,,,,,,,,0,,,,,,"The user guide must be updated to illustrate the new lambda support. The main topics involved are:

* link components 
* behaviors
* models (maybe the biggest one) 

Please feel free to leave comments and considerations.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-06-25 17:22:55.134,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri Oct 21 10:08:49 UTC 2016,,,,,,0|i303g7:,9223372036854775807,,,,,,,,"25/Jun/16 17:22;jira-bot;Commit c391af662bd2d9633efc295e19dcf7291d9cdd89 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c391af6 ]

WICKET-6190 added lambda example where Link component is introduced.
","27/Jun/16 15:50;jira-bot;Commit a1937c4b6851597374527436ae9fcb4a0dd02f15 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a1937c4 ]

WICKET-6190 Update user guide to cover lambda support
","04/Jul/16 09:42;jira-bot;Commit 9126194a16fab1775a6df3c2a0226e92734b56fd in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9126194 ]

WICKET-6190 Added a new paragraph on IModel and lambda
","11/Aug/16 19:53;jira-bot;Commit bf1e70aec1567b80af216e0d0dfea55ac2f9d112 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=bf1e70a ]

WICKET-6190 fixed indentation problem with lambda examples and a problem
with pdf generation.
","13/Aug/16 19:04;jira-bot;Commit 0b0158b475148d1b18f8c73b64dc07bf5463fb34 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0b0158b ]

WICKET-6190 Completed the section about default methods for IModel.","02/Sep/16 15:23;jira-bot;Commit 7da317e51f81c42caaf582f98034fb517d895e10 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7da317e ]

WICKET-6190 Added documentation about LambdaModel
","21/Oct/16 10:02;jira-bot;Commit 12d096ccc59aafa6d40eeeb8c40108ce24d1ee2d in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=12d096c ]

WICKET-6190 Moved Lambda section to AJAX section","21/Oct/16 10:08;bitstorm;I think now we have a sort of MVP for lambdas documentation, so we can close the issue. We can of course work on further improvements at a later time.",,,,,,,,,,,,,,,,,,,,,,,,,
Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT,WICKET-6133,12954656,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,tschoening,tschoening,30/Mar/16 15:12,16/Jan/19 14:33,14/Mar/19 03:09,12/Apr/16 12:17,7.2.0,,,,,,,,,,,7.3.0,8.0.0-M1,,wicket-spring,,,,,,,,,,,0,,,,,,"I try to build 7.3.0.0-SNAPSHOT from source, but there's at least the
following failing test. Skipping the tests builds OK and the results
seem to work.

{CODE}
[...]
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.398 sec - in org.apache.wicket.spring.injection.annot.SpringBeanTest
Running org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest
Tests run: 7, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.557 sec <<< FAILURE! - in org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTestlistField(org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest)
Time elapsed: 0.072 sec  <<< FAILURE!
java.lang.AssertionError: expected:<3> but was:<1>
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:834)
        at org.junit.Assert.assertEquals(Assert.java:645)
        at org.junit.Assert.assertEquals(Assert.java:631)
        at org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest.listField(SpringBeanWithGenericsTest.java:143)
[...]
{CODE}

The mentioned line is the last one of the following quote:

{CODE}
        @Test
        public void listField() throws Exception
        {
                AnnotatedListField page =
                        tester.startPage(new AnnotatedListField());

                assertNotNull(page.getStringsList());
                assertEquals(3, page.getStringsList().size());
{CODE}

I've tested different versions of Maven, with and without a .m2 folder and even with changes to the source code of the test and my feeling is that the error I see is somewhat non deterministic. Without an available .m2 folder the test seems to PASS very often, but only during the first execution, directly afterwards with the same commands the test FAILs most of the time. I executed the test the whole morning today and it failed always, only to succeed some minutes ago before writing this report between lots of failing executions.

I think the problem is with creating the test data properly and found the following commit, which introduced ""getStringsList"":

https://github.com/apache/wicket/commit/f0340a3ef62a18df14badb26acee01bf102b9a2c

The interesting part for me about that commit is that
""ConfigContextWithGenerics.getStrings"" in the same file was NOT
changed as well. So I renamed to .stringsList and that did have an
effect, now another test is failing instead:

{CODE}
Failed tests:
  SpringBeanWithGenericsTest.listField:147->Assert.assertThat:923->Assert.assert
That:956
Expected: is <3>
     but: was <1>
{CODE}

Looking at the other methods of ConfigContextWithGenerics, I'm pretty sure that ""strings"" is wrongly named, because all other methods are named after annotated fields. So I guess there's some magic in the background able to ignore the names and map using method signatur or such. And that might fail in most of my executions.

Having a closer look at the error message, it says that 1 element is found where 3 were expected. The only 1 element list in the class is ""myList"", so I guess that is used most of times in my executions for whatever reason.

I had a closer look at SpringComponentInjector and AnnotProxyFieldValueFactory, which e.g. contains getBeanNameOfClass, which resolves beans without any name.

So in my opinion there's definitely something wrong with this test, at least ConfigContextWithGenerics.getStrings is wrongly named, but changing only that doesn't resolve the issue for me. There are still invocations failing with the 3 expected, 1 recognized error.

This was discussed on the users list as well:

http://mail-archives.apache.org/mod_mbox/wicket-users/201603.mbox/<1557500025.20160330120517%40am-soft.de>","Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T17:41:47+01:00)
Maven home: C:\Program Files\Apache Software Foundation\Maven\bin\..
Java version: 1.7.0_80, vendor: Oracle Corporation
Java home: C:\Program Files\Java\jdk1.7.0_80\jre
Default locale: de_DE, platform encoding: Cp1252
OS name: ""windows 8.1"", version: ""6.3"", arch: ""amd64"", family: ""windows""",,,,,,,,,,,,WICKET-6631,,,,30/Mar/16 15:15;tschoening;SpringBeanWithGenericsTest.java.patch;https://issues.apache.org/jira/secure/attachment/12796090/SpringBeanWithGenericsTest.java.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2016-04-11 11:43:22.377,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Apr 12 13:30:07 UTC 2016,,,,,,0|i2vemv:,9223372036854775807,,,,,,,,"11/Apr/16 11:43;bitstorm;Hi,

do you still have problems with this test case? I couldn't reproduce it yet.",11/Apr/16 12:19;mgrigorov;In the mailing lists Thorsten explained that the problem happens only on Windows.,"11/Apr/16 13:26;tschoening;Yes, it happens on Windows and it still happens. I just updated my 7.3.0.0 branch some minutes ago with the same results like before:

{CODE}
Tests run: 7, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.512 sec <<< FAILURE! - in org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTestlistField(org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest)
Time elapsed: 0.061 sec  <<< FAILURE!
java.lang.AssertionError: expected:<3> but was:<1>
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:834)
        at org.junit.Assert.assertEquals(Assert.java:645)
        at org.junit.Assert.assertEquals(Assert.java:631)
        at org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest.listField(SpringBeanWithGenericsTest.java:143)
{CODE}

My suggestion is as follows: First check if ConfigContextWithGenerics.getStrings is logically correct or not compared to the other methods and their naming scheme in this class and compared to the caller and what methods are actually called in SpringBeanWithGenericsTest, especially around line 142 ""page.getStringsList"" etc. Don't mind that it works on Linux, ask yourself if the naming scheme is correct or if my mentioned commit simply forgot to rename ConfigContextWithGenerics.getStrings.

It's surely the latter, so the fact that it works anyway in your case can only mean that some ""magic"" behind the scenes is working ""by accident"" correctly on Linux, but doesn't on Windows at least most of the times in my JDK 1.7.0_80.

I guess that there's some API around reflection/annotations used in your Spring glue or in Spring with non-deterministic iteration of fields and that whenever I see the error, ConfigContextWithGenerics.myList was found instead of ConfigContextWithGenerics.getStrings. Simply because that's the only field in the whole class with only exactly one element and the error message speaks of exactly one element. The return types of both methods are compatible, so this could be possible.","11/Apr/16 13:33;bitstorm;Thank you [~tschoening]! I was about to replay you that I succeeded in reproducing your problem. I started to see the problem when I applied your patch. Thank you for your suggestions, I will investigate the problem.","12/Apr/16 09:34;jira-bot;Commit a520f443ada300c0f99e5ad8bf3fb19dc60eb71f in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a520f44 ]

WICKET-6133 Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT","12/Apr/16 11:07;jira-bot;Commit 9329aaea1fbfe2c6f517e53491a6f767b1702932 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9329aae ]

WICKET-6133 Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT
","12/Apr/16 13:30;tschoening;I can confirm the problem is fixed for me, thanks!",,,,,,,,,,,,,,,,,,,,,,,,,,
"Enclosure - ""IllegalArgumentException: Argument 'markup' may not be null"" after app restart",WICKET-6109,12946101,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,vlastimil.dolejs,vlastimil.dolejs,02/Mar/16 09:41,25/Mar/16 13:15,14/Mar/19 03:09,12/Mar/16 19:17,7.2.0,,,,,,,,,,,7.3.0,8.0.0-M1,,wicket,,,,,,,,,,,1,,,,,,"I've debugged it a bit and this is what happens:
# Open some page with enclosure
# Markup is parsed - {{ComponentTag}} of enclosure gets id: {{wicket_enclosure1011}}
# {{Enclosure}} component is created and gets id from {{ComponentTag}}: {{wicket_enclosure1011}}
# Page is rendered in browser - everything ok sofar
# Restart server
# Hit F5 in browser
# Markup is parsed - {{ComponentTag}} of enclosure gets different id than in the first request: {{wicket_enclosure112113}}
# {{Enclosure}} component is not created again (it is taken from page map??) - but this component has id from first request: {{wicket_enclosure1011}}
# {{Enclosure.getMarkup()}} is called which delegates search to {{AssociatedMarkupSourcingStrategy.getMarkup()}} and here on line 117 it tries to find markup of enclosure by wrong id.
# This obviously fails and markup is not found which results in this exception

{code}
java.lang.IllegalArgumentException: Argument 'markup' may not be null.
	at org.apache.wicket.util.lang.Args.notNull(Args.java:41) ~[wicket-util-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.markup.MarkupStream.<init>(MarkupStream.java:65) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:136) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.markup.html.internal.Enclosure.onConfigure(Enclosure.java:178) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.Component.configure(Component.java:1055) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.Component.internalBeforeRender(Component.java:940) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.Component.beforeRender(Component.java:1017) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1831) ~[wicket-core-7.3.0-SNAPSHOT.jar:7.3.0-SNAPSHOT]
	... 55 common frames omitted
{code}

I will try to create a quickstart, but I don't know if I will be able to simulate this on simple page. Id of the enclosure is created by {{AbstractMarkupFilter.getRequestUniqueId()}} so the only way the id could be different is that another components call {{getRequestUniqueId()}} in different order each time. (or maybe I'am wrong.. :) )

*EDIT:*
Please see the attached quickstart. Steps to reproduce:
# Start quickstart
# Go to {{localhost:8888}}
# Click on Go to page 2
# Restart the server
# Hit F5 in the browser

Note that session persistance is enabled.",,,,,,,,,,,,,,WICKET-6093,,,02/Mar/16 11:36;vlastimil.dolejs;enclosure-id-quickstart.zip;https://issues.apache.org/jira/secure/attachment/12790913/enclosure-id-quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2016-03-11 18:33:35.428,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed Mar 16 09:31:48 UTC 2016,,,,,,0|i2u0t3:,9223372036854775807,,,,,,,,"11/Mar/16 18:33;jira-bot;Commit b42edb02cb98d9cbe9e9278a0ba0923a66c0311d in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b42edb0 ]

WICKET-6109 Enclosure - ""IllegalArgumentException: Argument 'markup' may not be null"" after app restart
","11/Mar/16 20:37;jira-bot;Commit 5a7a089d57f022467cdea8b2fae531729a6dcb4d in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5a7a089 ]

WICKET-6109 Enclosure - ""IllegalArgumentException: Argument 'markup' may not be null"" after app restart
","13/Mar/16 10:42;aaime;Hi, I'm tracking an issue found in Wicket 7.2 and stumbled upon this change... wondering if it's a different symptom of the same problem. 
Basically I have a base page with a <message> tag, with multiple subpages also using <message> tags. The first subpage gets instantiated and this message tag gets a id like ""wicket_message33"", then another sub-page gets instantiated, a new counter gets built to generate the ids, and one of its message tags (in the subpage) also gets ""wicket_message33"" as its id, and then we get an exception from Page complaining the same component has been rendered twice.

Andrea, looking at your change it might seem that it would fix the above issue too.",13/Mar/16 12:13;mgrigorov;[~aaime] Please test with 7.3.0-SNAPSHOT if you can before we release it.,"15/Mar/16 17:43;tschoening;A current 7.3.0-SNAPSHOT fixes the IllegalArgumentException in my quickstart and the stackoverflow of my main app as well. Thanks!

http://mail-archives.apache.org/mod_mbox/wicket-users/201603.mbox/<1676919581.20160311194546%40am-soft.de>","16/Mar/16 09:31;jira-bot;Commit 1a6594b1c724a0d4f235ed63b83dc458ffc51d3c in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1a6594b ]

 WICKET-6109 Enclosure - ""IllegalArgumentException: Argument 'markup' may not be null"" after app restart

 Set locale as Locale.US for InlineEnclosureWithWicketMessagePage so that the tests which use it pass also on systems with different locales
",,,,,,,,,,,,,,,,,,,,,,,,,,,
StackoverflowError related to enclosures,WICKET-6102,12942980,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,mgrigorov,mgrigorov,24/Feb/16 15:26,20/Apr/16 17:48,14/Mar/19 03:09,27/Feb/16 18:46,7.2.0,8.0.0-M1,,,,,,,,,,7.3.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"I see the following exception when try to start Wicket-Bootstrap's samples with 7.3.0-SNAPSHOT.
There is no such problem with 7.2.0


{code}
java.lang.StackOverflowError
	at java.util.ArrayList.iterator(ArrayList.java:834)
	at org.apache.wicket.MarkupContainer$1MarkupChildIterator.refreshInternalIteratorIfNeeded(MarkupContainer.java:608)
	at org.apache.wicket.MarkupContainer$1MarkupChildIterator.hasNext(MarkupContainer.java:574)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:134)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:968)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:77)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:123)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:504)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:136)
	at org.apache.wicket.markup.html.internal.Enclosure.isVisible(Enclosure.java:171)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:90)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:123)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:504)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:136)
	at org.apache.wicket.markup.html.internal.Enclosure.isVisible(Enclosure.java:171)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:90)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:123)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:504)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:136)
	at org.apache.wicket.markup.html.internal.Enclosure.isVisible(Enclosure.java:171)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:90)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:123)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:504)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
...
{code}

To reproduce:
* git clone https://github.com/l0rdn1kk0n/wicket-bootstrap/
* edit pom.xml and set Wicket version to 7.3.0-SNAPSHOT
* git checkout db35564a0c0972da13448545078184ae0e9a009b
* mvn clean install
* cd bootstrap-samples
* mvn jetty:run",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-02-26 11:25:39.875,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed Apr 20 17:48:04 UTC 2016,,,,,,0|i2thjz:,9223372036854775807,,,,,,,,"25/Feb/16 22:37;mgrigorov;I've modified Wicket-Bootstrap to not use InlineEnclosure but to use EnclosureContainer, so now I can run against Wicket 7.3.0-SNAPSHOT again.
https://github.com/l0rdn1kk0n/wicket-bootstrap/commit/c0e91b2cecc74fbd9b2d52492599081c86f83472",25/Feb/16 22:38;mgrigorov;I've updated the steps to reproduce to use the commit before the fix.,"26/Feb/16 11:25;jira-bot;Commit 294c12452098e0ddb4075f943d56faad8b203a07 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=294c124 ]

WICKET-6102 StackoverflowError related to enclosures

Removed a wrong assumption aboutTransparentWebMarkupContainer",26/Feb/16 12:51;bitstorm;It turned out that was a problem with a custom version of TransparentWebMarkupContainer#addDequeuedComponent I wrote. I removed it.,"26/Feb/16 13:52;mgrigorov;I confirm that this fixes the problem!
Thanks, Andrea!","26/Feb/16 17:11;jira-bot;Commit b9860519cc004c97d1f3c17807e439a2262e7bf8 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b986051 ]

WICKET-6102 StackoverflowError related to enclosures

Removed a wrong assumption aboutTransparentWebMarkupContainer
Conflicts:
	wicket-core/src/main/java/org/apache/wicket/markup/html/TransparentWebMarkupContainer.java
","16/Apr/16 11:18;cquarters;My apologies if this is not the correct place to post this but I think it adds context (and maybe another perspective) to this bug.

I have been experiencing this StackOverflowError with <wicket:enclosure> since 7.0.0 (also in 7.1.0 and 7.2.0). I had no problems with M1 - M6. My call stack has the same recursion as in this bug although my line numbers below are different because it's 7.2.0 code.

java.lang.StackOverflowError
	at java.lang.StringBuilder.append(StringBuilder.java:136)
	at org.apache.wicket.markup.DefaultMarkupCacheKeyProvider.getCacheKey(DefaultMarkupCacheKeyProvider.java:55)
	at org.apache.wicket.markup.MarkupCache.getMarkup(MarkupCache.java:276)
	at org.apache.wicket.markup.MarkupFactory.getMarkup(MarkupFactory.java:236)
	at org.apache.wicket.markup.MarkupFactory.getMarkup(MarkupFactory.java:194)
	at org.apache.wicket.MarkupContainer.getAssociatedMarkup(MarkupContainer.java:456)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:95)
 	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:502)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:138)
	at org.apache.wicket.markup.html.internal.Enclosure.isVisible(Enclosure.java:173)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:90)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:123)
 	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:502)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:138)
	at org.apache.wicket.markup.html.internal.Enclosure.isVisible(Enclosure.java:173)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:90)
	at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:123)
 	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:502)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
etc

I've tried creating a simple example illustrating the problem but have not been able to. It only happens in two large applications I work on.

I've worked around the problem since 7.0.0 by patching
org.apache.wicket.markup.html.internal.Enclosure

In the call stack loop you see Enclosure.isVisible(). In my own code I follow this practice
http://wicketinaction.com/2011/11/implement-wicket-component-visibility-changes-properly/
so I deleted Enclosure.isVisible() (!!!) because setVisible() is called in Enclosure.onConfigure(). However, this led to NPEs so I added null checking in Enclosure.onConfigure() and Enclosure.getChild(). For me these changes work well but I'm probably being naive. Is there a reason why it's important to have code in Enclosure.isVisible() ? Is there any merit in my changes that might be incorporated into Wicket?

Here's a diff showing how I modify Enclosure.java 

diff --git a/wicket-core/src/main/java/org/apache/wicket/markup/html/internal/Enclosure.java b/wicket-core/src/main/java/org/apache/wicket/markup/html/internal/Enclosure.java
index e68f4e0..7616e55 100644
--- a/wicket-core/src/main/java/org/apache/wicket/markup/html/internal/Enclosure.java
+++ b/wicket-core/src/main/java/org/apache/wicket/markup/html/internal/Enclosure.java
@@ -135,7 +135,9 @@
 		if (childComponent == null)
 		{
 			// try to find child when resolved
-			childComponent = getChildComponent(new MarkupStream(getMarkup()), getEnclosureParent());
+		  IMarkupFragment markup = getMarkup();
+		  if( markup != null )
+		    childComponent = getChildComponent(new MarkupStream(markup), getEnclosureParent());
 		}
 		return childComponent;
 	}
@@ -166,23 +168,22 @@
 		
 		return childController;
 	}
-
-	@Override
-	public boolean isVisible()
-	{
-		return getChild().determineVisibility();
-	}
 	
 	@Override
 	protected void onConfigure()
 	{
-		super.onConfigure();
-		final Component child = getChild();
-		
-		child.configure();
-		boolean childVisible = child.determineVisibility();
-		
-		setVisible(childVisible);
+	  super.onConfigure();
+	  boolean childVisible = false;
+
+	  final Component child = getChild();
+
+	  if( child != null )
+	  {
+	    child.configure();
+	    childVisible = child.determineVisibility();
+	  }
+    
+    setVisible(childVisible);
 	}
 
 	@Override

","16/Apr/16 14:52;cquarters;Apologies. A readable version of my suggested change is here

https://github.com/cquarters/wicket/commit/467a543da6d1338eeaa096fb6bcb83dcffa90eaf","17/Apr/16 12:53;bitstorm;Hi,

could you try with 7.3.0-SNAPSHOT? Lot of improvements have been done for Enclosure in the 7.3.0 and I think should fix your case as well. The 7.3.0 is in the making and should be out in few days.","20/Apr/16 17:48;cquarters;Thank you for your reply. I tested with 7.3.0-SNAPSHOT and the stack overflow still happens but now my call stack looks like the one in the description for this JIRA issue (several calls to org.apache.wicket.util.visit.Visits.visitChildren at the top). I will try again with 7.3.0 when it's released. If I can still recreate the bug, I'll again try to create a simple test to illustrate.",,,,,,,,,,,,,,,,,,,,,,,
Problem with queued components and setting the model,WICKET-6088,12935937,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,frido-lbm,frido-lbm,02/Feb/16 11:16,19/Jun/16 05:31,14/Mar/19 03:09,18/Feb/16 11:45,7.2.0,8.0.0-M1,,,,,,,,,,7.3.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"The attached example works, if we use ""add"" instead of ""queue"". The quickstart is already shrinked to a minimum.

7.3.0-SNAPSHOT is also affected.

{code:title=Panel.html|borderStyle=solid}
<wicket:panel>
  <div wicket:id=""container"">
    <div wicket:enclosure=""child"">
      <p wicket:id=""child"">1</p>
      <a wicket:id=""child2"">2</a>
    </div>
  </div>
</wicket:panel>
{code}

{code:title=TestPanel.java|borderStyle=solid}
public TestPanel(String id) {
    super(id);

    WebMarkupContainer container = new WebMarkupContainer(""container"");

    container.queue(new Label(""child"") {
      @Override
      protected void onInitialize() {
        super.onInitialize();

        setDefaultModel(Model.of(""test""));
      }
    });
    container.queue(new WebMarkupContainer(""child2"").setVisible(false));

    queue(container);
  }
{code}",,,,,,,,,,,,,,,,,13/Feb/16 18:42;bitstorm;wicket-6088.patch;https://issues.apache.org/jira/secure/attachment/12787824/wicket-6088.patch,02/Feb/16 11:18;frido-lbm;wicket-queuing.zip;https://issues.apache.org/jira/secure/attachment/12785760/wicket-queuing.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2016-02-13 18:42:01.837,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Feb 18 11:05:43 UTC 2016,,,,,,0|i2saef:,9223372036854775807,,,,,,,,"13/Feb/16 18:42;bitstorm;I've attached a proposed fix. The idea is to resolve auto-components when we dequeue components. In this way all children components can be visited during dequeuing phase.
  ","16/Feb/16 13:03;mgrigorov;Looks good to me!
Please add the quickstart app as a new test case.
Thanks!","18/Feb/16 10:17;jira-bot;Commit 309fb0801a91d1c8be078767243ace384729f7f0 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=309fb08 ]

WICKET-6088 Problem with queued components and setting the model","18/Feb/16 11:05;jira-bot;Commit a04959e974b3a3bf915b7614c532fd9a70d0e16e in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a04959e ]

WICKET-6088 Problem with queued components and setting the model
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Encapsulation of 3 enclosures leads to WicketRuntimeException,WICKET-6080,12932109,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,frido-lbm,frido-lbm,18/Jan/16 09:45,10/May/16 07:44,14/Mar/19 03:09,01/Feb/16 13:55,7.1.0,7.2.0,,,,,,,,,,7.3.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"The attached example is working in wicket 7.0.0, but broken since 7.1.0 and also in 7.2.0-SNAPSHOT, with a different error message.

The attached code is already shrinked to a minimum to reproduce the problem.

{code:title=EnclosureTest.html|borderStyle=solid}
  <div wicket:enclosure=""outer"">
    <div wicket:id=""outer"">
      outer begin
      <div wicket:enclosure=""middle"">
        <div wicket:enclosure=""inner"">
          <div wicket:id=""inner"">inner</div>
        </div>
        <div wicket:id=""middle"">middle</div>
      </div>
      outer end
    </div>
  </div>
{code}

{code:title=EnclosureTest.java|borderStyle=solid}
  public EnclosureTest(String id) {
    super(id);

    WebMarkupContainer outer = new WebMarkupContainer(""outer"");

    outer.add(new WebMarkupContainer(""inner""));
    outer.add(new WebMarkupContainer(""middle""));

    add(outer);
  }
{code}",,,,,,,,,,,,,,,,,18/Jan/16 09:46;frido-lbm;wicket-enclosures.zip;https://issues.apache.org/jira/secure/attachment/12782842/wicket-enclosures.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2016-01-19 09:54:45.404,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Jan 19 11:10:56 UTC 2016,,,,,,0|i2rmtr:,9223372036854775807,,,,,,,,"19/Jan/16 09:54;jira-bot;Commit a23295bd949b490b8bed3be3fa71f2aa4313a9d4 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a23295b ]

WICKET-6080 Encapsulation of 3 enclosures leads to
WicketRuntimeException","19/Jan/16 11:10;jira-bot;Commit 888ee45fcb6b833c6e7f83341484affb54c60feb in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=888ee45 ]

WICKET-6080 Encapsulation of 3 enclosures leads to
WicketRuntimeException
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Problem with queued components and label,WICKET-6079,12931412,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,frido-lbm,frido-lbm,15/Jan/16 09:53,10/May/16 07:44,14/Mar/19 03:09,01/Feb/16 13:56,7.1.0,7.2.0,,,,,,,,,,7.3.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"Quickstart is attached.

{code:title=HomePage.java|borderStyle=solid}
    queue(new TextField<>(""input"", Model.of(""test"")));
{code}

{code:title=HomePage.html|borderStyle=solid}
<label wicket:for=""input"">
  label:
  <input wicket:id=""input""/>
</label>
{code}

Result:

{noformat}
org.apache.wicket.WicketRuntimeException: Detach called on component with id '12' while it had a non-empty queue: ComponentQueue{queueSize=1, queue=[[TextField [Component id = input]], null, null, null, null, null, null, null]}
	at org.apache.wicket.MarkupContainer.onDetach(MarkupContainer.java:1984)
	at org.apache.wicket.Page.onDetach(Page.java:868)
	at org.apache.wicket.Component.detach(Component.java:1162)
	... 28 more
{noformat}",,,,,,,,,,,,,,,,,15/Jan/16 09:53;frido-lbm;wicket-queuing-in-label.zip;https://issues.apache.org/jira/secure/attachment/12782493/wicket-queuing-in-label.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2016-01-19 12:33:04.645,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sat Jan 23 19:21:41 UTC 2016,,,,,,0|i2riiv:,9223372036854775807,,,,,,,,"19/Jan/16 12:33;jira-bot;Commit 1fd0ba920d0356a947bcda3266862d69e20754b5 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1fd0ba9 ]

WICKET-6079 Problem with queued components and label","19/Jan/16 12:58;jira-bot;Commit 580d92ddf068040214669c085f54d2faa702a921 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=580d92d ]

WICKET-6079 Problem with queued components and label
","23/Jan/16 17:59;jira-bot;Commit 8699468a2427482c8a84189ad56417ae5645a1f0 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8699468 ]

WICKET-6079 Added test case to prevent regressions","23/Jan/16 19:21;jira-bot;Commit ed7aa25313b6cc130c53dcb9e26285ff8338fb30 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ed7aa25 ]

WICKET-6079 Added test case to prevent regressions
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Problem with queued components and auto linking,WICKET-6078,12931411,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,frido-lbm,frido-lbm,15/Jan/16 09:49,10/May/16 07:44,14/Mar/19 03:09,01/Feb/16 13:56,7.1.0,7.2.0,,,,,,,,,,7.3.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"Quickstart is attached.

{code:title=HomePage.java|borderStyle=solid}
    queue(new WebMarkupContainer(""test""));
{code}

{code:title=HomePage.html|borderStyle=solid}
<wicket:link>
  <a href=""test.html"">
    <wicket:container wicket:id=""test"">test</wicket:container>
  </a>
</wicket:link>
{code}

Result:

{noformat}
Caused by: org.apache.wicket.WicketRuntimeException: Detach called on component with id '0' while it had a non-empty queue: ComponentQueue{queueSize=1, queue=[[WebMarkupContainer [Component id = test]], null, null, null, null, null, null, null]}
        at org.apache.wicket.MarkupContainer.onDetach(MarkupContainer.java:1984)
        at org.apache.wicket.Page.onDetach(Page.java:868)
        at org.apache.wicket.Component.detach(Component.java:1162)
        ... 28 more
{noformat}",,,,,,,,,,,,,,,,,15/Jan/16 09:49;frido-lbm;wicket-queuing-in-link.zip;https://issues.apache.org/jira/secure/attachment/12782491/wicket-queuing-in-link.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2016-01-18 19:56:18.712,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Mon Jan 18 20:43:39 UTC 2016,,,,,,0|i2riin:,9223372036854775807,,,,,,,,"18/Jan/16 19:56;jira-bot;Commit cda8a83c8c56fb4231185c7f188df34a7c5e6afe in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=cda8a83 ]

WICKET-6078 Problem with queued components and auto linking
","18/Jan/16 20:43;jira-bot;Commit f85f1db29d34f39d91cce99944b1c2c085ee26be in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f85f1db ]

WICKET-6078 Problem with queued components and auto linking
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Problem with queued components and enclosure,WICKET-6076,12929848,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,frido-lbm,frido-lbm,13/Jan/16 15:09,15/Jan/16 14:18,14/Mar/19 03:09,15/Jan/16 14:18,7.1.0,,,,,,,,,,,7.2.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"Quickstart is attached.

{code:title=HomePage.java|borderStyle=solid}
    WebMarkupContainer outer = new WebMarkupContainer(""outer"");
    WebMarkupContainer test = new WebMarkupContainer(""test"");
    add(outer);
    outer.queue(test);
{code}

{code:title=HomePage.html|borderStyle=solid}
<div wicket:id=""outer"">
  <div wicket:enclosure=""test"">
    <p wicket:id=""test"">test</p>
  </div>
</div>
{code}

Result:

{noformat}
org.apache.wicket.WicketRuntimeException: Could not find child with id: test in the wicket:enclosure
     at org.apache.wicket.markup.html.internal.Enclosure.checkChildComponent(Enclosure.java:300)
     at org.apache.wicket.markup.html.internal.Enclosure.getChildComponent(Enclosure.java:278)
     at org.apache.wicket.markup.html.internal.Enclosure.getChild(Enclosure.java:138)
{noformat}",,,,,,,,,,,,,,,,,13/Jan/16 15:10;frido-lbm;wicket-queuing.zip;https://issues.apache.org/jira/secure/attachment/12782066/wicket-queuing.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2016-01-13 15:14:49.307,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Jan 14 17:18:32 UTC 2016,,,,,,0|i2r8vj:,9223372036854775807,,,,,,,,"13/Jan/16 15:14;mgrigorov;I think this is fixed in 7.2.0 (being voted at the moment).
Please test with latest snapshot.","13/Jan/16 15:59;frido-lbm;Different error in 7.2.0-SNAPSHOT:

{noformat}
Detach called on component with id 'outer' while it had a non-empty queue: ComponentQueue{queueSize=1, queue=[[WebMarkupContainer [Component id = test]]
{noformat}","14/Jan/16 14:55;jira-bot;Commit b12c2f4a3af07df710b84df11bb359305463a2c9 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b12c2f4 ]

WICKET-6076 Problem with queued components and enclosure
","14/Jan/16 17:18;jira-bot;Commit 25fe3f68aa25d3e1f8f3e19383ed79b10ff308a7 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=25fe3f6 ]

WICKET-6076 Problem with queued components and enclosure
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Calling http://examples7x.wicket.apache.org/resourceaggregation/ generate Internal error,WICKET-6065,12926998,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,bitstorm,francois,francois,04/Jan/16 15:29,05/Jan/16 15:56,14/Mar/19 03:09,05/Jan/16 15:56,7.1.0,8.0.0-M1,,,,,,,,,,7.2.0,8.0.0-M1,,wicket-examples,,,,,,,,,,,0,,,,,,"Root cause:

java.util.MissingResourceException: Unable to get cache key for scope:
org.apache.wicket.examples.resourcedecoration.HomePage; name: footer.css;
locale: null; style: null; variation: null
    at
org.apache.wicket.resource.bundles.ConcatBundleResource.reportError(ConcatBundleResource.java:248)
    at
org.apache.wicket.resource.bundles.ConcatBundleResource.getCacheKey(ConcatBundleResource.java:223)
    at
org.apache.wicket.request.resource.caching.version.RequestCycleCachedResourceVersion.getVersion(RequestCycleCachedResourceVersion.java:82)
    at
org.apache.wicket.request.resource.caching.FilenameWithVersionResourceCachingStrategy.decorateUrl(FilenameWithVersionResourceCachingStrategy.java:105)
    at
org.apache.wicket.core.request.mapper.BasicResourceReferenceMapper.mapHandler(BasicResourceReferenceMapper.java:240)
    at
org.apache.wicket.request.mapper.ParentPathReferenceRewriter.mapHandler(ParentPathReferenceRewriter.java:92)
    at
org.apache.wicket.request.mapper.CompoundRequestMapper.mapHandler(CompoundRequestMapper.java:213)
    at
org.apache.wicket.request.cycle.RequestCycle.mapUrlFor(RequestCycle.java:434)
    at
org.apache.wicket.request.cycle.RequestCycle.urlFor(RequestCycle.java:534)
    at
org.apache.wicket.markup.head.CssReferenceHeaderItem.getUrl(CssReferenceHeaderItem.java:125)
    at
org.apache.wicket.markup.head.CssReferenceHeaderItem.getRenderTokens(CssReferenceHeaderItem.java:112)
    at
org.apache.wicket.markup.head.internal.HeaderResponse.wasItemRendered(HeaderResponse.java:61)",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2016-01-04 16:19:07.862,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Jan 05 15:55:06 UTC 2016,,,,,,0|i2qrb3:,9223372036854775807,,,,,,,,"04/Jan/16 16:19;githubbot;GitHub user francois92 opened a pull request:

    https://github.com/apache/wicket/pull/154

    examples7x.wicket.apache.org/resourceaggregation generate Internal error

    https://issues.apache.org/jira/browse/WICKET-6065

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/francois92/wicket master

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/wicket/pull/154.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #154
    
----
commit 3d44f5593988eddbfba5bde6f986b87ced82483a
Author: fmt <az>
Date:   2016-01-04T16:16:30Z

    examples7x.wicket.apache.org/resourceaggregation generate Internal error
    https://issues.apache.org/jira/browse/WICKET-6065

----
",05/Jan/16 15:52;bitstorm;fixed with WICKET-6061,"05/Jan/16 15:55;githubbot;Github user francois92 closed the pull request at:

    https://github.com/apache/wicket/pull/154
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TransparentWebMarkupContainer can not resolve autocomponents in its parent,WICKET-6059,12924403,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,bitstorm,bitstorm,27/Dec/15 16:41,07/Jan/16 09:22,14/Mar/19 03:09,07/Jan/16 09:22,7.1.0,8.0.0-M1,,,,,,,,,,7.2.0,8.0.0-M1,,,,,,,,,,,,,0,,,,,,TransparentWebMarkupContainer cannot resolve autocomponents in its parent. This is caused by commit 50e9fb1.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-12-27 16:47:03.58,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sat Jan 02 15:21:28 UTC 2016,,,,,,0|i2qbp3:,9223372036854775807,,,,,,,,"27/Dec/15 16:47;jira-bot;Commit 4f9f7ad4be700268a356d4c8add24daba1a0209d in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=4f9f7ad ]

WICKET-6059 TransparentWebMarkupContainer can not resolve autocomponents in its parent
","27/Dec/15 17:22;jira-bot;Commit d944d7b7d26105b483e2ef910484775c03e5a5d5 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d944d7b ]

WICKET-6059 TransparentWebMarkupContainer can not resolve autocomponents in its parent
","02/Jan/16 15:10;jira-bot;Commit 897c2c387ede7f2d71250f2ce878c52e010b534b in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=897c2c3 ]

WICKET-6059 improved test cases.
","02/Jan/16 15:21;jira-bot;Commit 92a546f04897250e30f7a520079185b65f14b595 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=92a546f ]

WICKET-6059 improved test cases.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot set wicket:enclosure on queued component in ListView,WICKET-6043,12915351,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,darkvadaure,darkvadaure,23/Nov/15 14:45,01/Apr/16 14:36,14/Mar/19 03:09,28/Nov/15 16:16,7.1.0,,,,,,,,,,,7.2.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"An exception is raised if we target the enclosure child to a queued component in a ListView :

org.apache.wicket.WicketRuntimeException: Could not find child with id: test in the wicket:enclosure",,,,,,,,,,,,,,WICKET-6134,,,23/Nov/15 14:45;darkvadaure;WicketQuickstart2.war;https://issues.apache.org/jira/secure/attachment/12773846/WicketQuickstart2.war,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-11-23 15:13:01.418,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri Apr 01 14:29:30 UTC 2016,,,,,,0|i2osh3:,9223372036854775807,,,,,,,,"23/Nov/15 14:48;darkvadaure;Hi, it's me, Mr ""Queue Components"" :)

it works fine if i just replace ""item.queue(...)"" by ""item.add(...)""","23/Nov/15 15:13;bitstorm;I thought Mr  ""Queue Components"" was me... :D","23/Nov/15 15:14;darkvadaure;you're right sorry ! I'm Mr ""Test Queued Components"" ;)
","27/Nov/15 16:49;bitstorm;Since ListItemS are not resolvable by markup, they can be turned to IQueueRegion, so they can provide their own markup,","27/Nov/15 17:28;jira-bot;Commit a5917fd7d35ed03c877f649924f91456979011c9 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a5917fd ]

WICKET-6043 Cannot set wicket:enclosure on queued component in ListView
","27/Nov/15 17:35;jira-bot;Commit 7bb27cc2e2386136190aadedbab8d7d5090af42d in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7bb27cc ]

WICKET-6043 Cannot set wicket:enclosure on queued component in ListView
","29/Nov/15 16:05;jira-bot;Commit a5917fd7d35ed03c877f649924f91456979011c9 in wicket's branch refs/heads/lambdas from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a5917fd ]

WICKET-6043 Cannot set wicket:enclosure on queued component in ListView
","01/Apr/16 13:32;jira-bot;Commit 7443da58c26e817217cffb9f496d50d5b66eaaa7 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7443da5 ]

WICKET-6134: Revert ""WICKET-6043 Cannot set wicket:enclosure on queued component in ListView""

This reverts commit 7bb27cc2e2386136190aadedbab8d7d5090af42d.
","01/Apr/16 14:17;jira-bot;Commit b465aedfb86e9dd72fcf5439da1ab4c26a2191a7 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b465aed ]

WICKET-6134 Added regression test for WICKET-6043
","01/Apr/16 14:29;jira-bot;Commit 8b5ba2060f7b9ea047378be13087b0ad9bf991cc in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8b5ba20 ]

WICKET-6134: Revert ""WICKET-6043 Cannot set wicket:enclosure on queued component in ListView""

This reverts commit 7bb27cc2e2386136190aadedbab8d7d5090af42d.

Conflicts:
	wicket-core/src/main/java/org/apache/wicket/markup/html/list/ListItem.java
","01/Apr/16 14:29;jira-bot;Commit 42b24d6656131d7c927366d5a9cf80a607959ba7 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=42b24d6 ]

WICKET-6134 Added regression test for WICKET-6043
",,,,,,,,,,,,,,,,,,,,,,
Detach called on enclosure component while it had a non-empty queue,WICKET-6028,12911334,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,rfoerthe,rfoerthe,07/Nov/15 23:12,20/Nov/15 12:16,14/Mar/19 03:09,20/Nov/15 12:16,7.1.0,,,,,,,,,,,7.2.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"In the attached example EnclosurePage is extended from BasePage. In BasePage there is a TransparentWebmarkupContainer attached to <body>
The page is rendered, but a stacktrace ""Error detaching RequestHandler"" is logged (see stacktrace.txt).




 ",,,,,,,,,,,,,,,,,07/Nov/15 23:12;rfoerthe;BasePage.html;https://issues.apache.org/jira/secure/attachment/12771210/BasePage.html,07/Nov/15 23:12;rfoerthe;BasePage.java;https://issues.apache.org/jira/secure/attachment/12771211/BasePage.java,07/Nov/15 23:12;rfoerthe;EnclosurePage.html;https://issues.apache.org/jira/secure/attachment/12771212/EnclosurePage.html,07/Nov/15 23:12;rfoerthe;EnclosurePage.java;https://issues.apache.org/jira/secure/attachment/12771213/EnclosurePage.java,17/Nov/15 11:04;bitstorm;WICKET-6028.patch;https://issues.apache.org/jira/secure/attachment/12772716/WICKET-6028.patch,17/Nov/15 13:11;bitstorm;myproject.tar.gz;https://issues.apache.org/jira/secure/attachment/12772739/myproject.tar.gz,07/Nov/15 23:12;rfoerthe;stacktrace.txt;https://issues.apache.org/jira/secure/attachment/12771214/stacktrace.txt,,7.0,,,,,,,,,,,,,,,,,,,2015-11-19 16:05:25.919,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri Nov 20 07:43:23 UTC 2015,,,,,,0|i2o3rr:,9223372036854775807,,,,,,,,"19/Nov/15 16:05;jira-bot;Commit 2342406bda57943d4c3deef951c90c2ae776191b in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=2342406 ]

WICKET-6028 Detach called on enclosure component while it had a non-empty queue
","19/Nov/15 17:05;jira-bot;Commit d6e6a7c74d152f156bd48f455858533ab93608e5 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d6e6a7c ]

WICKET-6028 Detach called on enclosure component while it had a non-empty queue
","20/Nov/15 07:42;jira-bot;Commit f8e35bde9ec18fcbad42f7fee339afe374872d77 in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f8e35bd ]

WICKET-6028 Detach called on enclosure component while it had a non-empty queue

Deprecate MarkupInheritanceResolver since it is no more used.
Copy its constants to WicketTagIdentifier
","20/Nov/15 07:43;jira-bot;Commit ce8b31c5c45a786a97bae6061049187c6a8264d4 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ce8b31c ]

WICKET-6028 Detach called on enclosure component while it had a non-empty queue

Remove MarkupInheritanceResolver since it is no more used.
Copy its constants to WicketTagIdentifier
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Possible issue with Border and LoadableDetachableModel in 7.1.0,WICKET-6024,12911024,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,LiePoe,LiePoe,06/Nov/15 11:15,12/Nov/15 14:53,14/Mar/19 03:09,12/Nov/15 14:53,7.1.0,,,,,,,,,,,7.2.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"I have encountered an issue with Border objects and LoadableDetachableModels in wicket 7.1.0. This issue does NOT occurr in 7.0.0.

The issue is the following:
- When wrapping a FormComponent in a Border object, everything works  as it should
- However for each FormComponent per Border in the Page/Parent component, the detach/load is called once.
- This causes a load call on the LoadableDetachableModel per component on the page, for 20 input fields this causes 20 loads!

It seems the Border's remove function is called twice.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-11-06 15:37:03.303,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Nov 12 12:42:49 UTC 2015,,,,,,0|i2o207:,9223372036854775807,,,,,,,,"06/Nov/15 15:37;bitstorm;Hi,

could you provide a quickstart end/or try your app with snapshot version (7.2.0-SNAPSHOT)? We have done some fixing for borders since 7.1.0.","12/Nov/15 08:09;LiePoe;Which repository contains the snapshot releases, since I have to reconfigure my local maven settings to make this work.","12/Nov/15 08:40;mgrigorov; <repositories>
                <repository>
                        <id>Apache Nexus</id>
                        <url>https://repository.apache.org/content/repositories/snapshots/</url>
                        <releases>
                                <enabled>false</enabled>
                        </releases>
                        <snapshots>
                                <enabled>true</enabled>
                        </snapshots>
                </repository>
        </repositories>
","12/Nov/15 12:42;LiePoe;Problem resolved with 7.2.0-SNAPSHOT.
Can be closed",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ConcurrentModificationException in MarkupContainer#iterator#next,WICKET-6021,12909799,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,papegaaij,mgrigorov,mgrigorov,02/Nov/15 22:01,06/Nov/15 23:37,14/Mar/19 03:09,06/Nov/15 23:37,7.1.0,,,,,,,,,,,7.2.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"I'm upgrading Apache Isis to Wicket 7.1.0 (from 6.20) and I face the following problem:

java.util.ConcurrentModificationException
	at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)
	at java.util.ArrayList$Itr.next(ArrayList.java:851)
	at org.apache.wicket.MarkupContainer$1.next(MarkupContainer.java:553)
	at org.apache.wicket.MarkupContainer$1.next(MarkupContainer.java:522)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:134)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:192)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:891)
	at org.apache.wicket.MarkupContainer.internalInitialize(MarkupContainer.java:995)
	at org.apache.wicket.Page.internalPrepareForRender(Page.java:240)
	at org.apache.wicket.Component.render(Component.java:2304)
	at org.apache.wicket.Page.renderPage(Page.java:1018)


I think it is caused by the changes in WICKET-5983",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-11-03 13:13:23.642,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri Nov 06 23:37:17 UTC 2015,,,,,,0|i2nugn:,9223372036854775807,,,,,,,,"03/Nov/15 13:13;danhaywood;This is repeatable with Isis' kitchensink, 

eg 
Bus Rules > List All Bus Rules Objects.

... which renders a table.","03/Nov/15 19:39;mgrigorov;Here is what happens:

- Wicket calls org.apache.wicket.MarkupContainer#internalInitialize() on a MarkupContainer
- there #visitChildren() is used to call #onInitialize() on the children of this container
- at org.apache.wicket.util.visit.Visits#visitChildren(java.lang.Iterable<? super S>, org.apache.wicket.util.visit.IVisitor<S,R>, org.apache.wicket.util.visit.IVisitFilter, org.apache.wicket.util.visit.Visit<R>) we do: for (final Object child : container)
i.e. there Wicket takes an Iterator for this container
- if a child (or a grandchild) adds a component to the ""container"" then the CME is being thrown

IMO it is valid to add components to any branch in the component tree during initialization, even somewhere up in the hierarchy.

I have no fix for now.
Any ideas?","03/Nov/15 20:53;jira-bot;Commit 2cb9bc0ccf5f45395a3e02ab664f0f1e473c3bc6 in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=2cb9bc0 ]

WICKET-6021 ConcurrentModificationException in MarkupContainer#iterator#next
","03/Nov/15 20:54;jira-bot;Commit 74b895514ab803dba03d9d49399f5ac6fcac7601 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=74b8955 ]

WICKET-6021 ConcurrentModificationException in MarkupContainer#iterator#next
","03/Nov/15 21:10;jira-bot;Commit 7b42dd04c91950b4e4e9654153e14e8ec7caf820 in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7b42dd0 ]

WICKET-6021 ConcurrentModificationException in MarkupContainer#iterator#next

No need to use #copyChildren() explicitly. It is used internally by #iterator() now
","03/Nov/15 21:10;jira-bot;Commit 63b12267117a545ea78fc5db2b75d9abc7d56b8d in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=63b1226 ]

WICKET-6021 ConcurrentModificationException in MarkupContainer#iterator#next

No need to use #copyChildren() explicitly. It is used internally by #iterator() now
","04/Nov/15 08:27;papegaaij;I don't really like this solution. Every iteration of the children of a component now creates a copy of that list. depending on the number of components, copying the children can be a very expensive operation. For large subtrees, it requires the creation of a large array, an ArrayList and a full iteration over a LinkedHashMap. The ArrayList (and array) need to be garbage-collected after completion.

I think we should try to find a different solution. Either we do not allow modifications of the children during iteration, or we make sure the iterator can handle these cases, without copying the list prior to iteration. The current solution also has a serious problem: children added during iteration are not visited.","04/Nov/15 08:38;mgrigorov;bq. Either we do not allow modifications of the children during iteration
This will be 1) a regression; 2) hard to cover all cases.

bq. The current solution also has a serious problem: children added during iteration are not visited.
1) 7.1.0 doesn't support this too, it blows with CME
2) I believe 7.0.0/6.x doesn't support this use case too

I'll prepare a test case.","04/Nov/15 08:41;papegaaij;As Martijn and I worked on this code in 7.1.0, we will try to fix this. More testcases are always fine :)","04/Nov/15 09:18;jira-bot;Commit b9ec66706ba57f27b7a849ed623915b494e5cf4d in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b9ec667 ]

WICKET-6021 ConcurrentModificationException in MarkupContainer#iterator#next

Add a test case that exposes the CME in 7.1.0
","04/Nov/15 09:19;jira-bot;Commit 75d5b5c0f643de592f5640e8f55c5dfe158594e1 in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=75d5b5c ]

WICKET-6021 ConcurrentModificationException in MarkupContainer#iterator#next

Add a test case that exposes the CME in 7.1.0
",04/Nov/15 09:21;mgrigorov;The test is AddChildToParentInOnInitializeTest.,"06/Nov/15 23:03;jira-bot;Commit 53608478f013899604ab986ed9fbfdd0400d9e4e in wicket's branch refs/heads/wicket-7.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5360847 ]

WICKET-6021: consistent iteration even after modifications

This commit fixes WICKET-6021 by implementing an improved iterator for
markupcontainer that is able to act on changes in the implementation of
the underlying data structure that stores the children without throwing
a ConcurrentModificationException.
","06/Nov/15 23:03;jira-bot;Commit 53608478f013899604ab986ed9fbfdd0400d9e4e in wicket's branch refs/heads/wicket-7.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5360847 ]

WICKET-6021: consistent iteration even after modifications

This commit fixes WICKET-6021 by implementing an improved iterator for
markupcontainer that is able to act on changes in the implementation of
the underlying data structure that stores the children without throwing
a ConcurrentModificationException.
","06/Nov/15 23:37;jira-bot;Commit 9f8f2f2f5f7df873061679c80edd151c94afdd38 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9f8f2f2 ]

WICKET-6021: consistent iteration even after modifications

This commit fixes WICKET-6021 by implementing an improved iterator for
markupcontainer that is able to act on changes in the implementation of
the underlying data structure that stores the children without throwing
a ConcurrentModificationException.
","06/Nov/15 23:37;jira-bot;Commit 9f8f2f2f5f7df873061679c80edd151c94afdd38 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9f8f2f2 ]

WICKET-6021: consistent iteration even after modifications

This commit fixes WICKET-6021 by implementing an improved iterator for
markupcontainer that is able to act on changes in the implementation of
the underlying data structure that stores the children without throwing
a ConcurrentModificationException.
",,,,,,,,,,,,,,,,,
Compatibility problem with Websphere liberty profile,WICKET-5997,12904203,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,Snaduko,Snaduko,12/Oct/15 14:52,12/Jan/16 18:51,14/Mar/19 03:09,18/Oct/15 10:06,7.0.0,,,,,,,,,,,7.1.0,8.0.0-M1,,wicket,,,,,,,,,,,0,,,,,,"I have been trying to run the archetype example and another project I am trying to upgrade from 6.5 to 7.0.0, but I have failed to do so.

The archetype example runs ok on jetty and the project I was trying to upgrade runs ok both in jetty and was 8.5.5.7, but after changing the dependencies I keep getting the exception below and I am not quite sure if it is a problem with configuration (as everything worked ok with 6.5), with wicket 7.0.0 as the exception comes from inside wicket or from WAS8.5.5.7.

[ERROR ] SRVE0271E: Uncaught init() exception created by servlet [wicket-servlet] in application [blahblah]: javax.servlet.ServletException: java.lang.ClassCastException: com.ibm.ws.artifact.url.internal.WSJarURLStreamHandler$WSJarURLConnectionImpl cannot be cast to java.net.JarURLConnection at org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:455) at org.apache.wicket.protocol.http.WicketServlet.init(WicketServlet.java:271) at javax.servlet.GenericServlet.init(GenericServlet.java:244) at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:332) at [internal classes] Caused by: java.lang.ClassCastException: com.ibm.ws.artifact.url.internal.WSJarURLStreamHandler$WSJarURLConnectionImpl cannot be cast to java.net.JarURLConnection at org.apache.wicket.Application.collectWicketProperties(Application.java:503) at org.apache.wicket.Application.initializeComponents(Application.java:593) at org.apache.wicket.Application.initApplication(Application.java:918) at org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:429) ... 4 more [ERROR ] SRVE0315E: An exception occurred: java.lang.Throwable: javax.servlet.ServletException: java.lang.ClassCastException: com.ibm.ws.artifact.url.internal.WSJarURLStreamHandler$WSJarURLConnectionImpl cannot be cast to java.net.JarURLConnection at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:4900) at [internal classes] Caused by: javax.servlet.ServletException: java.lang.ClassCastException: com.ibm.ws.artifact.url.internal.WSJarURLStreamHandler$WSJarURLConnectionImpl cannot be cast to java.net.JarURLConnection at org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:455) at org.apache.wicket.protocol.http.WicketServlet.init(WicketServlet.java:271) at javax.servlet.GenericServlet.init(GenericServlet.java:244) at com.ibm.ws.webcontainer.servlet.ServletWrapper.init(ServletWrapper.java:332) ... 1 more Caused by: java.lang.ClassCastException: com.ibm.ws.artifact.url.internal.WSJarURLStreamHandler$WSJarURLConnectionImpl cannot be cast to java.net.JarURLConnection at org.apache.wicket.Application.collectWicketProperties(Application.java:503) at org.apache.wicket.Application.initializeComponents(Application.java:593) at org.apache.wicket.Application.initApplication(Application.java:918) at org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:429) ... 4 more",Websphere Liberty Profile V 8.5.5.x,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-10-18 09:36:20.96,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Jan 12 18:51:04 UTC 2016,,,,,,0|i2mw3z:,9223372036854775807,,,,,,,,"18/Oct/15 09:36;mgrigorov;At http://markmail.org/message/o5jvwjmmezu4xebe the Wicket devs agreed to deprecate the new functionality introduced with Wicket 7.0.0 for collecting the wicket.properties and use ServiceLoader instead. 

The deprecated functionality will not throw exception like the one in the description if the UrlConnection is not JarURLConnection until it is completely removed.","18/Oct/15 10:02;jira-bot;Commit 8ed4f8e0619e08c688ec53620fbd3ac1a47785cd in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8ed4f8e ]

WICKET-5997 Compatibility problem with Websphere liberty profile

Use ServiceLoader instead of collecting the wicket.properties files in the classpath with custom logic
","18/Oct/15 10:03;jira-bot;Commit 117e411e6b7b9da97a2c782856767637f10881ff in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=117e411 ]

WICKET-5997 Compatibility problem with Websphere liberty profile

Use ServiceLoader instead of collecting the wicket.properties files in the classpath with custom logic
","18/Oct/15 10:06;githubbot;Github user martin-g commented on the pull request:

    https://github.com/apache/wicket/pull/138#issuecomment-148997616
  
    The was a discussion at Wicket dev@ mailing list and we decided to deprecate the current way and use ServiceLoader from now on.
    Please see https://issues.apache.org/jira/browse/WICKET-5997 and http://markmail.org/message/o5jvwjmmezu4xebe for more details.
    Please close this PR because we don't have permissions to do it!
    Thank you for raising this issue!
","18/Oct/15 10:08;jira-bot;Commit 6c30740cdaf9da91d26361a8232a3aa91e03b81a in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=6c30740 ]

WICKET-5997 Compatibility problem with Websphere liberty profile

Fix a typo in warning message
","18/Oct/15 10:08;jira-bot;Commit 028dac03c9c23502c6b09ed0a2cf05a4dc165539 in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=028dac0 ]

WICKET-5997 Compatibility problem with Websphere liberty profile

Fix a typo in warning message
","19/Oct/15 14:43;Snaduko;Great thanks!
any idea of when is 7.1 being released?","19/Oct/15 14:50;mgrigorov;It is being voted at the moment.
If there are no errors then it will be available at the end of the week.","14/Nov/15 10:22;jira-bot;Commit 3af549777a7ca81f5494525d8075fb2a050bd4be in wicket's branch refs/heads/wicket-6.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3af5497 ]

WICKET-5997 Compatibility problem with Websphere liberty profile

Use ServiceLoader instead of collecting the wicket.properties files in the classpath with custom logic
","12/Jan/16 18:50;mgrigorov;To summarize the change from application developer point of view:

1) move src/main/resources/wicket.properties to src/main/resources/META-INF/services/org.apache.wicket.IInitializer 
2) edit the new file and remove the ""IInitializer="" from the single line. Leave just the name of the implementation class","12/Jan/16 18:51;jira-bot;Commit 7e18ae98bd581563352984f6dd97caa87debc0e4 in wicket's branch refs/heads/wicket-7.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7e18ae9 ]

WICKET-5997 Compatibility problem with Websphere liberty profile

Fix obsolete warning message
",,,,,,,,,,,,,,,,,,,,,,
WICKET-5981 breaks forms inside borders,WICKET-5988,12901875,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,bitstorm,bitstorm,01/Oct/15 12:20,30/Oct/15 10:26,14/Mar/19 03:09,05/Oct/15 14:58,,,,,,,,,,,,7.1.0,,,,,,,,,,,,,,0,,,,,,"Due to WICKET-5981 border component doesn't invoke dequeue() anymore when a child component is added. This is a problem if we have a form inside border's body and some form input fields in the border's markup (see quickstart). In such a case form fields are not submitted because they are not form's descendants.
To solve this issue we should trigger dequeue() after border has been initialized and let component queueing 'fix' descendants hierarchy.",,,,,,,,,,,,,,WICKET-6014,,,01/Oct/15 12:22;bitstorm;queueIssue.tar.gz;https://issues.apache.org/jira/secure/attachment/12764592/queueIssue.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-10-02 12:26:17.34,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Mon Oct 26 14:44:49 UTC 2015,,,,,,0|i2mhxj:,9223372036854775807,,,,,,,,"02/Oct/15 12:26;jira-bot;Commit 00019e07c3837eae6d0c75d00c0943e46b76f22b in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=00019e0 ]

WICKET-5988 WICKET-5981 breaks forms inside borders
","04/Oct/15 13:09;jira-bot;Commit 73448df3ef347ea0f492e2241a43ef7d30339988 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=73448df ]

WICKET-5988 test case
","04/Oct/15 13:13;jira-bot;Commit d54ff31ae6bdc48779a4b3a97ac0706bf0e2ca4c in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d54ff31 ]

WICKET-5988 test case
","26/Oct/15 12:02;jira-bot;Commit f0364dad0db9d1d3b49891ca9a49662a4e69e378 in wicket's branch refs/heads/wicket-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f0364da ]

improved WICKET-5988 relaying on component resolvers
","26/Oct/15 14:44;jira-bot;Commit f14e03f84454101fe6569bd1a1979b5835835246 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f14e03f ]

improved WICKET-5988 relaying on component resolvers
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
O(n^2) complexity in MarkupContainer.add,WICKET-5983,12883447,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,papegaaij,papegaaij,papegaaij,18/Sep/15 12:07,28/Oct/15 07:07,14/Mar/19 03:09,21/Sep/15 12:29,1.5.13,6.20.0,7.0.0,,,,,,,,,7.1.0,,,wicket,,,,,,,,,,,0,,,,,,"MarkupContainer.add has O(n^2) complexity on the number of childs, because it searches through all other childs for a child with the same id. This may not be much of a problem in most situations, but in large tables, the performance can get very bad.

Constructing a table with n rows, with 6 cells in each row takes (10k iterations) in Wicket 6.20.0 (Wicket 7 should be comparable, but WICKET-5981 kills perfomance badly):
  10 ->   132ms
  20 ->   245ms
  40 ->   465ms
  80 ->  1000ms
 160 ->  2444ms
 320 ->  6989ms
 640 -> 23201ms
1280 -> 80784ms
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-09-18 12:08:40.647,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed Oct 28 07:07:49 UTC 2015,,,,,,0|i2ke1j:,9223372036854775807,,,,,,,,"18/Sep/15 12:08;jira-bot;Commit 7b49be52e1a082d910147d28a34961fe6fba13af in wicket's branch refs/heads/WICKET-5981 from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7b49be5 ]

WICKET-5983: mostly linear performance in MarkupContainer.add
","18/Sep/15 12:12;papegaaij;This patch reduces times to:
10 -> 147ms
20 -> 249ms
40 -> 442ms
80 -> 784ms
160 -> 1541ms
320 -> 3059ms
640 -> 6169ms
1280 -> 12478ms

The increase for 10 rows seems to be a Wicket 6 vs 7 issue","18/Sep/15 12:46;jira-bot;Commit 26cecdc6fabb8c4dadf457a2e4b22ef8c6eb1ea3 in wicket's branch refs/heads/WICKET-5981 from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=26cecdc ]

WICKET-5983: mostly linear performance in MarkupContainer.add
",28/Oct/15 07:07;interface;Can it be improved also in the version 6.x?,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Significant Performance Degradation From Wicket 6.20.0 to Wicket 7.0.0,WICKET-5981,12864003,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,papegaaij,ajg360,ajg360,14/Sep/15 19:51,02/Oct/15 12:26,14/Mar/19 03:09,21/Sep/15 12:20,7.0.0,,,,,,,,,,,7.1.0,,,wicket,,,,,,,,,,,0,performance,,,,,"I am experiencing a significant performance degradation for component adds in Wicket 7.0.0, once the component tree for a page gets reasonably large.

The attached quick start can be used to reproduce the issue.  Please note that NUM_ROWS is set to 10,000 to exaggerate the performance degradation as the size of the component tree increases.  The same degradation (to a lesser extent) can be viewed with a smaller NUM_ROWS variable.

In Wicket 6.20.0, as the size of the component tree increases, the cost of add() remains relatively constant time-wise.  In Wicket 7.0.0, a component add () is much more expensive (and actually makes our internal web application unusable) with form submits taking more than two or three minutes to come back from the server.

Here's some timing examples.  

=============================================================================================================

NUM_ROWS = 5000
Wicket 6.20.0 -> ~200 milliseconds of server side rendering (before browser paints HTML).
Wicket 7.0.0 -> ~ 10 seconds of server side rendering

NUM_ROWS = 10000
Wicket 6.20.0 -> ~ 500 milliseconds of server side rendering
Wicket 7.0.0 -> ~ 40 seconds of server side rendering

=============================================================================================================

The attached quickstart can be used to reproduce the issue on your side.  My guess is that this has to do with the new component queuing feature that was added as part of Wicket 7.0.0.","OpenSuse 13.1
Intellij 14.1.4
JDK 1.8.0_60
Solid State Hard Drive
24 GB RAM",,,,,,,,,,,,,,,,16/Sep/15 14:36;bitstorm;WICKET-5981-Significant-Performance-Degradation-From.patch;https://issues.apache.org/jira/secure/attachment/12756268/WICKET-5981-Significant-Performance-Degradation-From.patch,14/Sep/15 19:51;ajg360;quickstart.tar;https://issues.apache.org/jira/secure/attachment/12755804/quickstart.tar,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2015-09-16 13:31:17.13,,,no_permission,,,,Important,,,,,,,,9223372036854775807,,,Fri Oct 02 12:26:18 UTC 2015,,,,,,0|i2k5pr:,9223372036854775807,,,,,,,,"16/Sep/15 13:31;jira-bot;Commit ce8229325fb63ca9de6a8930229113dfbf852008 in wicket's branch refs/heads/WICKET-5981 from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ce82293 ]

WICKET-5981: Fixed performance degradation due to component queueing
","16/Sep/15 13:33;papegaaij;Martijn and I did some testing, and the problem is caused by O(n^2) in component dequeueing. For every component added, all components are visited for dequeueing. The above patch breaks this path, without breaking any tests, but might break something else. Please review.","16/Sep/15 14:26;bitstorm;I've also prepared a slightly different patch, but the idea behind it is exactly the same. See attachment.","23/Sep/15 19:31;jira-bot;Commit eb125865624747fd2d216e16133a8d9181c19265 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=eb12586 ]

WICKET-5981 Fix the behavior of MarkupContainer#get(int) for non-empty MarkupContainer and non-existing index
","02/Oct/15 12:26;jira-bot;Commit 00019e07c3837eae6d0c75d00c0943e46b76f22b in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=00019e0 ]

WICKET-5988 WICKET-5981 breaks forms inside borders
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
When using Servlet 3.0 filter Wicket calculates filter path wrong,WICKET-5980,12863458,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,dashorst,dashorst,11/Sep/15 16:37,21/Sep/15 12:32,14/Mar/19 03:09,21/Sep/15 12:32,7.0.0,,,,,,,,,,,7.1.0,,,wicket,,,,,,,,,,,0,,,,,,"When using a servlet 3.0 filter with annotations Wicket calculates the filter path wrong causing it to not match any pages other than the home page.

e.g.

{code}
@WebFilter(value = ""/web/*"", initParams = {@WebInitParam(name = ""applicationClassName"", value = ""com.example.CheesrApplication"")})
public class CheesrFilter extends WicketFilter {
}
{code}

Will cause Wicket to create a filter path of /web/*/ instead of the expected /web.
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-09-11 17:00:27.186,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri Sep 11 20:43:32 UTC 2015,,,,,,0|i2k2cv:,9223372036854775807,,,,,,,,"11/Sep/15 17:00;jira-bot;Commit 294b0b2f897dc0e2433b607d7543061145b320fc in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=294b0b2 ]

WICKET-5980 Servlet 3 Filter path calculated wrong

When using Servlet 3.0 filter Wicket calculates filter path wrong. With a /web/* filter definition
in the annotation Wicket generates /web/*/ instead of /web/.

This fix uses the same approach as WicketFilter.getFilterPathFromConfig and other similar
extracters. Fixes WICKET-5980.
","11/Sep/15 17:00;jira-bot;Commit 294b0b2f897dc0e2433b607d7543061145b320fc in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=294b0b2 ]

WICKET-5980 Servlet 3 Filter path calculated wrong

When using Servlet 3.0 filter Wicket calculates filter path wrong. With a /web/* filter definition
in the annotation Wicket generates /web/*/ instead of /web/.

This fix uses the same approach as WicketFilter.getFilterPathFromConfig and other similar
extracters. Fixes WICKET-5980.
","11/Sep/15 20:23;jira-bot;Commit 840c7ef003aea8293726ca345e16e5d263938637 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=840c7ef ]

WICKET-5980 Servlet 3 Filter path calculated wrong

Add Apache licence
","11/Sep/15 20:43;jira-bot;Commit ad286c3306696c940ded97f1dbe3b650d89e7e70 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ad286c3 ]

WICKET-5980 Servlet 3 Filter path calculated wrong

Update the comments why a reference to the #application has to be acquired
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UrlRenderer does not render fragments,WICKET-5970,12856936,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,papegaaij,papegaaij,18/Aug/15 14:46,18/Aug/15 20:05,14/Mar/19 03:09,18/Aug/15 14:52,6.20.0,7.0.0,,,,,,,,,,6.21.0,7.1.0,,wicket,,,,,,,,,,,0,,,,,,"UrlRenderer does not render fragments in its urls. This turns out to be problematic when implementing the OAuth2 implicit grant flow, which requires are redirect to an url with a fragment.",,,,,,,,,,,,,,WICKET-5938,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-08-18 14:50:28.799,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Aug 18 14:50:43 UTC 2015,,,,,,0|i2j22v:,9223372036854775807,,,,,,,,"18/Aug/15 14:50;jira-bot;Commit bdaeef3de34320bf1111d0402cab04926d59e4cd in wicket's branch refs/heads/master from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=bdaeef3 ]

WICKET-5970: render fragments in urls
","18/Aug/15 14:50;jira-bot;Commit 62f95feb6226dfe9bdad37a8760250405e560654 in wicket's branch refs/heads/wicket-6.x from [~papegaaij]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=62f95fe ]

WICKET-5970: render fragments in urls

Conflicts:
	wicket-core/src/test/java/org/apache/wicket/request/cycle/UrlRendererTest.java
	wicket-request/src/main/java/org/apache/wicket/request/UrlRenderer.java
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CachingResourceLocator lookup key doesn't take strict into account,WICKET-5968,12854086,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,11/Aug/15 08:06,11/Aug/15 13:56,14/Mar/19 03:09,11/Aug/15 13:55,6.20.0,7.0.0,,,,,,,,,,6.21.0,7.1.0,,wicket,,,,,,,,,,,0,,,,,,"CachingResourceLocator uses a CacheKey to store lookups for resources. 

With e.g. 
- b_nl.js
- b.js

When e.g. a strict resource lookup for b.js with locale ""us"" is performed, it will store the not-found for locale ""us"" under the cache key. The cache key consists of resource name, locale, style and variation. However when you search non-strict for locale ""us"", the resource locator should find the non-localized resource ""b.js"", but since a matching key for the lookup was stored for this particular resource, it will fail.
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-08-11 08:08:48.361,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Aug 11 13:55:15 UTC 2015,,,,,,0|i2ikq7:,9223372036854775807,,,,,,,,"11/Aug/15 08:08;jira-bot;Commit 8b7946d822433fcb0873b9ff47b93630d60cfbb4 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8b7946d ]

WICKET-5968 CachingResourceLocator lookup key doesn't take strict into account
","11/Aug/15 13:55;jira-bot;Commit 8b5a4aab78a2826c7b3ef558566be04f73632190 in wicket's branch refs/heads/wicket-6.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8b5a4aa ]

WICKET-5968 CachingResourceLocator lookup key doesn't take strict into account
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to load i18n minified js,WICKET-5967,12853869,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,dashorst,dashorst,10/Aug/15 14:45,10/Nov/17 11:58,14/Mar/19 03:09,21/Sep/15 12:35,6.20.0,7.0.0,,,,,,,,,,7.1.0,,,wicket,,,,,,,,,,,0,,,,,,"Wicket doesn't locate i18n minified resources from the class path correctly. When style, variation, i18n and minification come into play, Wicket doesn't find the correct styled, variationed, i18n and minified file.

Due to a combination of bugs and some changes we haven't yet discerned,
Wicket 7.0.0 fails to load a JavaScript file (to be exact: wicket/resource/org.odlabs.wiquery.ui.datepicker.DatePickerLanguageResourceReference/i18n/jquery.ui.datepicker-nl-ver-1438239140000.js)

This issue is one of those bugs, which is present in 6.x but doesn't surface there for a yet unknown reason.
",,,,,,,,,,,,,,,WICKET-6494,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-08-10 15:33:14.04,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Aug 11 08:25:01 UTC 2015,,,,,,0|i2ijef:,9223372036854775807,,,,,,,,"10/Aug/15 15:33;jira-bot;Commit b87bc97526c2644b2c64637ca6bdb6dbfcd4f29d in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b87bc97 ]

WICKET-5967 - Unable to load i18n minified js
","10/Aug/15 15:33;jira-bot;Commit 8773531793092e302fa86ec61f3919c7008472d6 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8773531 ]

Fixed WICKET-5967 Unable to load i18n minified js

Moved location of minified (or not) resources to ResourceStreamLocator instead of the
resources themselves by adding a lookup for .min.<extension> before .<extension> in the list
of extensions to search for. This prioritizes the minified version before the non-minified version,
and allows for style_variation_locale resources to be located in minified versions as well.
","11/Aug/15 07:34;mgrigorov;A problem that I see here is that now we hardcode "".min.js"" as the only possible extension for minified resources.
Some JS libraries use funky extensions like "".compressed.js"", for example.
Do you see any way to make this configurable? Per resource?","11/Aug/15 08:15;dashorst;you can still lookup resources under any name. foo.compressed.js will still work. Only auto-selection between minified and non-minified is codified using '.min' in the framework, but that was already the case. I didn't modify that.","11/Aug/15 08:25;mgrigorov;The resource could be available with: foo.js and foo.compressed.js names.
Until now one could override PackageResourceReference#getMinifiedName() and Wicket will use foo.compressed.js in PRODUCTION mode.
With your change such application will have to use foo.compressed.js both in DEV and PROD mode (i.e. always compressed) to be able to load the compressed version.

I don't think this is a big problem though. Just noting that it may break applications which use PackageResourceReference#getMinifiedName(). 
I've added this method back in the day because DOJO uses/used? the following convention: foo.uncompressed.js + foo.js (this is the minified one!)",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ResourceUtils.getLocaleFromFilename can't handle minimized resources well,WICKET-5966,12853786,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,dashorst,dashorst,10/Aug/15 09:38,21/Sep/15 12:42,14/Mar/19 03:09,21/Sep/15 12:42,6.20.0,7.0.0,,,,,,,,,,7.1.0,,,wicket,,,,,,,,,,,0,,,,,,"I think the ResourceUtils.getLocaleFromFilename(String path) has the order of locale and minimization wrong:
It currently parses: File.min_Lang_Coun_Var.ext while the typical convention is File_Lang_Coun_Var.min.ext
Surely considering the ResourceUtils.getMinifiedName() method which does work according to convention.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-08-10 13:50:00.983,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Mon Aug 10 13:50:00 UTC 2015,,,,,,0|i2iivz:,9223372036854775807,,,,,,,,"10/Aug/15 13:50;jira-bot;Commit d547fcd4faf3079a3578ab19f93cf976721bea39 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d547fcd ]

WICKET-5966 Fixed locale from resource filename

The previous implementation of getLocaleFromFilename had the order of Locale and minimized
filepart wrong. The de facto standard for filenaming conventions is:

    <filepart>[_locale[_country[_variation]]][.min].extension

The old implementation had the locale part and .min part swapped.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Queuing a component in head,WICKET-5965,12852982,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,darkvadaure,darkvadaure,07/Aug/15 15:25,23/Aug/15 21:48,14/Mar/19 03:09,16/Aug/15 20:55,7.0.0,,,,,,,,,,,7.1.0,,,wicket,,,,,,,,,,,0,,,,,,"Queuing a component which is in the head section doesn't work :
<head>
	<meta charset=""utf-8"" />
	<title wicket:id=""titre"">Test</title>
</head>",,,,,,,,,,,,,,,,,10/Aug/15 20:37;darkvadaure;WicketQuickstartFix.war;https://issues.apache.org/jira/secure/attachment/12749688/WicketQuickstartFix.war,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-08-16 20:55:58.384,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sun Aug 23 21:48:10 UTC 2015,,,,,,0|i2ih1b:,9223372036854775807,,,,,,,,07/Aug/15 16:20;darkvadaure;Attached QuickStart with a simple example,10/Aug/15 20:37;darkvadaure;added quickfix with markupcontainer.java in the app,"16/Aug/15 20:55;jira-bot;Commit 31c885690722855242c6bc14b9afe59b4eb67830 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=31c8856 ]

WICKET-5965 Queuing a component in head
","17/Aug/15 07:34;darkvadaure;great thx.
i've tested a special case : the title tag (with wicket component) within an enclosure (like in WICKET-5964). The child is not found (same exception that i had in this 5965)
Ok that case will never be used but i just notice it.

     <head>
		<wicket:enclosure>
		<title wicket:id=""titre"">Apache Wicket Quickstart</title>
		</wicket:enclosure>
	</head>

org.apache.wicket.WicketRuntimeException: Could not find child with id: titre in the wicket:enclosure","23/Aug/15 21:48;bitstorm;Right, a wicket:enclosure would hide any child inside it. But as you said this is quite an unlikely use case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Queuing a component within an enclosure,WICKET-5964,12852981,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,darkvadaure,darkvadaure,07/Aug/15 15:24,12/Aug/15 15:10,14/Mar/19 03:09,12/Aug/15 15:10,7.0.0,,,,,,,,,,,7.1.0,,,wicket,,,,,,,,,,,0,,,,,,"Queueing doesn't work if component is in a enclosure tag. 

<wicket:enclosure child=""inlink"">
<a href=""panier.html"">
	<span wicket:id=""inlink""></span>
</a>
</wicket:enclosure>",,,,,,,,,,,,,,,,,10/Aug/15 20:38;darkvadaure;WicketQuickstartFix.war;https://issues.apache.org/jira/secure/attachment/12749689/WicketQuickstartFix.war,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-08-12 12:31:20.778,,,no_permission,,,,Important,,,,,,,,9223372036854775807,,,Wed Aug 12 15:10:12 UTC 2015,,,,,,0|i2ih13:,9223372036854775807,,,,,,,,07/Aug/15 16:18;darkvadaure;Attached QuickStart with a simple example,"10/Aug/15 20:28;darkvadaure;see https://issues.apache.org/jira/browse/WICKET-5965
it works if we replace add(component) by queue(component) in the autoAdd methods (MarkupContainer)
i hope it helps",10/Aug/15 20:38;darkvadaure;added quickfix with markupcontainer.java in the app,"12/Aug/15 12:31;jira-bot;Commit 860668521f1d250038cd233d5dfe63c740e1fc19 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8606685 ]

WICKET-5964 Queuing a component within an enclosure
",12/Aug/15 15:10;bitstorm;Replacing  add(component) with queue(component) would be a huge change and it would change the semantic of the method: queued components are eventually added to a container while autoAdd is meant to add a component immediately.,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken links in new site,WICKET-5954,12845610,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,bitstorm,froque,froque,16/Jul/15 14:33,23/Jul/15 17:56,14/Mar/19 03:09,23/Jul/15 17:56,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"there seems to be a lot of broken links in the new site, as reported by http://www.deadlinkchecker.com/website-dead-link-checker.asp :

||Error||URL||Anchor Text||Linked From||
|404|http://archive.apache.org/dist/wicket/6.20.0/CHANG ELOG-6.x|change log|http://wicket.apache.org/start/download.html
|404|http://stackoverflow.com/questions/wicket|stackoverflow|http://wicket.apache.org/help/
|404|http://oodt.apache.org/components/maven/webapp/filemgr/|CAS File Manager|http://wicket.apache.org/apache/
|404|http://oodt.apache.org/components/maven/webapp/workflow/|CAS Workflow monitor|http://wicket.apache.org/apache/
|-1 Not found: The server returned an invalid or unrecognized response|http://wicket.apache.org/news/2011/04/02/wicket-1.4.17-released.html|more|http://wicket.apache.org/news/
|-1 Not found: The server returned an invalid or unrecognized response|http://wicket.apache.org/news/2011/03/25/wicket-cookbook-published.html|more|http://wicket.apache.org/news/
|404|http://mail-archives.apache.org/mod_mbox/wicket-user|Browse|http://wicket.apache.org/help/email.html
|404|https://ci.apache.org/projects/wicket/apidocs/1.5.x/index.html|Redirected 301 (JavaDoc 1.5.x http://wicket.apache.org/learn/)|http://ci.apache.org/projects/wicket/apidocs/1.5.x/index.html
|404|https://ci.apache.org/projects/wicket/apidocs/1.4.x/index.html|Redirected 301 (JavaDoc 1.4.x http://wicket.apache.org/learn/)|http://ci.apache.org/projects/wicket/apidocs/1.4.x/index.html
|404|https://ci.apache.org/projects/wicket/apidocs/1.3.x/index.html|Redirected 301 (JavaDoc 1.3.x http://wicket.apache.org/learn/)|http://ci.apache.org/projects/wicket/apidocs/1.3.x/index.html
|404|http://wicket.apache.org/2014/09/15/wicket-1.5.12-released.html|Apache Wicket 1.5.12|http://wicket.apache.org/news/2014/09/22/cve-2014-3526.html
|404|http://wicket.apache.org/2014/08/24/wicket-6.17.0-released.html|Apache Wicket 6.17.0|http://wicket.apache.org/news/2014/09/22/cve-2014-3526.html
|-1 Not found: The server returned an invalid or unrecognized response|http://wicket.apache.org/2014/08/23/wicket-7.0.0-M3-released.html|Apache Wicket 7.0.0-M3|http://wicket.apache.org/news/2014/09/22/cve-2014-3526.html
|404|http://wicket.apache.org/2014/02/21/cve-2014-0043.html|CVE-2014-0043|http://wicket.apache.org/news/2014/02/20/wicket-6.14.0-released.html
|404|http://wicket.apache.org/2014/02/06/wicket-1.5.11-released.html|Apache Wicket 1.5.11|http://wicket.apache.org/news/2014/02/21/cve-2014-0043.html
|404|http://wicket.apache.org/2014/02/20/wicket-6.14.0-released.html|Apache Wicket 6.14.0|http://wicket.apache.org/news/2014/02/21/cve-2014-0043.html
|404|http://wicket.apache.org/2014/02/06/cve-2013-2055.html|CVE-2013-2055|http://wicket.apache.org/news/2014/02/06/wicket-1.4.23-released.html
|404|http://wicket.apache.org/2014/02/06/wicket-1.4.23-released.html|Apache Wicket 1.4.23|http://wicket.apache.org/news/2014/02/06/cve-2013-2055.html
|404|http://wicket.apache.org/2013/05/17/wicket-6.8.0-released.html|Apache Wicket 6.8.0|http://wicket.apache.org/news/2014/02/06/cve-2013-2055.html
|404|http://wicket.apache.org/start/userguide.html|âUser guideâ|http://wicket.apache.org/news/2014/01/05/wicket-6.13.0-released.html
|404|https://wicket.apache.org/2012/12/14/wicket-6.4.0-released.html|Apache Wicket 6.4.0|http://wicket.apache.org/news/2013/03/03/cve-2012-5636.html
|404|https://wicket.apache.org/2013/02/26/wicket-1.5.10-released.html|Apache Wicket 1.5.10|http://wicket.apache.org/news/2013/03/03/cve-2012-5636.html
|404|http://wicket.apache.org/news/2012/12/14/WICKET-4880|WICKET-4880|http://wicket.apache.org/news/2012/12/14/wicket-6.4.0-released.html
|404|https://wicket.apache.org/2012/09/05/wicket-1.4.21-released.html|Apache Wicket 1.4.21|http://wicket.apache.org/news/2012/09/06/cve-2012-3373.html
|404|https://wicket.apache.org/2012/08/24/wicket-1.5.8-released.html|Apache Wicket 1.5.8|http://wicket.apache.org/news/2012/09/06/cve-2012-3373.html
|404|https://wicket.apache.org/2012/09/05/wicket-6.0.0-released.html|Apache Wicket 6.0.0|http://wicket.apache.org/news/2012/09/06/cve-2012-3373.html
|404|http://wicket.apache.org/2012/03/12/wicket-1.4.20-released.html|Apache Wicket 1.4.20|http://wicket.apache.org/news/2012/03/22/wicket-cve-2012-0047.html
|404|http://wicket.apache.org/2012/03/12/wicket-1.5.5-released.html|Apache Wicket 1.5.5|http://wicket.apache.org/news/2012/03/22/wicket-cve-2012-0047.html
|404|http://wicket.apache.org/2011/08/09/wicket-1.4.18-released.html|Apache Wicket 1.4.18|http://wicket.apache.org/news/2011/08/23/cve-2011-2712.html
|network error|http://wicket.apache.org/2011/06/25/wicket-1.5-RC5.1-released.html|Apache Wicket 1.5-RC5.1|http://wicket.apache.org/news/2011/08/23/cve-2011-2712.html
|404|https://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/core/util/string/ComponentRenderer.html|Redirected 301 (ComponentRenderer http://wicket.apache.org/news/2013/04/12/wicket-6.7.0-released.html)|http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/core/util/string/ComponentRenderer.html
|404|http://wicket.apache.org/screencasts/ApacheWicket_MarkupInheritence.avi|Watch the Screencast|http://wicket.apache.org/learn/examples/markupinheritance.html
|network error|http://wicketframework.org/api/wicket/settings/IMarkupSettings|IMarkupSettings|http://wicket.apache.org/learn/examples/markupinheritance.html
|network error|https://cwiki.apache.org/confluence/display/robots.txt|Redirected 301 (here http://wicket.apache.org/learn/examples/dropdownchoice.html)|https://cwiki.apache.org/confluence/display/WICKET/Working+with+Wicket+models",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-07-23 17:56:13.358,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Jul 23 17:56:13 UTC 2015,,,,,,0|i2hcb3:,9223372036854775807,,,,,,,,"23/Jul/15 17:56;bitstorm;I couldn't regenerate the API docs for 1.3, but the rest of the links are ok now.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CSRF prevention does not work with https URLs on the default port,WICKET-5944,12843398,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,alexgrant,alexgrant,08/Jul/15 04:24,21/Jul/15 22:33,14/Mar/19 03:09,08/Jul/15 11:08,6.20.0,,,,,,,,,,,6.21.0,7.0.0,,wicket,,,,,,,,,,,0,,,,,,"If your URL is https on the default port (so no :443 on the end), then the CSRF prevention (WICKET-5919) rejects requests with the Origin header supplied.

In CsrfPreventionRequestCycleListener, line 519 looks like this

if (port != -1 && ""http"".equals(scheme) && port != 80 || ""https"".equals(scheme) && port != 443)

So the port != -1 test binds only to the ""http"" half of the or statement, and the if block executes, which appends "":-1"" to the end of the ""https"" URL. I think it should instead say

if (port != -1 && (""http"".equals(scheme) && port != 80 || ""https"".equals(scheme) && port != 443))
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-07-08 11:00:46.361,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Jul 21 22:33:52 UTC 2015,,,,,,0|i2gz2f:,9223372036854775807,,,,,,,,"08/Jul/15 11:00;jira-bot;Commit bae94e2d330badee94824a199b834639d10d686f in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=bae94e2 ]

WICKET-5944 CSRF prevention does not work with https URLs on the default port
","08/Jul/15 11:08;jira-bot;Commit b3733ed2ba7ce3d75824264524e4aa75cad25a08 in wicket's branch refs/heads/wicket-6.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b3733ed ]

WICKET-5944 CSRF prevention does not work with https URLs on the default port
",21/Jul/15 22:33;alexgrant;Thank you for fixing this so quickly.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestCase failure after cfa36fbea621,WICKET-5942,12842561,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,dashorst,dashorst,03/Jul/15 11:25,05/Jul/15 21:06,14/Mar/19 03:09,05/Jul/15 21:06,7.0.0,,,,,,,,,,,7.0.0,,,wicket,,,,,,,,,,,0,,,,,,"Running the tests prior to trying to release Wicket 7, I ran into a failure of RepeaterTest:

The component [TransparentWebMarkupContainer [Component id = wicket_extend4]] was rendered already. You can render it only once during a render phase. Class relative path: org.apache.wicket.markup.html.TransparentWebMarkupContainer:wicket_child24:wicket_extend4
 MarkupStream: [unknown]
	at org.apache.wicket.Page.componentRendered(Page.java:211)
	at org.apache.wicket.Component.rendered(Component.java:2622)
	at org.apache.wicket.Component.internalRender(Component.java:2383)
	at org.apache.wicket.Component.render(Component.java:2307)
	at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1407)
	at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1604)
	at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1579)
	at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1502)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.onComponentTagBody(DefaultMarkupSourcingStrategy.java:70)
	at org.apache.wicket.Component.internalRenderComponent(Component.java:2564)
	at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1543)
	at org.apache.wicket.Component.internalRender(Component.java:2379)
	at org.apache.wicket.Component.render(Component.java:2307)
	at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1407)
	at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1604)
	at org.apache.wicket.Page.onRender(Page.java:882)
	at org.apache.wicket.markup.html.WebPage.onRender(WebPage.java:143)
	at org.apache.wicket.Component.internalRender(Component.java:2379)
	at org.apache.wicket.Component.render(Component.java:2307)
	at org.apache.wicket.Page.renderPage(Page.java:1021)
	at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:124)
	at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:236)
	at org.apache.wicket.util.tester.BaseWicketTester$LastPageRecordingPageRendererProvider$1.respond(BaseWicketTester.java:2747)
	at org.apache.wicket.core.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:175)
	at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:865)
	at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
	at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:265)
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:222)
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:293)
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:717)
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:656)
	at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:628)
	at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:1261)
	at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:1234)
	at org.apache.wicket.examples.repeater.RepeaterTest.checkPage(RepeaterTest.java:78)
	at org.apache.wicket.examples.repeater.RepeaterTest.allRepeaterPages(RepeaterTest.java:50)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)

The test case looks like this:

checkPage(tester, RepeatingPage.class);
checkPage(tester, RefreshingPage.class);
checkPage(tester, FormPage.class);
checkPage(tester, SimplePage.class);
checkPage(tester, PagingPage.class);
checkPage(tester, SortingPage.class);
checkPage(tester, OIRPage.class);
checkPage(tester, DataGridPage.class);
checkPage(tester, GridViewPage.class);
checkPage(tester, AjaxDataTablePage.class);

and the test fails with the last checkPage to AjaxDataTablepage.class. When I disable all prior checkPages, the test succeeds. When I try the page in the Wicket Examples, it works.

Checking which pages influence one another:

it appears that running RepeatingPage.class and then AjaxDataTablePage.class triggers this error, while changing the order to AjaxDataTablePage.class and then RepeatingPage.class lets the test succeed.

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-07-03 11:28:06.687,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sun Jul 05 21:06:01 UTC 2015,,,,,,0|i2gtzb:,9223372036854775807,,,,,,,,"03/Jul/15 11:28;jira-bot;Commit f53a4ef20ee5945329b174f125ac19904660c4d8 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f53a4ef ]

WICKET-5942 workaround to release 7.0
",03/Jul/15 16:22;bitstorm;Should be fixed with my last commit.,"05/Jul/15 21:06;jira-bot;Commit d24a47e5e82d5a83f7ba53c21dbdba515643acf7 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d24a47e ]

Closes WICKET-5942 TestCase failure after cfa36fbea621
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StackOverflowError when calling getObject() from load() in LDM,WICKET-5916,12833838,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,29/May/15 17:05,29/May/15 17:12,14/Mar/19 03:09,29/May/15 17:12,7.0.0-M5,,,,,,,,,,,7.0.0-M6,,,wicket,,,,,,,,,,,0,,,,,,"The fix for WICKET-5772 caused an infinite loop when calling getObject() from inside load() in LoadableDetachableModel. While of course unwise to do so and nobody in their right mind would do so directly, such a cycle can be triggered through a series of unrelated calls emanating from load().",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-05-29 17:11:41.138,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Fri May 29 17:11:46 UTC 2015,,,,,,0|i2fe0n:,9223372036854775807,,,,,,,,"29/May/15 17:11;jira-bot;Commit def03addf20259d294db09b9b8a9ffa5b114565a in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=def03ad ]

WICKET-5916 StackOverflowError in LoadableDetachableModel

This fixes a circular calling issue with LoadableDetachableModel where
getObject() is called from the context of a load(). By tracking the
state of the LoadableDetachableModel more closely, we can short-circuit
the call chain and break out of the infinite calling loop.

I've opted to use an enum instead of adding a new flag to keep the
amount of flags to a minimum and to keep the memory requirements
low (instead of 2 flags, just one enum is referenced). The external
public and protected interfaces are still the same, so I don't
expect any problems within user applications, unless they are
manipulating the attached flag using reflection.

Fixes WICKET-5916
","29/May/15 17:11;jira-bot;Commit def03addf20259d294db09b9b8a9ffa5b114565a in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=def03ad ]

WICKET-5916 StackOverflowError in LoadableDetachableModel

This fixes a circular calling issue with LoadableDetachableModel where
getObject() is called from the context of a load(). By tracking the
state of the LoadableDetachableModel more closely, we can short-circuit
the call chain and break out of the infinite calling loop.

I've opted to use an enum instead of adding a new flag to keep the
amount of flags to a minimum and to keep the memory requirements
low (instead of 2 flags, just one enum is referenced). The external
public and protected interfaces are still the same, so I don't
expect any problems within user applications, unless they are
manipulating the attached flag using reflection.

Fixes WICKET-5916
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in Page#hasInvisibleTransparentChild,WICKET-5912,12832713,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,meo,meo,26/May/15 13:29,28/May/15 10:49,14/Mar/19 03:09,28/May/15 10:49,7.0.0-M5,,,,,,,,,,,7.0.0-M6,,,wicket,,,,,,,,,,,0,,,,,,"I started to use #queue instead of TransparentWebMarkupContainer as suggested in WICKET-5898, to my surprise #replace does not work for queued components (it is a feature, right?) :
{code}
org.apache.wicket.WicketRuntimeException: Cannot replace a component which has not been added: id='PANEL', component=[EmptyPanel [Component id = PANEL]]:
[Page class = krasa.wicket.npe.BrokenPage, id = 0, render count = 1]
	at org.apache.wicket.MarkupContainer.replace(MarkupContainer.java:736) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at krasa.wicket.npe.BrokenPage$1.onSubmit(BrokenPage.java:24) ~[classes/:?]
	at org.apache.wicket.ajax.markup.html.form.AjaxButton$1.onSubmit(AjaxButton.java:111) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.ajax.form.AjaxFormSubmitBehavior$AjaxFormSubmitter.onSubmit(AjaxFormSubmitBehavior.java:215) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.markup.html.form.Form.delegateSubmit(Form.java:1307) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.markup.html.form.Form.process(Form.java:974) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:795) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.ajax.form.AjaxFormSubmitBehavior.onEvent(AjaxFormSubmitBehavior.java:171) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.ajax.AjaxEventBehavior.respond(AjaxEventBehavior.java:156) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.ajax.AbstractDefaultAjaxBehavior.onRequest(AbstractDefaultAjaxBehavior.java:581) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.7.0_72]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[?:1.7.0_72]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.7.0_72]
	at java.lang.reflect.Method.invoke(Method.java:606) ~[?:1.7.0_72]
	at org.apache.wicket.RequestListenerInterface.internalInvoke(RequestListenerInterface.java:258) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:241) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:248) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:234) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:865) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64) ~[wicket-request-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:265) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:222) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:293) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:261) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:203) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:284) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652) [jetty-servlet-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585) [jetty-servlet-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577) [jetty-security-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515) [jetty-servlet-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.Server.handle(Server.java:497) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635) [jetty-util-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555) [jetty-util-9.2.10.v20150310.jar:9.2.10.v20150310]
	at java.lang.Thread.run(Thread.java:745) [?:1.7.0_72]
{code}

When I click on back button, it will give me an NPE:
{code}
java.lang.NullPointerException
	at org.apache.wicket.Page.hasInvisibleTransparentChild(Page.java:679) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.Page.checkRendering(Page.java:645) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.Page.onAfterRender(Page.java:821) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.markup.html.WebPage.onAfterRender(WebPage.java:216) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.Component.afterRender(Component.java:918) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.Component.render(Component.java:2319) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.Page.renderPage(Page.java:1018) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:124) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:195) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.core.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:175) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:865) ~[wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64) ~[wicket-request-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:265) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:222) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:293) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:261) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:203) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:284) [wicket-core-7.0.0-SNAPSHOT.jar:7.0.0-SNAPSHOT]
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652) [jetty-servlet-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585) [jetty-servlet-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577) [jetty-security-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515) [jetty-servlet-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.Server.handle(Server.java:497) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257) [jetty-server-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635) [jetty-util-9.2.10.v20150310.jar:9.2.10.v20150310]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555) [jetty-util-9.2.10.v20150310.jar:9.2.10.v20150310]
	at java.lang.Thread.run(Thread.java:745) [?:1.7.0_72]
{code}
(both in 7.0.0-M5 and current master)

quickstart: https://github.com/krasa/wicket-bugs
-Start
-open http://localhost:8080/ 
-click on the button
-click Back",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-05-27 09:19:27.128,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu May 28 10:01:02 UTC 2015,,,,,,0|i2f76v:,9223372036854775807,,,,,,,,"27/May/15 09:19;bitstorm;Hi,

 at first glance I would say that the problem is caused by an incorrect use of components hierarchy.  In your code we find:

{code}
BrokenPage.this.replace(resultPanel);
{code}

but the panel is not directly added to the page, it's inside WebMarkupContainer centerColumn. So the line above should be:

{code}
((WebMarkupContainer)getPage().get(""center-column"")).replace(resultPanel);
{code}
","27/May/15 10:18;meo;Hi, yes that would probably work, or to decouple it, from that ""center-column"":
{code}
panel.replaceWith(resultPanel);
panel = resultPanel;
{code}
Maybe it would be nice to have something like #queueReplace, but I am more concerned about that NPE...","28/May/15 09:49;bitstorm;Now MarkupContainer#replace first checks for the child that must be replaced, and then if this last is found it performs the replacement. This prevents to have children with null parent, which is the cause of the NPE. ",28/May/15 10:01;meo;Looks good.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Session style is not taken into account when loading mounted resources.,WICKET-5909,12830816,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,barlabanov,barlabanov,18/May/15 20:34,07/Jul/15 19:34,14/Mar/19 03:09,05/Jul/15 20:20,6.19.0,7.0.0-M5,,,,,,,,,,7.0.0,,,wicket,,,,,,,,,,,0,,,,,,"Session#getStyle is not considered when a mounted package resource is loaded. Wicket loads the default one.
If the resource is not mounted, everything works fine and Wicket delivers the correct resource file.

Quickstart is attached. There are two CSS files: styled.css and styled_orange.css. The corresponding package resource is mounted. The session style is set to orange in WicketApplication#newSession. Expected behavior is that styled_orange.css is delivered to a browser. Instead styled.css is delivered.
There is a workaround: see WorkaroundResourceStreamLocator.
",,,,,,,,,,,,,,,,,18/May/15 20:35;barlabanov;style-bug.zip;https://issues.apache.org/jira/secure/attachment/12733616/style-bug.zip,22/May/15 16:22;bitstorm;wicket.patch;https://issues.apache.org/jira/secure/attachment/12734861/wicket.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2015-05-18 21:05:43.592,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Jul 07 19:34:50 UTC 2015,,,,,,0|i2ew67:,9223372036854775807,,,,,,,,18/May/15 20:35;barlabanov;quickstart,18/May/15 21:05;bitstorm;should be caused by WICKET-5793 ,"19/May/15 17:43;klopfdreh;The issue here is that if you mount a resource it gets a fixed count of url segments like you put into the first arg of mountResource. For a normal ResourceReference the style is added as query behind and resolves directly to the resource - to test (not mounted ResourceReference)

This will give you the orange css
./wicket/resource/org.barlabanov.HomePage/styled-ver-1432053148000.css?-orange

This will give you the blue
./wicket/resource/org.barlabanov.HomePage/styled-ver-1432053148000.css

If you mount that ResourceReference a ResourceMapper is initialized at the startup of the application which delegates the requests of the mount to the ResourceReference, but at this point there is no session to get the style from and if it would be there the style is not redirected to the actual ResourceReference.

I tried to modify the ResourceMapper, but without any success.

@[~bitstorm] What do you think? I don't think it has something to do with WICKET-5793 - but correct me if I am wrong.

Edit: I reverted your changes of the session locally and the bug isn't fixed - so this is something else then you fixed with WICKET-5793","20/May/15 13:36;bitstorm;yep! you are right, the actual style is correctly resolved. the problem must be somewhere else ","22/May/15 16:21;bitstorm;I've attached a patch for Wicket 7. I've simply turned ResourceMapper into a subclass of AbstractResourceReferenceMapper in order to have a consistent behavior with the other resource mappers. This is a simple solution, BUT:

-it's not possible to backport it to 6.x
-ResourceMapper does not use the original resourceReference anymore but creates a new resource reference using the informations coded as query parameters.

",22/May/15 18:53;klopfdreh;I thank you so much! I just wanted to fix this issue during the weekend and now I have more time left! :-) Great!,"22/May/15 19:28;mgrigorov;Let me take a look.
Please do not apply the patch for now.","22/May/15 20:01;jira-bot;Commit eced7b96301436de388e8f7ee7af6d366544b905 in wicket's branch refs/heads/WICKET-5909 from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=eced7b9 ]

WICKET-5909 Session style is not taken into account when loading mounted resources.

Use the current session style and locale if there are no explicitly specified ones in PackageResource's constructor.
","22/May/15 20:10;jira-bot;Commit eb5b07b585753734cc989c72fce8a3f941bb538d in wicket's branch refs/heads/WICKET-5909 from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=eb5b07b ]

WICKET-5909 Simplify #getResourceStream(). It should do what #getCacheableResourceStream() does.
","22/May/15 20:18;mgrigorov;I'm suggesting a different solution in branch 'WICKET-5909'.
Now #getResourceStream() will use the current session locale/style if there is no explicitly specified ones in PackageResource's constructor.
IMO this should be the default behavior and there shouldn't be a need to have #getCacheableResourseStream() that always uses the session's locale/style.

The quickstart app is a bit broken - there is no bound session. A temporary Session is created for the request serving the page, but the request for the PackageResource doesn't create any session, even temporary, and thus the style is null.

While writing the explanation I realized that #getCacheableResourceStream() does exactly what I believe should be the expected behavior. I just pushed a new commit that delegates #getResoureStream() to #getCacheableResourceStream(). All tests pass!

I've modified few tests because WicketTester simulates an USA user (Accept-Language: en-us) and thus the test loads package1_en.txt version now. ","24/May/15 21:29;bitstorm;[~mgrigorov]
In which sense the quickstart is broken? Because it's stateless (no bound session)?","25/May/15 06:43;mgrigorov;[~bitstorm] Yes, this is what I meant. But now I agree that Wicket should store the session style and locale as request parameters, like BasicResourceReferenceMapper does. So the actual fix should be a mix of mine and your changes.","04/Jun/15 14:16;bitstorm;I've create a new branch to work for a fix for 7.x. It's called  WICKET-5906-7.x (see https://git1-us-west.apache.org/repos/asf?p=wicket.git;a=shortlog;h=refs/heads/WICKET-5906-7.x). This solution is slightly different from the previous patch I've attached. I've moved most of the logic from AbstractResourceReferenceMapper to ResourceUtil in order to share it across different mappers or classes that needs to encode/decode resource attributes in the URL.
Maybe is more radical as solution but I prefer it over the previous idea of turning ResourceMapper into a subclass of AbstractResourceReferenceMapper.","04/Jun/15 19:39;jira-bot;Commit c3523805f4ec1f4599ad16873efc20d457d28130 in wicket's branch refs/heads/WICKET-5906-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c352380 ]

WICKET-5909 code improvement
","08/Jun/15 20:02;mgrigorov;The change is good.
It misses javadocs and tests for the new helper methods.

I still believe org.apache.wicket.request.resource.PackageResource#getResourceStream() should just delegate to org.apache.wicket.request.resource.PackageResource#getCacheableResourceStream().","07/Jul/15 19:34;jira-bot;Commit 5c829c4ac40d95c78010697dd093aceba4b54877 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=5c829c4 ]

WICKET-5909 Session style is not taken into account when loading mounted resources.

Rename IStaticCacheableResource#getCacheableResourceStream() to #getResourceStream().
Merge PackageResource#getCacheableResourceStream() and #getResourceStream() by preserving the behavior of #getCacheableResourceStream()
",,,,,,,,,,,,,,,,,
Use default on missing resource does not work,WICKET-5906,12829243,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,dashorst,dashorst,12/May/15 16:39,04/Jun/15 19:24,14/Mar/19 03:09,19/May/15 07:19,7.0.0-M5,,,,,,,,,,,7.0.0-M6,,,wicket,,,,,,,,,,,0,,,,,,"A regression since 6.19.0: when a StringResourceModel tries to lookup a key, but that key doesn't exist in any of the resource bundles, it should use the default if one is provided (and the setting is enabled in Wicket's ResourceSettings), but currently throws an exception, or returns a string with a warning that the resource could not be found.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-05-15 13:37:11.722,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Jun 04 19:24:30 UTC 2015,,,,,,0|i2emnz:,9223372036854775807,,,,,,,,"12/May/15 16:46;dashorst;It appears that the constructor refactor of Wicket 7 for StringResourceModel allows the code to bind a String parameter (which was a possible default value in 6.19.0) now as an optional parameter, causing the default to be considered null, and wrecking havoc.","15/May/15 13:37;githubbot;GitHub user gsmet opened a pull request:

    https://github.com/apache/wicket/pull/118

    WICKET-5906 Move StringResourceModel to a fluid API

    I was wondering if maybe setModel and setParameters should be more clear, such as setSubstitutionModel and setSubstitutionParameters.
    
    Comments welcome.

You can merge this pull request into a Git repository by running:

    $ git pull https://github.com/openwide-java/wicket stringresourcemodel-fluid

Alternatively you can review and apply these changes as the patch at:

    https://github.com/apache/wicket/pull/118.patch

To close this pull request, make a commit to your master/trunk branch
with (at least) the following in the commit message:

    This closes #118
    
----
commit ebfe6e804c80abdc6748d6d45d3ae6e4128e86de
Author: Guillaume Smet <guillaume.smet@gmail.com>
Date:   2015-05-15T13:29:52Z

    WICKET-5906 Move StringResourceModel to a fluid API
    
    This commit breaks the API late in the release cycle of 7 but
    changes made to the constructors of StringResourceModel made
    some usages silently failing.
    
    We decided in favor of breaking the API to raise compilation
    errors so that users can fix their code.

----
","15/May/15 13:41;githubbot;Github user martin-g commented on a diff in the pull request:

    https://github.com/apache/wicket/pull/118#discussion_r30408568
  
    --- Diff: wicket-core/src/main/java/org/apache/wicket/model/StringResourceModel.java ---
    @@ -275,110 +276,70 @@ public void setObject(String object)
     	 * not be obtained from resource bundles that are held relative to a particular component or
     	 * page. However, for application that use only global resources then this parameter may be
     	 * null.
    -	 * <p>
    -	 * The model parameter is also optional and only needs to be supplied if value substitutions are
    -	 * to take place on either the resource key or the actual resource strings.
    -	 * <p>
    -	 * The parameters parameter is also optional and is used for substitutions.
     	 * 
     	 * @param resourceKey
     	 *            The resource key for this string resource
     	 * @param component
     	 *            The component that the resource is relative to
    -	 * @param model
    -	 *            The model to use for property substitutions
    -	 * @param parameters
    -	 *            The parameters to substitute using a Java MessageFormat object
     	 */
    -	public StringResourceModel(final String resourceKey, final Component component,
    -		final IModel<?> model, final Object... parameters)
    +	public StringResourceModel(final String resourceKey, final Component component)
    --- End diff --
    
    To make the migration easier I think it would be good to have one more constructor: 
    `public StringResourceModel(final String resourceKey, final Component component, final IModel<?> model)`.
",15/May/15 13:41;gsmet;PR to move StringResourceModel to a more fluid API: https://github.com/apache/wicket/pull/118,"15/May/15 13:46;githubbot;Github user gsmet commented on a diff in the pull request:

    https://github.com/apache/wicket/pull/118#discussion_r30409071
  
    --- Diff: wicket-core/src/main/java/org/apache/wicket/model/StringResourceModel.java ---
    @@ -275,110 +276,70 @@ public void setObject(String object)
     	 * not be obtained from resource bundles that are held relative to a particular component or
     	 * page. However, for application that use only global resources then this parameter may be
     	 * null.
    -	 * <p>
    -	 * The model parameter is also optional and only needs to be supplied if value substitutions are
    -	 * to take place on either the resource key or the actual resource strings.
    -	 * <p>
    -	 * The parameters parameter is also optional and is used for substitutions.
     	 * 
     	 * @param resourceKey
     	 *            The resource key for this string resource
     	 * @param component
     	 *            The component that the resource is relative to
    -	 * @param model
    -	 *            The model to use for property substitutions
    -	 * @param parameters
    -	 *            The parameters to substitute using a Java MessageFormat object
     	 */
    -	public StringResourceModel(final String resourceKey, final Component component,
    -		final IModel<?> model, final Object... parameters)
    +	public StringResourceModel(final String resourceKey, final Component component)
    --- End diff --
    
    And keep the setModel? Or should I also remove it?
    
    My goal was to have ""model"" and ""parameters"" on the same level.
","15/May/15 13:47;githubbot;Github user martin-g commented on a diff in the pull request:

    https://github.com/apache/wicket/pull/118#discussion_r30409143
  
    --- Diff: wicket-core/src/main/java/org/apache/wicket/model/StringResourceModel.java ---
    @@ -275,110 +276,70 @@ public void setObject(String object)
     	 * not be obtained from resource bundles that are held relative to a particular component or
     	 * page. However, for application that use only global resources then this parameter may be
     	 * null.
    -	 * <p>
    -	 * The model parameter is also optional and only needs to be supplied if value substitutions are
    -	 * to take place on either the resource key or the actual resource strings.
    -	 * <p>
    -	 * The parameters parameter is also optional and is used for substitutions.
     	 * 
     	 * @param resourceKey
     	 *            The resource key for this string resource
     	 * @param component
     	 *            The component that the resource is relative to
    -	 * @param model
    -	 *            The model to use for property substitutions
    -	 * @param parameters
    -	 *            The parameters to substitute using a Java MessageFormat object
     	 */
    -	public StringResourceModel(final String resourceKey, final Component component,
    -		final IModel<?> model, final Object... parameters)
    +	public StringResourceModel(final String resourceKey, final Component component)
    --- End diff --
    
    Keep it.
","15/May/15 13:54;githubbot;Github user gsmet commented on the pull request:

    https://github.com/apache/wicket/pull/118#issuecomment-102404912
  
    Done. The tests tests both flavours.
","19/May/15 07:17;jira-bot;Commit f3914dd107cf7563eefc20aaa56cd75b4107410a in wicket's branch refs/heads/master from [~gsmet]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=f3914dd ]

WICKET-5906 Move StringResourceModel to a fluid API

This commit breaks the API late in the release cycle of 7 but
changes made to the constructors of StringResourceModel made
some usages silently failing.

We decided in favor of breaking the API to raise compilation
errors so that users can fix their code.
","19/May/15 07:18;jira-bot;Commit 31f3acb0d01af7be11a85c8e611c420180f77924 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=31f3acb ]

WICKET-5906 Use default on missing resource does not work

Fix API breaks in wicket-extensions and wicket-examples
",19/May/15 07:19;mgrigorov;The PR is merged!,"19/May/15 07:27;githubbot;Github user martin-g commented on the pull request:

    https://github.com/apache/wicket/pull/118#issuecomment-103379768
  
    The PR is merged but GitHub doesn't recognize it.
    @gsmet Please close the PR.
    Thanks!
","19/May/15 07:28;githubbot;Github user gsmet commented on the pull request:

    https://github.com/apache/wicket/pull/118#issuecomment-103380018
  
    Thanks for merging it.
","19/May/15 07:28;githubbot;Github user gsmet closed the pull request at:

    https://github.com/apache/wicket/pull/118
","04/Jun/15 19:24;jira-bot;Commit 954aee197d402add8d2dd9814e1f7e477977daa3 in wicket's branch refs/heads/WICKET-5909-7.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=954aee1 ]

WICKET-5906
",,,,,,,,,,,,,,,,,,,
Regression in mount resolution when using optional parameters,WICKET-5903,12828690,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,gsmet,gsmet,10/May/15 21:13,16/May/15 15:12,14/Mar/19 03:09,16/May/15 15:12,7.0.0-M5,,,,,,,,,,,7.0.0-M6,,,wicket,,,,,,,,,,,0,,,,,,"Hi,

When using an optional parameter, there is something fishy with the way Wicket 7 resolves the mount point.

For instance, if you mount in the following order the following paths:
/test/${id}
/test/mount/{#id}
requests to /test/mount/4 are directed to the page mounted with /test/${id}

Quick start to come.",,,,,,,,,,,,,,,,,10/May/15 21:13;gsmet;MountIssue-quickstart.tar.gz;https://issues.apache.org/jira/secure/attachment/12731820/MountIssue-quickstart.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-05-11 10:46:50.133,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue May 12 06:20:51 UTC 2015,,,,,,0|i2ejb3:,9223372036854775807,,,,,,,,"11/May/15 10:46;bitstorm;Done. Try the last snapshot, it contains the fix.","11/May/15 12:34;gsmet;Hi Andrea,

I confirm you fixed the reported case but it was a self contained test case which was over simplified.

The issue in our application isn't fixed with the latest snapshot.

I worked on a more complete test case: you'll see that there's still something fishy: when you click on the second link, you end up on the third page and when you click on the third link, you end up on the general page.

Feel free to ping me if there's something unclear in my explanations or my quick start.

HTH

-- 
Guillaume","11/May/15 12:36;gsmet;Mmmmh I cannot add a file to the issue anymore because it's closed.

Here is the second test case: http://share.openwide.fr/share/zone/gsmet/874903534",11/May/15 15:51;bitstorm;I've improved the mapper code. In few minutes you should be able to test the new snapshot.,"11/May/15 18:58;gsmet;Hi Andrea,

I can confirm it's OK now. I can access to the pages of my application.

Let's port a second one to see how it goes!

Thanks.",11/May/15 20:22;bitstorm;Great! I will wait for more feedback from you before closing the issue.,12/May/15 06:20;mgrigorov;[~bitstorm] Please add some unit tests for the use case so we don't regress in the future.,,,,,,,,,,,,,,,,,,,,,,,,,,
Add WicketTester support for IAjaxLink,WICKET-5900,12827595,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,06/May/15 09:21,06/May/15 09:26,14/Mar/19 03:09,06/May/15 09:26,6.19.0,7.0.0-M5,,,,,,,,,,6.20.0,7.0.0-M6,,wicket,,,,,,,,,,,0,,,,,,"When testing for example clicking on AjaxPagingNavigator links, the WicketTester uses a normal click instead of an AJAX click, because the links used in the AjaxPagingNavigator implement IAjaxLink directly instead of extending e.g. Ajax[Fallback]Link.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-05-06 09:23:39.394,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed May 06 09:25:31 UTC 2015,,,,,,0|i2ecmf:,9223372036854775807,,,,,,,,"06/May/15 09:23;jira-bot;Commit 433190904eb3fd48f974852d71f42e84b4c49d04 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=4331909 ]

Added WicketTester support for IAjaxLink

WicketTester didn't click direct IAjaxLink implementations using an
Ajax request but a normal request. Some components implement
IAjaxLink directly instead of subclassing AjaxLink or other
components.

Fixes WICKET-5900
","06/May/15 09:25;jira-bot;Commit 0199bfab7cc27e14759d634a1b48f92c9e59a9d2 in wicket's branch refs/heads/wicket-6.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0199bfa ]

Added WicketTester support for IAjaxLink

WicketTester didn't click direct IAjaxLink implementations using an
Ajax request but a normal request. Some components implement
IAjaxLink directly instead of subclassing AjaxLink or other
components.

Fixes WICKET-5900
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StackOverflowError after form submit with a validation error,WICKET-5898,12825946,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,meo,meo,29/Apr/15 13:18,14/Nov/15 13:55,14/Mar/19 03:09,30/Jul/15 09:21,7.0.0-M5,,,,,,,,,,,6.21.0,7.0.0-M6,,wicket,,,,,,,,,,,0,,,,,,"I was not able to find a cause or make a small quickstart, but it has something to do with a form validation, my workaround was to setDefaultFormProcessing(false) or not use required TextFields.

It can be reproduced on https://github.com/krasa/DevSupportApp/tree/stackOverflow 
1) run StartVojtitkoDummy
2) go to http://localhost:8765/wicket/bookmarkable/krasa.release.frontend.TokenizationPage
3) click on ""Generate Release json"" button 
- instead of SOE, it should give a validation error, probably even on fields which I would not want to validate, but that's just because I've made the page badly... 

 
{code}
java.lang.StackOverflowError: null
...
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:81)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:74)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:144)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:162)
	at org.apache.wicket.util.visit.Visits.visitChildren(Visits.java:123)
	at org.apache.wicket.MarkupContainer.visitChildren(MarkupContainer.java:862)
	at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers(AbstractMarkupSourcingStrategy.java:65)
	at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:99)
	at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:453)
	at org.apache.wicket.Component.getMarkup(Component.java:755)
	at org.apache.wicket.Component.internalRender(Component.java:2344)
	at org.apache.wicket.Component.render(Component.java:2307)
	at org.apache.wicket.ajax.XmlAjaxResponse.writeComponent(XmlAjaxResponse.java:128)
	at org.apache.wicket.ajax.AbstractAjaxResponse.writeComponents(AbstractAjaxResponse.java:218)
	at org.apache.wicket.ajax.AbstractAjaxResponse.writeTo(AbstractAjaxResponse.java:150)
	at org.apache.wicket.ajax.AjaxRequestHandler.respond(AjaxRequestHandler.java:359)
	at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:865)
	at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
	at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:97)
	at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:265)
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:222)
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:293)
	at org.apache.wicket.protocol.ws.AbstractUpgradeFilter.processRequestCycle(AbstractUpgradeFilter.java:59)
	at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:203)
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:284)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1125)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1059)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
	at org.eclipse.jetty.server.Server.handle(Server.java:497)
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:310)
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248)
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:620)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.ru
{code}",,,,,,,,,,,,,,,WICKET-6027,,07/May/15 16:37;bitstorm;NestedTransparentContainer.zip;https://issues.apache.org/jira/secure/attachment/12731213/NestedTransparentContainer.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-04-29 13:34:34.876,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Jul 30 15:57:29 UTC 2015,,,,,,0|i2e2wf:,9223372036854775807,,,,,,,,29/Apr/15 13:34;dashorst;This particular stack overflow error happens In our (just migrated) application too. I'm trying to craft a test case.,"30/Apr/15 09:17;dashorst;If you use TransparentWebMarkupContainer you probably should change that to WebMarkupContainer and instead of `add`ing components, you should `queue` them.",30/Apr/15 11:14;meo;That would work nicely. Thanks! ,"01/May/15 13:26;dashorst;I've been able to boil this down to a single test case, and it appears to be introduced in [b92591f6496c15bf5615765539017ad702c67a43] WICKET-5724 Queueing component in autocomponent

","01/May/15 16:19;jira-bot;Commit b0be030b1ddbe7bee19d2e9650c2e45b486060c1 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b0be030 ]

Reproduced WICKET-5898

This testcase reproduces WICKET-5898. It contains 3 test methods
of which 2 are @ignored. You should remove the @ignore to trigger
the StackOverflowError when testing.
","01/May/15 16:19;jira-bot;Commit b0be030b1ddbe7bee19d2e9650c2e45b486060c1 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b0be030 ]

Reproduced WICKET-5898

This testcase reproduces WICKET-5898. It contains 3 test methods
of which 2 are @ignored. You should remove the @ignore to trigger
the StackOverflowError when testing.
","02/May/15 14:50;jira-bot;Commit ce51679981d2b3c478b3c6933783dad5821875ff in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=ce51679 ]

WICKET-5898 StackOverflowError after form submit with a validation error
",02/May/15 14:52;bitstorm;I've added a simple test to prevent child searching loops. I'd like to keep the two failing test methods but moving them in a more meaningful test case class.,"03/May/15 06:47;jira-bot;Commit 7ac9ccdee5ae1af64b3ee7f2afddfafc50315807 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=7ac9ccd ]

WICKET-5898 Rename the test case to ends with Test. This way it is actually picked by m-surefire-p.

Extend from WicketTestCase so that WicketTester is closed after test execution.
","03/May/15 13:02;jira-bot;Commit 3c06788776b6b2d4881b206d3c1566342cc8b880 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3c06788 ]

WICKET-5898 test methods moved to TransparentWebMarkupContainerTest
",07/May/15 08:53;dashorst;Not all cases are covered--our app still shows the StackOverflowError,"07/May/15 09:36;jira-bot;Commit cab6795aa64fe2280a938f69bb304255f2fc9bbe in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=cab6795 ]

Added additional test case for WICKET-5898
","07/May/15 16:36;bitstorm;This last test case fails also with Wicket 6.x. See quickstart. I guess in your application you have transparent containers automatically added by Wicket (like <img src='foo/bar/pic.png'>) and not explicitly added via code as it is in the last test case.
If this is the case we can avoid to search in transparent components if the searched component is an autocomponent (i.e. isAuto returns true).
I will do more tests to explore this possible solution.","09/May/15 10:50;bitstorm;I've committed a possible solution to the last test case:

https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=b00920f377babfb46345e51deff0748621205109

With this change we avoid to look for IComponentResolverS inside transparent containers. To be honest I don't know how 'good' this solution is, but I think it conceptually correct. What do you think?","12/May/15 11:32;dashorst;Yes, our code has <img src=""""> inside links. These transparent containers are automatically added.",12/May/15 11:34;bitstorm;Could you test last snapshot?,"12/May/15 12:56;jira-bot;Commit c5a445504d1ba07bf8cb8f782187f6f003b64521 in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c5a4455 ]

WICKET-5898: Added two more failing tests

These tests fail with a StackOverflowError with auto-added TWMCs
or manually added TWMCs. Both situations could occur in a Wicket
application.
",12/May/15 13:37;dashorst;The solution doesn't appear to work in our application: still get StackOverflowError. See the newly committed (and ignored) test cases.,"14/May/15 16:55;bitstorm;I've committed a new solution where I've rewritten AbstractMarkupSourcingStrategy.searchMarkupInTransparentResolvers in order to use container markup and improve children resolution.
This solves all the test cases.","15/May/15 08:12;dashorst;I confirm that this has solved our test case in our project too (which constantly triggered a new stack overflow case ;-)

Many thanks Andrea!",20/Jul/15 16:35;vitiate;Will this fix be included in a 6.x release? I am seeing this same issue but moving to 7.x is not feasible at this time.,28/Jul/15 07:37;mgrigorov;[~bitstorm] Should this fix be downported to 6.x?,"28/Jul/15 13:09;bitstorm;Well, the whole patch breaks API compatibility with searchMarkupInTransparentResolvers (see my comment above). I will take a look to see what can be ported back.","28/Jul/15 15:34;vitiate;The stack overflow error stems from the fix for https://issues.apache.org/jira/browse/WICKET-5569, which was included in 6.16. We have been unable to upgrade to 6.16 or greater.","29/Jul/15 15:12;jira-bot;Commit 8c62ecd9d5f6e16ab46c357057849cd5dab4ef14 in wicket's branch refs/heads/wicket-6.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8c62ecd ]

Reproduced WICKET-5898

This testcase reproduces WICKET-5898. It contains 3 test methods
of which 2 are @ignored. You should remove the @ignore to trigger
the StackOverflowError when testing.
","29/Jul/15 15:12;jira-bot;Commit 8c62ecd9d5f6e16ab46c357057849cd5dab4ef14 in wicket's branch refs/heads/wicket-6.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=8c62ecd ]

Reproduced WICKET-5898

This testcase reproduces WICKET-5898. It contains 3 test methods
of which 2 are @ignored. You should remove the @ignore to trigger
the StackOverflowError when testing.
","29/Jul/15 15:12;jira-bot;Commit 33879a8b4842828098bc98665bf1c63ddeb24f2f in wicket's branch refs/heads/wicket-6.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=33879a8 ]

WICKET-5898 StackOverflowError after form submit with a validation error
","29/Jul/15 15:12;jira-bot;Commit 94db8a9adae1e318486fcb6e10ea99dc76bf91b5 in wicket's branch refs/heads/wicket-6.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=94db8a9 ]

WICKET-5898 Rename the test case to ends with Test. This way it is actually picked by m-surefire-p.

Extend from WicketTestCase so that WicketTester is closed after test execution.
","29/Jul/15 16:39;bitstorm;Hi,

could you produce a quickstart project for 6.x? Unfortunately the fix for 7.x can not be backported ""as it is"" to 6.x","29/Jul/15 16:39;bitstorm;Hi,

could you produce a quickstart project for 6.x? Unfortunately the fix for 7.x can not be backported ""as it is"" to 6.x","29/Jul/15 20:07;vitiate;I've uploaded a quickstart to github, https://github.com/nonexpectation/WicketQuickStart_StackOverflowError",30/Jul/15 09:21;bitstorm;[~vitiate] Thank you for your fast reply.  The last commits (cherry picks from 7.x) you see above solve the problem with your quickstart. You can see it using version 6.21.0-SNAPSHOT. I will try to further improve the fix for 6.x to cover more potential problems as the 7.x already does. ,"30/Jul/15 15:57;vitiate;Looks great, thank you."
Using an AjaxSubmitLink to hide its form results in an exception,WICKET-5879,12820573,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,nerklenerd,nerklenerd,13/Apr/15 16:32,14/Apr/15 20:23,14/Mar/19 03:09,13/Apr/15 20:20,7.0.0-M5,,,,,,,,,,,7.0.0-M6,,,,,,,,,,,,,,0,,,,,,"In wicket 7, an AjaxSubmitLink that hides its form in the onSubmit() method results in a ListenerInvocationNotAllowedException to be thrown, since the component that triggered the submit is no longer visible.  See quickstart.",,,,,,,,,,,,,,,,,13/Apr/15 16:33;nerklenerd;formhide.tar.gz;https://issues.apache.org/jira/secure/attachment/12724973/formhide.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-04-13 20:17:56.731,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Apr 14 09:04:53 UTC 2015,,,,,,0|i2d6qv:,9223372036854775807,,,,,,,,13/Apr/15 16:33;nerklenerd;quickstart,"13/Apr/15 20:17;jira-bot;Commit 73006a7b6886dec358976f7ffe2fdb3b2714a4a3 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=73006a7 ]

WICKET-5879 Using an AjaxSubmitLink to hide its form results in an exception
","14/Apr/15 09:04;jira-bot;Commit 0c79aa7fb2e820d73ed5eb58b66d9ef63b424941 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0c79aa7 ]

 WICKET-5879 Using an AjaxSubmitLink to hide its form results in an exception
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kittencaptcha doesn't calculate click y-coordinate correctly,WICKET-5869,12787370,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,01/Apr/15 15:20,01/Apr/15 15:32,14/Mar/19 03:09,01/Apr/15 15:32,6.14.0,6.15.0,6.16.0,6.17.0,6.18.0,6.19.0,,,,,,6.20.0,7.0.0-M6,,wicket-extensions,,,,,,,,,,,0,,,,,,"In firefox the click event doesn't calculate the relative position of the click correctly.

In the block when the event doesn't have an offsetX/Y, the code should take into account all offsets of all offsetParents. The code below fixes this.

{code:javascript}
function getEventX(element, event) {
	var result;
	if (event.offsetX != null) {
		result = event.offsetX;
	} else {
		result = event.pageX;
		do {
			result = result - element.offsetLeft;
			element = element.offsetParent;
		} while (element != null)
	}
	return parseInt(result, 10);
}
function getEventY(element, event) {
	var result;
	if (event.offsetY != null) {
		result = event.offsetY;
	} else {
		result = event.pageY;
		do {
			result = result - element.offsetTop;
			element = element.offsetParent;
		} while (element != null)
	}
	return parseInt(result, 10);
}
{code}",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2015-04-01 15:31:01.05,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Wed Apr 01 15:32:20 UTC 2015,,,,,,0|i27ndj:,9223372036854775807,,,,,,,,"01/Apr/15 15:31;jira-bot;Commit 51b704f3557f12e5bbb5b3e45987fdfa00a78d0d in wicket's branch refs/heads/wicket-6.x from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=51b704f ]

Fixed WICKET-5869: KittenCaptcha doesnt calculate Y-position correctly in FireFox
","01/Apr/15 15:32;jira-bot;Commit e8a4e642aceca1c9c4226f41c27096ef45c97f8a in wicket's branch refs/heads/master from [~dashorst]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=e8a4e64 ]

Fixed WICKET-5869: KittenCaptcha doesnt calculate Y-position correctly in FireFox
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
InlineEnclosure doesn't call child.configure() before updating its visilbity,WICKET-5835,12774243,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,bitstorm,rza,rza,11/Feb/15 15:53,17/Feb/15 13:03,14/Mar/19 03:09,16/Feb/15 21:18,6.19.0,7.0.0-M5,,,,,,,,,,6.20.0,7.0.0-M6,,wicket,,,,,,,,,,,0,enclosure,,,,,"org.apache.wicket.markup.html.internal.InlineEnclosure.updateVisibility()

should propably call child.configure() before the visibility of the InlineEnclosure is set to the visibility of the child.",Any,,,,,,,,,,,,,,,,16/Feb/15 10:46;rza;enclosure-quickstart.zip;https://issues.apache.org/jira/secure/attachment/12699069/enclosure-quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2015-02-13 15:57:46.614,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Tue Feb 17 13:03:05 UTC 2015,,,,,,0|i25hlz:,9223372036854775807,,,,,,,,"13/Feb/15 15:57;bitstorm;Hi,

could you provide a quickstart or some code that shows how this can create a problem or a wrong behavior?",16/Feb/15 10:46;rza;Here's a quickstart to show the problem.,"16/Feb/15 16:39;bitstorm;Thank you for the quickstart. To me this is not a problem with Wicket but with the way you use to decide the visibility for the inline internal component. Variable 'visible1' is used to determinate component's visibility but it is set only when onConfigure is called, hence the component is always invisible to the inline container.
Just replace the onconfigure method with this version of isVisible:

{code}
public boolean isVisible() {
 	return visible1;
 };
//            @Override
//            protected void onConfigure() {
//                super.onConfigure();
//
//                setVisible(visible1);
//            }
{code}

in this way the internal component's visibility reflects the visible1 flag.","16/Feb/15 17:04;rza;The ""visible1"" flag is only used for representation in this quickstart. I found the issue in my project when trying to inherit the visibility of a whole component hierarchy with some rules over multiple levels, i.e some complex logic I wouldn't want to calculate every time in isVisible(). And of course I could calculate it one time and cache it in an own flag - but why not use the existing infrastructure that exists for exactly this purpose?

To quote from [Component#onConfigure()|http://ci.apache.org/projects/wicket/apidocs/6.x/org/apache/wicket/Component.html#onConfigure()]:
{quote}Why this method is preferrable to directly overriding isVisible() and isEnabled()? Because those methods are called multiple times even for processing of a single request. If they contain expensive logic they can slow down the response time of the entire page. Further, overriding those methods directly on form components may lead to inconsistent or unexpected state depending on when those methods are called in the form processing workflow. It is a better practice to push changes to state rather than pull.{quote}","16/Feb/15 18:51;bitstorm;Thank you for your clarification, I think now I get the picture...","16/Feb/15 20:48;bitstorm;An the answer is in the next javadoc line :-)

> NOTE: If component's visibility or another property depends on another component you may call other.configure() 
> followed by other.isVisible() as mentioned in configure() javadoc.  ","16/Feb/15 20:53;jira-bot;Commit c97e3f4b0e7c7300c41d4608547d8bd16f37498f in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c97e3f4 ]

WICKET-5835 InlineEnclosure doesn't call child.configure() before updating its visilbity
","16/Feb/15 21:01;jira-bot;Commit 3d5b261577d79afd74a274d7cffb20c031b4dac1 in wicket's branch refs/heads/wicket-6.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3d5b261 ]

WICKET-5835 InlineEnclosure doesn't call child.configure() before updating its visilbity
","17/Feb/15 09:15;rza;I'm afraid you fixed the wrong class ... or at least InlineEnclosure has to be fixed as well.
But now you're setting the visiblity flag on Enclosure but at the same time isVisible is overriden, so that the flag is never queried - or am I missing something?","17/Feb/15 11:19;bitstorm;Right. But to be more precise, with this solution both Enclouser#isVisible() and InlineEnclosure#updateVisibility() are no more useful and I'm considering to remove them from master branch. To me InlineEnclosure#updateVisibility() looks like an hack while we can (and should) rely on standard component lifecycle hooks.
For 6.x branch I cannot remove public method such as updateVisibility for backward compatibility. What I could do is to slightly modify onConfigure like this:

{code}
@Override
	protected void onConfigure()
	{
		super.onConfigure();
		final Component child = getChild();
		
		child.configure();
//		boolean childVisible = child.determineVisibility();
//		
//		setVisible(childVisible);
	}
{code}

but I don't see a huge benefit...","17/Feb/15 13:03;jira-bot;Commit 3693d070bd824a791bcdc2a69e7f8c0fea408f38 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=3693d07 ]

Refactoring for InlineEnclosure and Enclosure to remove legacy code (see WICKET-5835)
",,,,,,,,,,,,,,,,,,,,,,
ReplacementResourceBundleReference should return the dependencies for the replacing resource ref,WICKET-5752,12753807,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,bitstorm,bitstorm,bitstorm,07/Nov/14 21:04,08/Nov/14 15:50,14/Mar/19 03:09,08/Nov/14 15:50,6.18.0,7.0.0-M4,,,,,,,,,,6.19.0,7.0.0-M5,,,,,,,,,,,,,0,,,,,,ReplacementResourceBundleReference uses parent getDependencies method while it should override it and return the dependencies of the replacing resource reference. ,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2014-11-08 15:28:09.534,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Sat Nov 08 15:48:43 UTC 2014,,,,,,0|i224in:,9223372036854775807,,,,,,,,"08/Nov/14 15:28;jira-bot;Commit 945f5a0d14db2d0d7e770570bf3dedf3257d6df0 in wicket's branch refs/heads/wicket-6.x from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=945f5a0 ]

WICKET-5752 ReplacementResourceBundleReference should return the
dependencies for the replacing resource reference","08/Nov/14 15:48;jira-bot;Commit 06027af8e11e7a4c5bde50d7d174b523539c9d73 in wicket's branch refs/heads/master from [~bitstorm]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=06027af ]

WICKET-5752 ReplacementResourceBundleReference should return the
dependencies for the replacing resource reference
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ResourceUtils.getLocaleFromFilename cannot handle filenames with classifiers,WICKET-5706,12743190,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,szetamas,szetamas,22/Sep/14 13:36,10/Aug/15 09:40,14/Mar/19 03:09,10/Aug/15 09:37,6.17.0,,,,,,,,,,,6.18.0,7.0.0-M4,,wicket,,,,,,,,,,,0,,,,,,"When I try to get PathLocale with ResourceUtils, than get wrong values, when the files contains '.' in name.

Example: 'jquery.test.js' 
PathLocale.path=jquery, PathLocale.locale = null

or jquery.test_hu.js'.
PathLocale.path=jquery, PathLocale.locale = null

That's why I'd like to use 
jquery.test_hu.js' as resource, the ResourceStreamLocator try to find 
jquery.test_hu_hu_HU.js, jquery.test_hu_hu.js, and after  jquery.test_hu.js.
Because the 
ResourceStreamLocator.locate

		PathLocale data = ResourceUtils.getLocaleFromFilename(path);
		if ((data != null) && (data.locale != null))
		{
			path = data.path;
			locale = data.locale;
		}
doesn't work in this case.

Should change the 
ResourceUtils

	public static PathLocale getLocaleFromFilename(String path) {
		int pos = path.indexOf('.');
----------------
To
                int pos = path.lastIndexOf('.');",,,,,,,,,,,,,,,WICKET-5966,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2014-09-23 11:50:02.837,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Mon Aug 10 09:28:42 UTC 2015,,,,,,0|i20c3r:,9223372036854775807,,,,,,,,"23/Sep/14 11:50;mgrigorov;Additionally I see an inconsistency that it returns a path without the extension when there is no locale, and with the extension when there is a locale.","23/Sep/14 11:50;jira-bot;Commit 0f8a6d757367e73eaadcb0dff1372d169bcefb76 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=0f8a6d7 ]

WICKET-5706 ResourceUtils.getLocaleFromFilename cannot handle filenames with classifiers
","23/Sep/14 11:54;jira-bot;Commit b5979289835a0eda988de2cb922d5ddd1914fa81 in wicket's branch refs/heads/wicket-6.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=b597928 ]

WICKET-5706 ResourceUtils.getLocaleFromFilename cannot handle filenames with classifiers

(cherry picked from commit 0f8a6d757367e73eaadcb0dff1372d169bcefb76)
",23/Sep/14 11:57;mgrigorov;Thanks!,"10/Aug/15 09:28;dashorst;I think the ResourceUtils.getLocaleFromFilename(String path) has the order of locale and minimization wrong:

It currently parses: File.min_Lang_Coun_Var.ext while the typical convention is File_Lang_Coun_Var.min.ext

Surely considering the ResourceUtils.getMinifiedName() method which does work according to convention.

I am working on a patch that fixes this, and also makes PathLocale have more information regarding the filename.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
IllegalArgument exception with wicket:child in ajaxrequest,WICKET-5704,12742728,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jesselong,roeloffzen,roeloffzen,19/Sep/14 13:42,02/Oct/14 09:10,14/Mar/19 03:09,01/Oct/14 09:05,6.16.0,6.17.0,,,,,,,,,,6.18.0,7.0.0-M4,,wicket,,,,,,,,,,,1,,,,,,"We have a page in our application with a DataView.
In this DataView we have an anonymous inner class of a component which has a wicket:child-tag.
When there is ajaxrequest, in our case because we want to go to the next page in our dataview, an exception is thrown.

java.lang.IllegalArgumentException: Argument 'streamOffset' must have a value within [0,0], but was 1

                at org.apache.wicket.util.lang.Args.withinRange(Args.java:120)

                at org.apache.wicket.markup.AbstractMarkupFragment.find(AbstractMarkupFragment.java:43)

                at org.apache.wicket.markup.MarkupFragment.find(MarkupFragment.java:150)

                at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.getMarkup(DefaultMarkupSourcingStrategy.java:94)

                at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:451)

                at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:72)

                at org.apache.wicket.markup.html.panel.AbstractMarkupSourcingStrategy$1.component(AbstractMarkupSourcingStrategy.java:66)

I have the feeling that is caused by the fix in the following jira-issue
https://issues.apache.org/jira/browse/WICKET-5580

When we remove the wicket:child-tag completely, there is no problem.
When we change the anonymous inner class, to a nested class and give it an html-file with wicket:extend-tags without anything between them, it also works.

I believe that the fix for WICKET-5580, failed to take in account subclasses of components that don't need to add markup and therefor don't have their own HTML-file.

I hope I can get around to making a quickstart testcase for this in the next couple of days",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2014-09-22 07:48:21.213,,,no_permission,,,,,,,,,,,,9223372036854775807,,,Thu Oct 02 09:10:26 UTC 2014,,,,,,0|i2097r:,9223372036854775807,,,,,,,,"22/Sep/14 07:48;mgrigorov;Thanks for the report!
A quickstart would help a lot!
It seems the initialization of org.apache.wicket.markup.MarkupFragment#size is wrong for some reason.","26/Sep/14 15:54;jesselong;Short version:
Problem is we are trying to find from element 1 in a MarkupFragment with size 0.

It is theoretically possible for MarkupFragment to have size of 0, so MarkupFragment#find() should probably have this at the beginning:

if (size < 2){
    return null;
}

That will fix the problem.

Long version:
I cant seem to find a way to create a MarkupFragment with size 0, I would be very interested to find out how that could happen. MarkupFragment constructor seems to expect size to be 0 some times.

This is being triggered by an attempt to render a component, which is inside some sort of component resolver, to an Ajax response. This usage in itself is not a problem, it is fine, and usually works 100%.

The component causing the problem may be entirely unrelated to the component being rendered.

When rendering a component to an ajax response, Wicket must find markup for component. The default strategy if to find the component tag with the same id as the child that is a direct child of the component tag of the child's Java parent.

If the component tag for the child is not an immediate child of the Java parent's component tag, there is some component resolving going on. The markup sourcing strategy (default, associated) works down the component tree from looking for MarkupContainers that are also IComponentResolvers. The idea is that the sought component tag could be a child of the component tag for any of these component resolving markup containers.

If there is more than one such component resolving markup container, all are visited until the child markup is found. This is why I say the component with the problem could be unrelated to the component being rendered. It could be some other component resolving markup container that is just being checked.

For each component resolving markup container descendant, we try find the markup for the component being rendered, ultimately calling find() on that markup containers MarkupFragment. It is on one of these that size == 0, but we start looking from index 1.

I cant seem to reproduce this problem with anonymous inner classes or non-inherited wicket:child tags. I would be interested to see that if you can easily create a quickstart.","27/Sep/14 03:09;jira-bot;Commit 572df1583add7b8e34aa412e9e554031a74231f0 in wicket's branch refs/heads/master from [~jesselong]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=572df15 ]

WICKET-5704 IllegalArgument exception with wicket:child in ajaxrequest
","27/Sep/14 03:10;jira-bot;Commit c728d8953d34b7bf34d86a8625dcb6e1109602cf in wicket's branch refs/heads/wicket-6.x from [~jesselong]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=c728d89 ]

WICKET-5704 IllegalArgument exception with wicket:child in ajaxrequest

(cherry picked from commit 572df1583add7b8e34aa412e9e554031a74231f0)
","01/Oct/14 09:05;mgrigorov;Closing the ticket as ""Fixed"".
Jesse added code to protected from this error. If there is still a problem please attach a quickstart and we will reopen the ticket.",02/Oct/14 09:05;roeloffzen;Just tested the fix with Wicket 6.18.0-SNAPSHOT and the fix works,02/Oct/14 09:05;roeloffzen;see previous comment,02/Oct/14 09:10;mgrigorov;Thanks for verifying!,,,,,,,,,,,,,,,,,,,,,,,,,
org.apache.wicket.protocol.ws.api.registry.IKey should be Serializable (IClusterable),WICKET-5670,12733233,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,sebfz1,sebfz1,11/Aug/14 13:26,12/Aug/14 08:48,14/Mar/19 03:09,11/Aug/14 13:29,7.0.0-M2,,,,,,,,,,,6.17.0,7.0.0-M3,,wicket-native-websocket,,,,,,,,,,,0,,,,,,"IKey not serializable whereas it is supposed to be.

this.add(new WebSocketBehavior() {
    private static final long serialVersionUID = 1L;

    @Override
    protected void onConnect(ConnectedMessage message)
    {
        super.onConnect(message);
       
        LOG.info(""Client connected"");
       
        applicationName = message.getApplication().getName();
        sessionId = message.getSessionId();
        key = message.getKey();
    }
});

Leads to:
private org.apache.wicket.protocol.ws.api.registry.IKey
MyPage.key [class=org.apache.wicket.protocol.ws.api.registry.PageIdKey] <----- field that is causing the problem

If you could update the wicket guide in the same time (the usage of the key), it would be nice!
http://wicket.apache.org/guide/guide/nativewebsockets.html#nativewebsockets_2

Thanks in advance,
Sebastien",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2014-08-11 13:29:12.469,,,no_permission,,,,,,,,,,,,411261,,,Tue Aug 12 08:48:02 UTC 2014,,,,,,0|i1yr5z:,411253,,,,,,,,"11/Aug/14 13:29;jira-bot;Commit 520aea93bd8bf87886bf307ac2f052d06a1a1d71 in wicket's branch refs/heads/wicket-6.x from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=520aea9 ]

WICKET-5670 org.apache.wicket.protocol.ws.api.registry.IKey should be Serializable (IClusterable)
","11/Aug/14 13:29;jira-bot;Commit a01cd9d9353a1749ee85cf248ab71871e230f873 in wicket's branch refs/heads/5539-named-parameters-type from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a01cd9d ]

WICKET-5670 org.apache.wicket.protocol.ws.api.registry.IKey should be Serializable (IClusterable)
","11/Aug/14 13:29;jira-bot;Commit 1cad058ebb1a23338ddbb5e398f02e3390d40d4c in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=1cad058 ]

WICKET-5670 org.apache.wicket.protocol.ws.api.registry.IKey should be Serializable (IClusterable)

(cherry picked from commit a01cd9d9353a1749ee85cf248ab71871e230f873)
","11/Aug/14 14:07;sebfz1;Verified, thanks a lot!","12/Aug/14 08:48;jira-bot;Commit a01cd9d9353a1749ee85cf248ab71871e230f873 in wicket's branch refs/heads/master from [~mgrigorov]
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a01cd9d ]

WICKET-5670 org.apache.wicket.protocol.ws.api.registry.IKey should be Serializable (IClusterable)
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Problem with setting of IComponentInheritedModel and FLAG_INHERITABLE_MODEL,WICKET-5655,12730734,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,svenmeier,rza,rza,30/Jul/14 09:21,30/Jul/14 20:59,14/Mar/19 03:09,30/Jul/14 20:59,6.16.0,,,,,,,,,,,6.17.0,7.0.0-M3,,wicket,,,,,,,,,,,0,,,,,,"Described in the mailing list:
[http://mail-archives.apache.org/mod_mbox/wicket-users/201407.mbox/%3CCAF2_608c8TOZjprV8Md15KJpRET6YQdXHe%3DwRzF-y5G_zAXcDg%40mail.gmail.com%3E]

I'm aware of the another issue ([https://issues.apache.org/jira/browse/WICKET-3413]) which dealt with the exact same code - and I believe there was a mistake in the solution that leads to this issue.

Please see the attached quickstart (including a JUnit test) to reproduce the error.",,,,,,,,,,,,,,,,,30/Jul/14 09:23;rza;ComponentInheritedModel_Error_Quickstart.zip;https://issues.apache.org/jira/secure/attachment/12658622/ComponentInheritedModel_Error_Quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2014-07-30 20:58:42.23,,,no_permission,,,,,,,,,,,,408807,,,Wed Jul 30 20:59:23 UTC 2014,,,,,,0|i1yc9b:,408805,,,,,,,,"30/Jul/14 20:58;jira-bot;Commit 611dffb273f0cc4aba32af335a0dd72b9733ea7d in wicket's branch refs/heads/wicket-6.x from svenmeier
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=611dffb ]

WICKET-5655 clear FLAG_INHERITABLE_MODEL reliably","30/Jul/14 20:59;jira-bot;Commit d558004bb386c1b736d9d3a8592d465893f8ed96 in wicket's branch refs/heads/master from svenmeier
[ https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=d558004 ]

WICKET-5655 clear FLAG_INHERITABLE_MODEL reliably","30/Jul/14 20:59;svenmeier;FLAG_INHERITABLE_MODEL is now reliably cleared, for CompoundPropertyModels too.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AutoCompleteTextField can only complete text that is visible on screen browser screen ,WICKET-5609,12718394,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,bitstorm,lech123,lech123,04/Jun/14 15:32,11/Jul/14 12:33,14/Mar/19 03:09,11/Jul/14 12:33,6.16.0,7.0.0-M2,,,,,,,,,,6.17.0,7.0.0-M3,,,,,,,,,,,,,0,,,,,,"AutoCompleteTextField can only complete text that is visible on screen. If autocomplete-hints drop-down text below visible page, then after scroll-down and click text is not completed. When AutoCompleteTextField is present at the bottom then any choice below ~50 cannot be selected.

This bug exist since Wicket 6.9.1 (6.15.0 still present)",,,,,,,,,,,,,,,,,05/Jun/14 07:15;lech123;WICKET-5609_1.png;https://issues.apache.org/jira/secure/attachment/12648436/WICKET-5609_1.png,05/Jun/14 07:15;lech123;WICKET-5609_2.png;https://issues.apache.org/jira/secure/attachment/12648437/WICKET-5609_2.png,19/Jun/14 12:21;bitstorm;calerr.tar.gz;https://issues.apache.org/jira/secure/attachment/12651407/calerr.tar.gz,,,,,,3.0,,,,,,,,,,,,,,,,,,,2014-06-04 15:45:15.616,,,no_permission,,,,,,,,,,,,396593,,,Fri Jul 11 12:32:50 UTC 2014,,,,,,0|i1wa2f:,396714,,,,,,,,04/Jun/14 15:33;lech123;[^calerr.7z | https://issues.apache.org/jira/secure/attachment/12648335/calerr.7z] Source code containing x2 bugs  ([7-zip | http://www.7-zip.org/] is required to extract). This is second bug.,"04/Jun/14 15:45;mgrigorov;The description is not very clear to me.
Can you please re-phrase it ? Thanks !","05/Jun/14 07:14;lech123;I attached example [^calerr.7z | https://issues.apache.org/jira/secure/attachment/12648335/calerr.7z] - case 2 . Try to pick the last one choice.
{quote}
Can you please re-phrase
{quote}
Yes.
AutoCompleteTextField has choices. If choices doesn't fit on screen then any of it cannot be selected by click. 

For example:
On the  [^WICKET-5609_1.png] the last visible object on screen is ""10040"" and it's the last that you can select. If you scroll down (using a mouse wheel) and you try to click on ""10041"" or any below ( [^WICKET-5609_1.png]) then choices list disappear without selecting clicked text (without autocomplete it).Screenshots are from attached example.

The worst case scenario is when you have AutoCompleteTextField on the bottom of a page. You can scroll down and pick some of objects, however the list of selectable objects is very short.  ","16/Jun/14 18:51;bitstorm;I reproduced the issue on Chrome while on Firefox everything looks fine. The problem is at line 99 of wicket-autocomplete.js. Under Chrome ignoreFocus is true and JQuery.focus() is called on the text field.
We might solve it removing line 328:

	container.onmousemove = function() {ignoreFocus = true;};

this line is related to a very old issue but I think is no more a problem. I should test it...",17/Jun/14 08:40;lech123;The issue is also present under IE 8.0,20/Jun/14 15:31;bitstorm;I've prepared a fix that works also for IE 8. However I would wait to ask Sven what ignoreFocus is about. I've seen that he introduced it for WICKET-5055.,"11/Jul/14 11:34;svenmeier;I've just tried to give the variable a better name: previously it was named 'mouseactive' and was introduced with WICKET-1350/WICKET-1351.

I'm fine with your fix, wicket-autocomplete.js is too complicated for my taste.","11/Jul/14 12:32;bitstorm;Agree, too much ""entropy"" in it. :)",,,,,,,,,,,,,,,,,,,,,,,,,
DropDownChoice#wantsOnSelectionChangedNotifications(T) not being called on unmounted page,WICKET-5596,12715201,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,sbotting,sbotting,19/May/14 15:55,19/May/14 21:13,14/Mar/19 03:09,19/May/14 21:13,6.14.0,6.15.0,7.0.0-M1,,,,,,,,,6.16.0,7.0.0-M2,,,,,,,,,,,,,0,,,,,,"I posted on nabble about this here: 
http://apache-wicket.1842946.n4.nabble.com/wantsOnSelectionChangedNotifications-RadioGroup-Radio-vs-DropDownChoice-td4665927.html

Essentially on an unmounted bookmarkable page (one that you access directly through: wicket/bookmarkable/package.name.ClassName)
the DropDownChoice#wantsOnSelectionChangedNotifications(T) does not seem to be called.

Having looked at the internals a bit, it seems that the onchange handler is not setting a variable that resolves properly to any ListenerInterfaceRequestHandler
e.g.: 
the onchange is: 

document.getElementById(&#039;form6_hf_0&#039;).value=&#039;../../page?2-1.IOnChangeListener-form-vegetable&#039;;document.getElementById(&#039;form6&#039;).submit();

but should be something like: 
document.getElementById(&#039;form6_hf_0&#039;).value=&#039;./wicket_issue_4.FormPage?2-1.IOnChangeListener-form-vegetable&#039;;document.getElementById(&#039;form6&#039;).submit();

That's just my initial thought, I'm no expert.  

Please look at the posting on nabble // Wicket Users Forum for more contextual information","Windows 7, Jetty, Wicket 6.14.0 & Wicket 6.15.0 Java 1.6 ",,,,,,,,,,,,,,,,19/May/14 15:57;sbotting;wicket_issue_4.tar.gz;https://issues.apache.org/jira/secure/attachment/12645577/wicket_issue_4.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,393487,,,Mon May 19 15:57:39 UTC 2014,,,,,,0|i1vraf:,393652,,,,,,,,19/May/14 15:57;sbotting;this is the quickstart that shows the problem described in WICKET-5596,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxFormValidatingBehavior attempts to update non-visible feedback panels,WICKET-5593,12714464,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,bitstorm,alexander,alexander,15/May/14 11:59,18/May/14 16:55,14/Mar/19 03:09,18/May/14 16:55,6.14.0,,,,,,,,,,,6.16.0,7.0.0-M2,,wicket,,,,,,,,,,,0,,,,,,"AjaxFormValidatingBehavior#addFeedbackPanels adds all feedback panels on the page to the AjaxRequestTarget, without any check for visibility in the hierarchy or lack of output MarkupId.

As the behaviour is so broad it should probably have an added check:
if ( component.isVisibleInHierarchy()) {
  target.add(component);
} else {
  visit.dontGoDeeper();
}",,,,,,,,,,,,,,,,,15/May/14 12:01;alexander;foo.rar;https://issues.apache.org/jira/secure/attachment/12645003/foo.rar,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2014-05-18 16:55:22.969,,,no_permission,,,,,,,,,,,,392777,,,Sun May 18 16:55:22 UTC 2014,,,,,,0|i1vn07:,392953,,,,,,,,15/May/14 12:01;alexander;Attaching a simple page demonstrating how it would fail. Feedback panel is a child of a WebMarkupContainer with setVisible(false);,18/May/14 16:55;bitstorm;Applied suggested fix,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ServletWebResponse#encodeUrl() makes absolute Urls relative,WICKET-5582,12712605,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,svenmeier,svenmeier,svenmeier,06/May/14 15:40,15/Oct/16 18:57,14/Mar/19 03:09,08/May/14 15:42,6.15.0,7.0.0-M1,,,,,,,,,,6.16.0,7.0.0-M2,,wicket,,,,,,,,,,,0,,,,,,"When an absolute (full) URL is passed to ServletWebResponse#encodeUrl(), it will be returned relative if the container encodes a session ID.",,,,,,,,,,,,,,,WICKET-6253,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2014-05-07 13:09:44.453,,,no_permission,,,,,,,,,,,,390921,,,Thu May 08 15:42:59 UTC 2014,,,,,,0|i1vbyn:,391156,,,,,,,,"06/May/14 17:28;svenmeier;ServletWebResponse is changed now, so absolute URLs stay absolute.","07/May/14 13:09;bitstorm;There is a problem with encodeRedirectURL. It could be called when RequestCycle has already been detached. For example when WicketFilter.processRequestCycle calls webResponse.flush(). 
We should check if RequestCycle.get() != null or we could create a new UrlRenderer as we did before.
Too see the problem you can use the quickstart project from WICKET-5578 ",08/May/14 15:42;bitstorm;Solved by Sven with commit 0e44f3df8b2bf1029e14babbb74af0a28d3917d4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket:enclosure on wicket:extend - Detach called on component with id '0' while it had a non-empty queue,WICKET-5579,12712525,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,sebfz1,sebfz1,06/May/14 08:23,27/Jul/14 12:54,14/Mar/19 03:09,07/May/14 07:38,7.0.0-M1,,,,,,,,,,,7.0.0-M2,,,wicket,,,,,,,,,,,0,,,,,,"A page with wicket:extend and wicket:enclosure leads to a runtime exception

    <wicket:extend>
        <wicket:enclosure child=""label"">
            The label: <span wicket:id=""label"">[label]</span>
        </wicket:enclosure>
    </wicket:extend>

--
ERROR - RequestAdapter             - Error detaching page
org.apache.wicket.WicketRuntimeException: Detach called on component with id '0' while it had a non-empty queue: ComponentQueue{queueSize=1, queue=[[Enclosure [Component id = wicket_enclosure0]], null, null, null, null, null, null, null]}
    at org.apache.wicket.MarkupContainer.onDetach(MarkupContainer.java:1961)
    at org.apache.wicket.Page.onDetach(Page.java:868)
    at org.apache.wicket.Component.detach(Component.java:1145)
    at org.apache.wicket.page.RequestAdapter.commitRequest(RequestAdapter.java:156)
    at org.apache.wicket.page.AbstractPageManager.commitRequest(AbstractPageManager.java:82)
    at org.apache.wicket.page.PageManagerDecorator.commitRequest(PageManagerDecorator.java:73)
    at org.apache.wicket.page.PageAccessSynchronizer$2.commitRequest(PageAccessSynchronizer.java:258)
    at org.apache.wicket.Application$2.onDetach(Application.java:1648)
    at org.apache.wicket.request.cycle.RequestCycleListenerCollection$3.notify(RequestCycleListenerCollection.java:105)
    at org.apache.wicket.request.cycle.RequestCycleListenerCollection$3.notify(RequestCycleListenerCollection.java:101)
    at org.apache.wicket.util.listener.ListenerCollection$1.notify(ListenerCollection.java:120)
    at org.apache.wicket.util.listener.ListenerCollection.reversedNotify(ListenerCollection.java:144)
    at org.apache.wicket.util.listener.ListenerCollection.reversedNotifyIgnoringExceptions(ListenerCollection.java:113)
    at org.apache.wicket.request.cycle.RequestCycleListenerCollection.onDetach(RequestCycleListenerCollection.java:100)
    at org.apache.wicket.request.cycle.RequestCycle.onDetach(RequestCycle.java:645)
    at org.apache.wicket.request.cycle.RequestCycle.detach(RequestCycle.java:594)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:297)
    at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:261)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:203)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:284)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
",tomcat7,,,,,,,,,,,,,,,,06/May/14 08:24;sebfz1;wicket7-wicket_enclosure.zip;https://issues.apache.org/jira/secure/attachment/12643505/wicket7-wicket_enclosure.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2014-05-06 19:05:33.309,,,no_permission,,,,,,,,,,,,390841,,,Sun Jul 27 12:54:58 UTC 2014,,,,,,0|i1vbh3:,391077,,,,,,,,06/May/14 08:24;sebfz1;Attached quickstart,06/May/14 19:05;bitstorm;I guess the problem is related to the new component queuing feature introduced by Igor.,"07/May/14 07:38;mgrigorov;Fixed by ""skipping"" <wicket:child> instead of dequeueing them.","27/Jul/14 12:54;sebfz1;Verified on latest SNAPSHOT, thank you very much!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FilterToolbar generics broken,WICKET-5573,12710719,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,lgawron,lgawron,26/Apr/14 13:46,16/May/14 08:51,14/Mar/19 03:09,16/May/14 08:51,6.15.0,,,,,,,,,,,6.16.0,7.0.0-M2,,wicket-extensions,,,,,,,,,,,0,,,,,,"Once you were able to create DataTable<User> wrapped inside of
FilterForm<UserFilterDto>

currently FilterToolbar requires you for those two types to be identical:

{code}
public <T, S> FilterToolbar(final DataTable<T, S> table, final
FilterForm<T> form,
final IFilterStateLocator<T> stateLocator)
{code}

It looks like commit 9b3f9ca1df064fe9c6fde64ccc37fecc504b09a6
introduced a bug long time ago and it carried on:

{code}
-       public <T> FilterToolbar(final DataTable<?> table, final
FilterForm<T> form,
+       public <T> FilterToolbar(final DataTable<T> table, final
FilterForm<T> form,
{code}

FilterToolbar constructor should state:

{code}
public <T, F, S> FilterToolbar(final DataTable<T, S> table, final
FilterForm<F> form,
final IFilterStateLocator<F> stateLocator)
{code}",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2014-04-28 20:09:41.619,,,no_permission,,,,,,,,,,,,389040,,,Fri May 16 08:51:31 UTC 2014,,,,,,0|i1v0hj:,389286,,,,,,,,"28/Apr/14 20:09;mgrigorov;Please attach a quickstart app that is broken with 6.15.0 and working with your patch.
Thanks!","02/May/14 20:08;lgawron;Martin, if I created a quickstart app it wouldn't event compile with 6.15.

The rationale for this functionality is give here: http://markmail.org/message/bmz7x4ingzzvwfo4

The change is dead simple:

{code}
diff --git c/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/repeater/data/table/filter/FilterToolbar.java i/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/repeater/data/table/filter/FilterToolbar.java
index ebea180..22d2d1b 100644
--- c/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/repeater/data/table/filter/FilterToolbar.java
+++ i/wicket-extensions/src/main/java/org/apache/wicket/extensions/markup/html/repeater/data/table/filter/FilterToolbar.java
@@ -57,8 +57,8 @@ public class FilterToolbar extends AbstractToolbar
 	 *            type of filter state object
 	 * 
 	 */
-	public <T, S> FilterToolbar(final DataTable<T, S> table, final FilterForm<T> form,
-		final IFilterStateLocator<T> stateLocator)
+	public <T, F, S> FilterToolbar(final DataTable<T, S> table, final FilterForm<F> form,
+		final IFilterStateLocator<F> stateLocator)
 	{
 		super(table); 
 {code}

This actually did work in 1.4.19",11/May/14 15:08;bitstorm;If there are no objection I will change the code as proposed by Leszek,11/May/14 19:24;mgrigorov;Change it in master (7.x) and add an example please.,"13/May/14 21:16;bitstorm;I've changed the  code and added an example. To see it go to 'repeaters' and you will find a new 'DataTable Example - demonstrates data table component with a FilterToolbar on its data set'
I think it can be cherry-picked to 6.x with no problem ","14/May/14 08:54;mgrigorov;The change in the generics signature may cause compilation errors in 6.x, no ?","14/May/14 13:38;bitstorm;The problem occurs if we have a subclass of FilterToolbar, but client code should have no problem.","14/May/14 13:40;bitstorm;..but yes,  clirr-maven-plugin is complaining that FilterToolbar constructor has changed :(","14/May/14 14:48;bitstorm;Sorry, my fault. There is no problem with  clirr-maven-plugin. I think this change is perfectly safe",16/May/14 08:51;bitstorm;Fix ported to 6.x,,,,,,,,,,,,,,,,,,,,,,,
PackageMapper - Could not resolve class,WICKET-5565,12709575,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,sebfz1,sebfz1,21/Apr/14 16:45,27/Jul/14 12:59,14/Mar/19 03:09,24/Apr/14 12:32,7.0.0-M1,,,,,,,,,,,7.0.0-M1,,,wicket,,,,,,,,,,,0,,,,,,"It seems that the PackageMapper try to resolve much more than it is supposed to do, for instance if I've 2 pages test1/TestPage1 and test2/TestPage2 then it tries to resolve test2/TestPage1 when I reach the page1... 

WARN  - WicketObjects              - Could not resolve class [com.mycompany.test2.TestPage1]
java.lang.ClassNotFoundException: com.mycompany.test2.TestPage1
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:270)
    at org.apache.wicket.application.AbstractClassResolver.resolveClass(AbstractClassResolver.java:108)
    at org.apache.wicket.core.util.lang.WicketObjects.resolveClass(WicketObjects.java:71)
    at org.apache.wicket.core.request.mapper.AbstractComponentMapper.getPageClass(AbstractComponentMapper.java:134)
    at org.apache.wicket.core.request.mapper.PackageMapper.parseRequest(PackageMapper.java:152)
    at org.apache.wicket.core.request.mapper.AbstractBookmarkableMapper.mapRequest(AbstractBookmarkableMapper.java:322)
    at org.apache.wicket.request.mapper.CompoundRequestMapper.mapRequest(CompoundRequestMapper.java:152)
    at org.apache.wicket.request.cycle.RequestCycle.resolveRequestHandler(RequestCycle.java:189)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:219)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:293)
    at org.apache.wicket.protocol.http.WicketFilter.processRequestCycle(WicketFilter.java:261)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:203)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:284)",Tomcat7,,,,,,,,,,,,,,,,21/Apr/14 16:52;sebfz1;issue-wicket7.zip;https://issues.apache.org/jira/secure/attachment/12641078/issue-wicket7.zip,01/May/14 13:47;sebfz1;wicket7-packagemapper.zip;https://issues.apache.org/jira/secure/attachment/12642834/wicket7-packagemapper.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2014-04-24 12:27:16.523,,,no_permission,,,,,,,,,,,,387897,,,Sun Jul 27 12:59:52 UTC 2014,,,,,,0|i1utkn:,388158,,,,,,,,"21/Apr/14 16:52;sebfz1;Attached quickstart
Repro step: on the homepage, click the link ""go to page 1"", check the console/log
",24/Apr/14 12:27;bitstorm;Method getCompatibilityScore of PackageMapper is not correct. I've ported the missing code from the old class MountMapper.,"24/Apr/14 12:34;mgrigorov;Maybe org.apache.wicket.core.request.mapper.MountedMapper#getCompatibilityScore should be moved to org.apache.wicket.core.request.mapper.AbstractBookmarkableMapper#getCompatibilityScore ?

Since a while the code that manages the mandatory and optional segments has been moved to AbstractBookmarkableMapper, so all specializations of ABM should have it. We will need tests to verify that!",24/Apr/14 13:25;bitstorm;mmm...don't know. Each subclass  of ABM has its own version of getCompatibilityScore so maybe we can leave it as abstract.,"25/Apr/14 07:33;mgrigorov;I have moved MountedMapper's #getCompatibilityScore() to ABM.
Now PackageMapper calculates more correct score when there are optional parameters in the mount path. See WICKET-5056.","01/May/14 13:43;sebfz1;Hi Martin & Andrea,

Just tried with latest snapshot, it is partially fixed: wicket still try to resolve my css theme folder.
I am attaching a new quickstart because this use case was not on the previous one...

Thanks in advance,
Sebastien.","01/May/14 13:45;sebfz1;Attached new quickstart
Repro steps: just go to the homepage, check the java console","05/May/14 12:26;bitstorm;Hi,

I've improved the solution with this commit https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commitdiff;h=e613e28b;hp=406e54e1cbd24642d1c1a880527c361426d5c83c
Now it should be ok.","27/Jul/14 12:59;sebfz1;Verified on latest SNAPSHOT, thank you very much!",,,,,,,,,,,,,,,,,,,,,,,,
A 404 error occurs when using a CryptoMapper,WICKET-5560,12708825,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,papegaaij,dirk.reichelt,dirk.reichelt,16/Apr/14 16:33,30/Sep/14 16:11,14/Mar/19 03:09,05/May/14 17:36,6.14.0,7.0.0-M1,,,,,,,,,,6.16.0,7.0.0-M2,,wicket,,,,,,,,,,,0,,,,,,"Under certain prerequisites a 404 error occurs.

The prerequisites are:
- A _CryptoMapper_ is used as _RequestMapper_
- _SecuritySettings.enforceMounts_ is set to true
- Class _SomePage_ is *not* annotated with _@MountPath_

Reason:
In _BookmarkableMapper.parseRequest_ (called indirectly by _CryptoMapper.mapRequest_) the method _matches_ returns _false_,
as _reverseUrl_ is the *encrypted URL* (_rootRequestMapper_ is a _CryptoMapper_) but _BookmarkableMapper.matches_ expects a *decrypted URL*.

_BookmarkableMapper_ - lines 132 ff.:
{code}
Url reverseUrl = application.getRootRequestMapper().mapHandler(
	new RenderPageRequestHandler(new PageProvider(pageClass)));
if (!matches(request.cloneWithUrl(reverseUrl)))
{
	return null;
}
{code}
	
As a result _BookmarkableMapper.mapRequest_ and hence _CryptoMapper.mapRequest_ returns _null_ resulting in a 404 error.
",,,,,,,,,,,,,,,,,03/May/14 17:42;bitstorm;wicket5560.patch;https://issues.apache.org/jira/secure/attachment/12643218/wicket5560.patch,17/Apr/14 11:58;dirk.reichelt;wicket5560.zip;https://issues.apache.org/jira/secure/attachment/12640618/wicket5560.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2014-04-17 07:49:00.655,,,no_permission,,,,,,,,,,,,387148,,,Mon May 05 12:46:59 UTC 2014,,,,,,0|i1uoy7:,387411,,,,,,,,"17/Apr/14 07:49;mgrigorov;Please provide a quickstart application that shows the issue (http://wicket.apache.org/start/quickstart.html).
Please try to create it without @MountPath because this is not part of Wicket distro and thus is not officially supported by us.
Thanks!","17/Apr/14 12:02;dirk.reichelt;Attachment wicket5560.zip contains a quickstart app showing the bug.
(click on ""Click here"" in the HomePage to trigger the 404 error)
TestHomePage contains a test that fails due to the bug.",27/Apr/14 17:27;bitstorm;A possible solution could be to use method checkPageClass of AbstractBookmarkableMapper to see if the page class is mounted. See patch (for branch master!).,03/May/14 17:39;bitstorm;I've improved my patch and I've added Sven to this issue since he solved WICKET-5094. Please review my solution.,"05/May/14 06:09;svenmeier;My 'fix' to WICKET-5094 does not work here - my bad :/,

Thanks for the patch, it looks good to me.
I don't like the method name #isMapperMounted() though. Couldn't we just test whether any other non-BookmarkableMapper accepts the pageClass:

  if (requestMapper instanceof AbstractBookmarkableMapper && requestMapper != this)
  {
    AbstractBookmarkableMapper mapper = (AbstractBookmarkableMapper) requestMapper;  
    if(mapper.checkPageClass(pageClass))
    {
      return true;
    }
  }
","05/May/14 12:46;bitstorm;Yes, I guess we can keep it simpler with your suggestion. I will try to commit a fix with a test as soon as possible. ",,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong JavaDoc for WicketTester,WICKET-5478,12690013,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,o.b.fischer,o.b.fischer,21/Jan/14 12:40,05/Aug/17 21:10,14/Mar/19 03:09,21/Jan/14 12:49,6.13.0,,,,,,,,,,,6.14.0,7.0.0-M1,,wicket,,,,,,,,,,,0,doc,javadoc,,,,"The JavaDoc of {{WicketTester}} gives the following code example;

 public void testRenderYourPage()
 {
        // provide page instance source for WicketTester
        tester.startPage(new TestPageSource()
        {
                public Page getTestPage()
                {
                        return new YourPage(""mock message"");
                }
        });
        tester.assertRenderedPage(YourPage.class);
        tester.assertLabel(""yourMessage"", ""mock message"");
        // assert feedback messages in INFO Level
        tester.assertInfoMessages(new String[] { ""Wicket Rocks ;-)"" });
 }

This example seems to be invalid since neither the class TestPageSource exists nor a fitting method in WicketTester.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,368970,,,2014-01-21 12:40:39.0,,,,,,0|i1rlfz:,369274,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket-native-websocket does not work with Safari/Safari iOS,WICKET-5409,12678087,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,lorentzg,lorentzg,07/Nov/13 21:38,03/Dec/13 08:53,14/Mar/19 03:09,13/Nov/13 10:36,6.11.0,,,,,,,,,,,6.13.0,7.0.0-M1,,wicket-native-websocket,,,,,,,,,,,0,,,,,,"I noticed issue when tried this sample app: https://github.com/martin-g/blogs/tree/master/wicket6-websocket-broadcast

Browsers I tried:
Firefox v25.0
Chrome v30.0.1599.101
Safari v6.1

Broadcast example seems to be not working with Safari:
Firefox - works (broadcast messages displayed),
Chrome - works,
Safari - no broadcast messages displayed, console shows error: WebSocket connection to 'ws://localhost:8080/feed?0&pageId=0&wicket-ajax-baseurl=feed?0' failed: Error during WebSocket handshake: 'Connection' header value is not 'Upgrade'

After bunch of different tests, decided to create basic wicket quickstart app - one home page with WebSocketBehaviour added, got same results:
Firefox - works (no errors in console, websocket connection estabished),
Chrome - works,
Safari - websocked connection fails, console shows error: WebSocket connection to 'ws://localhost:8080/?0&pageId=0&wicket-ajax-baseurl=?0' failed: Error during WebSocket handshake: 'Connection' header value is not 'Upgrade'

Another example (jetty chat app on websockets, unrelated to wicket) that I tested with minor fixes (upgraded to 7.6.9 jetty): http://webtide.intalio.com/wp-content/uploads/2011/08/example-websocket.zip
Chat example works for all three browsers: Firefox, Chrome and Safari.

Seems that wicket-native-websocket integration has issues with Safari.",,,,,,,,,,,,,,,,,07/Nov/13 21:42;lorentzg;Screen Shot 2013-11-07 at 11.41.06 PM.png;https://issues.apache.org/jira/secure/attachment/12612711/Screen+Shot+2013-11-07+at+11.41.06+PM.png,09/Nov/13 13:29;lorentzg;double_upgrade_header.pcapng;https://issues.apache.org/jira/secure/attachment/12612988/double_upgrade_header.pcapng,07/Nov/13 21:39;lorentzg;wicket-quickstart-websocket.zip;https://issues.apache.org/jira/secure/attachment/12612710/wicket-quickstart-websocket.zip,,,,,,3.0,,,,,,,,,,,,,,,,,,,2013-11-08 08:42:32.213,,,no_permission,,,,,,,,,,,,357462,,,Tue Dec 03 08:53:31 UTC 2013,,,,,,0|i1pmfr:,357752,,,,,,,,07/Nov/13 21:39;lorentzg;Basic quickstart app + websocket behaviour on home page.,07/Nov/13 21:42;lorentzg;Safari console screenshot with websocket connection errors.,"08/Nov/13 08:42;mgrigorov;I won't be able to debug this problem.
AFAIS there is no Safari 6.x for Windows and I don't have Mac or an image for VirtualBox.
I can test it only with Safari 5.1.x on Windows. Last time I checked it worked.","08/Nov/13 13:25;lorentzg;Any suggestions what could be causing this issue? I'm not really into wicket-native-websocket integration implementation, so some introduction would help.","08/Nov/13 13:37;mgrigorov;This is the docu we have: https://cwiki.apache.org/confluence/display/WICKET/Wicket+Native+WebSockets. It doesn't explain much of the implementation details though.
To debug the problem you will have to put a breakpoint in the specialization of WicketFilter for the web container that you use. 
https://github.com/apache/wicket/blob/master/wicket-experimental/wicket-native-websocket/wicket-native-websocket-jetty/src/main/java/org/apache/wicket/protocol/ws/jetty/Jetty7WebSocketFilter.java?source=cc#L74

I guess the browser doesn't send some info for the handshake (request upgrade).
Try also with newer versions of Jetty - 7.6.9 is a bit old. 

https://github.com/apache/wicket/blob/master/wicket-experimental/wicket-native-websocket/wicket-native-websocket-javax/src/test/java/org/apache/wicket/protocol/ws/javax/Start.java (master branch!) starts Jetty 9.1.x at port 8080 and you can test it without any additional setup.","09/Nov/13 13:29;lorentzg;I did attach wireshark capture file for req/resp of quickstart websock app with 0.13 native integration lib on jetty 7.6.9 with Safari 6.1.

What I see that after upgrade request, wicket websock app response had Connection: Upgrade, however - twice. After debugging I see that AbstractUpgradeFilter (line 124 and 125) does:

124: resp.setHeader(""upgrade"", ""websocket"");
125: resp.setHeader(""connection"", ""upgrade"");

later on Jetty 7.6.9 , WebSocketServletConnectionRFC6455 (lines 44 and 45) does almost the same:

44: response.setHeader(""Upgrade"",""WebSocket"");
45: response.addHeader(""Connection"",""Upgrade"");

So response now has x2 Connection: Upgrade values. Commenting out lines 124 and 125 in AbstractUpgradeFilter and testing showed that Safari 6.1 does not shows any errors and sample apps work as expected (quickstart websock and websock broadcast).

So seems that x2 Connection: Upgrade values break Safari 6.1. Currently I assume that fix should be to remove 124 and 125 lines for AbstractUpgradeFilter as this is handled by WebSocketServletConnectionRFC6455 and I would assume that other connection types in Jetty should behave similarly and do setup of headers correctly (however assumption needs to be confirmed).","09/Nov/13 21:50;mgrigorov;Thanks for the investigation!
I'll take a look soon.

Can you test with a newer Jetty in the meantime, e.g. 7.6.14 or even better 8.1.14 ?","12/Nov/13 16:58;lorentzg;Skipped jetty-7.6.14 and 8.x, retested previous scenario with : jetty-9.0.6.v20130930, wicket 6.12.0, wicket-native-websocket 0.14 with patched Jetty9UpgradeHttpRequest - replaced usage of org.eclipse.jetty.websocket.server.ServletWebSocketRequest (deprecated) with org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest - otherwise above setup crashes on opening of the page:

Caused by: java.lang.IllegalStateException: org.eclipse.jetty.websocket.server.ServletWebSocketRequest has no 'req' field!
	at org.apache.wicket.protocol.ws.jetty9.Jetty9UpgradeHttpRequest.<clinit>(Jetty9UpgradeHttpRequest.java:41)
	... 25 more
Caused by: java.lang.NoSuchFieldException: req
	at java.lang.Class.getDeclaredField(Class.java:1938)
	at org.apache.wicket.protocol.ws.jetty9.Jetty9UpgradeHttpRequest.<clinit>(Jetty9UpgradeHttpRequest.java:38)
	... 25 more

Please, fix this deprecation issue too :-)

Results are the same as described previously AbstractUpgradeFilter puts dublicate ""Connection: Upgrade"" entry into header which causes Safari 6.1 to show error ""failed: Error during WebSocket handshake: 'Connection' header value is not 'Upgrade' "" and disconnect websocket. Removing of line 124 and 125, from abstract upgrade filter resulted in upgrade response with valid header (no duplicate entries) and correct behavior of Safari.

At the moment do not have jetty 9.1.x setup, did not test it. Also I would rather not use 9.1.x for production - is not officially stable yet.","13/Nov/13 09:24;mgrigorov;I am not sure what you have tested and what is actually released with wicket-native-websocket-jetty9:0.14 but I have fixed the deprecation 4 months ago:
https://github.com/apache/wicket/commit/3b787e14ab1d64fcef83952a706675ad8d697095
",13/Nov/13 09:29;mgrigorov;OK. The problem is located. The fix is not downported to wicket-6.x ...,"13/Nov/13 10:36;mgrigorov;Fixed.
The headers are set explicitly only for Tomcat7WebSocketFilter.
Some improvements have been downported from master branch.

Please retest with latest 6.13.0-SNAPSHOT if you can. You can use http://wicket.apache.org/start/quickstart.html to generate a quickstart.
Thanks!","13/Nov/13 11:36;lorentzg;Martin, 

Retested quickstart scenario with : jetty-9.0.6.v20130930, wicket 6.13.0-SNAPSHOT, wicket-native-websocket 0.15-SNAPSHOT - Firefox, Chrome and Safari work as expected, WebSocket connection is established and messaged can be passed. Also wicket-native-websocket 0.15-SNAPSHOT, has no deprecated Jetty class usage issues.

Thank you for fixing this issue. :)

Regards,
Lorentz",03/Dec/13 08:53;lorentzg;works in expected setup and provided scenario,,,,,,,,,,,,,,,,,,,,
IE7: AutoCompleteTextField inside a ModalWindow shows auto complete dropdown behind ModalWindow,WICKET-5379,12671291,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,alexgrant,alexgrant,29/Sep/13 23:43,16/Nov/13 03:25,14/Mar/19 03:09,15/Nov/13 07:24,6.11.0,6.9.1,,,,,,,,,,6.13.0,7.0.0-M1,,,,,,,,,,,,,0,,,,,,"Similar scenario to WICKET-5378 - Create a ModalWindow, add an AutoCompleteTextField. Use IE7 and open the ModalWindow. Enter text in the AutoCompleteTextField, and depending on the size of your ModalWindow you might not see anything, because the dropdown suggestions list appears behind the ModalWindow (the z-index is wrong).

Although this bug is present in 6.11.0, my quickstart uses 6.9.1 because it is easier to see the bug there as WICKET-5378 obscures it in 6.11.0 by moving the dropdown suggestions far away from the ModalWindow. But if you want to see it in 6.11.0, change the wicket.version in the POM and resize the ModalWindow to be larger (so that it at least partically covers the area where the dropdown suggestions list appears).",,,,,,,,,,,,,,WICKET-5378,,,12/Nov/13 21:22;alexgrant;WICKET-5379-6.12.0.zip;https://issues.apache.org/jira/secure/attachment/12613426/WICKET-5379-6.12.0.zip,29/Sep/13 23:56;alexgrant;WICKET-5379-quickstart.zip;https://issues.apache.org/jira/secure/attachment/12605842/WICKET-5379-quickstart.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2013-11-14 22:23:08.162,,,no_permission,,,,,,,,,,,,350997,,,Sat Nov 16 03:25:09 UTC 2013,,,,,,0|i1oiof:,351288,,,,,,,,"29/Sep/13 23:56;alexgrant;Attached a quickstart, WICKET-5379-quickstart.zip.","12/Nov/13 21:22;alexgrant;This does not appear to be fixed in 6.12.0.
I have attached a new quickstart (WICKET-5379-6.12.0.zip) with the pom.xml updated to 6.12.0 that still shows the problem.

I do not have Reopen permissions so I'll just raise a separate Jira. I hope this is the correct process.","14/Nov/13 22:23;bitstorm;IE 7 has (of course...) a problem computing the z-index of an element if its parent has no z-index explicitly set. I've changed the code of modal.js to add ""style='z-index: 20001'"" to the container div (the one with class='w_content_container') if the browser is IE7. The value 20001 is the same taken from modal.css (see div.wicket-modal ). However, I don't know where this value comes from....
If anyone has a better idea please let me know.","15/Nov/13 07:24;mgrigorov;IE7 is not supported anymore. There are 4 newer versions of IE now.

Andrea's improvement will be included in 6.13. Test current 6.13.0-SNAPSHOT and provide patch if it doesn't work for you.","15/Nov/13 20:28;alexgrant;Thank your for your help; I have tested the fix and it works for me.

We're in the process of getting our customers off IE7, hopefully this will help to speed that process up.
Is there somewhere I can point to that officially documents Wicket's supported browsers?

I assume this is a little out of date now :)
https://cwiki.apache.org/confluence/display/WICKET/FAQs#FAQs-WhichbrowsershavebeentestedwithWicketAJAX%3F",15/Nov/13 20:33;mgrigorov;The Wiki page is updated.,16/Nov/13 03:25;alexgrant;Thanks again for your help.,,,,,,,,,,,,,,,,,,,,,,,,,,
AutoCompleteTextField inside a ModalWindow shows auto complete dropdown in the wrong location,WICKET-5378,12671289,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,bitstorm,alexgrant,alexgrant,29/Sep/13 22:54,12/Nov/13 20:47,14/Mar/19 03:09,03/Oct/13 17:54,6.11.0,,,,,,,,,,,6.12.0,7.0.0-M1,,,,,,,,,,,,,0,,,,,,"If you create a ModalWindow and add a AutoCompleteTextField into it, when you type into the AutoCompleteTextField the auto complete suggestions dropdown will appear far away from the AutoCompleteTextField (down and to the left).

This quickstart works correctly in Wicket 6.9.1. It fails with an error in 6.10.0 (which I haven't raised since it doesn't occur in 6.11.0). ",,,,,,,,,,,,,,,,,29/Sep/13 22:55;alexgrant;WICKET-5378-quickstart.zip;https://issues.apache.org/jira/secure/attachment/12605832/WICKET-5378-quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,350995,,,Tue Nov 12 20:47:06 UTC 2013,,,,,,0|i1oinz:,351286,,,,,,,,"29/Sep/13 22:55;alexgrant;Attached a quickstart, WICKET-5378-quickstart.zip.","12/Nov/13 20:47;alexgrant;Much better, thank you.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CryptoMapper encrypts external URLs in ResourceReferences making the resources inaccessible,WICKET-5319,12664048,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,svenmeier,wicket.x.ttp,wicket.x.ttp,16/Aug/13 12:07,23/Aug/13 16:38,14/Mar/19 03:09,21/Aug/13 21:24,6.9.1,,,,,,,,,,,6.11.0,7.0.0-M1,,,,,,,,,,,,,0,,,,,,"Short Description: 

CryptoMapper encrypts links to resources with URLs of the form:
 - http://domain/path/script.js
 - /local/absolute/path/script.js

Additionally there might be some inconsistencies in handling URLs in instances of ResourceReference.

The problem occurs when JavaScript resources are included in the following way:

@Override
public void renderHead(IHeaderResponse response)
{
	super.renderHead(response);
	
	UrlResourceReference reference = new UrlResourceReference(Url.parse(""http://domain/path/script.js""));
	response.render(reference);
}

The resulting JavaScript links can't be loaded (404 is returned) when CryptoMapper is used.

This is a minor problem, because the following always works for JavaScript files not served by Wicket (""external JavaScript files""):

response.render(new StringHeaderItem(""<script type=\""text/javascript\"" src=\""//domain/myPath/manual.js\""></script>"");


Ways to reproduce: 

  A code example for wicket-examples is attached (example.zip)
  Local URLs:
     http://localhost:8080/enc/index
     http://localhost:8080/unenc/index


Possible fix: 

 - disable encryption for URLs beginning with '/', '<schema>://' and '//' and not served/filtered by Wicket

 (
 - define different reference classes for external files and files served/filtered by Wicket, issue warnings when a wrong URL type is supplied by the user or treat URLs beginning with '/', '<schema>://' and '//' differently
 )

Thank you
",Linux,,,,,,,,,,,,,,,,19/Aug/13 10:12;wicket.x.ttp;5319.tar.gz;https://issues.apache.org/jira/secure/attachment/12598731/5319.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2013-08-19 07:12:50.752,,,no_permission,,,,,,,,,,,,344049,,,Fri Aug 23 16:38:28 UTC 2013,,,,,,0|i1nbyn:,344351,,,,,,,,16/Aug/13 12:13;wicket.x.ttp;code example (runable in wicket-examples),"19/Aug/13 07:12;svenmeier;Please attach a runnable quickstart, thanks!",19/Aug/13 10:12;wicket.x.ttp;Quickstart added,"21/Aug/13 21:24;svenmeier;I've changed CryptoMapper to not touch full Urls.

There might be other cases still failing with UrlResourceReference pointing to resources on the same server but outside of Wicket.
But the supplied quickstart works fine now.",23/Aug/13 16:38;wicket.x.ttp;Thank you very much. I will test my code with a snapshot as soon as possible.,,,,,,,,,,,,,,,,,,,,,,,,,,,,
o.a.w.protocol.http.servlet.ServletWebRequest.getContextRelativeUrl throws NPE when posting EventBus inside Atmosphere request,WICKET-5282,12659080,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,papegaaij,ceefour,ceefour,22/Jul/13 12:22,20/Jan/14 12:48,14/Mar/19 03:09,20/Jan/14 12:48,6.10.0,6.9.1,,,,,,,,,,6.13.0,,,wicket,wicket-atmosphere,,,,,,,,,,0,,,,,,"Sometimes happens when during an Wicket-Atmosphere request, i.e. inside an Atmosphere's @Subscribe handler, we post an object to Wicket-Atmosphere's EventBus.

In all cases where it happens, it happens when EventBus.post called from a non-Wicket thread.

{code}
08:17:46.460 | ERROR | oryBean_Worker-9 | c.g.c.e.E.default                | .google.common.eventbus.EventBus  316 | Could not dispatch event: Job DEFAULT.loadToArchive execution complete at  08:17:46 07/22/2013 and reports: exitCode=COMPLETED;exitDescription=Loaded 1 CSVs to Archive as archived/2013-07-22T08:17:46.098-04:00.csv, 1 point times made stale: [2013-07-22T12:15:00.000Z] to handler [wrapper public void org.soluvas.web.site.AtmosphereApplication.bridgeToAtmosphere(java.lang.Object)]
java.lang.reflect.InvocationTargetException: null
        at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source) ~[na:na]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_15]
        at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_15]
        at com.google.common.eventbus.EventHandler.handleEvent(EventHandler.java:74) ~[guava-14.0.1.jar:na]
        at com.google.common.eventbus.SynchronizedEventHandler.handleEvent(SynchronizedEventHandler.java:45) ~[guava-14.0.1.jar:na]
        at com.google.common.eventbus.EventBus.dispatch(EventBus.java:314) [guava-14.0.1.jar:na]
        at com.google.common.eventbus.EventBus.dispatchQueuedEvents(EventBus.java:296) [guava-14.0.1.jar:na]
        at com.google.common.eventbus.EventBus.post(EventBus.java:267) [guava-14.0.1.jar:na]
        at com.quikdo.freq.job.EventBusJobListener.jobWasExecuted(EventBusJobListener.java:54) [EventBusJobListener.class:na]
        at org.quartz.core.QuartzScheduler.notifyJobListenersWasExecuted(QuartzScheduler.java:2020) [quartz-2.2.0.jar:na]
        at org.quartz.core.JobRunShell.notifyJobListenersComplete(JobRunShell.java:355) [quartz-2.2.0.jar:na]
        at org.quartz.core.JobRunShell.run(JobRunShell.java:229) [quartz-2.2.0.jar:na]
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:560) [quartz-2.2.0.jar:na]
Caused by: java.lang.NullPointerException: null
        at org.apache.wicket.protocol.http.servlet.ServletWebRequest.getContextRelativeUrl(ServletWebRequest.java:194) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.protocol.http.servlet.ServletWebRequest.<init>(ServletWebRequest.java:113) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.protocol.http.servlet.ServletWebRequest.<init>(ServletWebRequest.java:83) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.protocol.http.WebApplication.newWebRequest(WebApplication.java:448) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.atmosphere.EventBus.post(EventBus.java:337) ~[wicket-atmosphere-0.11.jar:0.11]
        at org.apache.wicket.atmosphere.EventBus.postToSingleResource(EventBus.java:317) ~[wicket-atmosphere-0.11.jar:0.11]
        at org.apache.wicket.atmosphere.EventBus.post(EventBus.java:292) ~[wicket-atmosphere-0.11.jar:0.11]
        at org.soluvas.web.site.AtmosphereApplication.bridgeToAtmosphere(AtmosphereApplication.java:53) ~[org.soluvas.web.site-2.1.0-SNAPSHOT.jar:na]
        ... 13 common frames omitted
08:17:46.465 | ERROR | ryBean_Worker-10 | c.g.c.e.E.default                | .google.common.eventbus.EventBus  316 | Could not dispatch event: Job DEFAULT.locationVisitorAggregator fired (by trigger DEFAULT.MT_3jn71esi0mkgo) at:  08:17:46 07/22/2013 to handler [wrapper public void org.soluvas.web.site.AtmosphereApplication.bridgeToAtmosphere(java.lang.Object)]
java.lang.reflect.InvocationTargetException: null
        at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source) ~[na:na]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_15]
        at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_15]
        at com.google.common.eventbus.EventHandler.handleEvent(EventHandler.java:74) ~[guava-14.0.1.jar:na]
        at com.google.common.eventbus.SynchronizedEventHandler.handleEvent(SynchronizedEventHandler.java:45) ~[guava-14.0.1.jar:na]
        at com.google.common.eventbus.EventBus.dispatch(EventBus.java:314) [guava-14.0.1.jar:na]
        at com.google.common.eventbus.EventBus.dispatchQueuedEvents(EventBus.java:296) [guava-14.0.1.jar:na]
        at com.google.common.eventbus.EventBus.post(EventBus.java:267) [guava-14.0.1.jar:na]
        at com.quikdo.freq.job.EventBusJobListener.jobToBeExecuted(EventBusJobListener.java:37) [EventBusJobListener.class:na]
        at org.quartz.core.QuartzScheduler.notifyJobListenersToBeExecuted(QuartzScheduler.java:1980) [quartz-2.2.0.jar:na]
        at org.quartz.core.JobRunShell.notifyListenersBeginning(JobRunShell.java:339) [quartz-2.2.0.jar:na]
        at org.quartz.core.JobRunShell.run(JobRunShell.java:174) [quartz-2.2.0.jar:na]
        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:560) [quartz-2.2.0.jar:na]
Caused by: java.lang.NullPointerException: null
        at org.apache.wicket.protocol.http.servlet.ServletWebRequest.getContextRelativeUrl(ServletWebRequest.java:194) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.protocol.http.servlet.ServletWebRequest.<init>(ServletWebRequest.java:113) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.protocol.http.servlet.ServletWebRequest.<init>(ServletWebRequest.java:83) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.protocol.http.WebApplication.newWebRequest(WebApplication.java:448) ~[wicket-core-6.9.1.jar:6.9.1]
        at org.apache.wicket.atmosphere.EventBus.post(EventBus.java:337) ~[wicket-atmosphere-0.11.jar:0.11]
        at org.apache.wicket.atmosphere.EventBus.postToSingleResource(EventBus.java:317) ~[wicket-atmosphere-0.11.jar:0.11]
        at org.apache.wicket.atmosphere.EventBus.post(EventBus.java:292) ~[wicket-atmosphere-0.11.jar:0.11]
        at org.soluvas.web.site.AtmosphereApplication.bridgeToAtmosphere(AtmosphereApplication.java:53) ~[org.soluvas.web.site-2.1.0-SNAPSHOT.jar:na]
        ... 13 common frames omitted
{code}

The NPE happens inside wicket-core, so hopefully wicket-core can give more detailed exception why it's doing so.

And {{org.apache.wicket.atmosphere.EventBus.post}} should probably check its arguments that may cause NPE on wicket-core's part.","happens on wicket 6.9.1 and 6.10.1 using wicket-atmosphere 0.11, atmosphere-runtime 1.0.13
(not yet tested with wicket-atmosphere 0.13)
Tomcat 7.0",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2013-07-29 06:43:29.99,,,no_permission,,,,,,,,,,,,339273,,,Mon Jan 20 12:48:18 UTC 2014,,,,,,0|i1mimv:,339593,,,,,,,,"22/Jul/13 12:37;ceefour;Note: I'm using BreadcrumbPanel's, and the page is stateful.","22/Jul/13 12:38;ceefour;And during the Atmosphere request, I target.add()-ed several components, including the div that contains the breadcrumbpanel, the breadcrumbbar, and other components.","22/Jul/13 15:19;ceefour;Also, I'm using Tomcat7's NIO Connector, and Atmosphere is using WebSocket.",22/Jul/13 15:37;ceefour;I'm also using HttpsMapper.,22/Jul/13 15:43;ceefour;Seems that HttpsMapper is the culprit. Without HttpsMapper I never see this error.,29/Jul/13 06:43;papegaaij;A quickstart would really help me to debug this.,"13/Aug/13 09:09;souvikbhattacharyas;Hi, Is there any way to avoid the error. ",13/Aug/13 09:13;mgrigorov;Please provide a quickstart and we will reopen the ticket.,"22/Aug/13 10:13;ceefour;Not sure if this helps, but this may be an indication:


{code}
» 16:37:30.412 05:38:23.128 | WARN | red-DispatchOp-2 | o.a.c.DefaultBroadcaster | tmosphere.cpr.DefaultBroadcaster 977 | Request is not longer valid 6b9c95f3-1fae-4bab-abf7-10b8141c049e
» 16:42:29.526 05:43:22.466 | WARN | red-DispatchOp-2 | o.a.c.DefaultBroadcaster | tmosphere.cpr.DefaultBroadcaster 977 | Request is not longer valid c148d0e5-8604-4bcc-9427-16e7014a6f8d
{code}
","22/Aug/13 10:24;ceefour;It's quite challenging to reproduce this because even if our long-running, complex app, when it starts to happen... it happens only once every 3-5 minutes: (but when it does happen, it does it in bursts)

Our log below, grouped by time :

{code}
» 16:24:52.732 05:25:45.649 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred org.apache.wicket.WicketRuntimeExcepti
» 16:24:52.752 05:25:45.660 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.832 05:25:45.662 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.832 05:25:45.664 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.834 05:25:45.666 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.835 05:25:45.668 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.854 05:25:45.671 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.854 05:25:45.673 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.933 05:25:45.675 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.933 05:25:45.677 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.936 05:25:45.678 | ERROR | ryBean_Worker-10 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:24:52.936 05:25:45.679 | ERROR | ryBean_Worker-10 | o.a.w.r.c.RequestCycle | icket.request.cycle.RequestCycle 323 | Error during processing error message java.lang.NullPointerException: 
» 16:24:52.938 05:25:45.681 | ERROR | ryBean_Worker-10 | o.a.w.u.l.ListenerCollection | il.listener.ListenerCollection$1 124 | Error invoking listener: org.apache.wicket.Application$2@6b107e0
» 16:24:52.938 05:25:45.681 | WARN | red-DispatchOp-2 | o.a.c.DefaultBroadcaster | tmosphere.cpr.DefaultBroadcaster 977 | Request is not longer valid a1e3577d-98af-43ec-a62d-4c9e3d231e48 WARN

---3 minutes later---

» 16:27:53.426 05:28:46.353 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred org.apache.wicket.WicketRuntimeExcepti
» 16:27:53.426 le.common.eventbus.EventHandler.handleEvent(EventHandler.java:74) ~[guava-14.0.1.jar:na] at com.google.common.eventbus.SynchronizedEventHandler.handleEvent(SynchronizedEventHan
» 16:27:53.525 05:28:46.354 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.525 05:28:46.355 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.525 05:28:46.356 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.527 05:28:46.357 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.541 05:28:46.363 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.541 05:28:46.364 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.625 05:28:46.365 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.626 05:28:46.367 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.626 05:28:46.369 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.627 05:28:46.370 | ERROR | oryBean_Worker-8 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:27:53.627 05:28:46.371 | ERROR | oryBean_Worker-8 | o.a.w.r.c.RequestCycle | icket.request.cycle.RequestCycle 323 | Error during processing error message java.lang.NullPointerException: 
» 16:27:53.640 05:28:46.373 | ERROR | oryBean_Worker-8 | o.a.w.u.l.ListenerCollection | il.listener.ListenerCollection$1 124 | Error invoking listener: org.apache.wicket.Application$2@416f639
» 16:27:53.640 05:28:46.374 | WARN | red-DispatchOp-2 | o.a.c.DefaultBroadcaster | tmosphere.cpr.DefaultBroadcaster 977 | Request is not longer valid 1770a748-9ad0-4a3a-a100-bc10502a03e7 WARN

---4 minutes later---

» 16:31:08.172 05:32:01.100 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred org.apache.wicket.WicketRuntimeExcepti
» 16:31:08.269 05:32:01.102 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.270 05:32:01.103 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.270 05:32:01.104 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.270 05:32:01.105 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.271 05:32:01.106 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.369 05:32:01.107 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.369 05:32:01.108 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.370 05:32:01.110 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.370 05:32:01.112 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.371 05:32:01.115 | ERROR | oryBean_Worker-3 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:31:08.371 05:32:01.117 | ERROR | oryBean_Worker-3 | o.a.w.r.c.RequestCycle | icket.request.cycle.RequestCycle 323 | Error during processing error message java.lang.NullPointerException: 
» 16:31:08.469 05:32:01.121 | ERROR | oryBean_Worker-3 | o.a.w.u.l.ListenerCollection | il.listener.ListenerCollection$1 124 | Error invoking listener: org.apache.wicket.Application$2@3a9dbd8
» 16:31:08.469 05:32:01.121 | WARN | red-DispatchOp-2 | o.a.c.DefaultBroadcaster | tmosphere.cpr.DefaultBroadcaster 977 | Request is not longer valid 800a9521-7265-4832-90d8-ca243fd63c7f WARN

---6 minutes later---

» 16:37:30.172 05:38:23.107 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred org.apache.wicket.WicketRuntimeExcepti
» 16:37:30.273 05:38:23.109 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.273 05:38:23.110 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.273 05:38:23.111 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.273 05:38:23.112 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.273 05:38:23.113 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.372 05:38:23.114 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.372 05:38:23.115 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.378 05:38:23.116 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.378 05:38:23.118 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.378 05:38:23.119 | ERROR | oryBean_Worker-4 | o.a.w.DefaultExceptionMapper | he.wicket.DefaultExceptionMapper 123 | Unexpected error occurred java.lang.NullPointerException: null a
» 16:37:30.378 05:38:23.126 | ERROR | oryBean_Worker-4 | o.a.w.r.c.RequestCycle | icket.request.cycle.RequestCycle 323 | Error during processing error message java.lang.NullPointerException: 
» 16:37:30.378 05:38:23.128 | ERROR | oryBean_Worker-4 | o.a.w.u.l.ListenerCollection | il.listener.ListenerCollection$1 124 | Error invoking listener: org.apache.wicket.Application$2@7dbf59d
» 16:37:30.412 05:38:23.128 | WARN | red-DispatchOp-2 | o.a.c.DefaultBroadcaster | tmosphere.cpr.DefaultBroadcaster 977 | Request is not longer valid 6b9c95f3-1fae-4bab-abf7-10b8141c049e WARN

---5 minutes later---

» 16:42:29.526 05:43:22.466 | WARN | red-DispatchOp-2 | o.a.c.DefaultBroadcaster | tmosphere.cpr.DefaultBroadcaster 977 | Request is not longer valid c148d0e5-8604-4bcc-9427-16e7014a6f8d WARN

{code}
","22/Aug/13 10:38;papegaaij;The NPE is caused by a null url returned by HttpServletRequest.getRequestURI. Atmosphere provides the implementation of this HttpServletRequest. It seems this implementation can return null under some circumstances, which is a violation of the spec. It is likely to be related to the 'Request is no longer valid' warning. This should probably be reported upstream.","22/Aug/13 16:16;ceefour;Reported to https://github.com/Atmosphere/atmosphere/issues/1246

","23/Aug/13 12:41;papegaaij;I'm reopening this ticket, awaiting the response upstream.","27/Aug/13 07:07;souvikbhattacharyas;I am able to generate the error multiple time in my application. In my application I push through EventBus.post frequently(in every 3 seconds) and if second request come to @Subscribe before the completion of first request then it's throwing error. If needed I can share my screen as well
",27/Aug/13 07:11;ceefour;Thank you [~souvikbhattacharyas] ! So that's why it's happening intermittently in my case,20/Jan/14 12:48;papegaaij;Fixed with the upgrade to Atmosphere 2.0,,,,,,,,,,,,,,,,,
Issue with TomcatWebSocketFilter and Spring Security,WICKET-5266,12656551,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,totof3110,totof3110,08/Jul/13 04:35,11/Jul/13 18:59,14/Mar/19 03:09,11/Jul/13 12:06,6.9.0,,,,,,,,,,,6.10.0,7.0.0-M1,,wicket-native-websocket,,,,,,,,,,,0,,,,,,"Spring Security has a way of wrapping HTTP servlet requests seems to clash with the code in org.apache.wicket.protocol.ws.tomcat7.Tomcat7WebSocketFilter. The request has to be unwrapped before being cast to RequestFacade.

Before:

{code}
		((RequestFacade) req).doUpgrade(tomcatWebSocket); // Crashes with class cast exception
{code}

Should be:

{code}
		while (req instanceof HttpServletRequestWrapper) {
			req = (HttpServletRequest) ((HttpServletRequestWrapper) req).getRequest();
		}
		((RequestFacade) req).doUpgrade(tomcatWebSocket);
{code}

This happens when configuring Spring Security in the web.xml with:

{code}
	<filter>
		<filter-name>springSecurityFilterChain</filter-name>
		<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>springSecurityFilterChain</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
{code}",Tomcat,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2013-07-08 05:00:36.483,,,no_permission,,,,,,,,,,,,336774,,,Thu Jul 11 18:59:17 UTC 2013,,,,,,0|i1m38v:,337097,,,,,,,,"08/Jul/13 05:00;mgrigorov;Which version of Tomcat do you use ?
I haven't seen ClassCastException or other problem so far in this code.","08/Jul/13 05:05;totof3110;I'm seeing it with 7.0.37. I don't think this is related to Tomcat though. Spring (and Spring Security) is usually configured as a ""listener"" in the web.xml and I believe it will wrap the request before it gets to the Wicket servlet.

From my web.xml:

{code}
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>classpath:applicationContext*.xml</param-value>
	</context-param>
	<filter>
		<filter-name>springSecurityFilterChain</filter-name>
		<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>springSecurityFilterChain</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	<filter>
		<filter-name>wicket</filter-name>
		<filter-class>org.apache.wicket.protocol.ws.tomcat7.Tomcat7WebSocketFilter</filter-class>
		<init-param>
			<param-name>applicationFactoryClassName</param-name>
			<param-value>org.apache.wicket.spring.SpringWebApplicationFactory</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>wicket</filter-name>
		<url-pattern>/*</url-pattern>
		<dispatcher>REQUEST</dispatcher>
		<dispatcher>ERROR</dispatcher>
	</filter-mapping>
{code}
","08/Jul/13 05:08;mgrigorov;I still sleep :-)
It is clear now. Thanks!
This improvement should be done for all **WebSocketFilters, not just Tomcat's one.","08/Jul/13 05:15;totof3110;No worries. :)

After playing with it, I realized that it's actually the Spring Security module that wraps the request (not Spring Core). I updated the bug description with the relevant part of the web.xml.","11/Jul/13 18:59;totof3110;Saw the change on https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=blob_plain;f=wicket-experimental/wicket-native-websocket/wicket-native-websocket-tomcat/src/main/java/org/apache/wicket/protocol/ws/tomcat7/Tomcat7WebSocketFilter.java;hb=HEAD.

Thanks for the quick fix! :)",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Possible bug in org.apache.wicket.util.lang.Packages when building path with repeating names,WICKET-5054,12633684,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,svenmeier,totof3110,totof3110,22/Feb/13 20:33,04/Nov/13 11:40,14/Mar/19 03:09,24/Feb/13 09:53,1.5.10,6.6.0,,,,,,,,,,1.5.11,6.7.0,,wicket,,,,,,,,,,,0,,,,,,"When trying to build the absolute path from package ""com.foo.bar"" with relative path ""baz/foo/qux"" in method org.apache.wicket.util.lang.Packages.absolutePath(String, String) the block:

{code}
				else if (absolutePath.size() <= i || absolutePath.get(i).equals(folder) == false)
				{
					// Add to stack
					absolutePath.add(folder);
				}
{code}

doesn't run for the ""foo"" part of the relative path because absolutePath.get(1) == foo from the package == foo from the relative path.

So the resulting absolute path is ""com/foo/bar/baz/qux"" rather than the expected ""com/foo/bar/baz/foo/qux"".

Seems like the ""else if"" should just be a ""else"".",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2013-02-24 09:53:21.232,,,no_permission,,,,,,,,,,,,314179,,,Mon Nov 04 11:40:56 UTC 2013,,,,,,0|i1i7t3:,314524,,,,,,,,"22/Feb/13 21:23;totof3110;Note that building an absolute path from package ""com.foo.bar"" with relative path ""foo/baz/qux"" works as expected.","24/Feb/13 09:53;svenmeier;partially reverted 78052bf for Packages#absolutePath(), adjusted IPackageResourceGuard",14/Aug/13 03:19;totof3110;Thanks!,"04/Nov/13 11:34;tszpinda;This is still a bug, occurs ie in wicketstuff CometdPushBehavior. The javascript files are in: org.wicketstuff.push.cometd.org and CometdPushBehavior tries to use:
{code}
	private static final ResourceReference COMETD = new PackageResourceReference(CometdPushBehavior.class, ""org/cometd.js"");
{code}
where CometdPushBehavior is in:
{code} 
org.wicketstuff.push.cometd
{code}","04/Nov/13 11:40;mgrigorov;Tomek,

Please create a new ticket with a test case/quickstart app.
Thanks!",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wicket Ajax: Inline script header contribution issue,WICKET-5047,12632908,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,sebfz1,sebfz1,18/Feb/13 22:27,03/Mar/13 14:09,14/Mar/19 03:09,27/Feb/13 13:46,6.5.0,,,,,,,,,,,6.7.0,,,wicket,,,,,,,,,,,0,,,,,,"wicket-ajax-jquery.js#processScript adds an *inline* script using Wicket.Head.addJavascript, in opposition to Wicket.Head.addElement for an outline script.

The problem is that #addJavascript modifies the script content in any case, with: content = 'try{'+content+'}catch(e){Wicket.Log.error(e);}';

But a script element may contains content that is *not* designed to be executed nor be javascript: that's the case of a jQuery Template for instance (where the tag signature look like <script id=""my-id"" type=""text/x-jquery-tmpl"">). That's also true for other known mine/type, like text/ecmascript, text/vbscript, text/tcl. And for customized ones, at least: text/x-handlebars, text/x-kendo-template, text/x-underscore-template...

Therefore, I think ajax wicket should add script elements using #addJavascript, only if the mime type is text/javascript or is empty (because it is the default scripting language in HTML5 and the declaration can be omitted). In the other cases, it should add the script element to the DOM ""as-is"", using #addElement.

Thanks in advance & best regards,
Sebastien.",,,,,,,,,,,,,,,,,24/Feb/13 13:12;sebfz1;WICKET-5047-wicket-ajax-jquery.js.patch;https://issues.apache.org/jira/secure/attachment/12570655/WICKET-5047-wicket-ajax-jquery.js.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2013-02-21 11:36:43.269,,,no_permission,,,,,,,,,,,,313404,,,Sun Mar 03 14:09:29 UTC 2013,,,,,,0|i1i30v:,313749,,,,,,,,"21/Feb/13 11:36;mgrigorov;The logic is improved. 
Please test it.","24/Feb/13 12:42;sebfz1;Hi Martin,

Thanks for this.
I tested your fix. unfortunately, it does not work as expected.

I saw you extracted the ""try... catch..."" statement out from #addJavascript method, and test in #processScript (the caller of #addJavascript) whether the mime-type is text/javascript or is empty. In that case you embed the content with the ""try... catch..."" statement. But, by calling #addJavascript, the mime-type is reset to text/javascript, that is causing an error to the browser's console (you know, it is because the content block is not embedded by a  ""try... catch..."" statement... ;) )

I think you have good reasons to prefer calling #addJavascript rather than #addElement, so I tried a fix by modifying the #addJavascript signature, adding the type.
I did not saw if #addJavascript is called from outside wicket-ajax-jquery.js (except from test/js/head.js).
Here is what I can propose:


/*** addJavascript ***/

			addJavascript: function (content, id, fakeSrc, type) {
				var script = Wicket.Head.createElement(""script"");
				if (id) {
					script.id = id;
				}
				
				//WICKET-5047:
				//embeds the content with a try...catch... block iif the content is javascript
				//content is considered javascript if mime-type is empty (html5's default) or is 'text/javascript'
				if (!type || type.toLowerCase() === ""text/javascript"") {
					type = ""text/javascript"";
					content = 'try{'+content+'}catch(e){Wicket.Log.error(e);}';
				}
				
				script.setAttribute(""src_"", fakeSrc);
				script.setAttribute(""type"", type);

				// set the javascript as element content
				if (null === script.canHaveChildren || script.canHaveChildren) {
					var textNode = document.createTextNode(content);
					script.appendChild(textNode);
				} else {
					script.text = content;
				}
				Wicket.Head.addElement(script);
			}


/*** addJavascripts ***/
			addJavascripts: function (element, contentFilter) {
				function add(element) {
					var src = element.getAttribute(""src"");
					var type = element.getAttribute(""type"");

					/* skipped lines for readability */
					
						/* TODO: to be removed
						if (!type || type.toLowerCase() === ""text/javascript"") {
							content = 'try{'+content+'}catch(e){Wicket.Log.error(e);}';
						}
						*/

						Wicket.Head.addJavascript(content, element.id, """", type);
					}
				}
				
				/* skipped lines for readability */


/*** processScript ***/
				processScript: function (context, node) {
					context.steps.push(function (notify) {

							/* skipped lines for readability */

							var id = node.getAttribute(""id"");
							var type = node.getAttribute(""type"");

							/* TODO: to be removed
							if (!type || type.toLowerCase() === ""text/javascript"") {
								content = 'try{'+content+'}catch(e){Wicket.Log.error(e);}';
							}
							*/

							if (typeof(id) === ""string"" && id.length > 0) {
								// add javascript to document head
								Wicket.Head.addJavascript(text, id, """", type);
							}

							/* skipped lines for readability */


Best regards,
Sebastien.",24/Feb/13 13:12;sebfz1;Attached wicket-ajax-jquery.js patch.,27/Feb/13 13:46;mgrigorov;The improvement is applied. Thanks!,"03/Mar/13 14:09;sebfz1;Fix tested; thanks to you, Martin!
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
DefaultCssAutoCompleteTextField should have Constructor (String id),WICKET-5041,12632570,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,wolfman22,wolfman22,15/Feb/13 11:46,19/Feb/13 20:10,14/Mar/19 03:09,19/Feb/13 15:48,6.5.0,,,,,,,,,,,6.7.0,,,wicket-extensions,,,,,,,,,,,0,,,,,,"When using a Form with CompoundPropertyModel
you can add TextFields like:
form.add(new TextField<String>(""name""));
without giving the model explicite,

The DefaultCssAutoCompleteTextField has only one Constructor:
public DefaultCssAutoCompleteTextField(final String string, final IModel<T> model)
as the workaround I use
form.add(new DefaultCssAutoCompleteTextField<String>(""name"",null))",,300,300,,0%,300,300,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,313066,,,Tue Feb 19 20:10:00 UTC 2013,,,,,,0|i1i0xz:,313412,,,,,,,,19/Feb/13 20:10;wolfman22;Thanks a lot - now waiting for Version release,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade bootstrap to 2.3,WICKET-5031,12631579,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,09/Feb/13 11:14,09/Feb/13 11:16,14/Mar/19 03:09,09/Feb/13 11:16,,,,,,,,,,,,6.6.0,,,,,,,,,,,,,,0,,,,,,Twitter Bootstrap 2.3 has been released. Upgrade wicket-bootstrap to utilize this version,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,312075,,,2013-02-09 11:14:45.0,,,,,,0|i1hutj:,312421,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketRuntimeException: addOrReplace for feedback panel does not clear Component.FEEDBACK_LIST - feedback from replaced component causes error.,WICKET-4895,12618124,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,a.morozov,a.morozov,29/Nov/12 08:57,29/Nov/12 16:16,14/Mar/19 03:09,29/Nov/12 16:15,6.3.0,,,,,,,,,,,1.5.10,6.4.0,,wicket,,,,,,,,,,,0,,,,,,"Refresh for page, containing feedback panel causes WicketRuntimeException.

I have MarkupContainer wich has overriden 
protected void onBeforeRender()
where I call addOrReplace to add or replace component with feedback panel.

I have noticed that refreshing such page causes
Caused by: java.lang.RuntimeException: An error occurred while getting the model object for Component: [MessageListView [Component id = messages, page = <No Page>,  ...

During dubug Wicket 6.3.0 I see that 
Component.beforeRender() method has multiple feedbacks in  getRequestCycle().getMetaData(FEEDBACK_LIST)
insteas of one - witch I've replaced in  MarkupContainer.onBeforeRender().

Call to 
oldFeedBack.prepareForRender();
before addOrReplace fixes problem, but prepareForRender is not in public API.

StackTrace:
org.apache.wicket.WicketRuntimeException: Error attaching this container for rendering:  [Component id = feedbackPanel]
    at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1692)
    at org.apache.wicket.Component.onBeforeRender(Component.java:3830)
    at org.apache.wicket.Component.internalBeforeRender(Component.java:922)
    at org.apache.wicket.Component.internalPrepareForRender(Component.java:2222)
    at org.apache.wicket.Page.internalPrepareForRender(Page.java:247)
    at org.apache.wicket.Component.render(Component.java:2289)
    at org.apache.wicket.Page.renderPage(Page.java:1021)
    at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:116)
    at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:196)
    at org.apache.wicket.core.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:165)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:830)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:253)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:210)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:281)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
    at org.apache.wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:137)
<....>
Caused by: java.lang.RuntimeException: An error occurred while getting the model object for Component: [MessageListView [Component id = messages, page = <No Page> ...
    at org.apache.wicket.Component.getDefaultModelObject(Component.java:1620)
    at org.apache.wicket.markup.html.list.ListView.getModelObject(ListView.java:644)
    at org.apache.wicket.markup.html.panel.FeedbackPanel.getCurrentMessages(FeedbackPanel.java:307)
    at org.apache.wicket.markup.html.panel.FeedbackPanel.anyMessage(FeedbackPanel.java:200)
    at org.apache.wicket.markup.html.panel.FeedbackPanel.anyMessage(FeedbackPanel.java:187)
    at org.apache.wicket.markup.html.panel.FeedbackPanel$1.onConfigure(FeedbackPanel.java:155)
    at org.apache.wicket.Component.configure(Component.java:1028)
    at org.apache.wicket.Component.internalBeforeRender(Component.java:913)
    at org.apache.wicket.Component.beforeRender(Component.java:990)
    at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1680)",Wicket 6.3.0,,,,,,,,,,,,,,,,29/Nov/12 15:35;a.morozov;quickstart.zip;https://issues.apache.org/jira/secure/attachment/12555359/quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2012-11-29 09:06:32.728,,,no_permission,,,,,,,,,,,,292734,,,Thu Nov 29 16:15:01 UTC 2012,,,,,,0|i0sbqn:,163378,,,,,,,,29/Nov/12 09:06;mgrigorov;Please attach a quickstart.,"29/Nov/12 14:07;mgrigorov;Please attach a quickstart and we will investigate.
Thanks!","29/Nov/12 15:35;a.morozov;I've attached quickstart.zip
Just press F5 2 times to reproduce,
Thanks",29/Nov/12 15:39;mgrigorov;Thanks,29/Nov/12 16:06;mgrigorov;In org.test.TestPanel#onBeforeRender() first do the replacements and then call super.onBeforeRender().,"29/Nov/12 16:14;a.morozov;Very unusual thing, but seems it works, thanks","29/Nov/12 16:15;mgrigorov;An improvement is added to prevent this error.
Until 6.4.0 you can use the solution from my previous comment.",,,,,,,,,,,,,,,,,,,,,,,,,,
UrlRenderer.renderRelativeUrl misbehavior if the filterPath is composed.,WICKET-4891,12617625,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,svenmeier,jordeu,jordeu,26/Nov/12 15:08,28/Nov/12 17:06,14/Mar/19 03:09,28/Nov/12 17:06,6.3.0,,,,,,,,,,,6.4.0,,,wicket,,,,,,,,,,,0,,,,,,"Using an application with a composed filterPath like:

<filter-mapping>
	<filter-name>wicket.jsessionid</filter-name>
	<url-pattern>/demo/test/*</url-pattern>
</filter-mapping> 

Wicket fails to properly render a bookmarkable link.

I've debuged my app and the problem is here:

UrlRenderer.removeCommonPrefixes()
Line 309:

String filterPath = request.getFilterPath();
if (filterPath != null && segments.isEmpty() == false)
{
    if (filterPath.equals(UrlUtils.normalizePath(segments.get(0))))
    {
        LOG.debug(""Removing the filter path '{}' from '{}'"", filterPath, segments);
        segments.remove(0);
    }
}

This code assumes that the filter path is a single segment path, not a composed path.

I've only reached this bug browsing my website with the cookies disable. This is why it's not critical.


",,,,,,,,,,,,,,,,,26/Nov/12 17:25;jordeu;WICKET-4891.patch;https://issues.apache.org/jira/secure/attachment/12554883/WICKET-4891.patch,26/Nov/12 15:40;jordeu;WICKET-4891.tar.gz;https://issues.apache.org/jira/secure/attachment/12554868/WICKET-4891.tar.gz,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2012-11-27 15:18:15.162,,,no_permission,,,,,,,,,,,,292128,,,Wed Nov 28 17:06:15 UTC 2012,,,,,,0|i0rryv:,160175,,,,,,,,26/Nov/12 15:40;jordeu;Minimal example demo application that fails if you browse it with the cookies disable,"26/Nov/12 16:42;jordeu;I've created a pull request:
https://github.com/apache/wicket/pull/22

From the source code I can deduce that it can happen the same with the context path, so I also check this at the pull request.",26/Nov/12 17:25;jordeu;A patch ,"27/Nov/12 15:18;svenmeier;I've just checked in a solution that uses fewer String concatenations and hopefully is easier to follow. 

#removeCommonPrefixes() now removes the whole prefix or nothing at all.

For example say Wicket filter is registered on ""filterPath"" and the application has context ""contextPath"".
Then it doesn't make sense to strip ""filterPath"" from the following url, since it doesn't contain ""contextPath"" at all:
  http://host:8080/filterPath/a/b;jsessionid=123456

What do you think?","27/Nov/12 16:18;jordeu;Yes, you are right it doesn't make sense to remove the ""filterPath"" if it doesn't contain ""contextPath"" at all.",28/Nov/12 16:35;jordeu;Today I've checked with the last snapshot and everything it's working fine. ,28/Nov/12 17:06;svenmeier;compound filter and context paths are supported now,,,,,,,,,,,,,,,,,,,,,,,,,,
ValidationError messages for NumberTextFields with minimum/maximum are always English,WICKET-4884,12617525,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,svenmeier,anhalter42,anhalter42,25/Nov/12 15:10,27/Nov/12 07:41,14/Mar/19 03:09,27/Nov/12 07:41,6.1.1,6.3.0,,,,,,,,,,1.5.10,6.4.0,,wicket,,,,,,,,,,,0,,,,,,"Although my Form's Locale is, e.g., de_DE, the error message generated from AbstractRangeValidator#validate(IValidatable) is always English.
My German custom message for resource key ""RangeValidator.range"" in the Page's resource bundle gets ignored too - the default custom message from the resource bundle is used instead.

Reason might be that Component#getLocale() invoked from Localizer#getStringIgnoreSettings(String, Component, IModel, Locale, String, String) always returns NumberTextField#HTML5_LOCALE (fix for WICKET-3591).

Pls. see attached quickstart.

I'm a Wicket newbie, so could very well be that I'm missing something.",Ubuntu 12.04,,,,,,,,,,,,,,,,25/Nov/12 15:12;anhalter42;myproject.zip;https://issues.apache.org/jira/secure/attachment/12554797/myproject.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2012-11-27 07:41:10.703,,,no_permission,,,,,,,,,,,,292013,,,Tue Nov 27 07:41:10 UTC 2012,,,,,,0|i0rjpb:,158836,,,,,,,,27/Nov/12 07:41;svenmeier;The locale is now kept untouched.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IllegalArgumentException on ReloadingWicketFilter and inheritance markup,WICKET-4872,12617059,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,svenmeier,komusubi,komusubi,21/Nov/12 06:17,22/Nov/12 09:06,14/Mar/19 03:09,21/Nov/12 22:48,1.5.9,6.3.0,,,,,,,,,,1.5.10,6.4.0,,wicket,,,,,,,,,,,0,,,,,,"simple inheritance markup and ReloadingWicketFilter set like below, throw from org.apache.wicket.markup.MarkupFactory#getContainerClass(MarkupContainer, Class<?>)

ReloadingClassLoader.includePattern(""wicket.inheritance.sample.*"");

Is this way wrong ?

caused stacktrace is 
Caused by: java.lang.IllegalArgumentException: Parameter clazz must be an instance of wicket.inheritance.sample.ChildPage1, but is a wicket.inheritance.sample.HomePage
	at org.apache.wicket.markup.MarkupFactory.getContainerClass(MarkupFactory.java:378)
	at org.apache.wicket.markup.MarkupFactory.getMarkup(MarkupFactory.java:228)
	at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.getBaseMarkup(InheritedMarkupMarkupLoader.java:96)
	at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.loadMarkup(InheritedMarkupMarkupLoader.java:66)
	at org.apache.wicket.markup.loader.DefaultMarkupLoader.loadMarkup(DefaultMarkupLoader.java:51)
	at org.apache.wicket.markup.MarkupFactory.loadMarkup(MarkupFactory.java:430)",,,,,,,,,,,,,,,,,21/Nov/12 06:23;komusubi;eclipse-project.zip;https://issues.apache.org/jira/secure/attachment/12554456/eclipse-project.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2012-11-21 12:18:48.208,,,no_permission,,,,,,,,,,,,258986,,,Thu Nov 22 09:06:10 UTC 2012,,,,,,0|i0l707:,121785,,,,,,,,21/Nov/12 06:23;komusubi;modify simple project from maven quick start.,"21/Nov/12 12:18;svenmeier;Problem is that in WicketFilter#init() the application is created before the contextClassLoader is set, thus HomePage.class isn't loaded via the custom classLoader.
Later MarkupResourceStream#getMarkupClass() resolves classes via WicketObjects, which uses the custom classLoader via contextClassLoader set in WicketFilter#processRequest().","21/Nov/12 16:55;svenmeier;After fixing the thread's contextClassLoader I stumbled into further problems, e.g. the application's name can't be set again.
It seems we have to properly destroy the old application to make sure everything is reloaded.

Which version of Wicket did this work for you?",21/Nov/12 22:48;svenmeier;The contextClassLoader is now set before creating application and the application is properly destroyed before initializing the new on,"22/Nov/12 09:06;komusubi;thanks svenmeier.
i confirmed  branch on master and 1.5.x. it cleared this problem completely !

i looking for next release.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
SmartLinkMultiLineLabel does not display email addresses or web URLs as hyperlinks,WICKET-4837,12613449,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,svenmeier,mnguon@telemetris.com,mnguon@telemetris.com,25/Oct/12 08:02,19/Sep/13 12:55,14/Mar/19 03:09,25/Oct/12 11:27,1.5.8,6.2.0,,,,,,,,,,1.5.9,6.3.0,,wicket-extensions,,,,,,,,,,,0,,,,,,"SmartLinkLabel seems to be working just fine:
add(new SmartLinkLabel(""smartLinkLabel1"", ""test@domain.com""));		// OK
add(new SmartLinkLabel(""smartLinkLabel2"", ""http://domain.com""));		// OK
add(new SmartLinkLabel(""smartLinkLabel3"", ""https://domain.com""));		// OK
add(new SmartLinkLabel(""smartLinkLabel4"", ""ftp://domain.com""));			// OK
add(new SmartLinkLabel(""smartLinkLabel5"", ""Email: test@domain.com""));	// OK

SmartLinkMultiLineLabel does not seem to detect email addresses or URLs:
add(new SmartLinkMultiLineLabel(""smartLinkMultiLineLabel1"", ""test@domain.com""));			// NO HYPERLINK
add(new SmartLinkMultiLineLabel(""smartLinkMultiLineLabel2"", ""http://domain.com""));			// NO HYPERLINK
add(new SmartLinkMultiLineLabel(""smartLinkMultiLineLabel3"", ""https://domain.com""));			// NO HYPERLINK
add(new SmartLinkMultiLineLabel(""smartLinkMultiLineLabel4"", ""ftp://domain.com""));			// NO HYPERLINK
add(new SmartLinkMultiLineLabel(""smartLinkMultiLineLabel5"", ""test@domain.com\nhttp://domain.com""));		// NO HYPERLINK
add(new SmartLinkMultiLineLabel(""smartLinkMultiLineLabel6"", ""Email: test@domain.com""));		// NO HYPERLINK

Tested using Wicket QuickStart (http://wicket.apache.org/start/quickstart.html):
- Version 1.5.8: SmartLinkMultiLineLabel not working.
- Version 6.2.0: SmartLinkMultiLineLabel not working either.",,,,,,,,,,,,,,,,,25/Oct/12 10:09;mnguon@telemetris.com;HomePage.html;https://issues.apache.org/jira/secure/attachment/12550763/HomePage.html,25/Oct/12 10:09;mnguon@telemetris.com;HomePage.java;https://issues.apache.org/jira/secure/attachment/12550762/HomePage.java,25/Oct/12 10:13;mnguon@telemetris.com;Screenshot1.png;https://issues.apache.org/jira/secure/attachment/12550764/Screenshot1.png,,,,,,3.0,,,,,,,,,,,,,,,,,,,2012-10-25 11:13:20.328,,,no_permission,,,,,,,,,,,,250958,,,Thu Sep 19 12:55:26 UTC 2013,,,,,,0|i0b2rj:,62560,,,,,,,,"25/Oct/12 10:13;mnguon@telemetris.com;Steps to reproduce:

mvn archetype:generate -DarchetypeGroupId=org.apache.wicket -DarchetypeArtifactId=wicket-archetype-quickstart -DarchetypeVersion=1.5.8 -DgroupId=com.mycompany -DartifactId=myproject158 -DarchetypeRepository=https://repository.apache.org/ -DinteractiveMode=false

Modify the POM to uncomment the ""wicket-extensions"" dependency.

Modify HomePage.java and associated markup (see attached files).

mvn jetty:run

Go to http://localhost:8080/ to visualize the result (see attached screenshot).",25/Oct/12 11:13;mgrigorov;Please attach the modified quickstart.,25/Oct/12 11:27;svenmeier;Text is now parsed for links first and then line breaks are handled,"19/Sep/13 12:55;smartblogger;If you have email addresses or web URLs in the data that you are displaying, then you can automatically display those pieces of data as hyperlinks, you will not have to take any action to convert that data.

Email addresses will be wrapped with a <a href=""mailto:xxx"">xxx</a> tag, where ""xxx"" is the email address that was detected.

Web URLs will be wrapped with a <a href=""http://www.bigrock.in/transfer/domain-transfer.php"">http://www.bigrock.in/transfer/domain-transfer.php</a> tag, where ""xxx"" is the URL that was detected (it can be any valid URL type, http://, https://, ftp://, etc...) ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PaletteButton#onComponentTag(ComponentTag) does not call super,WICKET-4826,12612827,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,svenmeier,sebfz1,sebfz1,20/Oct/12 10:47,03/Mar/13 17:31,14/Mar/19 03:09,20/Oct/12 11:19,1.5.8,6.1.1,,,,,,,,,,1.5.9,6.3.0,,wicket-extensions,,,,,,,,,,,0,,,,,,"Is it possible for o.a.w.extensions.markup.html.form.palette.Palette.PaletteButton#onComponentTag(ComponentTag tag)
to call: super.onComponentTag(tag)?

It actually prevent to override Palette#newAddComponent (and the other buttons) with something like
return super.newAddComponent().setOutputMarkupId(true);

Would it also be possible to make a fix for both 1.5.x and 6.x?

Thanks in advance,
Sebastien.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2012-10-20 11:19:42.134,,,no_permission,,,,,,,,,,,,250095,,,Sun Mar 03 17:31:06 UTC 2013,,,,,,0|i0aomn:,60263,,,,,,,,20/Oct/12 11:19;svenmeier;Thanks Sebastien!,03/Mar/13 17:31;sebfz1;Thanks Sven!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DOM ids change of the input fields of FilterToolbar,WICKET-4758,12607342,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,wk,wk,12/Sep/12 21:30,25/Sep/12 19:11,14/Mar/19 03:09,25/Sep/12 19:11,1.5.8,6.0.0,,,,,,,,,,6.1.0,,,wicket-extensions,,,,,,,,,,,0,,,,,,"The fix in WICKET-3916 is not effective: https://fisheye6.atlassian.com/changelog/wicket?cs=1148229

https://github.com/apache/wicket/blob/master/wicket-core/src/main/java/org/apache/wicket/Component.java#L2506

As one can see in Component.internalRenderComponent(), the method Component.onComponentTag(), where the markup id is written to the tag, is called before the behavior had a chance to call setOutputMarkupId(true). (The Behavior.onComponentTag() is called in Component.renderComponentTag() a few lines down. The behavior has to call setOutputMarkupId() earlier, like in onConfigure()",,,,,,,,,,,,,,,,,13/Sep/12 20:43;wk;WICKET-4758.patch;https://issues.apache.org/jira/secure/attachment/12545045/WICKET-4758.patch,13/Sep/12 20:42;wk;filter-columns2.tar.gz;https://issues.apache.org/jira/secure/attachment/12545044/filter-columns2.tar.gz,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2012-09-13 14:27:59.377,,,no_permission,,,,,,,,,,,,252567,,,Tue Sep 25 09:37:35 UTC 2012,,,,,,0|i0cuun:,72942,,,,,,,,"13/Sep/12 14:27;jthomerson;This should fix it, but I don't currently have an easy way to test it.  Please verify and re-open this issue if it's not fixed.

Master: https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=c274a707c2929e853907d3bd9b64e1582c16faac

1.5.x: https://git-wip-us.apache.org/repos/asf?p=wicket.git;a=commit;h=ac7748671472ac7d4f3f82e8801b607d3f73e5c2","13/Sep/12 20:41;wk;This particular problem is solved; the id attribute is now rendered, however the FilterToolbar component still doesn't work right. It uses a RefreshingView so the markupIds of the input field change constantly after a submit, so on the next page, the JavaScript is not able to change the focus to the element again (because the HTML id attribute has changed).

I'll attach a quickstart and a proposed patch.

",13/Sep/12 20:42;wk;Basic DefaultDataTable with only one column,13/Sep/12 20:43;wk;proposed patch against master,14/Sep/12 17:50;wk;Reopening,"24/Sep/12 10:45;dashorst;which versions work and don't work? Rather unclear what the status is of this issue.

Removed fix for 6.0.1 as we'll probably never release 6.0.1","25/Sep/12 09:01;wk;I'm sorry for the lack of clarity, this issue is present in 1.5.8 and 6.0.0 (and master for that matter - the supplied patch is against master)","25/Sep/12 09:37;dashorst;Fixed for 6.1.0, as the patch doesn't apply to 1.5.8 and I want to release 6.1.0 now.",,,,,,,,,,,,,,,,,,,,,,,,,
DataTable - Headers with OrderByBorder have invalid HTML markup,WICKET-4710,12603594,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,15/Aug/12 14:52,03/Jan/13 21:34,14/Mar/19 03:09,23/Aug/12 13:16,6.0.0,,,,,,,,,,,6.0.0,,,wicket-extensions,,,,,,,,,,,0,datatable,,,,,"WICKET-4690 changed the tag type to <div> for the content of DataTable cells. When a sortable column is used, this produces invalid HTML markup which can wreck css stylings.

The markup is now:
<th class=""wicket_orderUp"">
  <a class=""wicket_orderUp"">
    <div></div>
  </a>
</th>

Note the <a> (inline element) containing a <div> (block element)",,,,,,,,,,,,,,,,,15/Aug/12 15:00;berniegp;screenshots.png;https://issues.apache.org/jira/secure/attachment/12541069/screenshots.png,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2012-08-22 08:04:26.992,,,no_permission,,,,,,,,,,,,257705,,,Thu Aug 23 13:16:07 UTC 2012,,,,,,0|i0k87z:,116149,,,,,,,,15/Aug/12 15:00;berniegp;Screenshot of problem,"15/Aug/12 15:04;berniegp;The problem I describe is problematic when making the OrderByBorder created link the one with the background image and padding to make the icons clickable.

Here is the css I use for the links:
a.wicket_orderNone,a.wicket_orderUp,a.wicket_orderDown {
	/* display: block;   <--- Must be added with WICKET-4690, but produces bad result of icons far from text */
	text-decoration: none;
	padding-right: 15px;
}

a.wicket_orderNone {
	background: url(""images/orderNone.gif"") no-repeat center right;
}

...","22/Aug/12 08:04;mgrigorov;This became problematic - we cannot use inline element (<span>, WICKET-4224) because users may need to put block inside it, we can't use <wicket:container> because it causes other problems (WICKET-4690) and now this...

I'm not very good in CSS but would it be better if we add style=""inline-block"" to the <div> ?","22/Aug/12 10:50;svenmeier;Why not let the DataTable's cells be <div>s and HeadersToolbar cells be <span>s?

It's a restriction posed by the links in the headers, so the markup can reflect that.","22/Aug/12 10:59;mgrigorov;What if someone wants to put a block element in the header ?
See for example http://dojofoundation.org/packages/dgrid/demos/gantt/ where a <table> is used for the headers.","22/Aug/12 11:04;mgrigorov;I'm not sure whether <table> is a block element. I just want to say that users could use anything. WICKET-4224 mentions this problem for the headers too.
","22/Aug/12 11:19;svenmeier;Then you have to use a custom toolbar.Since the original one uses anchor tags, you can't put block elements in it.","22/Aug/12 16:48;berniegp;Regarding style=""inline-block"":
As stated on http://www.quirksmode.org/css/display.html, inline-block only works for natural inline elements in IE 7.

TD and TH can contain block elements. The best solution in my opinion would be to find a way to populate TH and TD cells with any component tag directly. This would avoid the question of which intermediate tag type to use. It would also simplify the current situation where adding a simple link or image to a DataTable cell requires creating a whole Panel or Fragment. I'm not sure if/how this can be achieved however...
",23/Aug/12 09:20;mgrigorov;At the moment I see no better solution than Sven's suggestion to use <span> for the headers and <div> for the body.,23/Aug/12 13:07;berniegp;Sounds good to me!,"23/Aug/12 13:16;mgrigorov;HeadersToolbar.html uses <span> again.
If someone needs to put block elements in the header (s)he will need to provide custom markup for the toolbar. ",,,,,,,,,,,,,,,,,,,,,,
Javascript timers not removed when a Component is replaced by ajax,WICKET-4689,12601088,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,01/Aug/12 16:12,23/Jan/18 20:10,14/Mar/19 03:09,02/Aug/12 09:41,6.0.0-beta3,,,,,,,,,,,6.0.0,,,wicket,,,,,,,,,,,0,ajax,timer,,,,"The timer's javascript precondition checks that the component (html element) on which is
attached the timer behavior is still in the DOM document. When a component with a timer behavior is replaced in java in an ajax request by another component without this behavior, this check is not enough. In this case, the component id is still in the DOM (it was replaced by another one by the same id).

See email thread at:
http://apache-wicket.1842946.n4.nabble.com/ComponentNotFoundException-when-replace-a-fragment-with-ajax-tp4650898.html",,,,,,,,,,,,,,,WICKET-6191,,01/Aug/12 16:13;berniegp;quickstart.zip;https://issues.apache.org/jira/secure/attachment/12538798/quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,257714,,,Wed Aug 01 16:17:37 UTC 2012,,,,,,0|i0k89z:,116158,,,,,,,,01/Aug/12 16:13;berniegp;Quickstart. Click on link to replace the component with a timer attached.,"01/Aug/12 16:17;berniegp;Possible solution on the client-side :

New code when ajax response is received :
replacedDOMElement = ...;
$replacedDOMElement  = $(replacedDOMElement);
for each js timers:
    $component = $(timer.component);
    if( $replacedDOMElement.is($component) ||
        $replacedDOMElement.find($component ).length ) {

        cancelTimer(timer);
    }


To which Martin Grigorov replied:
Yes [this would work]
Wicket sends a message on topic '/dom/node/removed' for each removed element.
Using its id we can stop the timer.


I don't know what these message topics are however so I can't comment much further! My only possibly relevant concern is that timers of all children of a replaced element should be stopped as well in case some markup ids match.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ResourceStreamLocator vs ResourceFinder,WICKET-4617,12595251,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,cmenzel,cmenzel,cmenzel,20/Jun/12 11:12,03/Jul/12 13:15,14/Mar/19 03:09,03/Jul/12 13:15,1.5.7,6.0.0-beta2,,,,,,,,,,6.0.0-beta3,,,,,,,,,,,,,,0,,,,,,"I'm a bit confused by the responsibilities of ResourceFinder vs ResourceStreamLocator. Looking around in the code, I found the following:

- IResourceFinder is apparently only implemented via its extension interface IResourcePath. Its two implementations Path and WebApplicationPath look through a list of filesystem folders for files.

- ResourceStreamLocator does two things:
  - it loads resources, either via an IResourceFinder (which only finds filesystem resources) or via the classloader (it does this itself).
  - it uses a ResourceNameIterator to generate all possible filename variations based on locale and style and then tries to load one of them via the above mechanisms.

Is this correct?

If so, I think we have some mixed-up responsibilities here. I propose the following:

- add a third IResourcePath implementation (e.g. ClassloaderPath) that handles loading of resources in classpaths. It should be able to try multiple paths (e.g. ""/"", ""META-INF/resources"" etc).
- Instead of a single ResourceFinder, Application should have a list of them, by default containing WebApplicationPath (today's default) and the new ClassloaderPath.
- ResourceStreamLocator should not do any loading on its own at all and just use the ResourceFinders defined in this new list in Application.

This would also get rid of the hard-coded ""META-INF/resources"" lookup that currently is done in ResourceStreamLocator (I'll write a second ticket about that, it's causing us some problems).

I think this could still be done within 6.0. Objections?",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2012-06-27 07:43:08.727,,,no_permission,,,,,,,,,,,,253139,,,Tue Jul 03 13:15:02 UTC 2012,,,,,,0|i0dbtb:,75843,,,,,,,,"26/Jun/12 23:09;cmenzel;I pushed some work in progress (actually pretty far design-wise) to sandbox/resourcefinder. I'm going to continue this work tomorrow, though I hit a roadblock:

IResourceFinder and friends are in wicket-util while UrlResourceStream is in wicket-core. To do classpath-based resource loading I need UrlResourceStream. Why are IResourceFinder and its implementations in wicket-util rather than -core? I tried moving UrlResourceStream to -util, but it needs the Application, which has to stay in -core, obviously.",27/Jun/12 07:43;mgrigorov;Put the new class in -core if it depends on something that is in -core.,"27/Jun/12 07:48;cmenzel;I would have done that already, but the IResourceFinder interface is in -util. I wanted to ask first whether there is a pressing reason for it being in -util.","27/Jun/12 07:57;mgrigorov;We split wicket.jar to -util, -request and -core to make it more modular. Otherwise even simple util classes had access to Application/Session/... for no good reason and it was hard to use them e.g. in tests. You need to run WicketTester to test something simple.

If you want to move IResourceFinder in -core then you may have to put it in o.a.w.core.util... and this will be yet another API change (package name change) for no reason ...","27/Jun/12 13:27;cmenzel;Okay, I just put my new class in -core without moving the rest.

I found a basically broken test: org.apache.wicket.util.resource.ResourceTest plays around with Path, but never actually tests that class. Path never finds the resources the test wants it to find. Instead, the test is fooled by ResourceStreamLocator always falling back on classpath loading, which finds the resource.

This is exactly what I had in mind when I mentioned the mixed-up responsibilities of RF and RSL :-)

This test is trying to test Path but is actually testing RSL's classpath loading. I'm going to refactor it to actually test those two things separately in master, and then port it over to the new resource loading.","27/Jun/12 13:29;cmenzel;My new solution (will be in sandbox/resourcefinder later today) clarifies ResourceStreamLocator and ResourceFinder like this:

- ResourceStreamLocator uses a ResourceNameIterator to generate filenames to try and then uses a list of ResourceFinders to load the file.
- ResourceStreamLocator no longer does any loading on its own
- IResourcePath is removed - adding multiple paths to a single Path instance is rather odd
- Path and WebApplicationPath both just implement IResourceFinder
- ResourceSettings now contains a list of IResourceFinders instead of just one
- to look in multiple paths, you add Path instances to that list
- Instead of ResourceStreamLocator's hackish classpath loading, there is a new ClassPathResourceFinder that cleanly separates this stuff. it also simply resides in the list in ResourceSettings, put there by Application and WebApplication.
- the META-INF/resources lookup is just another ClassPathResourceFinder, instead of being hardcoded in RSL.",27/Jun/12 13:33;mgrigorov;Looks good!,27/Jun/12 17:25;cmenzel;All done. It's now available to look at in sandbox/resourcefinder. I'll add Javadoc tomorrow. I think this is much cleaner than before.,"28/Jun/12 07:15;mgrigorov;Here is a URL to compare against master: https://github.com/apache/wicket/compare/master...sandbox%2Fresourcefinder
I'll review it later today.","01/Jul/12 15:45;mgrigorov;Few comments from me:

1) Do we really need : Application#getResourceFinderForPath(String path) ?
I find this as a helper method which place is not in Application API. 
Additionally I'm not sure that we really need this helper method in any helper class. I personally never needed to create IResourceFinder in my apps.
Additionally it is overridden in WebApplication, so I think no one will ever use the one in Application. AFAIK there are no non-Web impls

I think IResourceSettings#addResourceFolder(String) should become IResourceSettings#addResourceFinder(IResourceFinder). Or just remove this method and let the user use #getResourceFinders().add(myFinder) as all listener related methods in WebApplication currently work.
 
2) make member fields 'final' if they are not going to change after class construction. E.g. WebApplicationPath#path

3) In ClassPathResourceFinder, line 46:
 this.prefix = prefix + ""/"";

What if the passed argument already have the trailing slash ?
Also there is concatenation at https://github.com/apache/wicket/compare/master...sandbox%2Fresourcefinder#L2R53 which may make this even more broken if 'path' has a leading slash.

4) Use SLF4J '{}' placeholders and avoid logger.isXyzEnabled() is possible.
https://github.com/apache/wicket/compare/master...sandbox%2Fresourcefinder#L4R132

5)  https://github.com/apache/wicket/compare/master...sandbox%2Fresourcefinder#L7R387
Is there a need for Args.nonNull() here ?
 
","03/Jul/12 13:04;cmenzel;1) No, we don't. I had kept that stuff for some semblance of backward compatibility, but since we're moving and breaking things anyway, it might as well go.

2) Absolutely.

3) In all my tests so far, double slashes were no problem. I'm making this conditional in ClassPathResourceFinder now though.

4) Done.

5) Yes.",03/Jul/12 13:15;cmenzel;All done and pushed to master. I'll add something to the migration page in the wiki next.,,,,,,,,,,,,,,,,,,,,,
URL with a previous page version ignores requested page based on mount path,WICKET-4488,12549618,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,05/Apr/12 05:46,13/Dec/13 14:59,14/Mar/19 03:09,10/Apr/12 13:19,1.5.5,,,,,,,,,,,1.5.6,6.0.0-beta2,,wicket,,,,,,,,,,,0,page,redirect,url,,,"See discussion on http://mail-archives.apache.org/mod_mbox/wicket-users/201203.mbox/browser

With 2 mounts /page1 and /page2 to stateful pages and the following sequence:
1-With a new session, user visits ""/page1"". Displayed URL is ""/page1?0""
2-Whatever, without expiring session
3-User requests URL ""/page2?0"" because it was bookmarked, received via email, etc.
4-Rendered page is ""/page1?0"" which was stored in the page map. The actual URL displayed is ""/wicket/bookmarkable/com.mycompany.Page1?0""

If a requested page id exists but does not match the page class mounted on the actual requested url, Wicket should not use the old page version. This is very counter-intuitive for users having bookmarks to stateful pages or exchanging links.",,,,,,,,,,,,,,,,,05/Apr/12 05:46;berniegp;pageVersions.zip;https://issues.apache.org/jira/secure/attachment/12521463/pageVersions.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2012-04-10 13:19:48.477,,,no_permission,,,,,,,,,,,,234609,,,Tue Jun 12 14:02:11 UTC 2012,,,,,,0|i0k8qn:,116233,,,,,,,,05/Apr/12 05:46;berniegp;Quickstart,"10/Apr/12 13:19;mgrigorov;There was code for this situation but it didn't cover the case 100%.
Now if a request to page2?0 is made and the type of the found page with id=0 is not Page2 then a new instance of Page2 is instantiated.",12/Jun/12 14:02;berniegp;Confirmed working,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BreadCrumbPanelLink should accept subclasses of BreadBrumbPanel,WICKET-4333,12538113,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,vitiate,vitiate,11/Jan/12 22:09,21/Nov/12 20:30,14/Mar/19 03:09,16/Jan/12 09:24,1.4.19,,,,,,,,,,,1.5.4,6.0.0-beta1,,wicket-extensions,,,,,,,,,,,0,api-change,wicket,,,,"A constructor for BreadCrumbPanelLink currently looks like 
public BreadCrumbPanelLink(final String id, final IBreadCrumbModel breadCrumbModel, final Class<BreadCrumbPanel> panelClass)
This does not allow for subclasses of BreadCrumbPanel to be used without casting. To allow for subclasses, the constructor should be
public BreadCrumbPanelLink(final String id, final IBreadCrumbModel breadCrumbModel, final Class<? extends BreadCrumbPanel> panelClass)",,600,600,,0%,600,600,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,223619,,,2012-01-11 22:09:52.0,,,,,,0|i00w33:,3130,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ByteArrayResource throws error if data is null,WICKET-4301,12535348,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,berniegp,berniegp,15/Dec/11 18:54,22/Dec/11 05:13,14/Mar/19 03:09,16/Dec/11 14:59,1.5.3,,,,,,,,,,,1.5.4,6.0.0-beta1,,wicket,,,,,,,,,,,0,resource,,,,,"When ByteArrayResource#getData(org.apache.wicket.request.resource.IResource.Attributes) returns null, the class throws a WicketRuntimeException.

This behavior differs from DynamicImageResource and ResourceStreamResource which instead issue the following call:
response.setError(HttpServletResponse.SC_NOT_FOUND);

ByteArrayResource should follow the same behavior. This would allow for instance to use it for resources which depend on the contents of attributes.getParameters(). When the parameters are invalid, a 404 should be issued instead of an exception.",,,,,,,,,,,,,,,,,15/Dec/11 18:55;berniegp;ByteArrayResource.patch;https://issues.apache.org/jira/secure/attachment/12507564/ByteArrayResource.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,221032,,,Thu Dec 15 18:55:35 UTC 2011,,,,,,0|i00w7j:,3150,,,,,,,,15/Dec/11 18:55;berniegp;proposed fix,"15/Dec/11 18:55;berniegp;Please validate the patch. It works in my tests, but I'm not 100% sure if it's right. In particular, should the following 2 statements be executed if data==null?

response.setContentLength(0);

configureResponse(response, attributes); // <--- DynamicImageResource calls this even if data is null",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wicket autocomplete when click right into the popup list without moving the mouse will not selelect the item under the mouse,WICKET-4297,12535306,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jcompagner,jcompagner,15/Dec/11 13:40,15/Dec/11 13:48,14/Mar/19 03:09,15/Dec/11 13:48,1.4.19,,,,,,,,,,,1.4.20,1.5.5,,wicket-extensions,,,,,,,,,,,0,,,,,,"instead of just doing this:

          	hideAutoComplete();

we need to do:

          	window.setTimeout( hideAutoComplete, 500);

so that the mouse events are handled first before the window is removed.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,220990,,,2011-12-15 13:40:59.0,,,,,,0|i0k8tz:,116248,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
In Firefox the auto complete dialog will not be closed when clicking besides it.,WICKET-4296,12535304,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jcompagner,jcompagner,15/Dec/11 13:38,15/Dec/11 13:48,14/Mar/19 03:09,15/Dec/11 13:48,1.4.19,,,,,,,,,,,1.4.20,1.5.5,,wicket-extensions,,,,,,,,,,,0,,,,,,"Currently we do:

obj.onblur=function(event){      		
    		if(mouseactive==1){
                ignoreOneFocusGain = true;
    			Wicket.$(elementId).focus();
    			return killEvent(event);
    		}
          	hideAutoComplete();
          	if(typeof objonblur==""function"") return objonblur.apply(this,[event]);
        }


somhow we override then onblur behavior because that one is never called in FF to hide the auto complete
if i use the Wicket.Event add listeners:

        Wicket.Event.add(obj,'blur',function(event){      		
    		if(mouseactive==1){
                ignoreOneFocusGain = true;
    			Wicket.$(elementId).focus();
    			return killEvent(event);
    		}
          	hideAutoComplete();
        });	 

it works fine.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-12-15 13:46:58.799,,,no_permission,,,,,,,,,,,,220988,,,Thu Dec 15 13:46:58 UTC 2011,,,,,,0|i0k8u7:,116249,,,,,,,,15/Dec/11 13:46;mgrigorov;This change is also part of my work on Wicket-Ajax for Wicket 6.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CheckGroupSelector ""Select all"" behavior broken when the CheckGroup contains a single check box.",WICKET-4279,12533840,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,svenmeier,berniegp,berniegp,05/Dec/11 05:07,06/Dec/11 15:43,14/Mar/19 03:09,06/Dec/11 07:15,1.5.3,,,,,,,,,,,1.5.4,6.0.0-beta1,,wicket,,,,,,,,,,,0,checkbox,checkgroup,,,,"When CheckGroupSelector is used with a CheckGroup that contains a single checkbox, select all behavior is broken. The problem is in CheckGroupSelector.js which assumes >1 checkboxes in a CheckGroup.",,,,,,,,,,,,,,,,,05/Dec/11 05:07;berniegp;CheckGroupSelector.js.patch;https://issues.apache.org/jira/secure/attachment/12506088/CheckGroupSelector.js.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-12-06 07:15:39.877,,,no_permission,,,,,,,,,,,,219566,,,Tue Dec 06 07:15:39 UTC 2011,,,,,,0|i0k8un:,116251,,,,,,,,05/Dec/11 05:07;berniegp;Fix,"06/Dec/11 07:15;svenmeier;Fix applied, thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix PageInspector styling,WICKET-4243,12532052,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,mgrigorov,berniegp,berniegp,19/Nov/11 18:04,24/Nov/11 16:10,14/Mar/19 03:09,24/Nov/11 14:58,1.5.3,,,,,,,,,,,1.5.4,6.0.0-beta1,,wicket-devutils,,,,,,,,,,,0,developer,util,,,,PageInspector.html is missing wicket:head tags,,,,,,,,,,,,,,,,,19/Nov/11 18:04;berniegp;inspectorpage.patch;https://issues.apache.org/jira/secure/attachment/12504377/inspectorpage.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-11-24 14:58:48.466,,,no_permission,,,,,,,,,,,,217788,,,Thu Nov 24 14:58:48 UTC 2011,,,,,,0|i0k8yv:,116270,,,,,,,,19/Nov/11 18:04;berniegp;fix,24/Nov/11 14:58;mgrigorov;Thanks!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractResourceAggregatingHeaderResponse does not order javascript properly,WICKET-4161,12528304,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,21/Oct/11 18:09,24/Nov/11 05:05,14/Mar/19 03:09,26/Oct/11 13:51,1.5.1,,,,,,,,,,,1.5.3,,,wicket,,,,,,,,,,,0,javascript,resource,,,,"I decided to give AbstractResourceAggregatingHeaderResponse a try but I found a problem in its design that, I think, makes it unusable.

How it works:
1-the IHeaderResponse#renderJavaScriptReference(ResourceReference) methods are intercepted and the resource references are stored in a list and not rendered right away. Each resource ref is assigned a key for grouping.

2-When close() is called on the response, the aggregator writes out all the accumulated resource references which have not been rendered yet. This step can be used to group multiple resources into a single merged resource.

The problem:
AbstractResourceAggregatingHeaderResponse does not intercept calls to IHeaderResponse#renderJavaScriptReference(url) or IHeaderResponse#renderJavaScript(Script). They are directly executed by the underlying response.

example:
AbstractDefaultAjaxBehavior#renderHead() does the following :
        response.renderJavaScriptReference(WicketEventReference.INSTANCE);
        response.renderJavaScriptReference(WicketAjaxReference.INSTANCE);
        response.renderJavaScript(""Wicket.Ajax.baseUrl=[...]"");

With the non-aggregating header response, the Wicket .js ref script tags are rendered in the markup before the inline javascript code and all is well.
With the aggregating version, the Wicket js resource references are rendered last (in close()). This means that the inline javascript code (which uses Wicket.Ajax) is executed before the Wicket .js files are loaded, causing a javascript error (Wicket is undefined).

This problem also applies to css resource references because order of inclusion is important for them too.

Short of a big refactor to force each rendered javascript to list its dependencies, I don't see how this problem can be solved. I opened this ticket primarily to share my findings and let people comment on possible solutions other than removing the code.

The problem is also present in AbstractDependencyRespectingResourceAggregatingHeaderResponse.

NOTE:
wiQuery uses AbstractResourceAggregatingHeaderResponse, but resolves the issue by intercepting all renderJavaScript* methods and keeping their order.",,,,,,,,,,,,,,,,,25/Oct/11 10:43;mgrigorov;WICKET-4161.patch;https://issues.apache.org/jira/secure/attachment/12500646/WICKET-4161.patch,24/Oct/11 13:24;berniegp;WICKET-4161.zip;https://issues.apache.org/jira/secure/attachment/12500438/WICKET-4161.zip,25/Oct/11 14:06;berniegp;quickstart2.patch;https://issues.apache.org/jira/secure/attachment/12500675/quickstart2.patch,,,,,,3.0,,,,,,,,,,,,,,,,,,,2011-10-24 08:26:55.172,,,no_permission,,,,,,,,,,,,97931,,,Wed Oct 26 13:51:33 UTC 2011,,,,,,0|i0k953:,116298,,,,,,,,"24/Oct/11 08:26;mgrigorov;I think this should be easy to solve.
We just need to extend org.apache.wicket.resource.aggregation.ResourceReferenceAndStringData to work with either ResourceReference or url (String),
Then org.apache.wicket.resource.ResourceUtil.renderTo(IHeaderResponse, ResourceReference, boolean, String) delegating to org.apache.wicket.resource.ResourceUtil.renderTo(IHeaderResponse, ResourceReference, boolean, String) will use the proper method of org.apache.wicket.markup.html.IHeaderResponse to render the ResourceReference or String.

Please create a quickstart that shows the problem and I'll see whether my approach will work.",24/Oct/11 13:24;berniegp;quickstart,"25/Oct/11 10:43;mgrigorov;Here is a patch that fixes the problem.
It has a small API break in the constructor of ResourceReferenceAndStringData but I think this code deserves even more work.

Check it and let us know whether it works for your real app.
I'll ask Hielke (WiQuery) also for review.
I'm not sure how many people actually use this code but I doubt there are a lot.",25/Oct/11 14:07;berniegp;patch for quickstart showing grouping problem,"25/Oct/11 14:17;berniegp;Your patch does fix the problem if grouping is only done by aggregating css and js in 2 groups. However, the AbstractResourceAggregatingHeaderResponse is still vulnerable to whatever aggregating method given by its subclass. My last quickstart patch shows this problem. Of course, the newGroupingKey() method I used was artificially manufactured explicitly to trigger the problem, but it shows that the aggregating functionality can easily break the required ordering of resources.

From my understanding, the subclass AbstractDependencyRespectingResourceAggregatingHeaderResponse of AbstractResourceAggregatingHeaderResponse is designed to overcome this issue by using ResourceDependentResourceReference. However, no part of Wicket currently uses the latter so a simple dependent ordering like the one in AbstractDefaultAjaxBehavior#renderHead() is still vulnerable.","26/Oct/11 13:50;mgrigorov;I think this is responsibility of the developer to provide proper implementation of org.apache.wicket.resource.aggregation.AbstractResourceAggregatingHeaderResponse.newGroupingKey(ResourceReferenceAndStringData).

The problem that Wicket itself doesn't use these classes should be discussed in another ticket.
As I wrote in my mail to dev@ yesterday: we should decide which way to go: improve the classes in o.a.w.resource.aggregation or use JavaScript library that does this. For example RequireJS.","26/Oct/11 13:51;mgrigorov;The problem in this ticket is solved.
Any other issues should be discussed in separate tickets.",,,,,,,,,,,,,,,,,,,,,,,,,,
FilterStateModel class is duplicated in DataTable FilterForm,WICKET-4155,12527933,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,ivaynberg,berniegp,berniegp,20/Oct/11 14:23,24/Oct/11 13:26,14/Mar/19 03:09,20/Oct/11 23:10,1.5.1,,,,,,,,,,,1.5.3,,,wicket-extensions,,,,,,,,,,,0,datatable,,,,,The FilterStateModel class is duplicated in DataTable FilterForm.,,,,,,,,,,,,,,,,,20/Oct/11 14:24;berniegp;FilterStateModel.patch;https://issues.apache.org/jira/secure/attachment/12499862/FilterStateModel.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,92344,,,Thu Oct 20 14:24:41 UTC 2011,,,,,,0|i0k95j:,116300,,,,,,,,20/Oct/11 14:24;berniegp;Removed duplicate inner class and merged with already existing outer class.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StatelessForm resubmitting via GET,WICKET-4107,12525749,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,chansen,chansen,05/Oct/11 00:14,20/Oct/11 16:19,14/Mar/19 03:09,20/Oct/11 00:46,1.4.18,1.5.0,1.5.1,,,,,,,,,1.5.2,,,wicket,,,,,,,,,,,0,,,,,,"After a StatelessForm is submitted, the user is redirected to a new URI. If  the user does an HTTP GET to this same URI, the form is resubmitted with all blank values (see examples below). This seems to happen regardless of the RenderStrategy being used or the form's method (i.e. POST), and it happens in recent versions of 1.4.x as well as 1.5.x.

To demonstrate the behavior, visit either of the following links. The validation failure indicates that the form has been submitted just by visiting the URI (i.e. HTTP GET).
http://wicketstuff.org/wicket14/stateless/?wicket:bookmarkablePage=:org.apache.wicket.examples.stateless.StatelessPage&wicket:interface=:0:statelessform::IFormSubmitListener::
http://wicketstuff.org/wicket/stateless/foo?0-1.IFormSubmitListener-statelessform

This behavior could be triggered when:
* a user submits a StatelessForm and saves a bookmark to the generated URI.
* a user submits a StatelessForm and shares a link to the generated URI via email or other means.
* a user submits a StatelessForm, lets their session expire, then takes any action requiring login when using wicket-auth-roles. (They are redirected back to the generated URI after login.)
* after submitting a StatelessForm, a user clicks in their address bar and hits enter.",,,,,,,,,,WICKET-877,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-10-10 09:06:26.369,,,no_permission,,,,,,,,,,,,46113,,,Thu Oct 20 16:19:23 UTC 2011,,,,,,0|i0k9a7:,116321,,,,,,,,"10/Oct/11 09:06;mgrigorov;Your problem is that the StatelessForm uses POST by default.
If you override its
        @Override
	protected String getMethod()
	{
		return Form.METHOD_GET;
	}

then the generated URL is: 
http://localhost:8080/stateless/foo?id1_hf_0=&0-1.IFormSubmitListener-statelessform=&textfield=10
and you can hit it as many times as you want.","13/Oct/11 17:44;chansen;What I actually want is for the StatelessForm to use POST and *only* POST because submitting a form via GET is often undesirable. Is this possible?

 Sorry for not being more clear about that originally.","14/Oct/11 16:22;mgrigorov;The form submits with POST by default but it is not possible to copy/paste the URL and send it to another person in this case.
Read about 'redirect after post' pattern.","14/Oct/11 16:39;chansen;Martin, it is possible to copy/paste the URL and send it to another person in this case because the form can also be submitted via GET (despite a method of POST). Click on the links in the description for proof. Clicking on the link submits the form with all blank values.

I know about 'redirect after post', but it doesn't help in this case because a GET to the post-redirect URL will submit the form with all blank values.","20/Oct/11 00:46;ivaynberg;martin - there is no redirect after post for stateless forms :/

i added Form#onMethodMismatch() callback that is invoked when a form is submitted with a method that doesnt match getMethod().

stateful forms ignore the mismatch, while stateless forms
{code}
setResponsePage(getPage().getClass(), getPage().getPageParameters());
{code}

which seems to be the only sane default.

if you dont want to wait for 1.5.3 it should be rather trivial to implement the same thing in a statelessform subclass.",20/Oct/11 16:19;chansen;That should work for me. Thanks for your help.,,,,,,,,,,,,,,,,,,,,,,,,,,,
domready events not always fired in IE,WICKET-4080,12524406,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,papegaaij,papegaaij,23/Sep/11 12:38,20/Feb/12 12:28,14/Mar/19 03:09,23/Sep/11 12:50,1.4.18,1.5.0,,,,,,,,,,1.4.19,1.5.1,,wicket,,,,,,,,,,,0,,,,,,"The domready events for IE rely on a onreadystatechange to state 'complete'. Normally, this state should go from 'loading', to 'complete' to 'loaded'. However, IE does not always trigger events for all states. Why it skips certain events, I don't know, but it seems related to other content being loaded at the same time. Perhaps IE does not find the time to trigger the event and simply skips a step. If it skips 'loading' or 'loaded', there is no problem, but if it skips 'complete', the domready scripts will never run. I've never seen it skip more than one state, therefore I propose the attached patch, which also checks for 'loaded'.

Although nothing has changed for a long time in wrt domready, this now is a serious issue when using the latest version of wiquery. The reason is that wiquery changes the order in which javascript files are added to head, and this different order causes IE to skip states far more frequently.",,,,,,,,,,,,,,,WICKET-4111,,23/Sep/11 12:38;papegaaij;dom-ready-ie-fix.patch;https://issues.apache.org/jira/secure/attachment/12496258/dom-ready-ie-fix.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-09-23 12:48:14.634,,,no_permission,,,,,,,,,,,,3411,,,Fri Sep 23 12:48:14 UTC 2011,,,,,,0|i0k9cf:,116331,,,,,,,,"23/Sep/11 12:48;dashorst;If 1.5.1 is rerolled and taken from trunk again, we need to modify the fix version.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hidden auto generated field in Form has invalid value for autocomplete,WICKET-4022,12521205,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,02/Sep/11 16:23,02/Sep/11 16:29,14/Mar/19 03:09,02/Sep/11 16:28,1.5-RC7,,,,,,,,,,,1.5.1,,,wicket,,,,,,,,,,,0,,,,,,"<input type=\""text\"" autocomplete=\""false\""/> should be <input type=\""text\"" autocomplete=\""off\""/> according to the HTML5 spec.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,62833,,,2011-09-02 16:23:19.0,,,,,,0|i0k9hb:,116353,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"MockHttpServletRequest#setURL(String url) does not respect protocol, domain and port",WICKET-3954,12518217,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,pete,pete,08/Aug/11 15:47,08/Aug/11 21:40,14/Mar/19 03:09,08/Aug/11 21:40,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,"when MockHttpServletRequest#setURL(String url) receives an absolute url like

  https://backend1.domain.org:1234/home

it does not invoke

- setServerName(""backend1.domain.org"")
- setServerPort(1234)
- setScheme(""https"")

but just set the relative url.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,65716,,,Mon Aug 08 21:40:24 UTC 2011,,,,,,0|i0a56f:,57112,,,,,,,,"08/Aug/11 19:09;pete;same for 

- MockHttpServletRequest#setUrl(Url url)
- MockHttpServletRequest#getUrl()
",08/Aug/11 21:40;pete;fixed in truck,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent behavior id under special circumstances ,WICKET-3915,12514546,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,ozeigermann,ozeigermann,19/Jul/11 07:06,24/Nov/11 16:27,14/Mar/19 03:09,18/Sep/11 00:40,1.4.14,1.4.15,1.4.16,1.4.17,,,,,,,,1.4.19,,,wicket,,,,,,,,,,,0,,,,,,"When removing behaviors in org.apache.wicket.Component#removeBehavior under special circumstances ids of existing behaviors can change causing inconsistentencies. 

Ids of behaviors are determined by their position inside an array. The error occurs when you first remove a behavior in the middle of the array and then eventually at the end. The problem is some code that tries to compact the array under wrong assumpt when removing the last element in the array

This is the code that displays it

    DummyBehavior dummyBehavior = new DummyBehavior();
    component.add(dummyBehavior);
    DummyBehavior dummyBehavior2 = new DummyBehavior();
    component.add(dummyBehavior2);
    DummyBehavior dummyBehavior3 = new DummyBehavior();
    component.add(dummyBehavior3);
    DummyBehavior dummyBehavior4 = new DummyBehavior();
    component.add(dummyBehavior4);

    String callbackUrlBefore = dummyBehavior3.getCallbackUrl().toString();
    component.remove(dummyBehavior2);
    String callbackUrlAfter2 = dummyBehavior3.getCallbackUrl().toString();
    Assert.assertEquals(""Works fine"", callbackUrlBefore, callbackUrlAfter2);

    component.remove(dummyBehavior4);
    String callbackUrlAfter4 = dummyBehavior3.getCallbackUrl().toString();
    Assert.assertEquals(""Bug in Wicket!!!"", callbackUrlBefore, callbackUrlAfter4);

You can fix this by simple commenting out the compacting code. And live with an array that may grow a bit. 

This is the orginal code in org.apache.wicket.Component#removeBehavior now commented out

          // if (o instanceof IRequestListener) {
          // // this was a listener which mightve caused holes in the array, see if we
          // // can clean them up. notice: at this point we already know there are no
          // // listeners that can be affected by index change downstream because this is
          // // the last one in the array
          // for (int j = i - 1; j >= start; j--) {
          // if (data_get(j) == null) {
          // data_remove(j);
          // }
          // }
          // }

Due to some larger refactoring this code does not seem to be present in 1.5.x any more.

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,60227,,,Thu Nov 24 16:27:20 UTC 2011,,,,,,0|i0k9pz:,116392,,,,,,,,"24/Nov/11 16:27;ozeigermann;Thanks, that fixes the bug!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Wicket 1.5 violates servlet standard, Glassfish spews warnings",WICKET-3914,12514466,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,18/Jul/11 16:36,19/Jul/11 12:56,14/Mar/19 03:09,19/Jul/11 07:34,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,servlet,,,,,"This seems to be a re-occurance of WICKET-1816.

Deploying wicket-examples to Glassfish produces tens of warnings on each request in the server log with the following text:
WARNING: PWC4011: Unable to set request character encoding to UTF-8 from context /wicket-examples, because request parameters have already been read, or ServletRequest.getReader() has already been called

According to Glassfish faq http://wikis.sun.com/display/glassfish/FaqWebAppUnableToSetRequestCharEncoding:
""""""
This warning message means that the web container is complaining about the fact that the web application deployed at /your_webapp is trying to set the request encoding too late in the request's lifecycle, when it is impossible for the container to honor it.

See the javadocs of javax.servlet.ServletRequest.setCharacterEncoding():

  This method must be called prior to reading request parameters or reading input using getReader(). Otherwise, it has no effect.

The container issues a warning to let you know that a call to ServletRequest.setCharacterEncoding() by your_webapp has no effect and is being ignored, because one of the above conditions is met.

To avoid this warning, your_webapp should move its invocation of ServletRequest.setCharacterEncoding() to an earlier stage, before it acquires any input reader from the request, or before it reads any request parameters. In case your_webapp is not responsible for this warning, one if its dependencies might be, in which case that library needs to be fixed.
""""""",SVN Revision: 1147931,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-07-18 20:38:36.581,,,no_permission,,,,,,,,,,,,67546,,,Tue Jul 19 12:56:51 UTC 2011,,,,,,0|i0k9q7:,116393,,,,,,,,"18/Jul/11 20:38;akiraly;I think this is the consequence of revision 1147790: ""WICKET-3908 Encoding problem with POSTing a form with Ajax""

Now WebRequest#isAjax()  (which is checking request parameters) is called so wicket can determine what character set to use for the request. :)","19/Jul/11 06:58;mgrigorov;Oh.
I didn't like the partial check (only on the header) but you're right that reading the parameters will lead to such problem. I'll fix it.",19/Jul/11 12:56;berniegp;No more warnings!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PageParameters#set not follow INamedParameters#set behavior,WICKET-3906,12514219,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,azarny,azarny,15/Jul/11 13:36,18/Jul/11 23:14,14/Mar/19 03:09,18/Jul/11 09:25,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,"Couple of problems to work with page parameters:
Major - The PageParameters#set(final String name, final Object value, final int index) used remove/add pattern instead of set parameter value by specified index.
Minor - Inposible to get the index of key in elegant way to use obtained index in #set operation",,14400,14400,,0%,14400,14400,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-07-15 13:44:37.474,,,no_permission,,,,,,,,,,,,67615,,,Mon Jul 18 23:14:45 UTC 2011,,,,,,0|i0k9rj:,116399,,,,,,,,"15/Jul/11 13:44;mgrigorov;Can you give some more details? 
I don't understand you.

The problem I see is that org.apache.wicket.request.mapper.parameter.PageParameters.set(String, Object, int) ignores the index when calling #add().
But from the description I think you mean something else in the two points.","15/Jul/11 18:17;azarny;Hi Martin ! 

You are right - #set(String, Object, int index) ignore index parameter, this is the main problem. 

When it will be resolved the index determination will be a not convinient, for example i know , that paramKey 
present in pageParameters and i want to replace it using #set(String, Object, int index). 
To get index value i have to iterate through  List<NamedPair> getAllNamed()","18/Jul/11 09:25;mgrigorov;#set() now respects the index.
Added #getPosition(String name) which returns the current position of named parameter or -1 if there is no such.","18/Jul/11 14:06;azarny;Just idea. 

Guess the #set(final String name, final Object value) shall check is name exists in parameters. And perform set(name, value, getPosition(name));

Your thoughts?",18/Jul/11 14:11;mgrigorov;Sounds OK.,18/Jul/11 15:28;mgrigorov;Done with r1147931.,18/Jul/11 23:14;azarny;Looks good,,,,,,,,,,,,,,,,,,,,,,,,,,
"Problems concerning IE9 with ""ActiveX Filtering"" enabled",WICKET-3887,12513707,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,wicket.x.ttp,wicket.x.ttp,11/Jul/11 18:58,19/Jul/11 14:31,14/Mar/19 03:09,14/Jul/11 08:21,1.4.17,,,,,,,,,,,1.4.18,1.5-RC6,,wicket,,,,,,,,,,,0,,,,,,"Internet Explorer 9 contains a new feature to block all ActiveX content by default:

  http://ie.microsoft.com/testdrive/Browser/ActiveXFiltering/About.html 

If the feature is enabled, all ActiveX controls are blocked silently. With Wicket this currently results in a lot of JavaScript content (but not all of it) being blocked as well. The user can allow an exception by clicking on a small icon in the address bar, however, he usually will be only able to do so, if he knows exactly what causes the problem.

A user who enabled the feature himself might still see what is wrong, but the feature can be also enabled in a domain policy, which might make solving the problem much more difficult and have adverse effects on customers.

The reason that some JavaScript content is blocked along with blocking ActiveX elements is the usage of window.ActiveXObject:

wicket-ajax.js:

>if (window.ActiveXObject) {                                                                                                                      
>  transport = new ActiveXObject(""Microsoft.XMLHTTP"");                                                                                          
>  Wicket.Log.info(""Using ActiveX transport"");                                                                                                  
>} else if (window.XMLHttpRequest) {                                                                                                              
>   transport = new XMLHttpRequest();                                                                                                            
>   Wicket.Log.info(""Using XMLHttpRequest transport"");                                                                                           
>}

According to 

  http://blogs.msdn.com/b/ie/archive/2011/05/02/activex-filtering-for-developers.aspx 

the usage of this pattern is not advisable and the order should be changed to:

>// Best Practice: Use Native XHR, if available
>if (window.XMLHttpRequest) {
>  // If IE7+, Gecko, WebKit: Use native object
>  var xmlHttp = new XMLHttpRequest();
>}
>else if (window.ActiveXObject) {
>  // ...if not, try the ActiveX control 
>  var xmlHttp = new ActiveXObject(""Microsoft.XMLHTTP"");
>}

The problem is reported to be fixed in JQuery 1.5.1, for instance.

","Windows 7, Internet Explorer 9, ""ActiveX Filtering"" enabled (for example as a domain policy in a company)",28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-07-11 19:28:27.525,,,no_permission,,,,,,,,,,,,67542,,,Tue Jul 19 14:31:32 UTC 2011,,,,,,0|i0k9t3:,116406,,,,,,,,"11/Jul/11 19:28;mgrigorov;This is fixed in 1.5 long ago.
I think it is safe to back port to 1.4","12/Jul/11 09:26;mgrigorov;Backported the fix to 1.4.x.
Tested wicket-examples/ajax/autocomplete with IE8.","13/Jul/11 17:54;wicket.x.ttp;Thank you for your fast response and for dealing with this issue!

Unfortunately there is still a problem.

I tested the latest Wicket-1.4 SNAPSHOT with IE9:

	https://repository.apache.org/content/groups/snapshots/org/apache/wicket/wicket/1.4-SNAPSHOT/wicket-1.4-20110713.000152-600.jar 

Here is an excerpt from the WICKET-AJAX-DEBUG log:

	INFO: Using XMLHttpRequest transport
	[…]
	INFO: Received ajax response (1114 characters)
	[…]
	ERROR: Wicket.Ajax.Call.failure: Error while parsing response: Automation server can't create object

The following three sections of code have been executed in that order:

wicket-ajax.js(724):

>var transport = null;                                                                                                                            
>if (window.XMLHttpRequest) {                                                                                                                     
>  transport = new XMLHttpRequest();                                                                                                             
>  Wicket.Log.info(""Using XMLHttpRequest transport"");                                                                                            
>} else if (window.ActiveXObject) {                                                                                                               
>  transport = new ActiveXObject(""Microsoft.XMLHTTP"");                                                                                           
>  Wicket.Log.info(""Using ActiveX transport"");                                                                                                   
>}         

wicket-ajax.js(1038):

>var xmldoc;                                                                                                  
>if (typeof(window.XMLHttpRequest) != ""undefined"" && typeof(DOMParser) != ""undefined"") {                      
>  var parser = new DOMParser();                                                                        
>  xmldoc = parser.parseFromString(responseAsText, ""text/xml"");                                         
>} else if (window.ActiveXObject) {                                                                           
>  xmldoc = t.responseXML;                                                                              
>}               

wicket-ajax.js(1516):

>var xmldoc;                                                                                                                                  
>if (window.ActiveXObject) {                                                                                                                  
>  xmldoc = new ActiveXObject(""Microsoft.XMLDOM"");                                                                                      
>  if (!xmldoc.loadXML(text)) {                                                                                                         
>    Wicket.Log.error(""Error parsing response: ""+text);                                                                           
>   }                                                                                                                                    
>} else {                                                                                                                                     
>  var parser = new DOMParser();                                                                                                            
>  xmldoc = parser.parseFromString(text, ""text/xml"");                                                                                       
>}

The last one caused an exception.
","14/Jul/11 08:21;mgrigorov;Improved!
Thanks!

There are no more usages of ActiveXObject in Wicket's .js files","19/Jul/11 14:31;wicket.x.ttp;Thank you very much!



I have tested the changes with the latest snapshot of Wicket-1.4:

https://repository.apache.org/content/groups/snapshots/org/apache/wicket/wicket/1.4-SNAPSHOT/wicket-1.4-20110719.085454-611.jar

Everything seemed fine with IE9 (""ActiveX Filtering"" enabled) and IE6 (security level ""medium"").",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ResourceReferences URL are not decorated with the CachingStrategy,WICKET-3883,12513330,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,svieujot,svieujot,09/Jul/11 12:34,10/Jul/11 23:21,14/Mar/19 03:09,10/Jul/11 23:21,,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,"If you set your Application with getResourceSettings().setCachingStrategy( new FilenameWithTimestampResourceCachingStrategy() );

Then in a WebPage#renderHead(IHeaderResponse response)
response.renderCSSReference( MyResourceReference )
generates an URL that is not decorated by the CachingStrategy.
And the ResourceReference is cached forever.

The same with a QueryStringWithTimestampResourceCachingStrategy generates a NPE (See WICKET-3882 ). ",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-07-10 23:21:48.707,,,no_permission,,,,,,,,,,,,68600,,,Sun Jul 10 23:21:48 UTC 2011,,,,,,0|i0a56n:,57113,,,,,,,,10/Jul/11 23:21;pete;all these things work for me in current wicket-trunk. Please verify and reopen the issue if any of these problems are still present.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException in QueryStringWithTimestampResourceCachingStrategy,WICKET-3882,12513328,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,pete,svieujot,svieujot,09/Jul/11 12:14,10/Jul/11 23:08,14/Mar/19 03:09,10/Jul/11 23:08,,,,,,,,,,,,1.5-RC6,,,,,,,,,,,,,,0,,,,,,"At line 78, there is no check for null. and it throws an exception for ""un-decorated"" urls :

public void undecorateUrl(ResourceUrl url)
{
>>		url.getParameters().remove(timestampParameter); <<
}",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-07-10 23:08:12.271,,,no_permission,,,,,,,,,,,,68601,,,Sun Jul 10 23:08:12 UTC 2011,,,,,,0|i0a56v:,57114,,,,,,,,10/Jul/11 23:08;pete;this has already been fixed. the class is now named 'QueryStringWithVersionResourceCachingStrategy' and the null check is there.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
URIs should be used instead of URLs as Set or Map keys.,WICKET-3867,12512728,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,04/Jul/11 15:21,05/Jul/11 21:22,14/Mar/19 03:09,05/Jul/11 19:26,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,1,classloader,url,,,,"URLs are not suitable for use as Set or Map keys because their equals() and hashCode() methods are not well defined. URIs should be used to identify the location and URLs to access the actual resources.

See thread for http://mail-archives.apache.org/mod_mbox/wicket-users/201107.mbox/%3CCAPdiUN6CaH9rn4+tD9_hXP-dmBGn-SvFu=RvCMh8AYx5_1JkkA@mail.gmail.com%3E

Specifically:
[1] ""More Joy of Sets"" example with URL from Google Tech Talks:
http://www.youtube.com/watch?v=wDN_EYUvUq0#t=9m58s

",,,,,,,,,,,,,,,,,04/Jul/11 20:15;berniegp;WICKET-3867-patch-v2.patch;https://issues.apache.org/jira/secure/attachment/12485179/WICKET-3867-patch-v2.patch,04/Jul/11 15:22;berniegp;WICKET-3867-patch.patch;https://issues.apache.org/jira/secure/attachment/12485157/WICKET-3867-patch.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2011-07-04 15:29:17.38,,,no_permission,,,,,,,,,,,,69101,,,Mon Jul 04 20:24:06 UTC 2011,,,,,,0|i0k9vr:,116418,,,,,,,,"04/Jul/11 15:22;berniegp;Proposed patch.

Please review usage of URLs in ReloadingClassLoader as well since it exhibits similar issues.","04/Jul/11 15:29;mgrigorov;I'm not sure whether we need the API break here.
We can collect the URIs in the Set and return their .toURL() representation in #getResources().",04/Jul/11 20:15;berniegp;v2,"04/Jul/11 20:24;berniegp;Ok no problem I made modifications to keep the same API.

This will be more costly to do with ReloadingClassLoader however and will change behavior. For instance, getLocations() returns the internal Set<URL> of ReloadingClassLoader. In order to keep the same API but use a Set<URI> internally, a new Set<URL> must be returned each time getLocations() is called. I couldn't find any callers in the Wicket source so maybe this class' API can change.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
in environments without reliable timestamps (e.g. some clusters) resource caching is useless,WICKET-3846,12512226,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,pete,pete,29/Jun/11 14:55,30/Jun/11 11:20,14/Mar/19 03:09,29/Jun/11 15:57,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,"As mentioned already in the wicket userlist *iirc* wicket's default resource caching strategy using resource file timestamps will not work in some cluster environments. Cluster deployers seem to be quite dumb and not preserve the 'lastModified' file attribute. So depending on the server instance the resource is delivered from it will contain multiple timestamps for the same resource. Apparently timestamps seem to be unsuitable for the purpose of caching in that environment.
",,,,,,,,,,,,,,,,,29/Jun/11 15:05;pete;cache.patch;https://issues.apache.org/jira/secure/attachment/12484649/cache.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-06-29 16:53:29.398,,,no_permission,,,,,,,,,,,,69635,,,Thu Jun 30 11:20:55 UTC 2011,,,,,,0|i0a57z:,57119,,,,,,,,"29/Jun/11 15:04;pete;I added another caching strategy so people can choose some static version string to attach to all resource files.

For example

  getResourceSettings().setCacheStrategy(new FilenameWithFixedVersionResourceCachingStrategy(""myversion123""))

will change resource

  scripts.js

to

   scripts-ver_myversion123.js

So you can choose to use wicket's default caching strategy based on timestamps for development (which is convenient) and use a static version for deployment on a cluster (which is not convenient but works).

You have to change the version string when rolling out another version of your application.

This could either be done manually (hardcoded string) or with the help of your build tool. For example let maven create a properties file with the current version and read it dynamically on application startup.
",29/Jun/11 15:57;pete;patch applied to trunk,29/Jun/11 16:53;ivaynberg;at deployment time to we disable the caching strategy? so it is not broken by default in clusters?,"29/Jun/11 17:57;pete;@igor: then we would have to choose between

(a) disabling caching for resources completely which will be _very_ bad for performance
(b) use a short-lived caching period (like 1 hour) which will cause stale cache entries when updating the deployed application

Basically we have to choose between broken behavior in some cluster implementations and bad application upgrade behavior. Which pill do you want to swallow? :-(","29/Jun/11 18:01;ivaynberg;how about a map<resourcename,date> in session? this will get synced across the cluster.","29/Jun/11 22:30;pete;The final solution is as follows:

In development mode:
  
  version-string = last-modified timestamp converted to milliseconds as a string
  cache-scope = version-string will be cached for the lifetime of the current request cycle

In deployment mode:
  
  version-string = md5 hash value of the package resource data as a hexadecimal string
  cache-scope = version-string will be cached for the lifetime of the wicket application


the resource filenames will be decorated like that:

  decorated_resource_filename := base_filename + ""-ver-"" + version-string ""."" + file_extension

all this behavior is just a default and can be changed to your needs.",30/Jun/11 09:49;pete;the code changes for this issue include a fix for WICKET-3848,"30/Jun/11 11:20;pete;Should be working + fixed, leaving this ticket open for a while. Your feedback on tests is welcome!",,,,,,,,,,,,,,,,,,,,,,,,,
support custom response headers in AbstractResource.ResourceResponse,WICKET-3845,12512219,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,asfernandes,asfernandes,29/Jun/11 13:32,05/Jul/11 12:42,14/Mar/19 03:09,02/Jul/11 09:36,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,"I'm converting an application to Wicket 1.5 and I see some problems with resources.

There is a case I need to add headers (not present in ResourceResponse properties) and it looks ugly.

This is what I need to do:

    @Override
    protected void configureCache(ResourceResponse data, Attributes attributes)
    {
        super.configureCache(data, attributes);
        ((WebResponse) attributes.getResponse()).setHeader(""Accept-Ranges"", ""bytes"");
    }

It's a hack to use configureCache here, but this can't be added to setResponseHeaders, which seams a better apparent method name for it.
",,,,,,,,,,,,,,,,,30/Jun/11 13:59;pete;custom-headers.patch;https://issues.apache.org/jira/secure/attachment/12484771/custom-headers.patch,30/Jun/11 14:07;mgrigorov;wicket-3845.patch;https://issues.apache.org/jira/secure/attachment/12484773/wicket-3845.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2011-06-29 14:02:38.804,,,no_permission,,,,,,,,,,,,69134,,,Tue Jul 05 12:42:19 UTC 2011,,,,,,0|i0a57b:,57116,,,,,,,,"29/Jun/11 14:02;mgrigorov;Looking at it you can do it as:

@Override
protected void setResponseHeaders(final ResourceResponse data, final Attributes attributes) {
   ((WebResponse) attributes.getResponse()).setHeader(""Accept-Ranges"", ""bytes""); 
   super.setResponseHeaders(data, attributes);
}

Or we can add #setCustomHeaders(Attributes) which will be called *before* the error/status headers are eventually set.","30/Jun/11 12:34;pete;reopened the ticket, did not intend to close it but jira somehow successfully confused me :-(","30/Jun/11 13:59;pete;patch (= proposal) attached:

the following methods will be added:

  ResourceResponse#setCustomHeader(name, value)
  ResourceResponse#getCustomHeaders()

Having a callback like

  configureHeaders(...)

will not be as good *imho* since the callback has no relationship to the code that actually creates the resource in AbstractResource#newResourceResponse(..).

With these additional methods you can simply add custom headers like 'Range', 'X-Special-Header', etc. in #newResourceResponse when generating the response.
",30/Jun/11 14:03;asfernandes;Looks fine for me.,"30/Jun/11 14:07;mgrigorov;I've been thinking about renaming current setResponseHeaders() to internalSetResponseHeaders() and adding new setResponseHeaders() which can be overridden by the user.
See this patch.

The only thing that I don't like is that the method will not be invoked for non-web response. I don't see non-web usage of AbstractResource but there is WebResponse specialization for Response class. 
I'm trying to say that AbstractResponse is too webby even now with all the headers it already handles.","30/Jun/11 14:22;asfernandes;Martin, while you talk about non-web responses, I'd like to add that I had something to render pages to string, and when I used StringResponse some core class threw ClassCastException while converting it to WebResponse.

But it has nothing to resources, it was about pages.",30/Jun/11 14:40;mgrigorov;Next time sends us the stacktrace.,"30/Jun/11 15:45;pete;I think you should be able to set the headers inside #newResourceResponse() when actually creating the response to have all the context information available for setting headers that relate to that content. For example you could conditionally downscale an image resource and set header ""X-Original-Size"" with the original image dimensions. Doing things like that with an callback will be very hard.",30/Jun/11 17:37;pete;fix committed to 1.5-trunk,"01/Jul/11 00:19;pete;Committed another patch so multi-valued http response headers are working now, too. Please test :-)","01/Jul/11 00:25;pete;adding headers work like this:

example:

  resourceResponse.getHeaders().addHeader(""Accept-Ranges"", ""bytes"")

caution: you are not allowed to set internal headers like for example ""Content-Type"" and will get a runtime error in that case. Access these values using the methods in ResourceResponse that are supposed to do it, like ""responseResponse.setContentType(type)""","04/Jul/11 19:57;asfernandes;Please allow to use empty header values, like the WebServletResponse.

Current it throws in addHeader:
  value = Args.notEmpty(value, ""value"").trim();","05/Jul/11 04:37;mgrigorov;What is the use case for empty header values ?
I'm not sure about the case with response but if you set a header with empty value in a request then this header is ignored and not existing at the server side.","05/Jul/11 10:40;asfernandes;In my case I used it to do communication of custom ""services"" using the HTTP protocol.

It worked in Wicket 1.4 and using the raw HttpServletResponse interfaces.","05/Jul/11 12:36;pete;Surprisingly(!) headers with empty values seem to be valid from looking at the RFC:

url:
 
  http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html

definition:

   message-header = field-name "":"" [ field-value ]

being compliant to the RFC is mandary *imho* so we should support this...",05/Jul/11 12:39;mgrigorov;+1 since the spec says so.,05/Jul/11 12:42;pete;added the possibility for empty header values in 1.5-trunk,,,,,,,,,,,,,,,,
WicketTester does not follow absolute redirects,WICKET-3834,12511516,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,pete,pete,25/Jun/11 01:21,28/Jun/11 20:44,14/Mar/19 03:09,28/Jun/11 20:44,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,"Wicket tester does not follow absolute redirects:

This is a problem when using HttpsMapper. For example when requesting a page over http:// with an forced redirect to https:// for secure access will make wicket tester return 'null' for the last renderer page instead of the rendered page instance. In general all kinds of absolute redirects to another page will not be tracked by wicket tester. So this potentially a problem for all kinds of tests that rely on absolute redirects.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,69828,,,Sat Jun 25 14:40:42 UTC 2011,,,,,,0|i0a58f:,57121,,,,,,,,"25/Jun/11 14:36;pete;additionally, when the first call of tester.startPage() redirects to a secure version of the page, e.g. https://localhost/secure, the subsequent requests (e.g. form submit) should go to the same base url (https://localhost). in general wicket tester should assign the protocol://host:port of the last request to the next wicket tester request (unless the last request was of type ajax).",25/Jun/11 14:40;pete;fixed in trunk and added a few tests,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryStringWithTimestampResourceCachingStrategy#undecorateUrl(ResourceUrl) can causes NPE,WICKET-3828,12511252,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,pete,hielkehoeve,hielkehoeve,22/Jun/11 15:55,22/Jun/11 19:19,14/Mar/19 03:09,22/Jun/11 19:19,1.5-RC4,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,"undecorateUrl(ResourceUrl) can sometimes produces a NPE, because the decorateUrl(ResourceUrl, ResourceReference) function contains an if using the value of lastModified(ResourceReference) and the getLastModified(ResourceReference) function may return NULL from the cache (or hypothetically resource).","Windows 7, Eclipse 3.6.2, Java 1.6.23",3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-06-22 19:19:18.388,,,no_permission,,,,,,,,,,,,70236,,,Wed Jun 22 19:19:18 UTC 2011,,,,,,0|i0a58n:,57122,,,,,,,,22/Jun/11 19:19;pete;Fixed - thanks for reporting!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"some jmx values are not working since they require wickets filter environment (application, session, etc.)",WICKET-3822,12511102,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,pete,pete,21/Jun/11 15:32,21/Jun/11 15:39,14/Mar/19 03:09,21/Jun/11 15:39,1.5-RC5.1,,,,,,,,,,,1.5-RC6,,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,70680,,,2011-06-21 15:32:54.0,,,,,,0|i0a58v:,57123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Quickstart 1.5RC4.2 depends on wicket not wicket-core,WICKET-3792,12510317,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,dashorst,dashorst,14/Jun/11 14:45,14/Jun/11 14:45,14/Mar/19 03:09,14/Jun/11 14:45,1.5-RC4,,,,,,,,,,,1.5-RC5,,,wicket-quickstart,,,,,,,,,,,0,,,,,,"And this gives strange errors when trying to create a eclipse project...


[INFO] snapshot org.apache.wicket:wicket-core:1.0-SNAPSHOT: checking for updates from topicus-snapshot-repository
[INFO] snapshot org.apache.wicket:wicket-core:1.0-SNAPSHOT: checking for updates from Apache Nexus
[INFO] snapshot org.apache.wicket:wicket-core:1.0-SNAPSHOT: checking for updates from apache.snapshots
Downloading: http://repo-onderwijs.topicus.local/artifactory/repo/org/apache/wicket/wicket-core/1.0-SNAPSHOT/wicket-core-1.0-SNAPSHOT.pom
[INFO] Unable to find resource 'org.apache.wicket:wicket-core:pom:1.0-SNAPSHOT' in repository topicus-snapshot-repository (http://repo-onderwijs.topicus.local/artifactory/repo)
Downloading: http://repo-onderwijs.topicus.local/artifactory/repo/org/apache/wicket/wicket-core/1.0-SNAPSHOT/wicket-core-1.0-SNAPSHOT.pom
[INFO] Unable to find resource 'org.apache.wicket:wicket-core:pom:1.0-SNAPSHOT' in repository Apache Nexus (https://repository.apache.org/content/repositories/snapshots/)
Downloading: http://repo-onderwijs.topicus.local/artifactory/repo/org/apache/wicket/wicket-core/1.0-SNAPSHOT/wicket-core-1.0-SNAPSHOT.pom
[INFO] Unable to find resource 'org.apache.wicket:wicket-core:pom:1.0-SNAPSHOT' in repository apache.snapshots (http://repository.apache.org/snapshots)
Downloading: http://repo-onderwijs.topicus.local/artifactory/repo/org/apache/wicket/wicket-core/1.0-SNAPSHOT/wicket-core-1.0-SNAPSHOT.jar
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,71287,,,2011-06-14 14:45:08.0,,,,,,0|i0ka1r:,116445,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wasp/swarm link on the documentation site is broken,WICKET-3749,12508625,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,myucel,myucel,28/May/11 17:10,03/Jun/11 10:52,14/Mar/19 03:09,30/May/11 10:51,,,,,,,,,,,,,,,site,,,,,,,,,,,0,swarm,wasp,,,,"""Wicketstuff Tutorial"" link through ""http://wicketstuff.org/confluence/display/STUFFWIKI/Wicket-Security"" on ""https://cwiki.apache.org/WICKET/wasp-swarm-security.html"" gets ""404 Not found"" when it is clicked. ",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-05-30 10:51:03.077,,,no_permission,,,,,,,,,,,,72178,,,Wed Jun 01 04:25:48 UTC 2011,,,,,,0|i0ka5j:,116462,,,,,,,,30/May/11 10:51;mgrigorov;Changed the link to point to the project's code and examples in its new home - github.org/wicketstuff,"01/Jun/11 04:25;myucel;Is there any documentation such as ""getting started with swarm"" available? If there is, could you share links? Thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NOTICE File contains wrong notices for 1.5,WICKET-3697,12506716,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,,dashorst,dashorst,10/May/11 13:42,17/Dec/13 19:17,14/Mar/19 03:09,10/May/11 15:57,1.5-RC4,1.5-RC5,,,,,,,,,,1.5-RC5,,,wicket,wicket-auth-roles,wicket-datetime,wicket-devutils,wicket-examples,wicket-extensions,wicket-guice,wicket-jmx,wicket-quickstart,wicket-spring,,0,license,notice,,,,"The NOTICE file doesn't comply with Apache policy: it contains unnecessary notices (Doug Lea for java.util.concurrent, for example), and references to code that is no longer part of wicket-core.

I haven't looked at it other than to see if things are wrong, but we should fix them asap.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,59235,,,Tue May 10 17:06:16 UTC 2011,,,,,,0|i0ka9z:,116482,,,,,,,,"10/May/11 15:57;dashorst;Removed unnecessary NOTICE files from projects that don't require an explicit one (they get one from the remote resources plugin during release builds), removed the license for the concurrent library written by Doug Lea since we don't include it any more and Java 5 provides the shizzle out of the box. Fixed the build script and POM such that the right copyright years are generated (Wicket joined The ASF in 2006, so our since should reflect that).","10/May/11 17:06;dashorst;Also removed any references to Apache libraries, as they are already covered by ""Contains software produced by The Apache Software Foundation"" clause.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ajax Debug Window does not display info,WICKET-3683,12506505,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,07/May/11 18:43,09/May/11 16:48,14/Mar/19 03:09,07/May/11 19:00,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket-devutils,,,,,,,,,,,0,ajax,debug,,,,The Ajax Debug Window does not display any information when Ajax requests are handled.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-05-07 19:00:53.975,,,no_permission,,,,,,,,,,,,204439,,,Sat May 07 19:00:53 UTC 2011,,,,,,0|i0kab3:,116487,,,,,,,,"07/May/11 19:00;mgrigorov;Fixed with r1100592.

Unfortunately I didn't notice this when I added support for XHTML pages (.innerHTML doesn't work there).",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"ListItem partakes in stringresource key generation, resulting in formName.repeaterName.0.fieldName like keys.",WICKET-3671,12506314,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,alankila,alankila,05/May/11 17:29,11/May/11 14:25,14/Mar/19 03:09,06/May/11 07:05,1.4.16,1.5-RC3,,,,,,,,,,1.4.18,1.5-RC4,,wicket,,,,,,,,,,,0,,,,,,"This issue probably affects all versions of wicket. I have encountered it on 1.4.16.

Let's assume a structure in page such as Page -> Form -> ListView -> ListItem -> TextField.

Localizer#getCacheKey() generates cache keys for the TextField using string resource lookups which omit the component that is direct child of AbstractRepeater (= ListItem). This results in construction of cache keys in form formName.repeaterName.fieldName, that is, without the ListItem ID. These cache keys are used to quickly return the string resource that was returned last time for component in similar relationship in page.

Howver, this is inconsistent with actual string resource lookup for elements that are children of ListItem. Namely, the string resource lookup contains the row ID, resulting a string resource lookup for this key in properties file: formName.repeaterName.0.fieldName. It appears to use the full page relative path to the component, in other words.

This combined with the cacheKey calculation such that wicket generally works correctly if one writes resource such as the following:

formName.repeaterName.0.fieldName = foo

because after the first row has been rendered, the Localizer has cached the object's key, so for the next row it will look up the same result as for the first row.

However, if the lookup doesn't occur on the first row (for instance because the field is invisible on that row only) the the lookup is attempted first time on the second row, requiring formName.repeaterName.1.fieldName to be found in the properties file. The workaround can be to remove the path and only define ""fieldName = foo"" in the properties file.

The correct solution might be to duplicate the cacheKey calculation in the string resource path lookup.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-05-06 07:05:26.898,,,no_permission,,,,,,,,,,,,204429,,,Wed May 11 14:25:41 UTC 2011,,,,,,0|i0a5bb:,57134,,,,,,,,"06/May/11 07:05;pete;Should be working now, please test and confirm.","06/May/11 08:21;alankila;Will test when during migrating to wicket 1.5rc4, when it is released.",11/May/11 14:25;alankila;Confirmed fixed in 1.5-RC4. Thank you.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MountedMapper should support optional named parameters,WICKET-3660,12505926,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,papegaaij,papegaaij,02/May/11 13:04,02/May/11 13:17,14/Mar/19 03:09,02/May/11 13:16,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket,,,,,,,,,,,0,,,,,,I propose a change in MountedMapper to support optional named parameters. These parameters (including their leading /) should be specified with #{}. The attached patch implements this.,,,,,,,,,,,,,,,,,02/May/11 13:09;papegaaij;mountedmapper-part2.patch;https://issues.apache.org/jira/secure/attachment/12477946/mountedmapper-part2.patch,02/May/11 13:04;papegaaij;mountedmapper.patch;https://issues.apache.org/jira/secure/attachment/12477945/mountedmapper.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204421,,,2011-05-02 13:04:29.0,,,,,,0|i0kad3:,116496,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Maven quickstart gives warnings about missing plugin versions,WICKET-3656,12505815,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,29/Apr/11 18:56,29/Apr/11 18:57,14/Mar/19 03:09,29/Apr/11 18:56,1.4.17,,,,,,,,,,,1.4.18,,,wicket-quickstart,,,,,,,,,,,0,,,,,,"$ mvn eclipse:eclipse
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for de.micromata.wicket:exercise_1:war:1.0-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.mortbay.jetty:maven-jetty-plugin is missing. @ line 122, column 12
[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 111, column 12
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204417,,,2011-04-29 18:56:01.0,,,,,,0|i0kadb:,116497,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RequestHandler listeners are called with null handler,WICKET-3646,12505184,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,26/Apr/11 12:22,26/Apr/11 12:25,14/Mar/19 03:09,26/Apr/11 12:25,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket,,,,,,,,,,,0,,,,,,"When running RequestCycleListeners with WicketTester, they get called with null for the requesthandler in onScheduleHandler(). This is an artifact of the wicket tester requestcycle, which I think should normally not occur in Wicket processing. The parameters are not marked as optional, so it is IMO safe to assume that handler should never be null.

I propose to modify scheduleRequestHandlerAfterCurrent(IRequestHandler handler) to not invoke the listeners when the handler is null, but only to clear the current scheduled handler.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204408,,,Tue Apr 26 12:25:23 UTC 2011,,,,,,0|i0kaef:,116502,,,,,,,,26/Apr/11 12:25;dashorst;Fixed by implementing proposed solution. All tests still work fine (except those tests that tested the previous behavior).,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RequestCycleListenerCollection.onException should not throw an exception when multiple listeners handle the exception,WICKET-3644,12505174,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,papegaaij,papegaaij,26/Apr/11 09:44,27/Apr/11 13:03,14/Mar/19 03:09,27/Apr/11 13:03,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket,,,,,,,,,,,0,,,,,,"When multiple listeners handle the exception, RequestCycleListenerCollection should simple take the first handler. The current approach makes it impossible to add a listener that handles all exceptions and later add listeners for specific exceptions. Simply removing the 'if (handlers.size() > 1)' should suffice.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204406,,,2011-04-26 09:44:35.0,,,,,,0|i0kaen:,116503,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ResponseResettingDecorator doesn't implement IRequestHandlerDelegate,WICKET-3642,12505168,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,26/Apr/11 08:46,26/Apr/11 09:34,14/Mar/19 03:09,26/Apr/11 09:34,,,,,,,,,,,,1.5-RC4,,,,,,,,,,,,,,0,,,,,,"ResponseResettingDecorator doesn't implement IRequestHandlerDelegate, hiding the decorated handler. This makes for example the DummyRequestLogger not fully functional.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204404,,,2011-04-26 08:46:48.0,,,,,,0|i0kaev:,116504,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix warnings for all projects except wicket-examples,WICKET-3638,12505060,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jdonnerstag,berniegp,berniegp,23/Apr/11 18:18,26/Apr/11 18:02,14/Mar/19 03:09,26/Apr/11 09:12,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket,wicket-datetime,wicket-devutils,wicket-extensions,wicket-guice,wicket-spring,,,,,,0,,,,,,"Fixed all warnings (except 7 deprecation warnings) for all Wicket projects except wicket-examples. All tests are still passing.

Please see attached patch.",,,,,,,,,,,,,,,,,23/Apr/11 18:18;berniegp;warnings_except_wicket-examples.patch;https://issues.apache.org/jira/secure/attachment/12477222/warnings_except_wicket-examples.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-04-26 07:44:43.999,,,no_permission,,,,,,,,,,,,204401,,,Tue Apr 26 09:12:23 UTC 2011,,,,,,0|i0kafb:,116506,,,,,,,,23/Apr/11 18:18;berniegp;patch,"26/Apr/11 07:44;mgrigorov;The patch is not easy to apply with command line ""patch"" tool.
Even when I separated it into several .patch files for each sub-project it still fails to apply here.
",26/Apr/11 09:12;jdonnerstag;Thanks,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException in AnnotProxyFieldValueFactory for singletons,WICKET-3632,12504955,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,papegaaij,papegaaij,22/Apr/11 07:46,22/Apr/11 08:17,14/Mar/19 03:09,22/Apr/11 08:17,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket,,,,,,,,,,,0,,,,,,"We use SingletonBeanRegistry.registerSingleton to manually register some singletons in spring. When these are injected with @SpringBean, AnnotProxyFieldValueFactory gives a NPE on line 191, because getBeanDefinition returns null. This used to work with 1.4.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204396,,,2011-04-22 07:46:14.0,,,,,,0|i0kag7:,116510,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tree 1.4 to 1.5 migration issue warning,WICKET-3627,12504754,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jdonnerstag,berniegp,berniegp,20/Apr/11 04:24,24/Apr/11 04:40,14/Mar/19 03:09,23/Apr/11 07:19,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket-extensions,,,,,,,,,,,0,tree,treetable,,,,"Different types of Trees produce the following warning in the console when displayed :
WARN  - aultMarkupSourcingStrategy - 1.4 to 1.5 migration issue: your item component should be derived from AbstractItem. Item=[TreeItem [Component id = 0]]

Examples producing this warning :
LinkTree, LabelTree and TreeTable from Ajax->Tree and TreeTable:
""Nested"" example

Feel free to change the priority if this is not important.",Wicket examples,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-04-23 07:19:47.353,,,no_permission,,,,,,,,,,,,204391,,,Sat Apr 23 07:19:47 UTC 2011,,,,,,0|i0kagf:,116511,,,,,,,,23/Apr/11 07:19;jdonnerstag;thanks,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DataTable row groups are present in markup even when they contain no rows.,WICKET-3603,12503681,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,07/Apr/11 21:46,26/Apr/11 18:04,14/Mar/19 03:09,18/Apr/11 17:11,1.5-RC3,,,,,,,,,,,1.5-RC4,,,wicket-extensions,,,,,,,,,,,0,datatable,,,,,"As per the HTML spec :
""When present, each THEAD, TFOOT, and TBODY contains a row group. Each row group must contain at least one row, defined by the TR element.""

There is no check in place to remove the row group tags from the output if they don't contain any row.",,,,,,,,,,,,,,,,,07/Apr/11 22:01;berniegp;DataTableToolbars.patch;https://issues.apache.org/jira/secure/attachment/12475753/DataTableToolbars.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-04-18 17:11:56.142,,,no_permission,,,,,,,,,,,,204370,,,Mon Apr 18 17:11:56 UTC 2011,,,,,,0|i0kaj3:,116523,,,,,,,,07/Apr/11 22:01;berniegp;Partial fix for thead and tfoot,"07/Apr/11 22:04;berniegp;Please see attached DataTableToolbars.patch for a proposed patch to fix the occurance of <thead> and <tfoot>.

There is still a problem when the DataTable has no records however. In that case, we have an empty <tbody> which is not valid html. <tbody> cannot be simply removed because a non-empty table body is required.

I wasn't sure what to do in that case so I left it out of the first patch.",18/Apr/11 17:11;mgrigorov;Improved with r1094660.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot set a cookie on bookmarkable page,WICKET-3576,12502757,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jdonnerstag,berniegp,berniegp,29/Mar/11 20:41,22/Apr/11 05:23,14/Mar/19 03:09,09/Apr/11 14:45,1.5-RC2,1.5-RC3,,,,,,,,,,1.5-RC4,,,wicket,wicket-examples,,,,,,,,,,2,cookie,,,,,"Steps to reproduce:
//////////////////////
After starting the Wicket Examples, navigate directly to:
http://localhost:8080/authentication2/wicket/bookmarkable/org.apache.wicket.examples.authentication2.SignIn2

Sign in with proper user name and password. Notice that the cookie ""LoggedIn"" is not set.
//////////////////////

This does not happen if navigation to the authentication2 example is done through the examples home page. In that case, the URL is http://localhost:8080/authentication2/.

If I understand correctly, this means that bookmarkable pages cannot set cookies when they also do a redirect. e.g. a bookmarkable sign-in page.

Note that with the examples from 1.5-rc2, doing the steps described above produces a different result. In that case, signing-in does not set a cookie or actually sign-in at all. The same sign-in page is presented a second time. Sign-in works on this second page.",wicket-examples from rev 1086031 (March 29 2011),,,,,,,,,,,,,,,,04/Apr/11 15:52;berniegp;setCookie_failing_test.patch;https://issues.apache.org/jira/secure/attachment/12475384/setCookie_failing_test.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-03-31 15:46:42.797,,,no_permission,,,,,,,,,,,,204345,,,Mon Apr 11 21:26:59 UTC 2011,,,,,,0|i0kalj:,116534,,,,,,,,"29/Mar/11 20:52;berniegp;Some debugging reveals that the BufferedWebResponse is reset which has the effect of discarding previously added AddCookieActions. 
This happens at :
WebPageRenderer.redirectTo(Url, RequestCycle) line: 176

(partial) stack trace:
BufferedWebResponse.sendRedirect(String) line: 460	
HeaderBufferingWebResponse.sendRedirect(String) line: 111	
WebPageRenderer.redirectTo(Url, RequestCycle) line: 177	
WebPageRenderer.respond(RequestCycle) line: 254	
RenderPageRequestHandler.respond(IRequestCycle) line: 139	
RequestCycle$HandlerExecutor.respond(IRequestHandler) line: 715	
RequestCycle$HandlerExecutor(RequestHandlerStack).execute(IRequestHandler) line: 63	
RequestCycle$HandlerExecutor(RequestHandlerStack).execute(IRequestHandler) line: 96	
CustomRequestCycle(RequestCycle).processRequest() line: 212	
CustomRequestCycle(RequestCycle).processRequestAndDetach() line: 253	
WicketFilter.processRequest(ServletRequest, ServletResponse, FilterChain) line: 138	


Execution passes by 
WebPageRenderer.respond(RequestCycle) line: 254
which has the following:
else if (!targetUrl.equals(currentUrl) //
	&&
	(getPageProvider().isNewPageInstance() || (isSessionTemporary() && getPage().isPageStateless())))
{
	// if target URL is different and session is temporary and page is stateless
	// this is special case when page is stateless but there is no session so we can't
	// render it to buffer

	// alternatively if URLs are different and we have a page class and not an instance we
	// can redirect to the url which will instantiate the instance of us

	// note: if we had session here we would render the page to buffer and then redirect to
	// URL generated *after* page has been rendered (the statelessness may change during
	// render). this would save one redirect because now we have to render to URL generated
	// *before* page is rendered, render the page, get URL after render and if the URL is
	// different (meaning page is not stateless), save the buffer and redirect again (which
	// is pretty much what the next step does)
	redirectTo(targetUrl, requestCycle);
}

WICKET-3161 had a similar problem.","31/Mar/11 15:46;mgrigorov;Did you try it with RC-3 ?
Because this looks like WICKET-3493 which is fixed for RC3","31/Mar/11 19:41;berniegp;I cannot locate which revision is RC3. I looked in the subversion ""Releases"" folder and couldn't find it.

However, my test environment was Wicket rev #1086031 (latest on March 29 2011) . From what I can see in the log of WICKET-3493, the last commit was done in rev #1079685. I guess this means I had the relevant changes?",03/Apr/11 17:00;jdonnerstag;I've tested the latest snapshot 1.5rc3 on wicket-library. Seems to be fixed,"04/Apr/11 14:58;berniegp;I have just updated to rev. 1088594 (8:28:17 AM, April-04-11) and I still have the problem.

The steps must be followed exactly however :
1-Start ""org.apache.wicket.examples.StartExamples.java""
2-Open the page at http://localhost:8080/authentication2/wicket/bookmarkable/org.apache.wicket.examples.authentication2.SignIn2
3-Log-in
4-Log-in successful but the ""remember me"" cookie named ""LoggedIn"" is not set; only JSESSIONID is set.

After this however,
5-Click ""sign out""
6-Click ""Home""
7-Log-in
8-""LoggedIn"" cookie is not set.

Is this what you have tried?",04/Apr/11 15:52;berniegp;Test case demonstrating the problem,04/Apr/11 15:52;berniegp;Please see newly attached test case for an even simpler way to reproduce.,"07/Apr/11 14:28;blakeday;I believe this bug affects my application in that users cannot log out because the ""LoggedIn"" cookie is never unset when I call session.invalidate() and then setResponsePage().","11/Apr/11 21:26;berniegp;Works wonderfully, thanks!

Closing issue",,,,,,,,,,,,,,,,,,,,,,,,
Autolink (AutolinkBookmarkablePageLink) already rendered problem,WICKET-3559,12502449,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jdonnerstag,gregjohnson,gregjohnson,26/Mar/11 11:09,27/Mar/11 19:59,14/Mar/19 03:09,27/Mar/11 19:59,1.5-RC2,,,,,,,,,,,1.5-RC3,,,wicket,,,,,,,,,,,0,,,,,,"Using a menu panel that includes <wicket:link> to return to a page that includes a panel with a <wicket:head> element,  gives:
The component [AutolinkBookmarkablePageLink [Component id = _autolink_X]] was rendered already",,,,,,,,,,,,,,,,,26/Mar/11 11:23;gregjohnson;wicketAutolinkBookmarkablePageLinkTest.zip;https://issues.apache.org/jira/secure/attachment/12474699/wicketAutolinkBookmarkablePageLinkTest.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204331,,,Sat Mar 26 11:25:52 UTC 2011,,,,,,0|i0kanj:,116543,,,,,,,,"26/Mar/11 11:15;gregjohnson;A maven quickstart demonstrating the problem is available from http://anekol.com/pub/wicketAutolinkBookmarkablePageLinkTest.zip

To run:

mvn jetty:run

browse to localhost:8080

choose ""Simple Page"", return to ""Home Page"" gives:
Root cause:

org.apache.wicket.markup.MarkupException: The component [AutolinkBookmarkablePageLink [Component id = _autolink_3]] was rendered already. You can render it only once during a render phase. Class relative path: org.apache.wicket.markup.resolver.AutoLinkResolver$AutolinkBookmarkablePageLink:menu:_wicket_link-2-1-2:_autolink_3
at org.apache.wicket.Page.componentRendered(Page.java:254)
at org.apache.wicket.Component.rendered(Component.java:2573)
at org.apache.wicket.Component.internalRender(Component.java:2380)
at org.apache.wicket.Component.render(Component.java:2304)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1420)
at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1548)
at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1523)","26/Mar/11 11:19;gregjohnson;A mvn quickstart that replicates the problem is available from http://anekol.com/pub/wicketAutolinkBookmarkablePageLinkTest.zip.

mvn jetty:run
browse to http://localhost:8080

choose ""Simple Page"", returning to ""Home Page"" gives exception:

Root cause:

org.apache.wicket.markup.MarkupException: The component [AutolinkBookmarkablePageLink [Component id = _autolink_3]] was rendered already. You can render it only once during a render phase. Class relative path: org.apache.wicket.markup.resolver.AutoLinkResolver$AutolinkBookmarkablePageLink:menu:_wicket_link-2-1-2:_autolink_3
at org.apache.wicket.Page.componentRendered(Page.java:254)
at org.apache.wicket.Component.rendered(Component.java:2573)
at org.apache.wicket.Component.internalRender(Component.java:2380)
at org.apache.wicket.Component.render(Component.java:2304)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1420)
at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1548)
at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1523)","26/Mar/11 11:23;gregjohnson;mvn jetty:run
browse to http://localhost:8080

choose ""Simple Page"", return to ""Home Page"" gives exception of:

Root cause:

org.apache.wicket.markup.MarkupException: The component [AutolinkBookmarkablePageLink [Component id = _autolink_3]] was rendered already. You can render it only once during a render phase. Class relative path: org.apache.wicket.markup.resolver.AutoLinkResolver$AutolinkBookmarkablePageLink:menu:_wicket_link-2-1-2:_autolink_3
at org.apache.wicket.Page.componentRendered(Page.java:254)
at org.apache.wicket.Component.rendered(Component.java:2573)
at org.apache.wicket.Component.internalRender(Component.java:2380)
at org.apache.wicket.Component.render(Component.java:2304)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1420)
at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1548)","26/Mar/11 11:25;gregjohnson;mvn jetty:run
browse to localhost:8080

select ""Simple Page"", return to ""Home Page"" gives exception:
Root cause:

org.apache.wicket.markup.MarkupException: The component [AutolinkBookmarkablePageLink [Component id = _autolink_3]] was rendered already. You can render it only once during a render phase. Class relative path: org.apache.wicket.markup.resolver.AutoLinkResolver$AutolinkBookmarkablePageLink:menu:_wicket_link-2-1-2:_autolink_3
at org.apache.wicket.Page.componentRendered(Page.java:254)
at org.apache.wicket.Component.rendered(Component.java:2573)
at org.apache.wicket.Component.internalRender(Component.java:2380)
at org.apache.wicket.Component.render(Component.java:2304)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1420)
at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1548)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Event broadcast type ""Depth"" does not work when the sink is a Component but not a MarkupContainer",WICKET-3539,12501551,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,berniegp,berniegp,16/Mar/11 06:20,11/Apr/11 21:35,14/Mar/19 03:09,16/Mar/11 15:35,1.5-RC2,,,,,,,,,,,1.5-RC3,,,wicket,,,,,,,,,,,0,event,,,,,"Event broadcast type ""Depth"" does not work when the sink is a Component but not a MarkupContainer. In this case, no sinks receive the event.",,,,,,,,,,,,,,,,,16/Mar/11 06:21;berniegp;tests_fix_patch.diff;https://issues.apache.org/jira/secure/attachment/12473763/tests_fix_patch.diff,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-03-16 15:35:18.939,,,no_permission,,,,,,,,,,,,204313,,,Wed Mar 16 15:35:18 UTC 2011,,,,,,0|i0kap3:,116550,,,,,,,,16/Mar/11 06:21;berniegp;Test demonstrating the issue + fix,"16/Mar/11 15:35;ivaynberg;fixed, thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Wicket example ""Library"" - sign out not working",WICKET-3537,12501496,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,15/Mar/11 18:39,11/Apr/11 21:34,14/Mar/19 03:09,15/Mar/11 22:04,1.5-RC2,,,,,,,,,,,1.5-RC3,,,wicket-examples,,,,,,,,,,,0,example,library,,,,"Steps to reproduce :
1-Click on the ""library"" example
2-sign in
3-sign out

Step 3 produces :
HTTP ERROR 500

Problem accessing /library/wicket/bookmarkable/org.apache.wicket.examples.library.SignOut. Reason:

    Header was already written to response!

Caused by:

java.lang.IllegalStateException: Header was already written to response!
	at org.apache.wicket.protocol.http.HeaderBufferingWebResponse.checkHeader(HeaderBufferingWebResponse.java:62)
	at org.apache.wicket.protocol.http.HeaderBufferingWebResponse.addCookie(HeaderBufferingWebResponse.java:69)
	at org.apache.wicket.util.cookies.CookieUtils.save(CookieUtils.java:297)
	at org.apache.wicket.util.cookies.CookieUtils.remove(CookieUtils.java:233)
	at org.apache.wicket.util.cookies.CookieUtils.remove(CookieUtils.java:80)
	at org.apache.wicket.authentication.strategy.DefaultAuthenticationStrategy.remove(DefaultAuthenticationStrategy.java:151)
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-03-15 22:04:49.66,,,no_permission,,,,,,,,,,,,204311,,,Tue Mar 15 22:04:49 UTC 2011,,,,,,0|i0kapb:,116551,,,,,,,,15/Mar/11 22:04;mgrigorov;Fixed with r1081960.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DateTimeField improperly converts time causing wrong dates when the server's current date is different from the client's date.,WICKET-3510,12500523,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,berniegp,berniegp,05/Mar/11 20:53,11/Apr/11 21:34,14/Mar/19 03:09,26/Mar/11 05:51,1.5-RC2,,,,,,,,,,,1.5-RC3,,,wicket-datetime,,,,,,,,,,,0,datepicker,datetime,,,,"The bug is in DateTimeField#convertInput().
<code>
// Get year, month and day ignoring any timezone of the Date object
Calendar cal = Calendar.getInstance();
cal.setTime(dateFieldInput);
int year = cal.get(Calendar.YEAR);
int month = cal.get(Calendar.MONTH) + 1;
int day = cal.get(Calendar.DAY_OF_MONTH);
int hours = (hoursInput == null ? 0 : hoursInput % 24);
int minutes = (minutesInput == null ? 0 : minutesInput);

// Use the input to create a date object with proper timezone
MutableDateTime date = new MutableDateTime(year, month, day, hours, minutes, 0, 0,
	DateTimeZone.forTimeZone(getClientTimeZone()));
</code>
If the server's current date is different from the client's, this produces wrong output. I attached a patch with a test case that simulates this condition.

I don't know why this ""casting"" of day, month, year is done.
",,,,,,,,,,,,,,,,,09/Mar/11 22:29;bitstorm;DateConverterFix.patch;https://issues.apache.org/jira/secure/attachment/12473211/DateConverterFix.patch,07/Mar/11 17:04;berniegp;FailingTest.patch;https://issues.apache.org/jira/secure/attachment/12472835/FailingTest.patch,05/Mar/11 20:54;berniegp;TestDateConverter.java;https://issues.apache.org/jira/secure/attachment/12472758/TestDateConverter.java,23/Mar/11 10:44;bitstorm;dateModelConversionFix.patch;https://issues.apache.org/jira/secure/attachment/12474381/dateModelConversionFix.patch,23/Mar/11 18:56;berniegp;dateModelConversionFix_TimeField.patch;https://issues.apache.org/jira/secure/attachment/12474425/dateModelConversionFix_TimeField.patch,23/Mar/11 21:49;berniegp;dateModelConversionFix_TimeField_NoEnclosure.patch;https://issues.apache.org/jira/secure/attachment/12474440/dateModelConversionFix_TimeField_NoEnclosure.patch,08/Mar/11 17:07;bitstorm;doubleConversionFix.patch;https://issues.apache.org/jira/secure/attachment/12473007/doubleConversionFix.patch,22/Mar/11 19:47;berniegp;testsWithDateModels.patch;https://issues.apache.org/jira/secure/attachment/12474326/testsWithDateModels.patch,8.0,,,,,,,,,,,,,,,,,,,2011-03-07 16:58:23.498,,,no_permission,,,,,,,,,,,,204290,,,Sat Mar 26 05:51:00 UTC 2011,,,,,,0|i0kaqv:,116558,,,,,,,,05/Mar/11 20:54;berniegp;test case demonstrating the problem,"05/Mar/11 20:55;berniegp;Sample output:

ERROR - DatePickerTest             - =========== testDifferentDateTimeZoneConversion() =================
ERROR - DatePickerTest             - orig: 1288951200000; date: 1288864800000; dateTime: 1288864800000
ERROR - DatePickerTest             - orig: Thu Nov 04 22:00:00 GMT-12:00 2010; date: Wed Nov 03 22:00:00 GMT-12:00 2010; dateTime: Wed Nov 03 22:00:00 GMT-12:00 2010

As you can see, the hours are correct but the date is one day off.","07/Mar/11 16:58;bitstorm;Hi Bertrand,

I think that this issue could be related with this one: https://issues.apache.org/jira/browse/WICKET-3249
Did you take 'TestDateConverter.java' from this issue? 
Anyway, can you post the code of method testDifferentDateTimeZoneConversion ?
",07/Mar/11 17:04;berniegp;Test case demonstrating the problem,"07/Mar/11 17:07;berniegp;Hi Andera,

Terribly sorry, I attached the wrong file to the issue. The correct file is FailingTest.patch (based on 1.5-rc2).

'TestDateConverter.java' is indeed from issue WICKET-3249 which I examined in detail first to make sure I wasn't reporting the same problem. It wasn't meant to be attached to this issue.

","08/Mar/11 17:05;bitstorm;I think I've found where is the problem. Time zone conversion of user input is performed twice: the first time in DateTextField control and the second time in method DateTimeField#convertInput(). 
That's because in method DateTimeField#newDateTextField  we build a DateTextField with a date converter which take into account time zone difference between the server and the client.
The problem arises only when client and server have a different date at the same time (like in your test). That's why existing test method 'test3' doesn't fail.

I've attached a patch that solve this problem. It modifies method DateTextField#forShortStyle adding a boolean  flag that switches on/off time zone  conversion.
","09/Mar/11 08:22;ivaynberg;applied doubleConversionFix.patch, thanks","09/Mar/11 15:20;berniegp;Thank you for the patch.

However, I found another problem in the Date conversion pipeline: 
	public void testStyleDateConverterTimeZoneDifference() throws ParseException
	{
		TimeZone origJvmDef = TimeZone.getDefault();
		DateTimeZone origJodaDef = DateTimeZone.getDefault();
		TimeZone tzClient = TimeZone.getTimeZone(""Etc/GMT-14"");
		TimeZone tzServer = TimeZone.getTimeZone(""Etc/GMT+12"");

		TimeZone.setDefault(tzServer);
		DateTimeZone.setDefault(DateTimeZone.forTimeZone(tzServer));
		Locale.setDefault(Locale.GERMAN);

		StyleDateConverter converter = new StyleDateConverter(true);

		Calendar cal = Calendar.getInstance(tzClient);
		cal.set(2011, 10, 5, 0, 0, 0);
		Date dateRef = cal.getTime();
		Date date = converter.convertToObject(""05.11.2011"", Locale.GERMAN);
		log.error(""ref: "" + dateRef.getTime() + ""; converted: "" + date.getTime());
		log.error(""ref: "" + dateRef + ""; date: "" + date);
		assertEquals(0, dateRef.compareTo(date));

		TimeZone.setDefault(origJvmDef);
		DateTimeZone.setDefault(origJodaDef);
	}

This means that the patch did solve part of the problem (double time zone conversion), but the converter is still broken.

What is the procedure for reopening an issue?

Also, is there a reason the test case method comment I submitted as part of the patch was removed? I thought it provided a clear explanation of why the test needed to be present.","09/Mar/11 22:28;bitstorm;Sorry Bertrand, I think I have accidentally removed your comment from patch.
Anyway the last problem you've found should be fixed by the patch I've attached to issue 3249. But before you run your last method test (testStyleDateConverterTimeZoneDifference) you should modify it a little because it is misleading.
You should add client time zone to web session and reset calendar milliseconds to zero.

I've attached the patch including my previous patch, your last test method and your missing comment :)",10/Mar/11 00:48;ivaynberg;latest patch applied,"10/Mar/11 01:17;berniegp;Ah yes that ""new"" bug I found was actually issue 3249 we previously discussed!

Regarding my test-case comments, I only asked to make sure it wasn't against some Wicket test-case policy to include them.

Thanks again!",22/Mar/11 19:47;berniegp;Demonstrates wrong conversion between server's and client's time zones when displayer a Date.,"22/Mar/11 19:49;berniegp;Please reopen this issue. 

Changeset 1079694 introduced a bug when displaying a Date in a DateField or a DateTimeField. The day is not converted to the client's time zone, but the time is. See 	testsWithDateModels.patch.

The patch also includes some clean-up to the test class.","23/Mar/11 10:43;bitstorm;Hi Bertrand,

are you sure that Changeset 1079694 introduced this bug? I think that it was present since Changeset 1077866, related to issue 3501. Anyway after some googling I've found an insightful post by Vinod Singh here: http://blog.vinodsingh.com/2009/03/date-and-timezone-in-java.html.
So I've used his function 'Date changeTimeZone(Date date, TimeZone zone)' to fix this issue. But I'm not sure where to put this function. For now I've inserted it directly into class DateTimeField.java but I'm afraid it's not the right place. Is there in Wicket a better place ( maybe an utility class) to put this function in?  

Any suggestion?

PS: I've attached the fix including  testsWithDateModels.patch
","23/Mar/11 14:36;berniegp;Hi Andera,

I thought changeset 1079694 introduced this bug because while tracing execution, I found that DateTimeField#newDateTextField() was changed to create a DateTextField which didn't apply the client time zone conversion. I could be wrong however because it seems that the conversion is also performed elsewhere.

I will take a look during the day and post back.","23/Mar/11 15:14;berniegp;I just realized there is a problem with the design of the TimeField. In order to properly convert between the client's and server's time zone, a date (day,month,year) for which the conversion is to be done must be provided. Otherwise, the conversion cannot happen since we can't determine whether we should consider the time zones with or without daylight savings. Currently, TimeField does the conversion using the current date but this is not valid.

Continuing investigation...",23/Mar/11 18:56;berniegp;Builds on dateModelConversionFix.patch to also fix TimeField issue.,"23/Mar/11 19:00;berniegp;Thanks for your patch, it looks good!

dateModelConversionFix_TimeField.patch contains your changes
+ 2 new tests
+ TimeField does not modify day-month-year of its model
+ "":"" character between hour and minute text fields removed when using a DateField.

The 2 tests validate am/pm conversion and ""TimeField does not modify day-month-year of its model"".",23/Mar/11 21:49;berniegp;New patch without wicket:enclosure,26/Mar/11 05:51;ivaynberg;latest patch applied,,,,,,,,,,,,,
"DateTimeField and DateField do not set input tag ""value""",WICKET-3501,12500398,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,04/Mar/11 05:23,11/Apr/11 21:34,14/Mar/19 03:09,04/Mar/11 11:00,1.5-RC2,,,,,,,,,,,1.5-RC3,,,wicket-datetime,,,,,,,,,,,0,datetime,,,,,"DateTimeField and DateField do not properly set input tag ""value"" in the generated markup when a Date model is given. In the case of DateTimeField, only the hours and minutes fields have the proper ""value"" tag.

The problem seems to be located at DateTimeField#onBeforeRender(). The hours and minutes members are set in the else clause, but not the date member.",,,,,,,,,,,,,,,,,04/Mar/11 05:24;berniegp;DateField.zip;https://issues.apache.org/jira/secure/attachment/12472647/DateField.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-03-04 11:00:54.992,,,no_permission,,,,,,,,,,,,204281,,,Fri Mar 04 11:00:54 UTC 2011,,,,,,0|i0karz:,116563,,,,,,,,04/Mar/11 05:24;berniegp;Quickstart,04/Mar/11 11:00;mgrigorov;Fixed with r1077866.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Link tries to construct the URL when the link is disabled,WICKET-3485,12499925,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,papegaaij,papegaaij,28/Feb/11 14:12,28/Feb/11 15:07,14/Mar/19 03:09,28/Feb/11 15:07,1.4.15,1.5-RC2,,,,,,,,,,1.4.17,1.5-RC3,,wicket,,,,,,,,,,,0,,,,,,"This piece of code (Link.onComponentTag) tries to construct the URL for a Link, even when it is disabled:
	CharSequence url = getURL();
	url = appendAnchor(tag, url);
	if (!isLinkEnabled())
		disableLink(tag);
	else
		{ use url }

getURL fails for us, because we did not expect it to be called for a disabled link. The constructed url is never used. Can the getURL and appendAnchor be moved inside the else?",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204267,,,2011-02-28 14:12:15.0,,,,,,0|i0kau7:,116573,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
".java files do not show up in the ""Source code"" popup of the examples",WICKET-3482,12499759,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,mgrigorov,berniegp,berniegp,25/Feb/11 21:01,11/Apr/11 21:33,14/Mar/19 03:09,27/Feb/11 09:25,1.5-RC2,,,,,,,,,,,1.5-RC3,,,wicket-examples,,,,,,,,,,,0,source,,,,,".java files do not show up in the ""Source code"" popup of the examples. Other files do appear however.

This happens when executing ""mvn jetty:run"" in the src\wicket-examples directory.

One way to fix this is to add the following in src\wicket-examples\pom.xml at the begining of the <build> section :
		<resources>
			<resource>
				<filtering>false</filtering>
				<directory>${basedir}/src/main/java</directory>
				<includes>
					<include>**/*.java</include>
				</includes>
			</resource>
		</resources>

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-02-27 09:25:34.313,,,no_permission,,,,,,,,,,,,204264,,,Sun Feb 27 09:25:34 UTC 2011,,,,,,0|i0kaun:,116575,,,,,,,,27/Feb/11 09:25;mgrigorov;Improved with r1075009.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Exception when setting session default timezone with GatherExtendedBrowserInfo,WICKET-3477,12499538,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,berniegp,berniegp,23/Feb/11 22:11,11/Apr/11 21:33,14/Mar/19 03:09,27/Feb/11 09:58,1.5-RC1,,,,,,,,,,,1.4.17,1.5-RC3,,wicket,,,,,,,,,,,0,nullpointerexception,,,,,"I want to set a default timezone for client sessions so I added the following line at the end of my CustomSession constructor:
getClientInfo().getProperties().setTimeZone(TimeZone.getTimeZone(""GMT""));

Doing this coupled with getGatherExtendedBrowserInfo() == true however yields a null pointer exception.

Some analysis:
In WebSession#getClientInfo(), there is no clientInfo yet and getGatherExtendedBrowserInfo() is true so a redirect is attempted.
The line ""IRequestHandler activeRequestHandler = requestCycle.getActiveRequestHandler();"" produces activeRequestHandler == null.
Since there is no request handler, the following line ""String url = requestCycle.urlFor(activeRequestHandler).toString();"" gives a null pointer exception as urlFor returns null.

If getGatherExtendedBrowserInfo() == false, the default timezone set in the Session constructor works fine.",,,,,,,,,,,,,,,,,23/Feb/11 22:12;berniegp;DefaultTimeZone.zip;https://issues.apache.org/jira/secure/attachment/12471778/DefaultTimeZone.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-02-24 08:34:27.715,,,no_permission,,,,,,,,,,,,204261,,,Sun Feb 27 09:58:22 UTC 2011,,,,,,0|i0kav3:,116577,,,,,,,,23/Feb/11 22:12;berniegp;Quickstart project,"24/Feb/11 08:34;mgrigorov;This indeed will not work.
There are two problems:
- there is no request handler yet at that time (thus the NPE)
- I fixed this locally by using app.getHomePage's url as start point in this case and then the problem is that you call ""getClientInfo()"" from the Session constructor. Combined with ""setGatherExtendedBrowserInfo(true)"" this tries to use BrowserInfoPage to get the client info from the browser by doing temporary redirect to BrowserInfoPage and then this page needs the current session at one point and since the call has started from the session constructor this session is not yet completely constructed and the session is not set in the current ThreadContext (ThreadLocal) and a new call to Application.newSession() is made and all starts from the beginning.

The working and simple (IMO) solution is:
- remove getRequestCycleSettings().setGatherExtendedBrowserInfo(true); from MyApp.ini()
- in CustomSession's constructor do:
WebClientInfo ci = new WebClientInfo(RequestCycle.get());
ci.getProperties().setTimeZone(TimeZone.getTimeZone(""GMT""));
setClientInfo(ci);

This way it wont make temp redirect (flash) to the BrowserInfoPage.

If you need more client info props then you'll have to use your code but move it to the constructor of a base page, where a Session exists and all this will work.","24/Feb/11 14:26;berniegp;Thank you Martin for the excellent explanation.

I did not know setClientInfo() existed which allowed me to create the WebClientInfo instance myself.

Should I put that as ""resolved"" then?

(for the record, the only information I could find for setting default ClientInfo values was : http://apache-wicket.1842946.n4.nabble.com/Using-ClientProperties-Object-for-User-selectable-Timezone-td1846293.html)",27/Feb/11 09:58;mgrigorov;With r1075014 (1.4.x) and r1075014 (1.5.x) a javadoc is added explaining that getClientInfo() should not be called in Session constructor.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Usage of DataTable gives Child component of repeater x has a non-safe child id of $toolbar$n,WICKET-3387,12496722,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,ivaynberg,berniegp,berniegp,25/Jan/11 20:39,11/Apr/11 21:32,14/Mar/19 03:09,26/Jan/11 18:00,1.5-RC1,,,,,,,,,,,1.5-RC2,,,wicket-extensions,,,,,,,,,,,0,,,,,,"With Wicket in development mode, using a org.apache.wicket.extensions.markup.html.repeater.data.table.DataTable produces 2 warnings on each page view (at least with non-empty table data) :
WARN  - AbstractRepeater           - Child component of repeater org.apache.wicket.extensions.markup.html.repeater.data.table.DataTable$ToolbarsContainer:topToolbars has a non-safe child id of $toolbar$0. Safe child ids must be composed of digits only.
WARN  - AbstractRepeater           - Child component of repeater org.apache.wicket.extensions.markup.html.repeater.data.table.DataTable$ToolbarsContainer:bottomToolbars has a non-safe child id of $toolbar$2. Safe child ids must be composed of digits only.

Wicket 1.4.15 did not have this behaviour.

org.apache.wicket.extensions.markup.html.repeater.data.table.AbstractToolbar line 48 is the producer of the guilty ""unsafe"" child id.
(is the usage of a static counter to produce unique ids safe considering multiple pages could be creating AbstractToolbars at the same time?)

Steps to reproduce :
Run the wicket-examples in development mode and navigate to http://localhost:8080/repeater/wicket/bookmarkable/org.apache.wicket.examples.repeater.DataTablePage.",Wicket in development mode,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204183,,,2011-01-25 20:39:06.0,,,,,,0|i0kb4n:,116620,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Resource getResourceStream called twice with single request,WICKET-3357,12496175,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,bgrier,bgrier,20/Jan/11 21:02,27/Jan/11 15:20,14/Mar/19 03:09,26/Jan/11 21:05,1.4.15,,,,,,,,,,,1.5-RC2,,,wicket,,,,,,,,,,,0,,,,,,"getResourceStream is being called multiple times for Resource subclasses used to create dynamic images and/or textual data. This can be extremely inefficient depending on the work required to generate the resource. In my case, it presents a more serious problem because data inserted in the overriden getResourceStream method is duplicated in the database.

The attached quickstart creates a dynamic image in getResourceStream. The method is called twice for a single request.",Tomcat on Windows 7. Jetty on Ubuntu Linux..,,,,,,,,,,,,,,,,20/Jan/11 21:04;bgrier;myproject.zip;https://issues.apache.org/jira/secure/attachment/12468889/myproject.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2011-01-26 21:05:54.192,,,no_permission,,,,,,,,,,,,204156,,,Thu Jan 27 15:20:53 UTC 2011,,,,,,0|i0aof3:,60229,,,,,,,,20/Jan/11 21:04;bgrier;Quickstart reproducing the issue.,"26/Jan/11 21:05;pete;From the two invocation of IResourceStream's constructor the the first one is from WicketFilter to invoke resourceStream.getLastModified(). This is required to support the 'If-Modified-Since' http request header. The second invocation is while creating the actual http response containing the resource data.

None of these calls can be omitted without breaking the current behavior of wicket 1.4.

In wicket 1.5 things are handled different and the problem does not exist anymore.

The possible theoretical approaches to solve this in 1.4 would be either

- cache the resource stream: this would be too expensive as instances of resource streams can be huge (like megabytes of data)
- refactor IResource to access getLastModified() without resource creation: this is not possible without breaking the current API of 1.4. That would contradict the concept of ""drop-in-replacements"" within one wicket minor release and is unacceptable.

So you can only solve that issue by

- defer expensive actions to the invocation of IResourceStream.getInputStream()
- in case of using AbstractResourceStreamWriter (@Brad: like in your quickstart) this would instead be in AbstractResourceStreamWriter.write(OutputStream)
- add some custom caching
- switch to wicket 1.5

I would suggest switching to 1.5 if you can since we have a good number of improvements to offer in 1.5 in that case. Especially you could avoid repeated creation of your (expensive) resource. By using our new resource caching support a public cache, proxy server or the browser cache could store your resource effectively. You can still invalidate the resource easily without having stale caches. So your resource would be served from the cache on the subsequent request and does not even hit the java application server.","27/Jan/11 15:20;bgrier;Thanks for looking at this. I'm willing to switch to 1.5 but it seems two of the libraries in our project require Wicket 1.4.

You mention solving the issue (at least in the quickstart) by deferring expensive actions to AbstractResourceStreamWriter.write(OutputStream). In my testing his method gets called twice as well. Am I misinterpreting what you wrote? Thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wicket examples still show a Graduated logo,WICKET-3346,12495877,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,pete,dashorst,dashorst,18/Jan/11 10:15,27/Jan/11 00:27,14/Mar/19 03:09,26/Jan/11 21:26,1.4.15,1.5-M3,,,,,,,,,,1.4.16,1.5-RC2,,,,,,,,,,,,,0,,,,,,"The wicket examples still feature a Wicket has graduated logo. While nice 3 years ago when we were just graduated, it has now no meaning for us.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-01-26 21:26:40.523,,,no_permission,,,,,,,,,,,,59232,,,Thu Jan 27 00:27:54 UTC 2011,,,,,,0|i0aofb:,60230,,,,,,,,26/Jan/11 21:26;pete;fixed (funny the logo made it that long :-),"27/Jan/11 00:27;hudson;Integrated in Apache Wicket 1.4.x #404 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.4.x/404/])
    ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken links in new Quickstart,WICKET-3343,12495819,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,,aldaris,aldaris,17/Jan/11 20:12,17/Jan/11 20:33,14/Mar/19 03:09,17/Jan/11 20:30,,,,,,,,,,,,1.5-RC1,,,wicket-quickstart,,,,,,,,,,,0,,,,,,"The following points have broken links in the new Quickstart application:
# work through some examples
# read some books",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204144,,,2011-01-17 20:12:53.0,,,,,,0|i0kb87:,116636,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Small error in page Books / Articles on the Website,WICKET-3282,12494026,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,iiome,iiome,24/Dec/10 07:50,24/Dec/10 09:31,14/Mar/19 03:09,24/Dec/10 09:31,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"http://wicket.apache.org/learn/books/

The last book is in Japanese and not Chinese


Several books have been written about Apache Wicket, 3 in English, 2 in German and 1 in 
** Chinese **.
Click on a cover to learn more about each book.
",,300,300,,0%,300,300,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,204089,,,2010-12-24 07:50:06.0,,,,,,0|i0kbe7:,116663,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
css/js files added as header contribution not added via ajax request,WICKET-3255,12493344,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,zluspai@freemail.hu,zluspai@freemail.hu,15/Dec/10 17:04,15/Dec/10 17:28,14/Mar/19 03:09,15/Dec/10 17:22,1.4.14,,,,,,,,,,,1.4.15,,,wicket,,,,,,,,,,,0,,,,,,"I'm trying to upgrade from 1.4.13 to 1.4.14 and found that css and js files added as header contribution are not appearing in the ajax request. 

Details are:

*I have a WikiPageCard (Panel subclass) class which adds two header contributions like this:
   this.add(CSSPackageResource.getHeaderContribution(WikiPageCard.class, ""WikiPageCard.css""));
   this.add(JavascriptPackageResource.getHeaderContribution(WikiPageCard.class, ""WikiPageCard.js""));

The first instance of this WikiPageCard component is only added to the page in an ajax request, so the css/js files are not part of the page during the initial load. I had a look at the Wicket's ajax debug window, and I can see that indeed these lines are missing from the ajax response with Wicket 1.4.14, but they are present in 1.4.13:

{{{
<link rel=""stylesheet"" type=""text/css"" href=""../resources/com.intland.codebeamer.wicket.pages.wikiexporttopdf.WikiPageCard/WikiPageCard.css?w:lm=1289895391"" />
< <script type=""text/javascript"" src=""../resources/com.intland.codebeamer.wicket.pages.wikiexporttopdf.WikiPageCard/WikiPageCard.js?w:lm=1289895391""></script>
}}}

Is this a regression, or just some change I'm missing?",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-12-15 17:22:20.627,,,no_permission,,,,,,,,,,,,204064,,,Wed Dec 15 17:28:50 UTC 2010,,,,,,0|i0kbgf:,116673,,,,,,,,"15/Dec/10 17:22;pedrosans;Hi Zoltan, it is already fixed at 1.4.15, more explanations at: 
http://apache.markmail.org/search/?q=Re%3A%20svn%20commit%3A%20r1033843#query:Re%3A%20svn%20commit%3A%20r1033843%20list%3Aorg.apache.wicket.dev+page:1+mid:qlcjm5bh2hbqfrjl+state:results","15/Dec/10 17:27;jthomerson;As a note, I am working today on the final fix for ajax header contributions with the new stuff added in the original (broken) commit.  After I get the fix committed, I will be building a release tonight or tomorrow night.",15/Dec/10 17:28;zluspai@freemail.hu;Thank you for the quick responses; so I'm waiting for 1.4.15.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"DatesPage test LocaleDropDownChoice getObject calls getSelectedLocale(), does not use result",WICKET-3217,12491902,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,pete,emberson,emberson,02/Dec/10 17:10,02/Dec/10 21:41,14/Mar/19 03:09,02/Dec/10 21:41,1.5-M3,,,,,,,,,,,,,,wicket-datetime,,,,,,,,,,,0,,,,,,"In the DatesPage test, the LocaleDropDownChoice.getObject() method calls
getSelectedLocale() but does not use the result:

        public List<Locale> getObject()
        {
          getSelectedLocale();
          List<Locale> locales = new ArrayList<Locale>(LOCALES);
          Collections.sort(locales, new Comparator<Locale>()
          {
            public int compare(Locale o1, Locale o2)
            {
              return o1.getDisplayName(selectedLocale).compareTo(
                  o2.getDisplayName(selectedLocale));
            }
          });
          return locales;
        }

I would guess that the call getSelectedLocale() could be removed",all,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-12-02 21:41:05.793,,,no_permission,,,,,,,,,,,,204028,,,Thu Dec 02 21:41:05 UTC 2010,,,,,,0|i0aohb:,60239,,,,,,,,02/Dec/10 21:41;pete;thanks! fixed in trunk...,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AutoCompleteTextField does not work in an iframe under IE 6, 7 or 8",WICKET-3215,12491855,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pedrosans,rob,rob,02/Dec/10 07:59,04/Dec/10 00:17,14/Mar/19 03:09,03/Dec/10 11:56,1.4.11,1.4.12,1.4.13,1.4.14,,,,,,,,1.4.15,1.5-RC1,,wicket-extensions,,,,,,,,,,,0,,,,,,"The code that has been integrated in version
 1.4.11 to fix issue WICKET-2279 forces the cursor of an AutoCompleteTextField to do a ""carriage return"" after each typed in char when the application runs in an iframe and IE 6, 7 or 8 is used.",Windows Server 2003,,,,,,,,,,,,,,,,02/Dec/10 09:42;rob;HomePage.html;https://issues.apache.org/jira/secure/attachment/12465121/HomePage.html,02/Dec/10 09:42;rob;HomePage.java;https://issues.apache.org/jira/secure/attachment/12465122/HomePage.java,02/Dec/10 09:42;rob;iframe.html;https://issues.apache.org/jira/secure/attachment/12465120/iframe.html,,,,,,3.0,,,,,,,,,,,,,,,,,,,2010-12-02 08:55:20.845,,,no_permission,,,,,,,,,,,,204026,,,Sat Dec 04 00:17:16 UTC 2010,,,,,,0|i0kbiv:,116684,,,,,,,,02/Dec/10 08:55;mgrigorov;Please provide a quickstart application that reproduces the problem.,"02/Dec/10 20:02;pedrosans;I will try to fix this restoring the cursor position on text field
there are some info about at: http://www.quirksmode.org/dom/range_intro.html",03/Dec/10 07:17;mgrigorov;Should be fixed in 1.5 as well.,"03/Dec/10 11:56;pedrosans;|o|, thank u Martin, commited to 1.5 too","03/Dec/10 23:54;pedrosans;Just trying to explain the hack: after show the options list, the text field wasn't losing the focus, but the text cursor disappeared or goes to the wrong position. Rather than create an cursor position cache to be restored, I just realise that the selection bounds were already on the IE selection object, and just by invoking the select method from its API the cursor reappeared or got the right position.","04/Dec/10 00:17;hudson;Integrated in Apache Wicket 1.4.x #308 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.4.x/308/])
    ",,,,,,,,,,,,,,,,,,,,,,,,,,,
"Form, containing FileUploadField and UploadProgressBar throws an exception when removed from the parent",WICKET-3200,12491451,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pedrosans,hok,hok,27/Nov/10 16:28,28/Nov/10 03:55,14/Mar/19 03:09,28/Nov/10 03:55,1.5-M3,,,,,,,,,,,1.5-RC1,,,wicket,wicket-extensions,,,,,,,,,,0,,,,,,"There is a form which contains FileUploadField, UploadProgressBar and a submit button. The form is added to a WebMarkupContainer. When the form is removed from the WebMarkupContainer an exception is thrown: 

java.lang.IllegalStateException: Tried to remove a behavior that was not added to the component. Behavior: org.apache.wicket.extensions.ajax.markup.html.form.upload.UploadProgressBar$FormEnabler@1d433c1

This can be observed in the attached quickstart.","Windows 7, java 1.6, wicket 1.5m3",,,,,,,,,,,,,,,,27/Nov/10 16:29;hok;quickstart.rar;https://issues.apache.org/jira/secure/attachment/12464781/quickstart.rar,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2010-11-28 03:55:47.317,,,no_permission,,,,,,,,,,,,204011,,,Sun Nov 28 03:55:47 UTC 2010,,,,,,0|i0kbkn:,116692,,,,,,,,27/Nov/10 16:29;hok;Attached quickstart,"28/Nov/10 03:55;pedrosans;this is already fixed on the trunk, I just created an test case exponsing the bug on the 1.5-M3",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix for WICKET-2903 causes NPE when HttpsConfig is intentionally null,WICKET-3173,12480005,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,ivaynberg,topping,topping,15/Nov/10 21:40,28/Apr/12 05:34,14/Mar/19 03:09,16/Nov/10 16:00,1.4.13,1.5-M3,,,,,,,,,,1.4.14,,,wicket,,,,,,,,,,,0,,,,,,"The patch in WICKET-2903 is not as robust as it needs to be.  Throughout the code in HttpsRequestCycleProcessor.java, there are a number of conditionals on whether portConfig is null, clearly making the null state an acceptable value.  But HttpsRequestCycleProcessor.resolve() now calls portConfig.isPreferStateful() without first checking to see if the portConfig is null.  

For the interested, my application leaves portConfig set to null when I would like to avoid a redirect to https, for instance in development on a machine that does not have SSL set up.

",,600,600,,0%,600,600,,,,,,,,,,15/Nov/10 21:41;topping;WICKET-3173.patch;https://issues.apache.org/jira/secure/attachment/12459638/WICKET-3173.patch,16/Nov/10 13:02;pedrosans;test-WICKET-3173.patch;https://issues.apache.org/jira/secure/attachment/12459700/test-WICKET-3173.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2010-11-15 22:16:28.632,,,no_permission,,,,,,,,,,,,203985,,,Tue Nov 16 19:36:34 UTC 2010,,,,,,0|i0kbmn:,116701,,,,,,,,"15/Nov/10 22:16;hudson;Integrated in Apache Wicket 1.4.x #269 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.4.x/269/])
    Issue: WICKET-3173
",16/Nov/10 02:25;topping;Thanks Igor!,"16/Nov/10 08:15;mgrigorov;We need to merge the fix in 1.5.
org.apache.wicket.protocol.https.SwitchProtocolRequestHandler.SwitchProtocolRequestHandler(Protocol, IRequestHandler, HttpsConfig) does check for not-null which also needs to be removed.",16/Nov/10 13:02;pedrosans;test case preventing this NPE,"16/Nov/10 15:57;ivaynberg;no, we dont need to merge in 1.5. i dont think it should allow null, but its too late to fix in 1.4","16/Nov/10 19:36;hudson;Integrated in Apache Wicket 1.4.x #273 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.4.x/273/])
    ",,,,,,,,,,,,,,,,,,,,,,,,,,,
Quickstart generator for 1.4.13 creates archetype for 1.5m2.1,WICKET-3159,12479701,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,dashorst,dashorst,11/Nov/10 13:28,11/Nov/10 16:33,14/Mar/19 03:09,11/Nov/10 16:33,1.4.13,,,,,,,,,,,,,,wicket-quickstart,,,,,,,,,,,0,,,,,,"Running the default selected command generated by our quickstart generator (http://wicket.apache.org/start/quickstart.html) with 1.4.13 generates a project with wicket 1.5m2.1 instead of 1.4.13.

This might be related to a newer version of the archetype plugin released by maven? Or perhaps the archetype is not correct.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-11-11 15:51:18.299,,,no_permission,,,,,,,,,,,,203972,,,Thu Nov 11 16:33:37 UTC 2010,,,,,,0|i0kbnr:,116706,,,,,,,,"11/Nov/10 15:51;mgrigorov;Indeed the problem is that in 1.5 we use version 2 of the Maven archetype plugin which is being used with: mvn archetype:generate.
In Wicket 1.4 we use the old version of the plugin.
One solution is to generate different snippet depending on the selected Wicket version in the site, but I guess this will be harder.
My second solution is to merge the upgrade of archetypes/quickstart code from 1.5 to 1.4.

For now the workaround is to use ""mvn archetype:*create*"" for 1.4.x archetypes.",11/Nov/10 16:11;dashorst;Let's fix the js generator... otherwise we have to retroactively fix 1.3 as well...,"11/Nov/10 16:33;dashorst;The archetype plugin is a hornet's nest: it ignores the archetypeVersion we provide at the commandline and just goes ahead and downloads the 1.5m2.1 archetype...

For now just ignore the warning about deprecated archetypeCreate functionality, as it actually works as it should instead of failing the most basic use case.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"JVM 1.6 crash caused by WicketObjectOutputStream, ClassStreamHandler, and Page.writePageObject ",WICKET-3136,12478523,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,rolandgroen,rolandgroen,27/Oct/10 23:30,28/Nov/10 02:55,14/Mar/19 03:09,24/Nov/10 18:29,1.4.12,,,,,,,,,,,1.4.15,,,wicket,,,,,,,,,,,0,,,,,,"The JVM 6u22 (1.6.0_22) crashes while clicking on a page in the wicket application. This is always the same page, but there are pages that function. When serializing a Page object with the pageMapName field set, a JVM 1.6 crashes on a segmentation fault. The error message is:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0xf44a859e, pid=3145, tid=2969234320
#
# JRE version: 6.0_22-b04
# Java VM: Java HotSpot(TM) Server VM (17.1-b03 mixed mode linux-x86 )
# Problematic frame:
# J  org.apache.wicket.util.io.WicketObjectOutputStream$HandleTable.hash(Ljava/lang/Object;)I
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

What goes on (and it took some time to find it):

The WicketObjectOutputStream has a field wich is called classHandler. This classHandler is suppose to match the class of the curObject. 
When Page.writePageObject is called AND the field Page.pageMapName is set, the method Page.writePageObject  will call writeObject(pageMapName). This call will change the value of WicketObjectOutputStream.classHandler into the classHandler of java.lang.String somewhere in WicketObjectOutputStream.writeObjectOverride. What happens next is a true disaster. Though some abstractions (PageSerializer), the method WicketObjectOutputStream.defaultWriteObject will is called. This method states:

classHandler.writeFields(this, curObject);

and due to fact that classHandler is a class handler of java.lang.String and not the one of the curObject, an instance of FieldAndIndex belonging to String.value  will be called with another object. This ends up at calling unsafe.getObject(object, index) (a native method) with the wrong object reference, something which is not a good idea with sun.misc.Unsafe. Every operation on the returned object will crash the JVM. Unfortunately the next in line to operate on the object is WicketObjectOutputStream.HandleTable.hash which also calls a native method called System.identityHashCode. This method is known for some JVM crashes, and has been attributed for the JVM crash for a while during the investigation into this JVM crash.

The solutions:
1) Do not use the WicketObjectOutputStream/WicketObjectStreamFactory. Works.
2) The method org.apache.wicket.Page.writePageObject(ObjectOutputStream) should not do a s.writeObject(pageMapName), but a s.writeUTF(pageMapName) instead. This way, the WicketObjectOutputStream.classHandler will not get the wrong value. org.apache.wicket.Page.readPageObject(ObjectInputStream) should be matched, of course.
3) WicketObjectOutputStream.defaultWriteObject() should update/get the right classHandler reference, just as WicketObjectOutputStream.writeObjectOverride(Object) does. You might even consider dropping the field entirely. 

The last option seems the best to me, because calling a writeObject from writePageObject is not semantically incorrect, furthermore, there might be other instances of this.



","JVM 1.6.0_22, CentOS release 5.3 (Final) and Mac OS 10.6.4",,,,,,,,,,,,,,,,20/Nov/10 21:20;pedrosans;fix-test-WICKET-3136.patch;https://issues.apache.org/jira/secure/attachment/12460113/fix-test-WICKET-3136.patch,27/Oct/10 23:32;rolandgroen;hs_err_pid3145.log;https://issues.apache.org/jira/secure/attachment/12458206/hs_err_pid3145.log,20/Nov/10 19:53;pedrosans;test-WICKET-3136.patch;https://issues.apache.org/jira/secure/attachment/12460109/test-WICKET-3136.patch,,,,,,3.0,,,,,,,,,,,,,,,,,,,2010-11-20 14:55:41.686,,,no_permission,,,,,,,,,,,,203954,,,Sun Nov 28 02:55:25 UTC 2010,,,,,,0|i0kbpr:,116715,,,,,,,,27/Oct/10 23:32;rolandgroen;Attaching the JVM crash log.,"20/Nov/10 14:55;mgrigorov;Johan, can you take a look at the suggested solutions and comment on them.
I believe you are the expert in the area.",20/Nov/10 19:53;pedrosans;test case trying to serialize/deserialize an page with pagemap,"20/Nov/10 21:20;pedrosans;Using an stack to make sure that the WicketObjectOutputStream has the correct ClassStreamHandler on each defaultWriteObject call at the method invocations stack, and asserting the class equlity at the test case.
I still want to write some javadoc about, but I'm sending what I got now to share was is going on here.","21/Nov/10 10:59;jcompagner;my vote is more to remove WicketObject in and output streams
We tried it to optimize it. But the problem is that all kinds of hacks and hooks and special threat meant are in the core of java for this
So that we will be constantly updating and fixing problems for specific releases (and that is some times hard because of compile dependencies...)

I think if we need some kind of special wicket serialization we should not use object output stream but have our own completely stand alone implementation (how does terracotta do it?)","24/Nov/10 09:57;pedrosans;Hi Johan, do you mean remove it from the Wicket 1.4.x?","24/Nov/10 13:41;jcompagner;that would mean api break

i would say @deprecate
and remove in 1.5
","28/Nov/10 00:15;hudson;Integrated in Apache Wicket 1.4.x #295 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.4.x/295/])
    ","28/Nov/10 02:55;jthomerson;changing fix version to 1.4.15 since this was committed in 1.4.x branch after 1.4.14 was cut.  it was also ported to the 1.4.14 branch, but should not have been since that was a release branch that was already cut.  it was overwritten to preserve the accuracy of 1.4.14 svn history",,,,,,,,,,,,,,,,,,,,,,,,
Commons logging must die,WICKET-3134,12478437,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,27/Oct/10 09:41,29/Oct/10 00:16,14/Mar/19 03:09,27/Oct/10 12:38,1.4.12,1.5-M2.1,,,,,,,,,,1.4.14,1.5-M3,,wicket-examples,wicket-spring,,,,,,,,,,0,,,,,,"In wicket 1.4 (and possibly 1.5) we still depend on commons-logging (and version 1.1 at that), which not only includes strange logging dependencies from the long departed Avalon project, but also other stuff we really don't want to have. (looking at spring-all-2.5.6 as the main culprit here).",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-10-27 13:39:55.248,,,no_permission,,,,,,,,,,,,203952,,,Fri Oct 29 00:16:24 UTC 2010,,,,,,0|i0kbq7:,116717,,,,,,,,"27/Oct/10 13:39;hudson;Integrated in Apache Wicket 1.5.x #460 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.5.x/460/])
    WICKET-3134 Removed commons-logging from our projects, it really needs to die, hard...
","29/Oct/10 00:16;hudson;Integrated in Apache Wicket 1.4.x #236 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.4.x/236/])
    ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MarkupNotFoundException happens if there's a component inside another with wicket:message attribute,WICKET-3122,12477857,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,ivaynberg,szabolcs,szabolcs,20/Oct/10 12:49,02/May/13 02:29,14/Mar/19 03:09,20/Oct/10 16:51,1.5-M2.1,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Hi,
I am just in the process of migrating my project to 1.5(-M2.1), and discovered a problem when there's a markup like this:

<span wicket:message=""title:favoriteCount.tip""><wicket:message key=""favoriteCount"">FAVORITE COUNT</wicket:message><span wicket:id=""favoriteCount"" /></span>

and Java file like this:

        add(new Label(""favoriteCount""));

and appropriate resource file(s) of course,
then at render time a MarkupNotFoundException is given (Markup not found for Component: [Component id = favoriteCount]). If I remove the wicket:message=""title:favoriteCount.tip"" part then it is fine, similar to 1.4.x.

Another small note on issue 2776: I am not sure that reopening it was a good approach but the fix for that one disappeared for 1.5-M2.1. Could you please check that one too? 
",,,,,,,,,,,,,,WICKET-4944,,WICKET-3111,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-10-20 12:53:40.019,,,no_permission,,,,,,,,,,,,203943,,,Tue Nov 09 11:25:49 UTC 2010,,,,,,0|i0kbqv:,116720,,,,,,,,"20/Oct/10 12:53;mgrigorov;Can you try with latest 1.5-SNAPSHOT ?
I think this is fixed since last weekend (WICKET-3111).","20/Oct/10 16:51;ivaynberg;should be fixed by 3111, if still happens please reopen.","09/Nov/10 11:25;szabolcs;I have migrated over to 1.5-M3, and this issue seems to be fixed. Thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ModalWindow not closing,WICKET-3077,12474939,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,istoykov,istoykov,23/Sep/10 15:26,23/Sep/10 22:19,14/Mar/19 03:09,23/Sep/10 22:19,1.5-M2.1,,,,,,,,,,,,,,wicket-extensions,,,,,,,,,,,0,,,,,,"Hi,
I'm migrating to wicket 1.5-M2.1. 
I've the following problem:
I'm using ModalWindow (org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow) and it works fine in Google Chrome browser. But in Firefox and IE it won't close when I press the close (X) button.
I get an exception:

org.apache.wicket.WicketRuntimeException: Method onRequest of interface org.apache.wicket.behavior.IBehaviorListener targeted at behavior org.apache.wicket.extensions.ajax.markup.html.modal.ModalWindow$CloseButtonBehavior@1bb4831 on component [ModalWindow [Component id = parts_book_window]] threw an exception
	at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:267)
	at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:199)
	at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:173)
	at org.apache.wicket.request.RequestHandlerStack.executeRequestHandler(RequestHandlerStack.java:84)
	at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:219)
	at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:259)
	at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:131)
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:184)
	at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1187)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:421)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:493)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:930)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:358)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:183)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:866)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:113)
	at org.eclipse.jetty.server.Server.handle(Server.java:347)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1042)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:549)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:211)
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:424)
	at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:241)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436)
	at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:257)
	... 27 more
Caused by: java.lang.IllegalArgumentException: Argument 'url' may not be null.
	at org.apache.wicket.util.lang.Args.notNull(Args.java:37)
	at org.apache.wicket.request.Url.parse(Url.java:119)
	at org.apache.wicket.ajax.AbstractDefaultAjaxBehavior.onRequest(AbstractDefaultAjaxBehavior.java:300)
	... 32 more

Regards,
Ivaylo Stoykov","Windows 7, Chrome 6.0, Firefox 3.6.10, IE8",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-09-23 16:15:49.378,,,no_permission,,,,,,,,,,,,203906,,,Thu Sep 23 22:16:08 UTC 2010,,,,,,0|i0kbvj:,116741,,,,,,,,"23/Sep/10 16:15;mgrigorov;Works fine at http://wicketstuff.org/wicket/ajax/modal-window.
Please provide a quickstart.","23/Sep/10 22:16;istoykov;I'm using Jetty server. I've forgotten I was experimenting with subdomains. 
I've set [new WebAppContext().getSessionHandler().getSessionManager().setSessionDomain("".localhost.com"");] on the server but I accessed the application from http://localhost:8080.
When I use  http://localhost.com:8080 everything works fine.

Sorry...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unscheduled onClick,WICKET-3047,12474063,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,itun,itun,14/Sep/10 11:48,15/Sep/10 20:20,14/Mar/19 03:09,15/Sep/10 20:20,1.4.10,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,"public final class NewsListPanel extends Panel { 

    @SpringBean 
    NewsService service; 
    private List<News> NewsList; 
    private PageableListView PAListView; 

    public PageableListView getPAListView() { 
        return PAListView; 
    } 

    public NewsListPanel(String id, List<News> NewsList) { 
        super(id); 
        this.NewsList = NewsList; 
        PAListView = new PageableListView(""NewsList"", NewsList, 5) { 


            @Override 
            protected void populateItem(ListItem item) { 
                News news = (News) item.getModelObject(); 
                item.add(new ActionLink(""Delete"", news) { 

                    @Override 
                    public void onClick() { 
                        service.deleteNews(news); 
                        setResponsePage(new NewsPage()); 
                    } 
                }); 
                item.add(new Label(""Time"", DateUtils.timeFormatted(news.getTimestamp()))); 
                item.add(new Label(""Title"", news.getTitle())); 
                item.add(new Label(""Content"", news.getContent()).setEscapeModelStrings(false)); 
            } 
        }; 

        add(PAListView); 
    } 

    private class ActionLink extends Link { 

        News news; 

        public ActionLink(String id, News news) { 
            super(id); 
            this.news = news; 
        } 

        @Override 
        public void onClick() { 
            throw new UnsupportedOperationException(""Not supported yet.""); 
        } 

    } 
} 

In this code, when there is an onClick processing, everything is going well. But when NewsPage(this panel is here) is generated after onClick event, suddenly Unscheduled onClick has appeared with News object which never existed.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-09-14 11:57:00.507,,,no_permission,,,,,,,,,,,,203881,,,Wed Sep 15 20:20:34 UTC 2010,,,,,,0|i0kbxz:,116752,,,,,,,,14/Sep/10 11:57;mgrigorov;Please provide fully working application that reproduces the problem.,"14/Sep/10 15:49;itun;public class NewsPage extends BasePage {

    public NewsPage() {
        add(new NewsPanel(""Content""));
    }
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
public final class NewsPanel extends Panel {

    @SpringBean
    NewsService service;
    List<News> NewsList;

    public NewsPanel(String id) {
        super(id);
        this.NewsList = service.findList();
        NewsListPanel NewsPanel = new NewsListPanel(""NewsList"", NewsList);
        add(NewsPanel);
        add(new PagingNavigator(""PagingNavigator"", NewsPanel.getPAListView()));
    }
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
public final class NewsListPanel extends Panel {

    @SpringBean
    NewsService service;
    private List<News> NewsList;
    private PageableListView PAListView;

    public PageableListView getPAListView() {
        return PAListView;
    }

    public NewsListPanel(String id, List<News> NewsList) {
        super(id);
        this.NewsList = NewsList;
        PAListView = new PageableListView(""NewsList"", NewsList, 5) {


            @Override
            protected void populateItem(ListItem item) {
                News news = (News) item.getModelObject();
                item.add(new ActionLink(""Delete"", news) {

                    @Override
                    public void onClick() {
                        service.deleteNews(news);
                        setResponsePage(new NewsPage());
                    }
                });
                item.add(new Label(""Time"", DateUtils.timeFormatted(news.getTimestamp())));
                item.add(new Label(""Title"", news.getTitle()));
                item.add(new Label(""Content"", news.getContent()).setEscapeModelStrings(false));
            }
        };

        add(PAListView);
    }

    private class ActionLink extends Link {

        News news;

        public ActionLink(String id, News news) {
            super(id);
            this.news = news;
        }

        @Override
        public void onClick() {
            throw new UnsupportedOperationException(""Not supported yet."");
        }

    }
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
public class NewsServiceImp implements NewsService {

    @Autowired
    private NewsDAO dao;

    @Override
    public void createNews(News news) {
        news.setTimestamp(DateUtils.now());
        dao.create(news);
    }

    @Override
    public void updateNews(News news) {
        dao.update(news);
    }

    @Override
    public void deleteNews(News news) {
        dao.delete(news);
    }

    @Override
    public News findNewsById(Long id) {
        return dao.findById(id);
    }

    @Override
    public List<News> findList() {
        return dao.findList();
    }

    @Override
    public void deleteNews(Long id) {
        dao.delete(id);
    }
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
@Repository
public class NewsDAOImp extends CustomHibernateDAOSupport<News> implements NewsDAO {

    public NewsDAOImp() {
        super(News.class);
    }

    @Override
    public void create(News news) {
        getHibernateTemplate().save(news);
    }

    @Override
    public void update(News news) {
        getHibernateTemplate().update(news);
    }

    @Override
    public void delete(News news) {
        getHibernateTemplate().delete(news);
    }

    @Override
    public void delete(Long id) {
        Transaction t = null;
        Session s = null;
        try {
            s = this.getSession();
            t = s.beginTransaction();
            super.delete(id);
        } finally {
            t.commit();
            s.flush();
        }
    }

    @Override
    public News findById(Long id) {
        return super.load(id);
    }

    @Override
    public List<News> findList() {
         return getSession()
                .getNamedQuery(""news.getList"")
                .list();
    }
}
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////
public class News extends Entity {

    private String Title;
    private String Content;
    private Date Timestamp;
    private User user;
...........
}


I say: if you do not press the button all is well.
Debuger checked that when you click on the button: handler onClick processing, NewPage regenerating, than Unscheduled onClick ?).","14/Sep/10 16:12;ivaynberg;please provide a *quickstart* project. no one has time to replicate all the spring infrastructure, etc.

if you dont know what quickstart is please see our website.

reopen when you have attached the quickstart.","15/Sep/10 12:53;itun;I found the problem, do not understand why it work so.

<a wicket:id=""ShowButton"" href=""#"" ><input type=""button"" value=""Show"" /></a>

In this case link`s onClick handler is called twice.


<a wicket:id=""ShowButton"" href=""#"" >Show</a>

But in this case as it should be once.","15/Sep/10 16:00;ivaynberg;that is invalid markup, cannot have <input> inside <a>","15/Sep/10 20:02;itun;If I will be use <a wicket:id=""link"" href=""#""><img src=""...""/></a>, will it be working?",15/Sep/10 20:20;ivaynberg;yes,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketServlet failes to initialise with NullPointerException in WebXmlFile.getFilterPath(),WICKET-3039,12473646,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jdonnerstag,gabriel.bucher,gabriel.bucher,09/Sep/10 03:26,13/Sep/10 03:11,14/Mar/19 03:09,10/Sep/10 09:27,1.5-M1,,,,,,,,,,,1.5-M2.1,,,,,,,,,,,,,,0,,,,,,"java.lang.NullPointerException: null
	at org.apache.wicket.util.file.WebXmlFile.getFilterPath(WebXmlFile.java:148) ~[wicket-util-1.5-SNAPSHOT.jar:1.5-SNAPSHOT]
	at org.apache.wicket.util.file.WebXmlFile.getFilterPath(WebXmlFile.java:77) ~[wicket-util-1.5-SNAPSHOT.jar:1.5-SNAPSHOT]
	at org.apache.wicket.util.file.WebXmlFile.getFilterPath(WebXmlFile.java:60) ~[wicket-util-1.5-SNAPSHOT.jar:1.5-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketFilter.init(WicketFilter.java:264) ~[wicket-1.5-SNAPSHOT.jar:1.5-SNAPSHOT]
	at org.apache.wicket.protocol.http.WicketServlet.init(WicketServlet.java:254) ~[wicket-1.5-SNAPSHOT.jar:1.5-SNAPSHOT]
	at javax.servlet.GenericServlet.init(GenericServlet.java:241) ~[servlet-api-2.5.jar:2.5]


WebXmlFile.getFilterPath tries to retrieve the url-pattern of filter-mapping/filter-name... but in the case of a servlet, filter-mapping does not exists... it should be serlvet-mapping/servlet-name.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-09-09 07:07:17.752,,,no_permission,,,,,,,,,,,,203873,,,Fri Sep 10 09:27:12 UTC 2010,,,,,,0|i0kbyf:,116754,,,,,,,,"09/Sep/10 07:07;jdonnerstag;As you probably know, we favor Filter over Servelts. Please explain why you must use Servlet.  A quickstart with the details would be helpful as well. ","09/Sep/10 07:18;reiern70;Juergen,

I know WicketServlet is needed for running Wicket on OSGi applications as AFAIK OSGi especification does not support filters. Thus NOT supporting Wicket Servlet will break existing applications.

Kinds regards,

Ernesto","09/Sep/10 07:21;gabriel.bucher;usecase: wicketstuff push: https://wicket-stuff.svn.sourceforge.net/svnroot/wicket-stuff/trunk/wicketstuff-core/jdk-1.6-parent/push-parent/push-examples/
apparently if you are using cometd the WicketServlet is preferred.

i can create a quickstart if you like.","09/Sep/10 15:58;ivaynberg;there is also websphere with its broken filter support and osgi where it is easier to use a servlet, although i hear thats been getting better.",10/Sep/10 09:27;jdonnerstag;fixed,,,,,,,,,,,,,,,,,,,,,,,,,,,,
there's something wrong with wicket's BaseTree (or with ajax support),WICKET-3035,12473472,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,pete,pete,pete,07/Sep/10 16:14,17/Sep/10 14:49,14/Mar/19 03:09,07/Sep/10 20:46,1.5-M1,,,,,,,,,,,1.5-M2.1,,,wicket,,,,,,,,,,,0,,,,,,"try this:

$ cd wicket-1.5.x/wicket-examples
$ mvn jetty:run

point your browser to localhost:8080/

click 'ajax'
click 'Tree and TreeTable'

 --> url = http://localhost:8080/wicket-examples/ajax/tree/simple

do this in given order:

click 'expand all' : works
click 'collapse all' : nothing happens at all
click on 'rootless mode' : works
click on 'rootless mode' : nothing happens at all
click on 'collapse all' : nothing happens at all

and so on ....

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-09-07 21:11:38.519,,,no_permission,,,,,,,,,,,,203870,,,Wed Sep 08 02:12:07 UTC 2010,,,,,,0|i0aokv:,60255,,,,,,,,"07/Sep/10 16:17;pete;After some investigation I found out that BaseTree writes out the correct 

  org.apache.wicket.markup.html.tree.DefaultTreeState

but on the next request the state is not always updated. Deserialization is eventually picking an old page version (if I named that beast correctly).

Inspect the tree state in the debugger to see for yourself",07/Sep/10 20:10;pete;fixed with #993513,07/Sep/10 20:12;pete;the reason for the misbehavior was that during ajax responses incrementing page ids was not disallowed. So actually Page#componentRemoved(Component) was called which marked the page as dirty and finally incremented the page id ,"07/Sep/10 21:11;hudson;Integrated in Apache Wicket 1.5.x #306 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.5.x/306/])
    WICKET-3035: there's always a better place for things. also some cleanup and return previous state on page id freezing to support resetting the flag to previous state. fixed tests, too
WICKET-3035: do not increment page id when sending ajax responses
","08/Sep/10 02:12;hudson;Integrated in Apache Wicket 1.5.x #309 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.5.x/309/])
    WICKET-3035: AjaxRequestTarget can be not only invoked from AbstractDefaultAjaxBehavior but also directly from RequestHandlerStack (and others). The testing for ajax requests in ListenerInterfaceRequestHandler did not work for test cases. some cleanup.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,
DateTime bug with a date pattern without separator ,WICKET-2995,12471787,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,mgrigorov,revo,revo,17/Aug/10 07:58,17/Aug/10 08:36,14/Mar/19 03:09,17/Aug/10 08:36,1.3.7,,,,,,,,,,,1.4.10,,,wicket-datetime,,,,,,,,,,,0,,,,,,"HI,

I am using wicket-datetime-1.3.7.jar
When i use a datePattern with a separator dd/MM/yyyy, i get 01/01/2010, it's OK.
But when i use the datePattern ddMMyyyy, i get 1110 and it's not correct

The bug is in the substituteDate() method of the wicket-date.js file.

I have fixed it. I have attached the fixed method and an example of the problem

Thanks",all,600,600,,0%,600,600,,,,,,,,,,17/Aug/10 07:59;revo;demo_bug.html;https://issues.apache.org/jira/secure/attachment/12452262/demo_bug.html,17/Aug/10 07:59;revo;wicket-date-patch.js;https://issues.apache.org/jira/secure/attachment/12452263/wicket-date-patch.js,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2010-08-17 08:04:25.075,,,no_permission,,,,,,,,,,,,203832,,,Tue Aug 17 08:34:31 UTC 2010,,,,,,0|i0kc2f:,116772,,,,,,,,"17/Aug/10 07:59;revo;the wicket-date-patch contains the method patched
the demo_bug is a demonstration of the current bug","17/Aug/10 08:04;mgrigorov;Just to let you know that Wicket 1.3.x wont be fixed for this problem. 1.3.x receives only security fixes.
If you need this fix then you'll have to upgrade to latest 1.4.x version.",17/Aug/10 08:34;revo;this bug is fixed in the Wicket 1.4.10 i will try it in my project,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Blogs Link not working,WICKET-2959,12469992,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,count.negative,count.negative,23/Jul/10 08:46,29/Jul/10 11:44,14/Mar/19 03:09,29/Jul/10 11:44,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,The link to blogs http://wicket.apache.org/blogs.html goes 404 on the main http://wicket.apache.org/ site.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203798,,,Thu Jul 29 11:44:02 UTC 2010,,,,,,0|i0kc4v:,116783,,,,,,,,29/Jul/10 11:44;count.negative;seems to be fixed now.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Markup for AjaxLazyLoadPanel's is not valid HTML,WICKET-2951,12469709,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,dashorst,dashorst,20/Jul/10 10:28,21/Jul/10 01:14,14/Mar/19 03:09,20/Jul/10 11:01,1.4.9,,,,,,,,,,,1.4.10,1.5-M1,,wicket-extensions,,,,,,,,,,,0,,,,,,The markup generated for the waiting image is not valid HTML as it lacks an ALT attribute.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-07-20 19:23:25.281,,,no_permission,,,,,,,,,,,,203790,,,Wed Jul 21 01:14:06 UTC 2010,,,,,,0|i0kc5r:,116787,,,,,,,,"20/Jul/10 19:23;hudson;Integrated in Apache Wicket 1.4.x #45 (See [http://hudson.zones.apache.org/hudson/job/Apache%20Wicket%201.4.x/45/])
    Fix the broken test after r965786: Fixes WICKET-2951
","21/Jul/10 01:14;hudson;Integrated in Apache Wicket 1.5.x #156 (See [http://hudson.zones.apache.org/hudson/job/Apache%20Wicket%201.5.x/156/])
    ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tree doesn't update correctly,WICKET-2886,12465269,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,lotos,lotos,24/May/10 13:18,17/Feb/11 16:21,14/Mar/19 03:09,24/Aug/10 22:20,1.4.8,,,,,,,,,,,1.4.11,1.5-M2.1,,wicket,,,,,,,,,,,0,,,,,,"When we add a first child to the node this update doesn't appeare in a browser. If we collapse/expand this the parent node forced we will see changes. All the rest updates work correctly.
This bug easily can be reproduced with the next pice of code.


TestPage.html 

<html xmlns=""http://www.w3.org/1999/xhtml"" xmlns:wicket=""http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd"">
<body>
<table>
    <tr>        <td>            <div wicket:id=""tree""></div>        </td>    </tr>
    <tr>        <td>            <input type=""submit"" wicket:id=""addChild"" class=""btn btnStd"" />        </td>    </tr>
</table>
</body>
</html>

TestPage.java

public class TestPage extends WebPage {
    public TestPage() {
        DefaultMutableTreeNode root = new DefaultMutableTreeNode(""root"");
        final DefaultMutableTreeNode rootChild = new DefaultMutableTreeNode(""rootChild"");
        root.add(rootChild);

        final DefaultTreeModel treeModel = new DefaultTreeModel(root);
        final BaseTree tree = new LinkTree(""tree"", treeModel);

        add(tree);
        tree.getTreeState().expandNode(root);

        AjaxLink addButton = new AjaxLink(""addChild"") {
            public void onClick(AjaxRequestTarget ajaxRequestTarget) {
                DefaultMutableTreeNode child = new DefaultMutableTreeNode(""child"");
                //rootChild.add(child); // it doesn't matter how we add this child
                treeModel.insertNodeInto(child, rootChild, 0);
                tree.updateTree(ajaxRequestTarget);
            }
        };
        add(addButton);
    }
}
","tomcat 6.0.14, win 7",,,,,,,,,,,,,,WICKET-3451,,24/Aug/10 21:00;mikehefner;WICKET-2886-Quickstart.zip;https://issues.apache.org/jira/secure/attachment/12452971/WICKET-2886-Quickstart.zip,24/Aug/10 21:21;mikehefner;WICKET-2886-fix.patch;https://issues.apache.org/jira/secure/attachment/12452973/WICKET-2886-fix.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2010-08-24 21:00:09.417,,,no_permission,,,,,,,,,,,,203731,,,Thu Feb 17 15:35:42 UTC 2011,,,,,,0|i0kcav:,116810,,,,,,,,24/Aug/10 21:00;mikehefner;attached Quickstart to demonstrate bug,"24/Aug/10 21:08;mikehefner;Attached patch with bug fix.

Adding a child node to a visible childless node now correctly updates the junctionLink and icon of the childless node to show that it now has children. The new child node is also displayed.
","25/Aug/10 01:10;hudson;Integrated in Apache Wicket 1.5.x #262 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.5.x/262/])
    ","17/Oct/10 19:54;mgrigorov;Sergey, Mike,

Can you please take a look at WICKET-3112? The patch for this ticket caused some troubles to applications that use Wicket Tree component without relying on Swing's TreeNode.
Can you please test your apps with the new patch in WICKET-3112 ?
Thanks!","18/Oct/10 13:18;lotos;Martin,

I've tested WICKET-3112.
It works.
But i noticed one thing, that this parent node is expanded by default after adding a child. Is it ok?","18/Oct/10 13:27;mgrigorov;Hi Sergey,

Thanks for the feedback!
May I ask you which patch did you use when testing ? There are two - one by me and one by Mike.
Please comment directly in WICKET-3112.

I'm not sure about the behavior. We must preserve the old one, i.e. pre-WICKET-3112.",18/Oct/10 14:34;mikehefner;I added a comment about the changed behavior to WICKET-3112.,"19/Oct/10 19:16;hudson;Integrated in Apache Wicket 1.4.x #214 (See [https://hudson.apache.org/hudson/job/Apache%20Wicket%201.4.x/214/])
    WICKET-3112 Fix of issue 2886 breaks all individual implementations of any AbstractTree

Don't use Swing's TreeNode in AbstractTree.
Apply the patch provided by Mike Hefner with slight modifications.

brix-demo /admin works fine.
the reporter of WICKET-2886 also confirmed that the patch doesn't break the previous fix
","17/Feb/11 15:35;lotos;I found the problem with the fix, but I don't see the way to reopen the issue. May be after close this action will be available.",,,,,,,,,,,,,,,,,,,,,,,,
DatePicker does not parse year with pattern dd.MM.yyyy correctly.,WICKET-2841,12462427,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,stoyle,stoyle,19/Apr/10 12:41,27/Aug/10 23:44,14/Mar/19 03:09,27/Aug/10 23:44,,,,,,,,,,,,,,,wicket-datetime,,,,,,,,,,,0,,,,,,"We use the date pattern dd.MM.yyyy, and when returning from the date picker (org.apache.wicket.extensions.yui.calendar.DatePicker) yields incorrect value in the date text field (org.apache.wicket.extensions.markup.html.form.DateTextField).

For instance picking the date 19.04.2010 in the date picker, yields 19.04.10, which again becomes the java.util.Date 19.04.0010. We have found the source of the problem, and created a fix for this, but hopefully you can fix this in a later release, so we do not have to maintain a local patched version of wicket-datetime.

I have included the patch here. However this code seems very intentional, so applying this patch may be breaking something else!?

Thanks
- Alf

diff --git a/src/main/java/org/apache/wicket/extensions/yui/calendar/wicket-date.js b/src/main/java/org/apache/wicket/extensions/yui/calendar/wicket-date.js
index 7f19c55..420f075 100644
--- a/src/main/java/org/apache/wicket/extensions/yui/calendar/wicket-date.js
+++ b/src/main/java/org/apache/wicket/extensions/yui/calendar/wicket-date.js
@@ -134,7 +134,7 @@ Wicket.DateTime.substituteDate = function(datePattern, date) {
        // optionally do some padding to match the pattern
        if(datePattern.match(/dd+/)) day = Wicket.DateTime.padDateFragment(day);
        if(datePattern.match(/MM+/)) month = Wicket.DateTime.padDateFragment(month);
-        if(datePattern.match(/yy+/)) year = Wicket.DateTime.padDateFragment(year % 100);
+       if(datePattern.match(/yy+/)) year = Wicket.DateTime.padDateFragment(year);
        // replace pattern with real values
        return datePattern.replace(/d+/, day).replace(/M+/, month).replace(/y+/, year);
 }",,,,,,,,,,,WICKET-2767,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-04-27 07:50:36.402,,,no_permission,,,,,,,,,,,,203687,,,Fri Aug 27 23:44:21 UTC 2010,,,,,,0|i0kcfj:,116831,,,,,,,,"27/Apr/10 07:50;textshell;I can reproduce this bug. If i specify a format with just two digit year the java side seems to sanely interpret the 2 digit year. 
But the javascript part fails to respect 4 year date formats and just returns 2 digits which then gets misinterpreted as full year in the java part and the model ends up with dates < 100 year a.d. instead of in this or the last century.
so i think a better fix would be to explicitly check for both cases.

if(datePattern.match(/yyyy/)) {
   year=""""+year;
   year = ""0000"".slice(0,4-year.length) + year;
} else if(datePattern.match(/yy/)) year = Wicket.DateTime.padDateFragment(year % 100); 

This should work for the common cases. (i.e. formated to 2 or 4 digits, year < 10000). But if required i should be able to write code that completly handles all valid cases. Also if need to fix this bug i can supply a real patch, but it shouldn't be much additional work to change this manually with help of the location information in the patch of the original reporter.","27/Apr/10 07:53;textshell;Oh, i forgot to mention. There is a workaround to get a full year: Overriding the getDatePattern of the DatePicker class with a format with just one letter 'y' doesn't trigger the bug in the javascript. But it's of course not a clean way. e.g.
add(new DatePicker() {
			// Workaround for wicket bug WICKET-2841
			protected String getDatePattern() {
				return ""dd.MM.y"";
			}
}","28/Apr/10 07:36;stoyle;The workaround works for us, so we have used that to avoid our local patched version of the jar.

I think you should definitely apply the fix you've suggested. If not it should be clear from the documentation of DatePicker and DateTextField how to apply the workaround.

Thanks for looking into this.",04/May/10 09:22;textshell;In my testing this seems to be fixed in wicket 1.4.8. Alf Støyle do you agree that this can be closed now?,"04/May/10 09:29;stoyle;Yes, I agree. Close this issue.

By the way, sorry I didn't see WICKET-2767. I tried search for related issues, before I registered this one.",27/Aug/10 23:44;pete;closed as requested,,,,,,,,,,,,,,,,,,,,,,,,,,,
"The ""Building from SVN"" page points to Wicket 1.4.3 as the latest release when it should be 1.4.7",WICKET-2785,12459225,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,aakoch,aakoch,16/Mar/10 02:32,16/Mar/10 09:51,14/Mar/19 03:09,16/Mar/10 09:50,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"The link ""Wicket 1.4"" on http://wicket.apache.org/building-from-svn.html points to http://www.apache.org/dyn/closer.cgi/wicket/1.4.3",Apache Wicket Web site,,,,,,,,,WICKET-2623,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-03-16 09:50:53.555,,,no_permission,,,,,,,,,,,,203638,,,Tue Mar 16 09:50:53 UTC 2010,,,,,,0|i0kciv:,116846,,,,,,,,"16/Mar/10 09:50;dashorst;Thanks, needed to export the whole confluence space again.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket-datetime not compatible with YUI menu,WICKET-2784,12459170,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,jchappelle,jchappelle,15/Mar/10 17:13,15/Mar/10 20:37,14/Mar/19 03:09,15/Mar/10 20:37,1.4.7,,,,,,,,,,,,,,wicket-datetime,,,,,,,,,,,0,,,,,,In IE8 I the DatePicker component does not popup the calendar if using wicketstuff-YUI menu for 1.4. In Chrome the DatePicker works and the YUI menu does not render the drop down menus.,"IE8, Chrome",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203637,,,Mon Mar 15 20:37:01 UTC 2010,,,,,,0|i0kcj3:,116847,,,,,,,,15/Mar/10 20:37;jchappelle;Latest snapshot on 3/15/2010 of the YUI library seemed to resolve the issue.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
multipart form does not call window.wicketGlobalPreCallHandler,WICKET-2749,12456528,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,pavkovic,pavkovic,17/Feb/10 11:28,24/Feb/10 08:58,14/Mar/19 03:09,24/Feb/10 01:19,1.4.6,,,,,,,,,,,1.4.7,1.5-M1,,wicket,,,,,,,,,,,0,,,,,,clicking on submit button of a multipart form does not call window.wicketGlobalPreCallHandler as expected. See attached quickstart,"FF 3.5, kubuntu 9.10, kde 4.4",,,,,,,,,,,,,,,,17/Feb/10 11:28;pavkovic;multipartform.tar.gz;https://issues.apache.org/jira/secure/attachment/12436096/multipartform.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203605,,,Wed Feb 24 08:58:05 UTC 2010,,,,,,0|i0kclz:,116860,,,,,,,,17/Feb/10 11:28;pavkovic;quickstart,24/Feb/10 08:58;pavkovic;works. Thanks!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxFormChoiceComponentUpdatingBehavior cannot find the choice,WICKET-2744,12456263,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,martin-g,martin-g,14/Feb/10 14:08,21/Apr/10 14:02,14/Mar/19 03:09,21/Apr/10 14:02,1.4.6,,,,,,,,,,,1.4.7,1.5-M1,,wicket,,,,,,,,,,,1,ajax,choice,form,update,wicket,"AjaxFormChoiceComponentUpdatingBehavior tries to find the form components (the choices) by iterating the children elements with tagName 'input' and verifying some constraints. One of this constraints have been changed recently and now the children could not be found:

Index: src/main/java/org/apache/wicket/ajax/form/AjaxFormChoiceComponentUpdatingBehavior.java
===================================================================
--- src/main/java/org/apache/wicket/ajax/form/AjaxFormChoiceComponentUpdatingBehavior.java	(revision 909983)
+++ src/main/java/org/apache/wicket/ajax/form/AjaxFormChoiceComponentUpdatingBehavior.java	(working copy)
@@ -70,7 +70,7 @@
 		asb.append("" for (var i = 0 ; i < inputNodes.length ; i ++) {\n"");
 		asb.append("" var inputNode = inputNodes[i];\n"");
 		asb.append("" if (!inputNode.type) continue;\n"");
-		asb.append("" if (!(inputNode.className.indexOf('wicket-'+markupId)===0)) continue;\n"");
+		asb.append("" if (!(inputNode.id.indexOf(markupId+'-')===0)) continue;\n"");
 		asb.append("" var inputType = inputNode.type.toLowerCase();\n"");
 		asb.append("" if (inputType == 'checkbox' || inputType == 'radio') {\n"");
 		asb.append("" Wicket.Event.add(inputNode, 'click', callbackScript);\n"");
",,,,,,,,,,,,,,WICKET-2510,,,14/Feb/10 14:09;martin-g;ajaxradiochoice.tgz;https://issues.apache.org/jira/secure/attachment/12435820/ajaxradiochoice.tgz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203603,,,Wed Apr 21 14:02:05 UTC 2010,,,,,,0|i0kcm7:,116861,,,,,,,,14/Feb/10 14:09;martin-g;Attach a quickstart,"21/Apr/10 13:12;martin-g;It seems it need some more optimizations to the check:

-               asb.append("" if (!(inputNode.className.indexOf('wicket-'+markupId)===0)&&!(inputNode.id.indexOf(markupId+'-')===0)) continue;\n"");
+               asb.append("" if (!(inputNode.className.indexOf('wicket-'+markupId)>=0)&&!(inputNode.id.indexOf(markupId+'-')>=0)) continue;\n"");

because the result of indexOf() is either -1 or 0+.",21/Apr/10 14:02;martin-g;It is already fixed in https://issues.apache.org/jira/browse/WICKET-2806,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
expand icon link doesn't work on treetable component,WICKET-2695,12446341,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,ivaynberg,mohamed.a,mohamed.a,22/Jan/10 16:35,25/Jan/10 16:54,14/Mar/19 03:09,25/Jan/10 10:51,1.4.5,,,,,,,,,,,,,,wicket-extensions,,,,,,,,,,,0,,,,,,"I created my own component => i added the treetable on org.apache.wicket.markup.html.panel.Panel. I used the code of 
http://www.wicket-library.com/wicket-examples/nested/?wicket:bookmarkablePage=:org.apache.wicket.examples.ajax.builtin.tree.TreeTablePage to test that.

I use the LoadadbleDetachableModel as model and it work correctly because the ""expand All"" and ""Collapse All"" works correctly but when I click on the expand icon (folder icon) I see on the task manager there is something has been done but the treetable is not expanded as we can expected.

Thank you for your help.
","tomcat 6, xp, wicket 1.4.5, wicket-extensions 1.4.5 maven",1800,1800,,0%,1800,1800,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2010-01-22 17:22:04.545,,,no_permission,,,,,,,,,,,,203557,,,Mon Jan 25 10:36:30 UTC 2010,,,,,,0|i0kcpr:,116877,,,,,,,,22/Jan/10 17:22;martin-g;can you provide a quickstart application ?,"22/Jan/10 19:39;ivaynberg;the folder icon selects the node, it does not expand/collaps it, only the [+] icon does that.","25/Jan/10 10:34;mohamed.a;[...] the folder icon selects the node, it does not expand/collaps it, only the [+] icon does that. 
[ Show » ] Igor Vaynberg added a comment - 22/Jan/10 07:39 PM the folder icon selects the node, it does not expand/collaps it, only the [+] icon does that. [...] 
=> Yes I know that, I tried with the [+] icon. 
The tree works correctly with a simple TreeModel, but not with a LoadableDetachableModel. The load method is called correclty after each click on [+] icon, but the treetable doesn't expand. 

","25/Jan/10 10:36;mohamed.a;another thing is the code of load method :

LoadableDetachableModel<TreeModel> treeModel = new LoadableDetachableModel<TreeModel> () {
 @Override
    protected TreeModel load() {
	return DataModel.getTableTreeModel();
    }
};

getTableTreeModel() is a static method which returns a copy of treemodel via serialization.

... I found the issue. The issue was that I the static method getTableTreeModel() returns a new instance of treemodel after each call to the load() method. The solution is to save an instance of treemodel within a variable and to return the variable on the load() method.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Apply fixes from the named issues to 1.5 when API stabalizes,WICKET-2691,12445946,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,ivaynberg,ivaynberg,19/Jan/10 16:53,17/Sep/10 14:49,14/Mar/19 03:09,28/Aug/10 22:22,,,,,,,,,,,,1.5-M2.1,,,,,,,,,,,,,,0,,,,,,WICKET-2667,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203553,,,2010-01-19 16:53:32.0,,,,,,0|i0kcpz:,116878,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Content-Length Issue with 1.4.4,WICKET-2613,12443222,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,victori,victori,13/Dec/09 23:03,18/Jul/10 10:13,14/Mar/19 03:09,14/Dec/09 19:13,1.4.4,,,,,,,,,,,1.4.5,,,wicket,,,,,,,,,,,1,,,,,,"I have upgraded to wicket-1.4.4 from wicket-1.4.3. I have made sure to recompile all dependent libraries against 1.4.4. Since switching any component referenced from a JAR comes back with an incorrect content-length.

I can resolve this issue by switching back to 1.4.3. 

syris:~ victori$ curl -I http://lfab:8480/resources/wicket.contrib.IconElements/vcard.gif
HTTP/1.1 200 OK
Date: Sun, 13 Dec 2009 23:02:11 GMT
Last-Modified: Sun, 13 Dec 2009 23:00:44 GMT
Expires: Mon, 14 Dec 2009 00:02:11 GMT
Cache-Control: max-age=3600
Content-Type: image/gif
Content-Length: 99925
Server: Jetty(6.1.12)


It should be 619 bytes.",OSX/JDK6,,,,,,,,,,,,,,,,14/Dec/09 04:42;victori;root-final-fix.java;https://issues.apache.org/jira/secure/attachment/12427887/root-final-fix.java,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2009-12-14 13:18:49.229,,,no_permission,,,,,,,,,,,,203486,,,Sun Jul 18 10:13:01 UTC 2010,,,,,,0|i0kcxr:,116913,,,,,,,,"13/Dec/09 23:53;victori;Did a bit more digging, all static content replies with a Content-Length of 99925.

I am guessing the recent changes done in https://issues.apache.org/jira/browse/WICKET-2534 broke it?

","14/Dec/09 04:21;victori;Resolved the issue by merging some removed code from UrlResourceStream.java from 1.4.3

The following was pushed back in, now it works correctly. 

if (connection instanceof JarURLConnection)
{
	JarURLConnection jarUrlConnection = (JarURLConnection)connection;
	URL jarFileUrl = jarUrlConnection.getJarFileURL();
	URLConnection jarFileConnection = jarFileUrl.openConnection();
	try
	{
		lastModified = jarFileConnection.getLastModified();
	}
	finally
	{
		jarFileConnection.getInputStream().close();
	}
}","14/Dec/09 04:42;victori;I jumped the gun on the last patch. It just masked the root problem. The issue was with Connections#findFile.

Here is the modified findFile method that works correctly.

","14/Dec/09 13:18;dlipski;Victor, 
As I understand to fix this bug only ""root-final-fix.java"" chould be applied ? I suggest deleting ""content-length.patch"" because its confusing what should be applied.

This bug has nasty consequences, we migrated from 1.4.3 to 1.4.4 yesterday and all pages with TinyMCE editor started to load very long. After few hours we found that TinyMCE loads additional resources (js, css etc) after loading main script. After loading each resource browser was waiting for 20 sec. When I found this issue report I checked content-length header for this files, it was wrong and this causess that a browser is waiting for content which is never send by server. Whole page loads more then 2 min (with wicket 1.4.3 it tooks less then 1 sec.) This bug is very hard to detect (no Exception is thrown).

I suggest moving this issue report to ""wicket"" component, Its more active and more users will be noticed aboud this bug.","14/Dec/09 18:12;victori;Daniel, 

I did not know I could delete uploaded files to JIRA. Here is a patched copy I have deployed in production if anyone needs it.

You can use the jar below or patch wicket your self, just trying to save people some time. 

http://victori.uploadbooth.com/patches/wicket-1.4.4.1.jar",14/Dec/09 19:13;jcompagner;i partly reverted 2534,"15/Dec/09 16:56;ivaynberg;johan, so by partially unrolling did you undo  WICKET-2534 ?","15/Dec/09 17:04;jcompagner;no, the problem we had that the timestamp was calculated in the constructor
that is still gone.
The only thing rollbacked is looking if the resource is a file or not. (and in there we had the problem, because the file that was found was the jar file even if the resource was inside a jar file then it shouldnt match)","18/Jul/10 10:13;hudson;Integrated in Apache Wicket 1.5.x #143 (See [http://hudson.zones.apache.org/hudson/job/Apache%20Wicket%201.5.x/143/])
    Port from wicket-1.4.x

r890446
Author:	jcompagner
Date:	Mon Dec 14 19:12:44 2009 UTC (7 months ago)
Changed paths:	2
Log Message:	
partly reverted 2534 , fixed 2613
Issue: WICKET-2613
",,,,,,,,,,,,,,,,,,,,,,,,
Enclosure reports incorrect component id for missing components inside the enclosure,WICKET-2606,12442946,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,thedug,thedug,10/Dec/09 02:56,10/Dec/09 07:31,14/Mar/19 03:09,10/Dec/09 07:06,1.4.4,,,,,,,,,,,1.4.5,,,wicket,,,,,,,,,,,0,,,,,,enclosure always reports the id of the component specified as the child as the missing id no matter which component is missing.,,,,,,,,,,,,,,,,,10/Dec/09 02:57;thedug;testEnclosure.zip;https://issues.apache.org/jira/secure/attachment/12427557/testEnclosure.zip,10/Dec/09 06:30;thedug;testEnclosure2.zip;https://issues.apache.org/jira/secure/attachment/12427579/testEnclosure2.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2009-12-10 04:32:02.318,,,no_permission,,,,,,,,,,,,203479,,,Thu Dec 10 07:31:16 UTC 2009,,,,,,0|i0kcy7:,116915,,,,,,,,"10/Dec/09 04:32;ivaynberg;could not reproduce against 1.4.4, pom points to wicket 1.4.2.",10/Dec/09 06:30;thedug;This is the one that fails on 1.4.4,"10/Dec/09 07:06;ivaynberg;the correct exception now reads:

WicketMessage: Could not find child with id: pageRank in the wicket:enclosure

Root cause:

org.apache.wicket.WicketRuntimeException: Could not find child with id: pageRank in the wicket:enclosure
at org.apache.wicket.markup.html.internal.Enclosure.checkChildComponent(Enclosure.java:220)
at org.apache.wicket.markup.html.internal.Enclosure.ensureAllChildrenPresent(Enclosure.java:262)
at org.apache.wicket.markup.html.internal.Enclosure.onComponentTagBody(Enclosure.java:169)","10/Dec/09 07:06;ivaynberg;ps, for future reference: a quickstart is meant to be a minimal demonstration of the bug, not something that has 24+ classes.","10/Dec/09 07:13;ivaynberg;no, its not, i checked.","10/Dec/09 07:20;thedug;Ah..  So I can omit items if I know that the enclosure will be hidden? 

That's the way other components work.","10/Dec/09 07:23;ivaynberg;no, you cannot omit items. see WICKET-2605",10/Dec/09 07:31;thedug;Ok. Thanks...,,,,,,,,,,,,,,,,,,,,,,,,,
Images and stylesheets leave open file handles,WICKET-2567,12440270,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,pdiefent,pdiefent,10/Nov/09 09:51,05/Jan/10 13:04,14/Mar/19 03:09,05/Jan/10 13:04,1.4.3,,,,,,,,,,,1.4.6,1.5-M1,,wicket,,,,,,,,,,,0,,,,,,"Running Wicket applications on IBM WebSphere and Oracle BEA application server result in a huge amount of open file handles for images and stylesheets. Our customer has up to 700 open file handles up to 50 file handles on the same stylesheet or image.
The stylesheets are directly referenced in the HTML files:

<html>
<head>
<title>PTS/A&amp;R Login</title>
<link rel=""stylesheet"" type=""text/css"" href=""styles/basicStyles.css"" />

or

<html>
	<wicket:head>
		<link rel=""stylesheet"" type=""text/css"" href=""styles/genericMaint.css"">
	</wicket:head>
	<body>
	<wicket:extend>
		<div wicket:id=""genDetail""/>
	</wicket:extend>
	</body>
</html>

Sometimes the images are referenced within the stylesheets: 

.mainLogo {
	position: relative;
	top: 0px;
	left: 0px;
	width: 188px;
	height: 35px;
	background-image: url(../images/AARLogo.png);
}

But in most cases we use the images directly in the HTML code.",The problem exists on IBM WebSphere 6.1.0.19 running on Windows 2003 Server,,,,,,,,,,,,,,,,04/Jan/10 09:28;pdiefent;FhTest.war;https://issues.apache.org/jira/secure/attachment/12429326/FhTest.war,11/Nov/09 07:00;pdiefent;Open File Handles on WebShpere for Wicket Application.jpg;https://issues.apache.org/jira/secure/attachment/12424570/Open+File+Handles+on+WebShpere+for+Wicket+Application.jpg,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2009-11-11 04:05:17.52,,,no_permission,,,,,,,,,,,,203443,,,Tue Jan 05 11:43:26 UTC 2010,,,,,,0|i0kd1j:,116930,,,,,,,,"11/Nov/09 04:05;ivaynberg;urls to such resources are not served by wicket, but by the servlet container directly. your problem is most likely there.

if you look at the url and it doesnt look like /resources/<some class name>/resource-name.ext then it is not served by wicket and wicket does not touch it. your problem may be websphere or bea.","11/Nov/09 06:59;pdiefent;Hallo Igor,
the file handles are left open on each rendering cycle of the Wicket page. This is obvious because each resource referenced in the HTML File or by the Java part of the page leaves a new open file handle if the page is rendered. Refreshing the page in the browser results in open file handles for the complete set of stylesheets and images referenced by the page. See the attached image showing the file handles after 4 refreshments of the welcome page of our application. 
",11/Nov/09 07:06;pdiefent;I have checked our JSF applications for open file handles but they don't show any. So the problem first rose with the new Wicket application ...,"11/Nov/09 07:11;ivaynberg;what is the exact url of the resource that is causing the leak as seen in the browser's source?
","11/Nov/09 07:22;pdiefent;The application is started with

http://20.49.215.17:9080/PtsAarWeb/?x=3xQuVuj-t6mq8TNcrGH5Lo5T8b2V2qU4deYo8mUTA3wceSBXfLZhwA

The login screen references a style sheet with some background images (see the code fragments above). The resources are located parallel to the WEB-INF directory inside the WAR file.
",11/Nov/09 07:58;ivaynberg;unless the resources that are causing the file leak are inside WEB-INF/classes wicket is not serving them and is therefore not responsible for any handle leaks. what is the exact url to the css file? eg the url that if you put into the browser will return the css itself???,"11/Nov/09 08:20;pdiefent;The URL returning the stylesheet is http://20.49.215.17:9080/PtsAarWeb/styles/basicStyles.css and for images http://20.49.215.17:9080/PtsAarWeb/images/AARLogo.png

Anyway - how does Wicket process following code fragment?

<html> 
<wicket:head> 
<link rel=""stylesheet"" type=""text/css"" href=""styles/genericMaint.css""> 
</wicket:head> 
<body> 

As I understand Wicket will sure open the HTML file and will compose the panels and other fragments to the complete page. In my application every HTML page is located in WEB-INF/classes according to the Wicket recommendations. So for rendering the complete page i suppose Wicket will sure open also the linked ressources ...","11/Nov/09 08:23;ivaynberg;i dont see any open file handles to html files in your screenshot...

the only thing that wicket:head does is put the content inside it into the head element of the page. the urls to css and images you pasted are not server by wicket but by the servlet container.

the html files are loaded only once and then cached, so those would not leak file handles.
",11/Nov/09 08:25;pdiefent;By the way - we also use tables with alternate colored rows. So Wicket has to open the tables.css file to get the appropriate styles for odd and even rows ...,"11/Nov/09 08:30;ivaynberg;again, irrelevant. wicket does not ""open css files to get the classes"", the browser does this.","11/Nov/09 08:42;pdiefent;Sorry for beeing tenacious of this behaviour, because as I stated I didn't recognise this on my JSF applications.
So I promise - one last question on this:
Can there be any relation to the JIRA ticket https://issues.apache.org/jira/browse/WICKET-2534 ?
Thanks for your patience, Peter","11/Nov/09 08:46;ivaynberg;i dont think so.in order for this problem to occur the resource has to be served by wicket, but the urls you have pointed out are not served by wicket, so wicket is in no way involved in opening any file handles to that file or streaming contents.

however, there is nothing stopping you from building the latest snapshot and trying your app with it. there is a chance i am wrong about this.","04/Jan/10 09:21;pdiefent;I'm sorry, but I'm really clueless - I don't know how to avoid these open file handles in WebSphere and Oracle Weblogic. 
I have stripped down the problem to a litte ""Hello World"" like application for testing the issue.
With Apache Tomcat the problem doesn't exist. I've tested the latest Oracle Weblogic release with JDK 1.6 and also IBM WebSphere 6.1 with JDK 1.5 - both server show new open file handles each time I press the test button in the application.
I will attach the fhtest.war file to this issue.
Thanks, Peter
","04/Jan/10 09:28;pdiefent;Little ""hello world"" like application wich causes many open file handles on Oracle Weblogic and IBM WebSphere servers.",04/Jan/10 10:50;jcompagner;are the .ear file or the .war file extracted (are they dirs) or are they really the zipped/jarred files?,04/Jan/10 11:57;pdiefent;The attached WAR file can be deployed on any application server. In general it is a ZIP archive with the complete deployment structure.,"04/Jan/10 12:36;jcompagner;yes i get that
But when you deploy it, will it extract the war/ear file or will it serve right out of the war?
If it is the last, look if you can say that it should extract it.

If i remember correctly weblogic had its own jar/zip url connection. so then we cant do what we do know to close the connection (or dont open it) as much as possible.

So where does the file that you see file handles on come from? And what kind of url connection will open it?
","04/Jan/10 13:53;pdiefent;The WAR files are extracted in special folders of the server installation when the application is deployed on the server. While deploying the application the files located in the WEB-INF/classes folder of the WAR file are deployed as a new wl_nnn.jar file in the WEB-INF/lib direcory of the extracted aplication and the classes directory is left empty.

In my example applictaion I get many open file handles on Garfield.png located in the images folder and exactly the same number of open handles on basicStyles.css located in the Styles folder when hitting the test button.

To rule out the fact that all classes from the WEB-INF/classes path are packed in a new jar file I have stopped the server and extracted all classes back into the classes folder and deleted the wl_nnn.jar file. But this didn't change anything ...","04/Jan/10 15:40;jcompagner;So you get a open file handle on a Garfield.png what is really just a file on the filesystem. So not packed in an archive what so ever?
thats weird.
",04/Jan/10 17:00;ivaynberg;does this actually cause the app to fail at some point? or does the os eventually start recycling the file handles?,"05/Jan/10 06:36;pdiefent;When the application server starts its garbage collection, the open file handles vanish. The application doesn't fail but we had to adjust some memory parameters for the server. Our application will get more users in the future so we're not lucky with this leaks ...",05/Jan/10 08:10;ivaynberg;if something is cleaned up by the garbage collector its not really a leak is it? may be a weirdness of the ibm jre.,"05/Jan/10 08:28;pdiefent;As I stated above we have 700 open file handles in production this time. If the system will be used by more users in the next months we don't know, how often the garbage collector has to do its job. This is alos a performance risk, because our application is not the only one on this server and garbage collection affects all other apps also.
Second point is that we have this problem on IBM WebSphere and on Oracle Weblogic Servers. Its not only a weirdness of the IBM JRE but I think its a weirdness of the big application servers which use proprietary mechanisms to achieve better scalability and performance.
Unfortunately our big customers use IBM and Oracle servers, so we have to solve this problem ...","05/Jan/10 08:45;pavkovic;from my live production introspection experiences: 
- if you have about 60 concurrent users your garbage collector will be called multiple times a minute.
- if you have a memory problem the garbage collector will be called every second :) (e.g. a query that pushes a million rows into memory but only 10 are shown on the screen)

Therefore I think you can ignore this problem.

Don't try to pre-optimize, it is - in nearly all scenarios - a waste of time.

some reading about this: 
http://orionl.blogspot.com/2008/11/scalability-is-war-and-dont-pre.html
","05/Jan/10 09:11;jcompagner;what happens in that test app
if you use the wicket filter (dont use the servlet thats pretty much deprecated)  and also mount the filter on /app instead of root?","05/Jan/10 09:41;pdiefent;I don't know, how to mount the filter other than root. In my test application I use following filter setting:
<filter>
	<filter-name>FhAppl</filter-name>
	<filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>
	<init-param>
		<param-name>applicationClassName</param-name>
		<param-value>wicket.test.fh.application.FhAppl</param-value>
	</init-param>
  </filter>
  <filter-mapping>
	<filter-name>FhAppl</filter-name>
	<url-pattern>/*</url-pattern>
  </filter-mapping>

The Application is started like http://localhost:8036/FhTest","05/Jan/10 09:59;jcompagner;in the example you use a servlet not the filter (thats commented out)

If you use a filter do you have the same problems?

i just committed a fix to WicketSerlvet (should be in the snapshots soon) but when using a WicketFilter you shouldnt have those problems. only the servlet would have that problem.

You could test with the filter on /* as url mapping but also with /app as url mapping (i guess you have to tweak a bit your html files then, but this is just for testing

IF you use the filter and you use a /app url mapping then everything that isn in /images dir will not be touched AT all my wicket. I want to know if you then also have that same problem
Because then it is really out of wicket scope

Even if you use /* als url pattern then also the wicket filter should pass it to the next filter/chain, so it shouldnt touch it also
So please test it if you can in the 3 modes

1> wicket servlet
2> wicket filter /*
3> wicket filter /app","05/Jan/10 10:11;pdiefent;I have tested the wicket filter /* and there are no file handles any more !!! 
Thank you very much - this will help me a lot with my current production issue on Weblogic.

But I think I need the Servlet variant for a short time because IBM WebSphere doesn't support filter in my environment.","05/Jan/10 10:20;jcompagner;tseee. still no filters?? how old is that already... 
Its just plain weird how long some hang on to such old tech

But if you can test the snapshot of 1.4 that is just finished building:

http://www.wicketstuff.org/maven/repository/org/apache/wicket/wicket/1.4-SNAPSHOT/ ","05/Jan/10 11:43;pdiefent;I have tested my example with your snapshot of 1.4 and the servlet configuration and it works fine - no open file handles any more!
Thank you very very much for your passionate support. Now we can start developing more applications with this excellent framework.",,,
Flash/ExternalInterface does not work in IE if movie is fetched via Wicket/Ajax,WICKET-2457,12435184,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,knopp,heikkiu,heikkiu,09/Sep/09 06:37,09/Sep/09 22:43,14/Mar/19 03:09,09/Sep/09 22:42,1.4.1,,,,,,,,,,,1.4.2,,,wicket,,,,,,,,,,,0,,,,,,"If Flash movie CS4/AS3 is added with Wicket/Ajax then AS3/ExternalInterface.call
does not return any value event it calls JavaScript functions, also ExternalInterface.objectID is null.

Suggestion is that wicket-ajax.js:268 (1.4.1) breaks IE+Flash/ExternalInterface:

        // place all newly created elements before the old element
        while(tempParent.childNodes.length > 0) {
                var tempElement = tempParent.childNodes[0];
>>>>>>           tempParent.removeChild(tempElement); <<<<<
                parent.insertBefore(tempElement, element);
                tempElement = null;
        }

This ""removeChild"" breaks Flash/ExternalInterface in IE. If ""removeChild"" is removed then everything works fine.

",IE6/7 FlashCS4/AS3,,,,,,,,,,,,,,,,09/Sep/09 06:44;heikkiu;noname.zip;https://issues.apache.org/jira/secure/attachment/12419022/noname.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203342,,,2009-09-09 06:37:11.0,,,,,,0|i0kdbr:,116976,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxEventBehavior not working on feedback message components,WICKET-2438,12434123,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,iml,iml,27/Aug/09 06:35,07/Sep/09 03:51,14/Mar/19 03:09,02/Sep/09 21:24,1.4.0,1.4.1,,,,,,,,,,1.4.2,1.5-M1,,wicket,,,,,,,,,,,0,,,,,,"If you add an onclick AjaxEventBehavior to a component that is used to display a message in a FeedbackPanel, then when you click the feedback message Wicket throws an exception.  The exception looks like the following:

WicketMessage: org.apache.wicket.WicketRuntimeException: component feedback:feedbackul:messages:0:message not found on page bug.HomePage[id = 0], listener interface = [RequestListenerInterface name=IBehaviorListener, method=public abstract void org.apache.wicket.behavior.IBehaviorListener.onRequest()]

The problem seems to be caused by the change made in revision 796389, which removes all the child elements of the feedback panel when it is detached.

The bug can be reproduced by creating a wicket-1.4.1 quickstart app and modifying HomePage.html to be:

<html xmlns:wicket=""http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd"" >
    <head>  
        <title>Wicket Quickstart Archetype Homepage</title>
    </head>
    <body>
        <form wicket:id=""form""> 
            <input wicket:id=""field"" type=""text"" />
            <input type=""submit"" />
        </form>
        <div wicket:id=""feedback"" />
    </body>
</html>

and HomePage.java to be:

package bug;

import org.apache.wicket.PageParameters;
import org.apache.wicket.markup.html.basic.Label;
import org.apache.wicket.markup.html.WebPage;
import org.apache.wicket.markup.html.form.*;
import org.apache.wicket.model.*;
import org.apache.wicket.*;
import org.apache.wicket.markup.html.panel.*;
import org.apache.wicket.feedback.*;
import org.apache.wicket.ajax.*;

/**
 * Homepage
 */
public class HomePage extends WebPage {
    private Double value;

    public HomePage(final PageParameters parameters) {
        Form form = new Form(""form"", new CompoundPropertyModel(this));
        add(form);
        form.add(new TextField<Double>(""field"", Double.class));
        add(new FeedbackPanel(""feedback"") {
            @Override
            protected Component newMessageDisplayComponent(String id, FeedbackMessage message) {
                Label label;
                label = new Label(id, ""click me"");
                label.add(new AjaxEventBehavior(""onclick"") {
                    @Override               
                    protected void onEvent(AjaxRequestTarget target) {
                        System.out.println(""error message clicked"");
                    }
                });
                return label;
            }
        });
    }

    public void setField(Double field) {
        value = field;
    }

    public Double getField() {
        return value;
    }
}

Launch the app and enter an invalid number (e.g. ""xxx"").  Submit the form and then click the ""click me"" message.",N/A,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-08-31 15:48:13.16,,,no_permission,,,,,,,,,,,,203325,,,Mon Sep 07 03:51:39 UTC 2009,,,,,,0|i0kdcf:,116979,,,,,,,,"31/Aug/09 00:16;iml;Note that it is the committed fix to bug 2384 that causes this problem.

The originally proposed solution submitted with the bug report (http://issues.apache.org/jira/browse/WICKET-2384) seems to not have the side effect of breaking ajax events on feedback message components.  So a possible fix seems to be to revert the change made in revision 796389 and instead apply the patch originally suggested by Tsutomu YANO.","31/Aug/09 15:48;ivaynberg;the proposed solution was not correct, it only fixed the very specific code issue. the solution currently checked in is much more generic.

i think a different way of achieving the same thing may be to clear out the reporter reference directly instead of dumping all components that may hold a reference to it. but will this help your usecase? if you do not have message.reporter then can your usecase still work?","31/Aug/09 23:39;iml;I think that solution will work for my usecase.  I only use the reporter when I am building the feedback message component.  I don't think I need the reporter when I'm handling the ajax event.

In any case if I did need it I could always put my own reference to it in the feedback message, or store the component path as a string in the message and use that to look it up again when I handle the ajax event (I think).","07/Sep/09 03:39;iml;This change fixes my problem.  Thanks.

I noticed that you just deleted the onDetach method.  What about the OutOfMemory problem?  Also wouldn't it be a good idea to add a regression test?","07/Sep/09 03:46;ivaynberg;this problem was fixed in two places, a) resetting reporter to null in requestcycle.cleanupfeedbackmessages(), and b) by removing the actual items.

(a) should be sufficient, (b) was more of a backup in case the user somehow managed to hold on to the reference.",07/Sep/09 03:51;iml;Many thanks.,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sending Ajax datas from Form with MultiPart(true) causing 302 - Moved Temporarily,WICKET-2432,12433821,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,aldaris,aldaris,24/Aug/09 05:22,11/Dec/09 03:47,14/Mar/19 03:09,11/Dec/09 03:47,1.4.1,,,,,,,,,,,1.4.4,,,site,,,,,,,,,,,1,,,,,,"When I set the MultiPart to true, then when I try to send the Form via a Button, I'm getting always an 302 - Moved Temporarily, that's why my code can't process the Forms datas.

For more details, see: http://osdir.com/ml/users-wicket.apache.org/2009-08/msg00836.html

Downgrading from 14.1 to 1.4.0 solves the issue.",Firefox 3.5.2,10800,10800,,0%,10800,10800,,,,,,,,,,24/Aug/09 05:24;aldaris;quickstart.zip;https://issues.apache.org/jira/secure/attachment/12417440/quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2009-09-16 04:43:26.779,,,no_permission,,,,,,,,,,,,203319,,,Fri Dec 11 03:47:15 UTC 2009,,,,,,0|i0kddb:,116983,,,,,,,,"24/Aug/09 05:24;aldaris;The quickstart, which demonstrates the problem.","16/Sep/09 04:43;ivaynberg;tried with latest trunk, could not reproduce. no 302s, button's onsubmit successfully reached.","16/Sep/09 09:47;aldaris;I'm just downloaded and have build the wicket trunk, and deployed the application with it, and the 302 is still there. onSubmit isn't reached.
I'm using GlassFish v2.1 ESB.","17/Sep/09 04:49;ivaynberg;i have now tried this with embedded jetty, standalone jetty, and tomcat 6. in all cases i did not experience the 302 loop. it must be something with your server setup.","17/Sep/09 09:38;aldaris;It looks like, this is a more specific problem...
I've tested the quickstart application with the latest state of trunk.
The results on Linux with Sun JDK 1.6.0_14 installed on it:
GlassFish v2.1 ESB - 302
JBoss AS 4.2.3.GA - 302
Apache Tomcat 6.0.20 - 302

The results on different Linux with Sun JDK 1.6.0_06:
GlassFish v2ur2 - 302

It's just can't be an AS configuration problem..","17/Sep/09 15:06;ivaynberg;sorry, but im not seeing the 302 loop. i am on windows, maybe thats the difference. lets see if someone else from the core team can reproduce and fix it.",23/Sep/09 14:53;knopp;Seems to work for me but I only tested it in jetty. Do you get the loop also when running with jetty or is it just those containers?,"23/Sep/09 15:29;aldaris;I have just build the current trunk, and deployed the quickstart app with:
mvn jetty:run

The problem still exists:
in the log I got nothing after
'Elements from list'
It looks like it's still not receiving the input of the form.

So the test case just to be sure:
open localhost:8080/quickstart
add a few items to the IM list with different values
remove some values (it's not neccessary, just to be sure)
press the Modify button, and see that there isn't anything after 'Elements from list' in the log file

With wireshark you can actually see on loopback the 302 - Moved Temporarily message (with jetty I got 302 - Found, but it still didn't have the correct datas)","19/Oct/09 12:41;t3_chris;Hi!

The same problem occurs on Wicket-1.4.2 with Firefox 3.5.4 and Safari 4.0.3 too.

Best Regards,
chris","21/Oct/09 19:35;aldaris;It looks like, this behaviour pops up in 1.3.7 too. In 1.3.6 everything works just fine.","03/Dec/09 03:11;aldaris;I've just tested the issue with wicket trunk, and it looks like it's solved in it, but 1.4.3 is still no good.","11/Dec/09 03:47;aldaris;The problem is solved in the new 1.4.4 release, something fixed it while fixing these tickets: #2491 #2553 #2595",,,,,,,,,,,,,,,,,,,,,
Some live demo examples don't work,WICKET-2431,12433691,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,xsergey,xsergey,21/Aug/09 14:26,03/Sep/09 08:17,14/Mar/19 03:09,03/Sep/09 08:17,1.4.0,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Steps to reproduce:
1. Go to http://www.wicketstuff.org/wicket13/repeater/
2. Click to one of the following links
    OrderedRepeatingView Example - basic example of a repeater view
    RefreshingView Example - basic view that recreates its items every request
    Contacts Editor - based on the previous example, but with editable values 
 
Result: Internal error occurs.
",http://www.wicketstuff.org/wicket13/repeater/,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-08-21 15:28:30.347,,,no_permission,,,,,,,,,,,,203318,,,Thu Sep 03 08:17:08 UTC 2009,,,,,,0|i0kddj:,116984,,,,,,,,21/Aug/09 15:28;ivaynberg;i think the examples need to be redeployed with 1.3.7,"02/Sep/09 08:16;xsergey;{quote}i think the examples need to be redeployed with 1.3.7{quote}
Are you going to fix the examples for the version 1.4?","03/Sep/09 00:23;ivaynberg;version 1.4 examples are here:
http://www.wicketstuff.org/wicket/","03/Sep/09 08:17;jcompagner;all examples are working again.

http://www.wicketstuff.org/wicket13 has now the latest 1.3 examples

http://www.wicketstuff.org/wicket14 has the latest 1.4 examples

http://www.wicketstuff.org/wicket will be used for 1.5 later on (now also 1.4)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Remove ""Apache Wicket 1.3.6 is the current stable release."" from getting-wicket.html",WICKET-2429,12433590,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,ivaynberg,count.negative,count.negative,20/Aug/09 17:38,20/Aug/09 19:28,14/Mar/19 03:09,20/Aug/09 19:28,1.4.0,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"Please remove ""Apache Wicket 1.3.6 is the current stable release."" from getting-wicket.html",,,,,,,,,,,,,,,,,20/Aug/09 19:21;count.negative;greenshot_2009-08-20_21-20-19.png;https://issues.apache.org/jira/secure/attachment/12417160/greenshot_2009-08-20_21-20-19.png,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2009-08-20 18:40:03.243,,,no_permission,,,,,,,,,,,,203316,,,Thu Aug 20 19:28:08 UTC 2009,,,,,,0|i0kddz:,116986,,,,,,,,"20/Aug/09 18:40;ivaynberg;check your browser cache, my page shows

Latest stable release 	 1.4.0 	 (from the Apache Software Foundation)
Archived release 	1.3.7 	(from the Apache Software Foundation) ","20/Aug/09 19:21;count.negative;ok, checked my browser cache. Even tried with another browser. Look the screenshot.","20/Aug/09 19:28;ivaynberg;yeah, missed that one. thanks.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in ResourceReference,WICKET-2418,12432290,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,schueffi,schueffi,05/Aug/09 15:02,21/Dec/09 12:14,14/Mar/19 03:09,05/Aug/09 17:24,1.3.6,1.3.7,1.4.0,,,,,,,,,1.4.1,,,wicket,,,,,,,,,,,0,,,,,,"Referencing a resource located in a different jar-file (and therefore possibly in a different (parent-)classloader), the ResourceReference fails to add this resource.

The problem is, that the lookup-and-bind-code after correctly recognizing and adding this PackageResource, falls through to the ""normal"" resource-add which leads to a NPE in ConcurrentHashMap.

Fix is trivial, patch is appended.",,300,300,,0%,300,300,,,,,,,,,,05/Aug/09 17:17;schueffi;ResourceReference.java.patch;https://issues.apache.org/jira/secure/attachment/12415630/ResourceReference.java.patch,05/Aug/09 15:03;schueffi;ResourceReference.java.patch;https://issues.apache.org/jira/secure/attachment/12415614/ResourceReference.java.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2009-08-05 15:14:35.986,,,no_permission,,,,,,,,,,,,203305,,,Mon Dec 21 12:14:44 UTC 2009,,,,,,0|i0kdfj:,116993,,,,,,,,"05/Aug/09 15:03;schueffi;This fix simply adds a return-statement to prevent the lookup-code to fall through to the ""normal"" add-behaviour when adding a PackageResource.",05/Aug/09 15:14;ivaynberg;not a blocker. does it crash the servlet container of every app out there? maybe a blocker to *you* but not to the *userbase* as a whole.,"05/Aug/09 15:17;ivaynberg;if we do not let it fallthrough then it will not be registered under the locale and style - which may lead to some undesired sideeffects.

this is a more general problem then just the resource laoding. eg if you add a component to the page out of another jar it will not be able to be deserialized because of the same classloader limitation.

i think you will be much better served by setting up your own iclassresolver that knows about the classloader that loads the other jar you are using.","05/Aug/09 17:00;schueffi;The stacktrace (including the NPE in question) is as:

Caused by: java.lang.NullPointerException
        at java.util.concurrent.ConcurrentHashMap.putIfAbsent(ConcurrentHashMap.java:895)
        at org.apache.wicket.SharedResources.add(SharedResources.java:162)
        at org.apache.wicket.ResourceReference.bind(ResourceReference.java:162)
        at org.apache.wicket.ResourceReference.getSharedResourceKey(ResourceReference.java:225)

I read this as:
after adding the resource in line 157 of ResourceReference,  the code tries to add the ""null""-resource in line 162.
(""resource"" will not be set in case of PackageResource.)

 You either can return (my patch), or to set ""resource"" to the packageResource.
line 158:
resource = packageResource; 

As the packageresource is added to sharedResource anyway, i do not see the benefit of adding it twice beside the missing / additional parameters locale, style, etc
","05/Aug/09 17:17;schueffi;Just verified in my local test environment... 
Using this patch it also works by adding the packageResource twice (one time without style, name, etc, and one time with) by avoiding the NPE.
",21/Dec/09 12:14;schueffi;Committed code works as expected.,,,,,,,,,,,,,,,,,,,,,,,,,,,
text fields do not honor isrequired(),WICKET-2397,12431371,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,joern.zaefferer,joern.zaefferer,24/Jul/09 14:21,01/Mar/10 08:10,14/Mar/19 03:09,10/Aug/09 14:48,1.3.7,1.4-M1,1.4-M2,1.4-M3,1.4-RC1,1.4-RC2,1.4-RC3,1.4-RC4,1.4-RC5,1.4-RC6,1.4-RC7,1.4.1,,,wicket,,,,,,,,,,,0,,,,,,"AbstractTextComponent overrides isInputNullable to return false, instead of the default true, defined in FormComponent. FormComponent#checkRequired uses isInputNullable to check if an input was disabled. That makes it possible to submit a form with a required field without that field, completely skipping the validation (forms onSubmit is called). We consider this a wide open security hole, as basically any form with a required text field, relying on the required-validation, is affected.

The hole can easily be exploited by not removing certain fields from a form submit, eg. by removing them from the DOM via Firebug (then doing a regular submit), or forging the complete request with an appropriate tool.

From what is commented on isInputNullable, it seems like the check should actually be replaced with an actual check of enabled/disabled methods/properties. A required input is only optional, when it is actually not enabled (on the serverside), not just because its key/value pair is missing in the request.

I''ll attach a test application.",,,,,,,,,,,,,,,,,05/Aug/09 09:23;joern.zaefferer;WICKET-2397-isnullable-enabled.patch;https://issues.apache.org/jira/secure/attachment/12415588/WICKET-2397-isnullable-enabled.patch,24/Jul/09 14:25;joern.zaefferer;nullable-test.zip;https://issues.apache.org/jira/secure/attachment/12414449/nullable-test.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2009-07-24 15:13:50.637,,,no_permission,,,,,,,,,,,,203285,,,Mon Mar 01 08:10:23 UTC 2010,,,,,,0|i0kdh3:,117000,,,,,,,,"24/Jul/09 14:25;joern.zaefferer;A simple web application (exported Eclipse project; Maven config intact) with a Jetty/Start/main and a single page for reproducing the issue.

The page has a single required text field that gets disabled by JavaScript, which causes onSubmit to be executed with a null model value.","24/Jul/09 15:13;jcompagner;we could do this

if (input == null && !isInputNullable() && !isEnabled())

i do hope that then everybody do use enabled on the serverside and not something pure in markup..","24/Jul/09 15:51;ivaynberg;that was a joke right? a *MAJOR* *SECURITY* hole?

how is this a security hole? how can i hack your server using this? the worst this can do is throw an npe.

","10/Aug/09 14:30;joern.zaefferer;Is there anything I can help with to get this fixed? I've already attached a patch for FormComponent, based on Johan's suggestion.","26/Feb/10 14:47;joseph_p;Hi

After stumbling on the same bug and finally discovering it as well as this issue, I didn't see the fix suggested by Johan and coded by Jörn in Wicket 1.4.3 and in the subversion trunk.

Is it normal ?

thanks in advance

","26/Feb/10 16:47;ivaynberg;joseph, see the subversion commits tab, namely

http://svn.apache.org/viewvc?view=revision&revision=802814

","01/Mar/10 08:10;joseph_p;thanks a lot Igor, I'll think of looking at the commit directly next time.

I've tested with 1.4.3, it works fine.

thanks again !",,,,,,,,,,,,,,,,,,,,,,,,,,
Stateless problems,WICKET-2382,12430956,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,knopp,knopp,20/Jul/09 20:32,23/Jul/09 16:32,14/Mar/19 03:09,20/Jul/09 20:35,1.4.0,,,,,,,,,,,1.4.0,,,,,,,,,,,,,,0,,,,,,"onBeforeRender is invoked twice when BookmarkableListenerInterface is used and target component is not added in constructor. 

FeedbackPanel loads the messages too soon.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203273,,,2009-07-20 20:32:23.0,,,,,,0|i0kdj3:,117009,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
jre 1.5 method used in wicket-extensions,WICKET-2371,12430519,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,ivaynberg,pete,pete,15/Jul/09 16:54,15/Jul/09 19:17,14/Mar/19 03:09,15/Jul/09 17:55,,,,,,,,,,,,1.3.7,,,wicket-extensions,,,,,,,,,,,0,,,,,,patch is attached ... the method exists @since 1.5 but is used in 1.3.x wicket-extension which is considered to run on jre 1.4,,,,,,,,,,,,,,,,,15/Jul/09 16:55;pete;WICKET-2371-fix.patch;https://issues.apache.org/jira/secure/attachment/12413575/WICKET-2371-fix.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203263,,,2009-07-15 16:54:42.0,,,,,,0|i0kdjz:,117013,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor: org.apache.wicket.util.string.Strings#fromEscapedUnicode(String escapedUnicodeString),WICKET-2366,12430326,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,funkattack,funkattack,14/Jul/09 07:50,14/Jul/09 11:04,14/Mar/19 03:09,14/Jul/09 11:04,1.4.0,1.4-RC5,1.4-RC6,1.4-RC7,,,,,,,,1.4.0,,,,,,,,,,,,,,0,,,,,,"trying to understand the code I failed to see in which case the first two if statments hold true.
this smells so bad, I didn't check beyond.

	public static String fromEscapedUnicode(String escapedUnicodeString)
	{
		int off = 0;
		char[] in = escapedUnicodeString.toCharArray();
		int len = in.length;
		char[] convtBuf = new char[len];

		if (convtBuf.length < len)
		{
			int newLen = len * 2;
			if (newLen < 0)
			{
				newLen = Integer.MAX_VALUE;
			}
			convtBuf = new char[newLen];
		}
[...]",trunk,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-07-14 11:01:05.072,,,no_permission,,,,,,,,,,,,203258,,,Tue Jul 14 11:01:05 UTC 2009,,,,,,0|i0kdkn:,117016,,,,,,,,"14/Jul/09 11:01;jcompagner;thats very weird code
i am glad it will never be true for both ifs...
because then an out of mem will happen for sure on almost all the heaps..
a char array of int maxvalue is about 4GB of memory if i calculate correctly.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PropertyModel does not support index only property (""[0]"")",WICKET-2354,12429454,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,hielkehoeve,hielkehoeve,03/Jul/09 09:49,06/Jul/09 15:26,14/Mar/19 03:09,06/Jul/09 15:26,1.3.6,,,,,,,,,,,1.3.7,1.4-RC7,,wicket,,,,,,,,,,,0,,,,,,"When using a PropertyModel with a list as target and an index (""[0]"") as property the PropertyModel cannot retreive the object from the list. When getObject() is called a IndexOutOfBoundsException is thrown.

Example:
List addresses = new List();
new PropertyModel(addresses, ""[0]"");
model.getObject();

Exception:
java.lang.StringIndexOutOfBoundsException: String index out of range: 0
	at java.lang.String.charAt(String.java:687)
	at org.apache.wicket.util.lang.PropertyResolver.findGetter(PropertyResolver.java:509)
	at org.apache.wicket.util.lang.PropertyResolver.getGetAndSetter(PropertyResolver.java:338)
	at org.apache.wicket.util.lang.PropertyResolver.getObjectAndGetSetter(PropertyResolver.java:224)
	at org.apache.wicket.util.lang.PropertyResolver.getValue(PropertyResolver.java:91)
	at org.apache.wicket.model.AbstractPropertyModel.getObject(AbstractPropertyModel.java:113)

I have attached a QuickStart (with 2 test; 1 with the current PropertyResolver and 1 with the patched PropertyResolver) and a patch file.","Windows XP, Eclipse 1.3.6, Java 1.6.0.13, Wicket 1.3.6",600,600,,0%,600,600,,,,,,,,,,03/Jul/09 09:58;hielkehoeve;wicket-bug2354.patch;https://issues.apache.org/jira/secure/attachment/12412461/wicket-bug2354.patch,03/Jul/09 09:58;hielkehoeve;wicket-bug2354.zip;https://issues.apache.org/jira/secure/attachment/12412462/wicket-bug2354.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2009-07-03 11:49:58.441,,,no_permission,,,,,,,,,,,,203246,,,Mon Jul 06 15:26:51 UTC 2009,,,,,,0|i0kdlb:,117019,,,,,,,,03/Jul/09 11:49;jcompagner;applied ,03/Jul/09 15:57;ivaynberg;needs to be ported to trunk,06/Jul/09 15:26;jcompagner;and merged!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IndexOutOfBoundsException when PropertyResolver is using an invalid list index,WICKET-2337,12428570,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,tapter,tapter,22/Jun/09 14:09,06/Jul/09 15:27,14/Mar/19 03:09,06/Jul/09 15:27,1.3.6,,,,,,,,,,,1.3.7,1.4-RC7,,wicket,,,,,,,,,,,0,,,,,,"When using  PropertyResolver.getValue(""myList[1]"", myBean),  the PropertyResolver$ListGetSet.getValue() (line 762) unconditionally does:
return ((List)object).get(index);
which throws an   java.lang.IndexOutOfBoundsException: Index: 1, Size: 1  if the backing list contains only one element (at index 0).
Shouldn't the implementation rather return null like with every other property not found? Like when using ""bla.bli.blo"" as a lookup string and there is no bla field and no getBla() method?

So this method should rather be:

org.apache.wicket.util.lang.PropertyResolver$ListGetSet.getValue():

		/**
		 * @see org.apache.wicket.util.lang.PropertyResolver.IGetAndSet#getValue(java.lang.Object)
		 */
		public Object getValue(Object object)
		{
			List list = (List) object;
			if (index >= list.size()) {
				return null;
			}
			return list.get(index);
		}",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-07-03 12:01:45.57,,,no_permission,,,,,,,,,,,,203230,,,Mon Jul 06 15:27:12 UTC 2009,,,,,,0|i0kdn3:,117027,,,,,,,,"03/Jul/09 12:01;jcompagner;fixed.
(also for arrays so not only the list one)",03/Jul/09 15:57;ivaynberg;needs to be ported to trunk,06/Jul/09 15:27;jcompagner;and merged!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketTester does not accurately simulate scenario where entire page is added to AjaxRequestTarget,WICKET-2328,12428059,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,mbrictson,mbrictson,16/Jun/09 23:34,21/Jun/09 21:21,14/Mar/19 03:09,21/Jun/09 21:21,1.4-RC4,,,,,,,,,,,1.4-RC5,,,wicket,,,,,,,,,,,0,,,,,,"If the entire page is added to an AjaxRequestTarget, Wicket treats this as a special case: the normal ajax flow is aborted and the browser is asked to refetch the page in a normal, non-ajax request.

For example, if this code is used:

public void onClick(AjaxRequestTarget tgt)
{
    tgt.addComponent(getPage());
}

This causes the browser to reload the page (you can see the location bar in the browser changing).

The problem is that WicketTester does not simulate this scenario correctly. If you use WicketTester to test the onClick() listener in the example above, the page is not re-rendered. You can verify this by instrumenting the onBeforeRender method for the page: it is never called.

So to summarize:

When the framework is run normally, AjaxRequestTarget.addComponent(Page) causes Wicket to start a completely new non-ajax request-response. However when the framework is run using WicketTester, a new request-response is not executed.",,,,,,,,,,,,,,,,,16/Jun/09 23:35;mbrictson;myproject.zip;https://issues.apache.org/jira/secure/attachment/12410867/myproject.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2009-06-21 09:12:32.173,,,no_permission,,,,,,,,,,,,203221,,,Sun Jun 21 21:21:10 UTC 2009,,,,,,0|i0kdof:,117033,,,,,,,,"16/Jun/09 23:35;mbrictson;Quickstart project that demonstrates the bug. When run in Jetty, the onBeforeRender method of the page is called as expected after the ajax link is clicked. In the WicketTester test, the onBeforeRender method is not called.",21/Jun/09 09:12;jdonnerstag;It is not failing on my laptop (1.4 trunk),21/Jun/09 21:21;mbrictson;You are correct: this issue is no longer present in trunk. It seems to have been fixed in RC5. Marking as FIXED.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ClassCastException in SqlDateConverter,WICKET-2309,12427182,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,rudolfson,rudolfson,05/Jun/09 08:22,05/Jun/09 10:47,14/Mar/19 03:09,05/Jun/09 10:47,1.4-RC4,,,,,,,,,,,1.4-RC5,,,wicket,,,,,,,,,,,0,,,,,,"When converting a date string to a java.sql.Date you'll always get a ClassCastException like this one:

java.lang.ClassCastException: java.util.Date cannot be cast to java.sql.Date
     at org.apache.wicket.util.convert.converters.SqlDateConverter.convertToObject(SqlDateConverter.java:43)

Reason is DateFormat.parse() returns a java.util.Date, which is cast to java.sql.Date. One solution would be

return new Date(((java.util.Date)parse(getDateFormat(locale), value, locale)).getTime())

See https://issues.apache.org/jira/browse/WICKET-735",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203202,,,2009-06-05 08:22:36.0,,,,,,0|i0kdqn:,117043,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Append lastmodified to Resources shouldnt append when the resource is a directory (ends with /),WICKET-2308,12427113,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jcompagner,jcompagner,04/Jun/09 12:30,04/Jun/09 12:34,14/Mar/19 03:09,04/Jun/09 12:34,1.3.6,1.4-M3,1.4-RC4,,,,,,,,,1.3.7,1.4-RC5,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203201,,,2009-06-04 12:30:49.0,,,,,,0|i0kdqv:,117044,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[devutils] LiveSessionsPage is broken,WICKET-2303,12426987,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,maxb,maxb,03/Jun/09 00:13,05/Jun/09 12:09,14/Mar/19 03:09,05/Jun/09 12:09,1.4-RC4,,,,,,,,,,,1.4-RC5,,,,,,,,,,,,,,0,,,,,,"Go to org.apache.wicket.devutils.inspector.LiveSessionsPage. Click ""Enable Request Recording"". Exception is shown.

The problem is that DevUtilsPage attempts to do the simple building of the component hierarchy in onBeforeRender, not in the constructor, so on the second render it tries to add new copies of components with clashing ids.

The fix is just to move the component hierarchy creation to page construction time.",,,,,,,,,,,,,,,,,03/Jun/09 00:15;maxb;WICKET-2303.patch;https://issues.apache.org/jira/secure/attachment/12409715/WICKET-2303.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2009-06-05 12:09:42.286,,,no_permission,,,,,,,,,,,,203196,,,Fri Jun 05 12:09:42 UTC 2009,,,,,,0|i0kdrj:,117047,,,,,,,,03/Jun/09 00:15;maxb;Fix.,05/Jun/09 12:09;jcompagner;created a common init method that is called by all the constructors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException NPE in DiskPageStore after Session Timeout,WICKET-2268,12425031,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,knopp,bht@actrix.gen.nz,bht@actrix.gen.nz,10/May/09 04:21,10/Jul/09 17:29,14/Mar/19 03:09,10/Jul/09 15:14,1.4-RC2,,,,,,,,,,,1.3.7,1.4-RC6,,wicket,,,,,,,,,,,5,,,,,,"A NullPointerException is thrown on an attempt to sumit a login form after session timeout.
Wicket version 1.4 RC2

java.lang.NullPointerException
        at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java:768)
        at org.apache.wicket.protocol.http.pagestore.DiskPageStore.getSessionEntry(DiskPageStore.java:661)
        at org.apache.wicket.protocol.http.pagestore.DiskPageStore.containsPage(DiskPageStore.java:1255)
        at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.containsPage(SecondLevelCacheSessionStore.java:268)
        at org.apache.wicket.Session.getPage(Session.java:660)
        at org.apache.wicket.request.target.coding.HybridUrlCodingStrategy.decode(HybridUrlCodingStrategy.java:211)
        at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.targetForRequest(WebRequestCodingStrategy.java:490)
        at org.apache.wicket.protocol.http.WebRequestCycleProcessor.resolve(WebRequestCycleProcessor.java:184)
        at g1.base.MemberApplication$2.resolve(MemberApplication.java:327)
        at org.apache.wicket.RequestCycle.step(RequestCycle.java:1246)
        at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1366)
        at org.apache.wicket.RequestCycle.request(RequestCycle.java:498)
        at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:444)
        at org.apache.wicket.protocol.http.WicketServlet.doPost(WicketServlet.java:159)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)

Please refer to the attached testcase.

","JDK 1.6, Netbeans 6.5 with GlassFish",,,,,,,,,,,,,,,,10/May/09 04:23;bht@actrix.gen.nz;ExpiryCrash.zip;https://issues.apache.org/jira/secure/attachment/12407715/ExpiryCrash.zip,10/Jun/09 07:29;tomoharu fujita;session-expire-patch-1.4-rc4.txt;https://issues.apache.org/jira/secure/attachment/12410284/session-expire-patch-1.4-rc4.txt,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2009-05-27 13:03:53.395,,,no_permission,,,,,,,,,,,,203165,,,Fri Jul 10 17:29:22 UTC 2009,,,,,,0|i0kdv3:,117063,,,,,,,,10/May/09 04:23;bht@actrix.gen.nz;Source files to reproduce the problem,27/May/09 13:03;tomoharu fujita;org.apache.wicket.protocol.http.pagestore.DiskPageStore.containsPage should just return false if sessionId is null?,"10/Jun/09 07:29;tomoharu fujita;This patch allows Session#getPage(final int pageId, final int versionNumber) return null when the session is temporary.",10/Jun/09 20:39;miojo;Wouldn't be plausible to first check why isn't the timed out session been removed from the cache?,10/Jun/09 21:41;knopp;What makes you think it's not?,"05/Jul/09 07:52;bht@actrix.gen.nz;I have tested this with 1.4 RC6. It appears the problem is still the same. I would be really happy if after the next RC, there will be a couple more RCs because I still get other crashes in the area of session expiriy, and others. So it would be good if I could download a complete build with this fix included soon.","06/Jul/09 18:05;knopp;Just tried the testcase again works as expected. After clicking sign-in button i get session expiration, no exception.","06/Jul/09 21:16;bht@actrix.gen.nz;Matej,
Thanks very much for trying this, and my apologies for saying that the problem is still the same. I tried again and found that my app server (GlassFish) failed to clean the project - the old wicket rc5 libraries co-existed alongside rc6.

But I still get an exception (please see below).

The test case may seem a bit odd, but it is simple, 100% derived from a real world scenario where the welcome page contains the login form, and if the user waits on that page too long (which is not so unlikely), then he gets that exception.

The user will not understand what expired here - it is the welcome page and he has not even started. He has not  logged on, so from the user's perspective there is no session that could have expired.

So the best I could do (I think) is to use setPageExpiredErrorPage() to avoid the exception? It is still disruptive just a different kind of disruption.

What is the wicket way to do in such a case where the login page itself expires?

Many thanks.

Bernard

WicketMessage: org.apache.wicket.protocol.http.PageExpiredException: Request cannot be processed. The target page does not exist anymore.

Root cause:

org.apache.wicket.protocol.http.PageExpiredException: Request cannot be processed. The target page does not exist anymore.
at org.apache.wicket.request.target.coding.HybridUrlCodingStrategy.handleExpiredPage(HybridUrlCodingStrategy.java:307)
at org.apache.wicket.request.target.coding.HybridUrlCodingStrategy.decode(HybridUrlCodingStrategy.java:275)
at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.targetForRequest(WebRequestCodingStrategy.java:507)
at org.apache.wicket.protocol.http.WebRequestCycleProcessor.resolve(WebRequestCycleProcessor.java:191)
at org.apache.wicket.RequestCycle.step(RequestCycle.java:1301)
at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1419)
at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:456)
at org.apache.wicket.protocol.http.WicketServlet.doPost(WicketServlet.java:160)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)","06/Jul/09 22:08;ivaynberg;in wicket page-expired error represents the *technical* reality of the fact that the user tried to access a page that belongs to a session that has expired. what the *user* perceives as a session expiration may or may not be the same.

there are many ways to deal with this to make it more user friendly.

the best way is to use a StatelessForm for the credentials - that way the form will never expire.

other ways include setting the page expired error page back to homepage, or to a subclass of the homepage that displays an error explaining to the user what happened. or even setting it back to the login page with an error message - once again explaining that the user has waiting too long before performing an action and that they have to start over.","09/Jul/09 05:58;bht@actrix.gen.nz;Hi,

I feel quite bad about re-opening this where it is possibly my misunderstanding once again.
Of course I will try the best suggestion - a stateless form.
But I am getting an unexpected error when as suggested I set the expired page back to the login page (another one of my use cases).
In this case all I did is to add in TestApplication.init() a line
getApplicationSettings().setPageExpiredErrorPage(SignInPage.class);
On expiry I get an exception
org.apache.wicket.protocol.http.PageExpiredException: Request cannot be processed. The target page does not exist anymore.
org.apache.wicket.protocol.http.request.InvalidUrlException: org.apache.wicket.protocol.http.PageExpiredException: Request cannot be processed. The target page does not exist anymore.
...
caused by org.apache.wicket.protocol.http.PageExpiredException: Request cannot be processed. The target page does not exist anymore.
and not SignInPage as expected. This looks like a bug to me.

With my limited understanding I cannot distinguish between session expiry and page expiry.
Are these different scenarios and do I have do code different handling of these?

Many thanks

Bernard","09/Jul/09 15:33;ivaynberg;try with latest snapshot from trunk, there was a problem with rc5/6 which caused the pageexpiredexception to stop working.","10/Jul/09 13:10;david_p;I have experienced the same exception as in the original bug  description with wicket 1.3.6 on tomcat 6.0.19.
I'll post a stacktrace if necessary.

david",10/Jul/09 17:29;knopp;committed the fix to 1.3 as well,,,,,,,,,,,,,,,,,,,,
LoadableDeatachableModel onDetach() invoked after nulling the model,WICKET-2251,12424485,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,ivaynberg,maurociancio,maurociancio,03/May/09 15:42,04/May/09 02:44,14/Mar/19 03:09,03/May/09 23:42,1.4-RC2,,,,,,,,,,,1.4-RC4,,,wicket,,,,,,,,,,,0,,,,,,"In LoadableDeatachableModel code for detach():

	@Override
	public void detach()
	{
		if (attached)
		{
			attached = false;
			transientModelObject = null;

			onDetach();
		}
	}

onDetach() is called after nulling the object. So, its impossible to ""cleanup"" 
the model object.

If the onDetach() is invoked before than nulling, it's done.

Greetings!",Any enviroment.,1800,1800,,0%,1800,1800,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203150,,,Mon May 04 02:44:33 UTC 2009,,,,,,0|i0kdwv:,117071,,,,,,,,"04/May/09 02:44;maurociancio;The issue has been solved.
Thanks Igor",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DatePicker pick up wrong word when we use LOCALE_WEEKDAYS with 1char in chinese.,WICKET-2218,12422342,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,neversay,neversay,08/Apr/09 10:00,13/Apr/09 01:58,14/Mar/19 03:09,09/Apr/09 07:19,,,,,,,,,,,,1.4-RC3,,,wicket-datetime,,,,,,,,,,,0,,,,,,"When we use DatePicker in Chinese (TRADITIONAL_CHINESE or SIMPLIFIED_CHINESE), the method substring(String[] array, int len) cuts wrong word in WEEKDAYS_SHORT and WEEKDAYS_1CHAR. 

It should be THIRD word in locale weekly message. So I write a subclass of DatePicker and fix it. 

I think it is a major bug for Chinese though you guys had fixed it by ad-hoc re-assign a character array in simplified Chinese, but I think this should be correct solution listing below:
protected void localize(Map widgetProperties){
         ...
         if (Locale.SIMPLIFIED_CHINESE.equals(getLocale()) || Locale.TRADITIONAL_CHINESE.equals(getLocale()))
    		widgetProperties.put(""WEEKDAYS_SHORT"", filterEmpty(substring(dfSymbols
				.getShortWeekdays(), 2,1)));
        ...
}
/**
* An alternative solution for substring. It is equal to map(list, substring(start, length))
*/
protected final String[] substring(String[] array, int start,int len){
    	if (array != null)
		{
			String[] copy = new String[array.length];
			for (int i = 0; i < array.length; i++)
			{
				String el = array[i];
				if (el != null)
				{
					if (el.length() > start)
					{
						copy[i] = el.substring(start, start+len);
					}
					else
					{
						copy[i] = el;
					}
				}
			}
			return copy;
		}
		return null;
    }",any,1800,1800,,0%,1800,1800,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-04-09 07:19:50.844,,,no_permission,,,,,,,,,,,,203123,,,Thu Apr 09 07:19:50 UTC 2009,,,,,,0|i0kdzr:,117084,,,,,,,,09/Apr/09 07:19;jdonnerstag;Please have a look. It should be ok now.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WebClientInfo does not set browerMajorVersion for IE8,WICKET-2215,12422233,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jdonnerstag,matjohns,matjohns,07/Apr/09 12:29,29/Apr/09 08:24,14/Mar/19 03:09,29/Apr/09 08:24,1.3.5,1.4-RC2,,,,,,,,,,1.3.7,1.4-RC3,,wicket,,,,,,,,,,,0,,,,,,Within org.apache.wicket.protocol.http.request.WebClientInfo the lookup of the browserMajorVersion is performed by a number specific tests (for 'msie 6.' and 'msie 7.'). All other IE browsers are set to the default value -1. This includes IE8.,Client: Windows XP / Internet Explorer 8,,,,,,,,,,,,,,,,07/Apr/09 12:41;matjohns;basic-ie8.patch;https://issues.apache.org/jira/secure/attachment/12404831/basic-ie8.patch,07/Apr/09 12:41;matjohns;regex-ie8.patch;https://issues.apache.org/jira/secure/attachment/12404832/regex-ie8.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2009-04-07 12:53:09.55,,,no_permission,,,,,,,,,,,,203120,,,Wed Apr 29 08:24:58 UTC 2009,,,,,,0|i0kdzz:,117085,,,,,,,,07/Apr/09 12:30;matjohns;Basic fix; adding additional check for 'msie 8.',"07/Apr/09 12:33;matjohns;More advanced fix; uses regex to pull out the browserMajorVersion.
Downside is having to fire up the regex library for processing, which maybe overkill.",07/Apr/09 12:41;matjohns;SVN diff based patches (rather than diff -ur),07/Apr/09 12:53;jdonnerstag;thanks. regex applied,"28/Apr/09 10:57;matjohns;Can this fix be to backported to the 1.3.x branch, otherwise 1.3.6 will be similarly be affected. It should (as does) apply cleanly.",28/Apr/09 11:01;matjohns;Backport pre-1.3.6,"28/Apr/09 12:46;jcompagner;what do you mean with pre 1.3.6?

So 1.2?

this will not happen. 1.3.x is the latest supported release.","28/Apr/09 13:21;matjohns;Apologies, ""Backport pre-1.3.6"" was a very hastily written re-open comment I saw the voting for 1.3.6 is running.

> So 1.2? 

No; as per the bug; this affects 1.3.5 and 1.4-rc2; a fix (a modified version of the regex patch I supplied) has been applied to trunk, however it has NOT been applied to the 1.3.x branch, hence 1.3.6 currently WILL be affected by this bug.

I've checked the 1.3.6 staging release tag the the bug is still present.

http://svn.apache.org/viewcvs?view=rev&rev=762753
 ^ the fix applied by Juergen to trunk","28/Apr/09 13:26;jcompagner;yes it isnt backported i just did that

But i dont know if 1.3.6 will get a rebuild because of this one,dont think so","29/Apr/09 08:24;jcompagner;backported, but will only make it in 1.3.7",,,,,,,,,,,,,,,,,,,,,,,
WebApplication is not thread-safe,WICKET-2191,12421539,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,a.a.akimov,a.a.akimov,30/Mar/09 10:00,13/Nov/09 16:49,14/Mar/19 03:09,30/Mar/09 10:15,1.3.5,1.4-RC2,,,,,,,,,,1.3.6,1.4-RC3,,wicket,,,,,,,,,,,0,,,,,,"Instance of class org.apache.wicket.protocol.http.WebApplication is not thread safe being shared among several sessions. Concurrent access to it leads to errors because of the following:

1. bufferedResponses field is initialized with a simple HashMap which is not thread safe and can be corrupted when different threads call addBufferedResponse, popBufferedResponse or sessionDestroyed methods concurrently. Here is the stack trace:

[27.03.09 20:55:26:669 MSK] 0000009c RequestCycle  E org.apache.wicket.RequestCycle logRuntimeException <Null Message>
                                 java.util.ConcurrentModificationException
	at java.util.HashMap$AbstractMapIterator.checkConcurrentMod(Unknown Source)
	at java.util.HashMap$AbstractMapIterator.makeNext(Unknown Source)
	at java.util.HashMap$KeyIterator.next(Unknown Source)
	at java.util.HashMap.analyzeMap(Unknown Source)
	at java.util.HashMap.rehash(Unknown Source)
	at java.util.HashMap.rehash(Unknown Source)
	at java.util.HashMap.putImpl(Unknown Source)
	at java.util.HashMap.put(Unknown Source)
	at org.apache.wicket.protocol.http.WebApplication.addBufferedResponse(WebApplication.java:639)
	at org.apache.wicket.protocol.http.WebRequestCycle.redirectTo(WebRequestCycle.java:201)
	at org.apache.wicket.request.target.component.PageRequestTarget.respond(PageRequestTarget.java:58)
	at org.apache.wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:104)
	at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1181)
	at org.apache.wicket.RequestCycle.step(RequestCycle.java:1252)
	at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1353)
	at org.apache.wicket.RequestCycle.request(RequestCycle.java:493)
	at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:355)
	at org.apache.wicket.protocol.http.WicketServlet.doPost(WicketServlet.java:145)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
	at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1443)
	at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1384)
	at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)

2. Class org.apache.wicket.util.collections.MostRecentlyUsedMap is not thread-safe and can be courrupted when different threads call addBufferedResponse, popBufferedResponse concurrently.","Microsoft Windows Server 2003 SP2, IBM WebSphere 7.0, Wicket 1.3.5",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-03-30 10:15:01.099,,,no_permission,,,,,,,,,,,,203099,,,Fri Nov 13 16:49:54 UTC 2009,,,,,,0|i0ke2n:,117097,,,,,,,,"30/Mar/09 10:15;jcompagner;hmm weird that nobody has seen that stack before..
Even in our own stress test and so on.
I made it a global map Concurrent  and the session specific map just Synchronized (that will almost never be hit by more then 2 threads anyway)
","31/Mar/09 05:33;a.a.akimov;Many thanks for quick response. Let's consider your fix:

Map<String, BufferedHttpServletResponse> responsesPerSession = bufferedResponses.get(sessionId);
if (responsesPerSession == null)
{
    responsesPerSession = Collections.synchronizedMap(new MostRecentlyUsedMap<String, BufferedHttpServletResponse>(4));
    bufferedResponses.put(sessionId, responsesPerSession);
}
responsesPerSession.put(bufferId, renderedResponse);

IMHO this code is not thread safe, because two concurrent threads which belong to the same session can create two instances of responsesPerSession, but only one instance can be put into bufferedResponses, so when the threads reach the last line it is unknown which of them put it's renderedResponse into orphan responsesPerSession. I sugest not to use synchronized collections but wrap dangerous method bodies with synchronized block:

synchronized(bufferedResponses)
{
  ...
}
","31/Mar/09 08:35;jcompagner;that would be cost performance, also the concurrent hashmap is then completely killed..
Because then we really have a block that is hit by multiply threads that 99.99% dont have anything to do with each other in a sync block.

i will make it this:

                       Object removed = bufferedResponses.put(sessionId, responsesPerSession);
			if (removed != null)
			{
				responsesPerSession.putAll((Map)removed);
			}

then if at the very unlikely case, you have to have 2 browser tabs/windows doing a full page request at exact the same time for a new session
then you get this. then i copy the previous map into the new one.



","31/Mar/09 08:52;jcompagner;in wicket 1.4 i will use putIfAbsent of the concurrent map
that will fix it completely for 1.4+

In 1.3 there is still a case that a buffered response gets lost, for such unlikely event a page a full render will be done again.",13/Nov/09 16:18;oglueck;Interestingly WebApplication and Application both still contain instance variables that are accessed without any synchronization. Please note that there is no visibility guarantees for any other threads. Pretty ugly.,"13/Nov/09 16:27;ivaynberg;the other fields, afair, are initialized during application#init and are not written to. reading a field is threadsafe without any locking isnt it?","13/Nov/09 16:41;jcompagner;no that could still go wrong because the write to that field in the init() doesnt have to be seen by read thread on other cores.

but those are semi final's so use the volatile keyword and that is fixed.","13/Nov/09 16:43;ivaynberg;init happens in filter startup, no other thread should be able to even get a reference to the application object yet....","13/Nov/09 16:49;jcompagner;that doenst really matter,

if they are not volitile or synchronized then the cpu doesnt even have to write out the references to memory for quite some time
So after the init call another thread on another core comes in and still doesnt see the assignment
",,,,,,,,,,,,,,,,,,,,,,,,
"JavascriptResourceReference / CompressedResourceReference is ""broken""",WICKET-2179,12417260,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,dylans@xs4all.nl,dylans@xs4all.nl,19/Mar/09 09:36,19/Mar/09 19:16,14/Mar/19 03:09,19/Mar/09 19:16,1.4-RC2,,,,,,,,,,,1.4-RC3,,,wicket,,,,,,,,,,,0,,,,,,"JavascriptResourceReference will never use JavascriptPackageResource even though this seems to be the intent.

when JavascriptResourceReference.newResource() gets invoked, it makes a static call to PackageResource.get()

PackageResource.get() makes a call to newPackageResource() but since the call to get was made statically, the newPackageResource() implementation that actually gets called is the one in PackageResource not the one in JavascriptPackageResource.

this means that javascript is never gzipped / stripped at the moment.

I worked around the problem by subclassing JavascriptPackageResource and avoiding the static call to make sure the newPackageResource() method in JavascriptPackageResource gets called, but the situation is not ideal.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203087,,,Thu Mar 19 19:16:52 UTC 2009,,,,,,0|i0ke4f:,117105,,,,,,,,"19/Mar/09 10:04;dylans@xs4all.nl;- changed description, CompressedResourceReference has the same issue","19/Mar/09 19:16;dylans@xs4all.nl;my bad, seems this issue is already fixed in r742657",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Getting live sessions from RequestLogger results in NPE,WICKET-2142,12416005,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,sverre_boschman,sverre_boschman,03/Mar/09 13:55,03/Mar/09 22:53,14/Mar/19 03:09,03/Mar/09 22:53,1.3.5,,,,,,,,,,,1.3.6,1.4-RC3,,wicket,,,,,,,,,,,0,,,,,,"Getting the live sessions from the requestlogger results in a nullpointer exception.

Caused by: java.lang.NullPointerException
        at org.apache.wicket.protocol.http.RequestLogger$SessionData.compareTo(RequestLogger.java:596)
        at java.util.Arrays.mergeSort(Arrays.java:1144)
        at java.util.Arrays.mergeSort(Arrays.java:1156)
        at java.util.Arrays.mergeSort(Arrays.java:1156)
        at java.util.Arrays.mergeSort(Arrays.java:1156)
        at java.util.Arrays.mergeSort(Arrays.java:1156)
        at java.util.Arrays.mergeSort(Arrays.java:1156)
        at java.util.Arrays.sort(Arrays.java:1079)
        at org.apache.wicket.protocol.http.RequestLogger.getLiveSessions(RequestLogger.java:163)",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-03-03 22:53:13.802,,,no_permission,,,,,,,,,,,,203050,,,Tue Mar 03 22:53:13 UTC 2009,,,,,,0|i0ke7b:,117118,,,,,,,,03/Mar/09 22:53;jcompagner;concurrency problems,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Javascript function Wicket.replaceAll is unbearably slow,WICKET-2127,12415573,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,seanizer,seanizer,25/Feb/09 11:21,16/Jun/09 19:55,14/Mar/19 03:09,16/Jun/09 19:55,1.4-RC2,,,,,,,,,,,1.4-RC6,,,wicket,,,,,,,,,,,0,,,,,,"I use AbstractAjaxTimerBehavior to update many different components on my pages periodically.
After a while, the browser occupies 50% or more of the system resources.

I used the javascript profiler in firebug and found that Wicket.replaceAll is responsible for 60+ percent of javascript processing time.

The problem is that sequential string processing is used instead of much faster regular expressions","Firefox 3.0.5, Opera 9.2 (windows)",1800,1800,,0%,1800,1800,,,,,,,,,,25/Feb/09 11:34;seanizer;wicketReplaceAll.js;https://issues.apache.org/jira/secure/attachment/12400935/wicketReplaceAll.js,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2009-02-25 18:10:04.838,,,no_permission,,,,,,,,,,,,203037,,,Thu Mar 05 11:58:15 UTC 2009,,,,,,0|i0ke93:,117126,,,,,,,,"25/Feb/09 11:34;seanizer;Using this version of Wicket.replaceAll changed the performance dramatically.

Now the FireBugs Profiler says the script takes up 1.98% of the processing time as opposed to ~60%

Sean",25/Feb/09 11:36;seanizer;Forgot to mention: The Source file in question is wicket-ajax.js in package org.apache.wicket.ajax,"25/Feb/09 18:10;knopp;You replacement function is broken. It needs to escape more characters. I added some.

var replaceAll = function(str, from, to) {
	eval(
		'var regex = /'
		+ from.replace( /[\(\)\[\]\{\}\$\^\.\?\*\+\\\/\|]/g ,'\\$&' )
		+ '/g ;'
	);
	return str.replace(regex,to);
}

I don't mind replacing the current function with this but at this point I'm not sure it escapes all necessary characters.","26/Feb/09 06:03;seanizer;I know. Unfortunately there is neither a Pattern.quote() nor an inline quote like \Q in JavaScript. It's not really readable either. But the performance is catastrophic without it.

Sean","27/Feb/09 06:00;seanizer;Actually, it should work to just escape all non-word characters in the search String.
Here is another version that does just this:

var replaceAll = function(str, from, to) {
	eval(
		'var regex = /' + from.replace( /\W/g ,'\\$&' ) + '/g ;'
	);
	return str.replace(regex,to);
} 

Sean","04/Mar/09 21:15;kan.izh;I am not sure what do you want to do, but you can use RegExp object, so this:

function(str, from, to) {
  var re = from.replace(/(\W)/g, ""\\$1"");
return str.replace(new RegExp(re, ""g""), to);
} 

But my advice, don't do generic method replaceAll, but use replace with g modifier. Say in method

	function markIframe(text) {
		var t = text;
		var r = /<\s*iframe/i;
		while ((m = t.match(r)) != null) {			
			t = Wicket.replaceAll(t, m[0], ""<"" + marker + m[0].substring(1));            
		}
        return t;
	}

it's enough just do

	function markIframe(text) {
        return text.replace(/<\s*iframe/ig, ""<""+marker + ""iframe"");
	}
","04/Mar/09 21:22;kan.izh;Also
    function removeIframeMark(text) {
        var markerRe = new RegExp(marker, ""g"")  //this variable could be cached somewhere globally, so we could avoid regex compilation every time if it affects performance
        return text.replace(markerRe, """")
    }


Wicket.decode1 = function(text) {
    return text.replace(/\]\^/g, ""]"")
}
","05/Mar/09 06:07;seanizer;Anatoly,

I never call this function myself. The wicket AJAX behaviors call it when updating the page.
So just having a timed auto update behavior that updates parts of my page every 5 seconds or so brought my system to a freeze.

Sean","05/Mar/09 08:39;knopp;This one 

var replaceAll = function(str, from, to) {
eval(
'var regex = /' + from.replace( /\W/g ,'\\$&' ) + '/g ;'
);
return str.replace(regex,to);
} 

looks good to me. I will apply it to 1.4 and if no one complains after some time I will probably also add it to 1.3.","05/Mar/09 10:07;seanizer;Thanks.

Sean","05/Mar/09 11:58;kan.izh;I understand, I mean somebody should just fix the code in wicket source itself.
The code ""while ... Wicket.replaceAll"" is very inefficient - it creates a lot of string objects and has bad algorithmic complexity (quadratic instead of linear). It could be done by single replace(/.../g) which should work much more faster.",,,,,,,,,,,,,,,,,,,,,,
Component Reference Source Link broken,WICKET-2112,12414997,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,thecoolace,thecoolace,17/Feb/09 21:21,18/Feb/09 09:04,14/Mar/19 03:09,18/Feb/09 09:04,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"Example: Go to http://wicketstuff.org/wicket13/compref/?wicket:bookmarkablePage=:org.apache.wicket.examples.compref.BorderPage
and click the Source Link. You always get ""Page expired"". Several other components don't work, too. Some of them work. ",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203024,,,2009-02-17 21:21:02.0,,,,,,0|i0kea7:,117131,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket-extensions demos out of service,WICKET-2108,12414927,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,paul.i,paul.i,17/Feb/09 08:59,18/Feb/09 09:05,14/Mar/19 03:09,18/Feb/09 09:05,,,,,,,,,,,,,,,wicket-extensions,,,,,,,,,,,0,,,,,,"The demo section of wicket extensions seems to be out of services.
-> The page you requested has expired.
This comes on a fresh session.

The overview page renders
http://www.wicketstuff.org/wicket13/ajax/
but the demos dont work, and the source code is not available.

Sorry for bugging this forum, but the example code is the only resource for me to learn about using the components.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,203021,,,2009-02-17 08:59:52.0,,,,,,0|i0kean:,117133,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket-extensions demo out of service,WICKET-2097,12414553,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,paul.i,paul.i,11/Feb/09 10:14,18/Feb/09 12:46,14/Mar/19 03:09,18/Feb/09 12:46,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"The demo section of wicket extensions seems to be out of services.
-> The page you requested has expired.
This comes on a fresh session.

e.g. tree table demo source code link
http://www.wicketstuff.org/wicket13/ajax/?wicket:interface=:4:mainNavigation:sources::ILinkListener::

Sorry for bugging this forum, but the example code is the only resource to learn about using tree tables.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-02-11 13:24:08.169,,,no_permission,,,,,,,,,,,,203011,,,Wed Feb 18 12:46:55 UTC 2009,,,,,,0|i0kecf:,117141,,,,,,,,"11/Feb/09 13:24;martin-g;The example link is not bookmarkable.

Go to http://www.wicketstuff.org/wicket13/ajax/ and choose any of the examples.
I have tried a few and all of them work.","11/Feb/09 13:52;paul.i;Martin,

are you able to see the demo source code ?
This is where I fail, e.g. at the tree table demo source code.",11/Feb/09 14:25;martin-g;You are right. The source code is not reachable,18/Feb/09 12:46;paul.i;this has been fixed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pagemap is locked forever with some Page serialization exceptions,WICKET-2075,12414032,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,a701440,a701440,04/Feb/09 20:03,09/Aug/10 20:46,14/Mar/19 03:09,17/Mar/10 22:48,1.3.5,,,,,,,,,,,1.4.8,,,wicket,,,,,,,,,,,0,,,,,,"There was a serialization problem with one of the components that was causing the pagemap to become locked forever.

2009-02-04 19:43:57,147 [ERROR] [WebServerPool0-0] org.apache.wicket.RequestCycle[]: there was an error detaching the request from the session ...

java.lang.ExceptionInInitializerError
	at org/apache/wicket/util/io/IObjectStreamFactory$2.writeObjectOverride (IObjectStreamFactory.java:121)
	at java/io/ObjectOutputStream.writeObject (Unknown Source)
	at org/apache/wicket/util/lang/Objects.objectToByteArray (Objects.java:1092)
	at org/apache/wicket/protocol/http/pagestore/AbstractPageStore.serializePage (AbstractPageStore.java:197)
	at org/apache/wicket/protocol/http/pagestore/DiskPageStore.storePage (DiskPageStore.java:811)
	at org/apache/wicket/protocol/http/SecondLevelCacheSessionStore$SecondLevelCachePageMap.put (SecondLevelCacheSessionStore.java:333)
	at org/apache/wicket/Session.requestDetached (Session.java:1371)
	at org/apache/wicket/RequestCycle.detach (RequestCycle.java:1091)
	at org/apache/wicket/RequestCycle.steps (RequestCycle.java:1375)
	at org/apache/wicket/RequestCycle.request (RequestCycle.java:494)
	at org/apache/wicket/protocol/http/WicketFilter.doGet (WicketFilter.java:357)
	at org/apache/wicket/protocol/http/WicketFilter.doFilter (WicketFilter.java:200)
	at org/mortbay/jetty/servlet/ServletHandler$CachedChain.doFilter (ServletHandler.java:1116)
	at com/videoiq/fusion/camera/webserver/ThrottlingFilter.doFilter (ThrottlingFilter.java:75)
	at com/videoiq/fusion/camera/webserver/ThrottlingFilter.doFilter (ThrottlingFilter.java:53)
	at org/mortbay/jetty/servlet/ServletHandler$CachedChain.doFilter (ServletHandler.java:1116)
	at org/mortbay/jetty/servlet/ServletHandler.handle (ServletHandler.java:361)
	at org/mortbay/jetty/security/SecurityHandler.handle (SecurityHandler.java:217)
	at org/mortbay/jetty/servlet/SessionHandler.handle (SessionHandler.java:182)
	at org/mortbay/jetty/handler/ContextHandler.handle (ContextHandler.java:776)
	at org/mortbay/jetty/webapp/WebAppContext.handle (WebAppContext.java:418)
	at com/videoiq/fusion/camera/webserver/RedirectHandler.handle (RedirectHandler.java:46)
	at org/mortbay/jetty/handler/HandlerCollection.handle (HandlerCollection.java:129)
	at org/mortbay/jetty/handler/HandlerWrapper.handle (HandlerWrapper.java:153)
	at org/mortbay/jetty/Server.handle (Server.java:325)
	at org/mortbay/jetty/HttpConnection.handleRequest (HttpConnection.java:536)
	at org/mortbay/jetty/HttpConnection$RequestHandler.headerComplete (HttpConnection.java:865)
	at org/mortbay/jetty/HttpParser.parseNext (HttpParser.java:539)
	at org/mortbay/jetty/HttpParser.parseAvailable (HttpParser.java:212)
	at org/mortbay/jetty/HttpConnection.handle (HttpConnection.java:404)
	at org/mortbay/jetty/bio/SocketConnector$Connection.run (SocketConnector.java:228)
	at com/videoiq/fusion/camera/webserver/WebServerThreadPool$PoolThread.run (WebServerThreadPool.java:476)
Caused by: java.lang.RuntimeException: java.lang.NoSuchMethodException: java/io/ObjectStreamClass.lookup
	at org/apache/wicket/util/io/SerializableChecker.<clinit> (SerializableChecker.java:261)
	... 32 more
Caused by: java.lang.NoSuchMethodException: java/io/ObjectStreamClass.lookup
	at java/lang/Class.getDeclaredMethod (Unknown Source)
	at org/apache/wicket/util/io/SerializableChecker.<clinit> (SerializableChecker.java:226)
	... 32 more
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2009-02-08 05:03:04.181,,,no_permission,,,,,,,,,,,,202989,,,Mon Aug 09 20:46:53 UTC 2010,,,,,,0|i0kefj:,117155,,,,,,,,"08/Feb/09 05:03;ivaynberg;if there is an error in the diskstore, can the pagemap rget stuck in locked state?","09/Feb/09 14:55;a701440;The cause of the serialization issue was the described in JIRA 2077. However it looks like that runtime exceptions thrown from within AbstractPageStore.serializePage are not handled correctly and leave the page map(s) in the locked state. After that happens some/all other pages in the application can not be accesses at all (waiting on the lock). The call stack where this effect was happening is below.
As I said the original problem was the ""NoSuchMethodException"" in the SerializerChecker, but I think the same problem would happen with some other exceptions as well. The ""unlock"" code should be hardened against such problems.
========================================================================================================================
at org/apache/wicket/util/lang/Objects.objectToByteArray (Objects.java:1092)
at org/apache/wicket/protocol/http/pagestore/AbstractPageStore.serializePage (AbstractPageStore.java:197)
at org/apache/wicket/protocol/http/pagestore/DiskPageStore.storePage (DiskPageStore.java:811)
at org/apache/wicket/protocol/http/SecondLevelCacheSessionStore$SecondLevelCachePageMap.put (SecondLevelCacheSessionStore.java:333)
at org/apache/wicket/Session.requestDetached (Session.java:1371)
at org/apache/wicket/RequestCycle.detach (RequestCycle.java:1091)
at org/apache/wicket/RequestCycle.steps (RequestCycle.java:1375)
at org/apache/wicket/RequestCycle.request (RequestCycle.java:494)
at org/apache/wicket/protocol/http/WicketFilter.doGet (WicketFilter.java:357)
at org/apache/wicket/protocol/http/WicketFilter.doFilter (WicketFilter.java:200) 
.....
========================================================================================================================
",17/Mar/10 22:48;jcompagner;fixed it by adding some try/catch/finally blocks to make sure the pagemap is released,"09/Aug/10 15:11;mmakundi;Hi!

I still get pagemap locked ""forever"" and kill -3 shows nothing is happening.

Is there more insight to this issue? Users can login again if I ask them to restart browser.

I have also made sure that it cannot be a database lockstate, I added similar watchdog timer to database threads and it says there is no ongoing database activity during pagemap infinite lock.

","09/Aug/10 20:46;jcompagner;do you have a test case how you get to this state?

What is the stack of the thread that still has the lock? (we do print that stack)",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modal Window + InMethod Grid Scroll bar issue,WICKET-2068,12413766,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,saravanan77,saravanan77,02/Feb/09 09:58,02/Feb/09 11:10,14/Mar/19 03:09,02/Feb/09 11:09,1.3.5,,,,,,,,,,,,,,wicket-extensions,,,,,,,,,,,0,,,,,,"We are extensively using inMethod grid component in our project. It is working properly.  When we try to show the same data using modalwindow, inMethod grid header behaves strange.  I think it is some modal window CSS related issue.

If i remove below mentioned DOCTYPE from main html page, then it works
<!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN""
    ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd""> 
but for my site i need that DOCTYPE.

I am using Panel to show content in modal window

Above mentioned problem exists only in IE(i am using version 7).  It works in FF 3.0 and also in chrome.

Please respond as soon as possible.",Windows XP,,,,,,,,,,,,,,,,02/Feb/09 10:00;saravanan77;ModalWindow.jpg;https://issues.apache.org/jira/secure/attachment/12399262/ModalWindow.jpg,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202982,,,Mon Feb 02 11:09:46 UTC 2009,,,,,,0|i0keg7:,117158,,,,,,,,02/Feb/09 10:01;saravanan77;Screenshot,"02/Feb/09 11:09;saravanan77;Fixed by applying the solution provided for bug WICKET-2056

public void renderHead(IHeaderResponse response) { 
    response.renderString(""<style type=\""text/css\"">div.w_content div {position:relative;}</style>""); 
} 
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket fails on WebLogic 9.2 clustered,WICKET-2022,12412566,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,xxbedy,xxbedy,16/Jan/09 05:50,26/Feb/09 12:09,14/Mar/19 03:09,26/Feb/09 12:09,1.4-RC1,,,,,,,,,,,1.4-RC3,,,wicket,,,,,,,,,,,0,,,,,,"I have problems with deploying wicket (wicket-1.4m1) application on WebLogic 9.2 server cluster (2 nodes).
Application use spring 2.5.5 for service layer and is configured:
web.xml:
    <distributable/>
    <filter>
        <filter-name>wicket.call-centre</filter-name>
        <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>
        <init-param>
            <param-name>applicationFactoryClassName</param-name>
            <param-value>org.apache.wicket.spring.SpringWebApplicationFactory</param-value>
        </init-param>
        <init-param>
            <param-name>applicationBean</param-name>
            <param-value>wicketApplication</param-value>
        </init-param>
        <init-param>
            <param-name>wicket.configuration</param-name><!--
            <param-value>development</param-value>
            -->
            <param-value>deployment</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>wicket.call-centre</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>


weblogic.xml:
  <session-descriptor>
      <persistent-store-type>replicated_if_clustered</persistent-store-type>
  </session-descriptor>

If application deploys on nonclustered environment everything is ok. On cluster I got these errors:

<Warning> <RMI> <app-test> <testws> <[ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1231941794006> <BEA-080004> <An error was thrown by rmi server: weblogic.cluster.replication.ReplicationManager.create(Lweblogic.rmi.spi.HostID;ILweblogic.cluster.replication.ROID;Lweblogic.cluster.replication.Replicatable;)

 java.lang.ExceptionInInitializerError.

java.lang.ExceptionInInitializerError

      at sun.misc.Unsafe.ensureClassInitialized(Native Method)

      at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:25)

      at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:122)

      at java.lang.reflect.Field.acquireFieldAccessor(Field.java:917)

      at java.lang.reflect.Field.getFieldAccessor(Field.java:898)

      at java.lang.reflect.Field.getLong(Field.java:527)

      at java.io.ObjectStreamClass.getDeclaredSUID(ObjectStreamClass.java:1586)

      at java.io.ObjectStreamClass.access$700(ObjectStreamClass.java:52)

      at java.io.ObjectStreamClass$2.run(ObjectStreamClass.java:408)

      at java.io.ObjectStreamClass.<init>(ObjectStreamClass.java:400)

      at java.io.ObjectStreamClass.lookup0(ObjectStreamClass.java:297)

      at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java)

      at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:531)

      at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1552)

      at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1466)

      at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1699)

      at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)

      at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)

      at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.readObject(SecondLevelCacheSessionStore.java:412)

      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

      at java.lang.reflect.Method.invoke(Method.java:585)

      at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:946)

      at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1809)

      at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)

org.apache.wicket.WicketRuntimeException: There is no application attached to current thread [ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'

      at org.apache.wicket.Application.get(Application.java:177)

      at org.apache.wicket.Component.getApplication(Component.java:1282)

      at org.apache.wicket.Component.<init>(Component.java:894)

      at org.apache.wicket.MarkupContainer.<init>(MarkupContainer.java:105)

      at org.apache.wicket.Page.<init>(Page.java:236)

      at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession$1.<init>(SerializedPagesCache.java:206)

      at org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession.<clinit>(SerializedPagesCache.java:205)

      at sun.misc.Unsafe.ensureClassInitialized(Native Method)

      at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:25)

      at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:122)

      at java.lang.reflect.Field.acquireFieldAccessor(Field.java:917)

      at java.lang.reflect.Field.getFieldAccessor(Field.java:898)

      at java.lang.reflect.Field.getLong(Field.java:527)

      at java.io.ObjectStreamClass.getDeclaredSUID(ObjectStreamClass.java:1586)

      at java.io.ObjectStreamClass.access$700(ObjectStreamClass.java:52)

      at java.io.ObjectStreamClass$2.run(ObjectStreamClass.java:408)

      at java.io.ObjectStreamClass.<init>(ObjectStreamClass.java:400)

      at java.io.ObjectStreamClass.lookup0(ObjectStreamClass.java:297)

      at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java)

      at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:531)

      at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1552)

      at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1466)

      at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1699)

      at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)

      at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)

      at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.readObject(SecondLevelCacheSessionStore.java:412)

      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

      at java.lang.reflect.Method.invoke(Method.java:585)

      at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:946)

      at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1809)

      at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)

      at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)

      at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)

      at weblogic.servlet.internal.session.ReplicatedSessionChange.readExternal(ReplicatedSessionChange.java:155)

      at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:1755)

      at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1717)

      at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)

      at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)

      at weblogic.utils.io.ChunkedObjectInputStream.readObject(ChunkedObjectInputStream.java:195)

      at weblogic.rjvm.MsgAbbrevInputStream.readObject(MsgAbbrevInputStream.java:565)

      at weblogic.utils.io.ChunkedObjectInputStream.readObject(ChunkedObjectInputStream.java:191)

      at weblogic.cluster.replication.ReplicationManager_WLSkel.invoke(Unknown Source)

      at weblogic.rmi.internal.BasicServerRef.invoke(BasicServerRef.java:553)

      at weblogic.rmi.internal.BasicServerRef$1.run(BasicServerRef.java:443)

      at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:363)

      at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:147)

      at weblogic.rmi.internal.BasicServerRef.handleRequest(BasicServerRef.java:439)

      at weblogic.rmi.internal.BasicServerRef.access$300(BasicServerRef.java:61)

      at weblogic.rmi.internal.BasicServerRef$BasicExecuteRequest.run(BasicServerRef.java:983)

      at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)

      at weblogic.work.ExecuteThread.run(ExecuteThread.java:181)

>

<Warning> <RMI> <BEA-080004> <An error was thrown by rmi server: weblogic.cluster.replication.ReplicationManager.create(Lweblogic.rmi.spi.HostID;ILweblogic.cluster.replication.ROID;Lweblogic.cluster.replication.Replicatable;)

 java.lang.ExceptionInInitializerError.

java.lang.ExceptionInInitializerError

        at sun.misc.Unsafe.ensureClassInitialized(Native Method)

        at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:25)

        at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:122)

        at java.lang.reflect.Field.acquireFieldAccessor(Field.java:917)

        at java.lang.reflect.Field.getFieldAccessor(Field.java:898)

        Truncated. see log file for complete stacktrace

org.apache.wicket.WicketRuntimeException: There is no application attached to current thread [ACTIVE] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'

        at org.apache.wicket.Application.get(Application.java:177)

        at org.apache.wicket.Component.getApplication(Component.java:1282)

        at org.apache.wicket.Component.<init>(Component.java:894)

        at org.apache.wicket.MarkupContainer.<init>(MarkupContainer.java:105)

        at org.apache.wicket.Page.<init>(Page.java:236)

        Truncated. see log file for complete stacktrace

> 

Any advice ?
--------------------------------------------------------------------------------------------------------------------------------------------
Matej Knopp suggest:
Looks like this is causing problems in SerializedPagesCache

static final Page NO_PAGE = new Page()
{
};

I wonder why the class is not loaded when the other node is initialized.

Please create a JIRA issue.

in the meanwhile, you can try load Class.forName(..) the
org.apache.wicket.protocol.http.pagestore.SerializedPagesCache$SerializedPageWithSession
class in your Application#init.

","Weblogic 9.2
Spring 2.5.5
JDK 1.5.0.17",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202937,,,Thu Feb 26 12:09:31 UTC 2009,,,,,,0|i0kelj:,117182,,,,,,,,"26/Feb/09 12:09;xxbedy;working correctly in 1.4-RC3
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The page set by setReponsePage does not process its own response.,WICKET-2006,12411756,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,mmakundi,mmakundi,06/Jan/09 12:33,06/Jan/09 14:44,14/Mar/19 03:09,06/Jan/09 14:44,1.4-RC1,,,,,,,,,,,1.3.6,1.4-RC2,,wicket,,,,,,,,,,,0,,,,,,"Whenever the HomePage is submitted, it uses

setResponsePage(new HomePage(xxx)); to open a new page in a new state.

Whenever the form is submitted, the original page processes the form and thus any components that have changed state (e.g., become visible / invisible) remain in their original state and are not processed properly.

More technically:
The browser is viewing page instance X, but the form being processed belongs to the original page instance 0.

It seems that the page set by setReponsePage does not process its own response.",Any,43200,43200,,0%,43200,43200,,,,,,,,,,06/Jan/09 12:55;mmakundi;Wicket-Quickstart.zip;https://issues.apache.org/jira/secure/attachment/12397197/Wicket-Quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2009-01-06 14:33:15.906,,,no_permission,,,,,,,,,,,,202922,,,Tue Jan 06 14:44:52 UTC 2009,,,,,,0|i0kenj:,117191,,,,,,,,"06/Jan/09 12:55;mmakundi;A wicket quickstart for easily repeating the problem.

Press the form submit button once, and you will get a form with the input field disabled. You would assume pressing the button again, the page instance set in the ""setResponsePage"" method would process the form but NO, it is the original (first) page which will process the form.. not knowing you have edisabled the field and any other problems that might result .. 

","06/Jan/09 14:33;jcompagner;This is because of your:

getSession().replaceSession();

call


You can change that in 2 ways
change the place where you call that so not at the beginning of the onsubmit but completely at the end:

                // Return onto the same page but disable inputField
                setResponsePage(new HomePage(false, ++submitCount));
                getSession().replaceSession();


then it works fine
The other is setting this setting:

    protected void init() {
        super.init();
       
        getSessionSettings().setPageIdUniquePerSession(true);
    }


I still dont know why that is not default to true
I think we should just drop the complete pagemap page id.
and always just use the session to create the next page id that is unique across all sessions

Why do we have that setting? Matej was there really a thing that we still need the page pagemap id?


So the only good fix that is see is drop the pagemap page id generator completely",06/Jan/09 14:44;jcompagner;fixed it so that  page id's are always session specific so that they never overlap by accident,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PropertyResolver causes memory leaks with proxies,WICKET-1959,12409195,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,giladgaron,giladgaron,25/Nov/08 15:55,22/Dec/08 10:12,14/Mar/19 03:09,21/Dec/08 20:37,1.3.5,,,,,,,,,,,1.3.6,1.4-RC2,,wicket,,,,,,,,,,,0,,,,,,"When using proxies for properties, a memory leak occurs.
The ConcurrentHashMap classesToGetAndSetters  doesn't have an eviction policy and fills up with proxies who do not get 
garbage collected.

Build a page which uses proxies as properties, every time a new session is initiated, a new proxy (a new proxy is a new class) of the same property is created and added to the map.
if the proxy is create by a remote jvm you also get a classloader leak.
",All Platforms,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-11-25 16:04:45.918,,,no_permission,,,,,,,,,,,,202880,,,Mon Dec 22 10:12:28 UTC 2008,,,,,,0|i0kes7:,117212,,,,,,,,25/Nov/08 16:04;jcompagner;i guess we just should weakly references those classes,"21/Dec/08 19:54;jcompagner;i am looking into this problem but the fix is not that straightforward.

I can make it a WeakHashmap, but that one i must make synchronized what i rather dont want to do (it is hit many many times in 1 request over multiply requests)
So i could make it a ConcurrentHashMap with a WeakClassReference key, the code will be uglier then because every time i access the map with a class i have to wrap the class in that key.
But that even wouldnt help us at all because what the WeakClassKey then points to will be an hard reference to a ConcurrentMap with String->IGetAndSet
And implementations of IGetAndSet can hold references to that class (if it is an Array lookup) or Methods/Field variables of that class
So i have a hard reference to that same class so it will never be out of scope

To fix that so having weak references everywhere will make the code overly complex because then suddenly fields or methods can be null even when i have a IGetAndSet object...
so i have to take that into account all over the place thats horrible.

So the question do you really make constant proxy classes? How come? Why does a session needs a new class?

But I think for us the only real fix will be to have a static setter on PropertyResolver:

PropertyResolver.setClassCacheCreator(Application application, IClassCachCreator creator)


IClassCachCreator 
{
  public Map createCacheMap(Class clz);
}

then it is up to you to return a map with an evict policy or for a specific class dont return anything then it will not be cached at all.
",21/Dec/08 20:37;jcompagner;you can now set the IClassCache and have your own eviction strategy,"22/Dec/08 09:29;giladgaron;That should work, thanks for the fix.
By the way, you could also use Google collections Mutlimap api instead to bypass all that ugly synchronized code.
","22/Dec/08 10:12;jcompagner;we dont have any sync code at the moment in that area (its all concurrent)
If we had to use weakhashmaps and so on then we needed to do that because there is no ConcurrentWeakHashmap implementation.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
MarkupContainer.setEnabled() doesn't enable/disable child components,WICKET-1919,12407943,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,xsergey,xsergey,06/Nov/08 14:44,07/Nov/08 16:15,14/Mar/19 03:09,06/Nov/08 19:15,1.3.3,1.4-M3,,,,,,,,,,1.4-RC2,,,wicket,,,,,,,,,,,0,,,,,,"1. Create any components that is derived from MarkupContainer, for example, create Panel. 
2. Put some components to the Panel, for example, TextInput, Label etc.
3. Call panel.setEnabled(false) 

Result: all controls on panel are still enabled.

Notes: after some investigation I found that MarkupContainer doesn't override setEnabled and therefore it cannot enable/disable components stored in the container. 

Workaround: manually disable all components that are displayed on the panel, for example:
public void setEnabledForChildren(boolean enabled) {
        setEnabledRecursive(this, enabled);
    }

    private void setEnabledRecursive(MarkupContainer container, boolean enabled) {
        Iterator<? extends Component> iterator = container.iterator();
        while (iterator.hasNext()) {
            Component component = iterator.next();
            component.setEnabled(enabled);

            if (component instanceof MarkupContainer) {
                setEnabledRecursive((MarkupContainer) component, enabled);
            }
        }
    }

I think that MarkupContainer must be responsible for disabling/enabling child components.",,,,,,,,,,,,,,,,,06/Nov/08 15:01;xsergey;src.zip;https://issues.apache.org/jira/secure/attachment/12393444/src.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-11-06 19:15:47.782,,,no_permission,,,,,,,,,,,,202844,,,Fri Nov 07 16:15:55 UTC 2008,,,,,,0|i0kewn:,117232,,,,,,,,06/Nov/08 15:02;xsergey;In the attachment(src.zip) you can find simple test case,"06/Nov/08 19:15;ivaynberg;only fixing this in 1.4

in 1.3 it will alter existing functionality in production systems.",07/Nov/08 16:15;xsergey;Accepted,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generics in DateTextField,WICKET-1879,12406741,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,thrantal,topping,topping,18/Oct/08 20:00,03/Dec/08 01:45,14/Mar/19 03:09,03/Dec/08 01:45,1.4-M3,,,,,,,,,,,1.4-RC2,,,wicket,,,,,,,,,,,0,,,,,,DateTextField should be defined as 'class DateTextField extends TextField<Date>'.  This solves a type safety issue with field.add(DateTextValidator...),,120,120,,0%,120,120,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-12-03 01:45:38.774,,,no_permission,,,,,,,,,,,,202805,,,Wed Dec 03 01:45:38 UTC 2008,,,,,,0|i0kf0n:,117250,,,,,,,,"03/Dec/08 01:45;thrantal;Fixed, thanks for reporting,",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Wicket 1.3.4 violates servlet standard, Glassfish spews warnings",WICKET-1816,12403521,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,cowwoc,cowwoc,02/Sep/08 05:44,19/Jul/11 07:14,14/Mar/19 03:09,27/Sep/08 04:12,1.3.4,,,,,,,,,,,1.3.5,1.4-RC1,,wicket,,,,,,,,,,,0,,,,,,"WicketFilter.java line 194 invokes getLastModified() which invokes ""request.getParameterMap()"" on line 962. Later on in that same request, WicketFilter.java line 222 invokes doGet() which invokes response.setCharacterEncoding() on line 376.

This is just one case where this problem occurs but I believe others might exist. Whenever Wicket violates the standard Glassfish spews out this warning:

PWC4011: Unable to set request character encoding to UTF-8 from context <context-path>, because request parameters have already been read, or ServletRequest.getReader() has already been called

... you literally end up with tens of these warnings per request, and supposedly, the wrong behavior :) Glassfish's FAQ discusses this in more detail: http://wiki.glassfish.java.net/Wiki.jsp?page=FaqWebAppUnableToSetRequestCharEncoding",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-09-27 04:12:37.38,,,no_permission,,,,,,,,,,,,67574,,,Sat Sep 27 15:48:08 UTC 2008,,,,,,0|i0kf5z:,117274,,,,,,,,"27/Sep/08 04:12;ivaynberg;johan said he committed something that shouldve fixed this on the list, please reopen if its still broken",27/Sep/08 15:48;cowwoc;I verified Johan's fix. It seems to solve the problem on my end.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket does not compile for 1.3.x because of method usage > jdk 1.4,WICKET-1809,12403357,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,ivaynberg,pete,pete,29/Aug/08 09:58,29/Aug/08 16:48,14/Mar/19 03:09,29/Aug/08 15:34,,,,,,,,,,,,1.3.5,1.4-RC1,,wicket,,,,,,,,,,,0,,,,,,"In

  org.apache.wicket.request.target.basic.StringRequestTarget

the method


  Charset.defaultCharset()

is used.

// ... snip
	public StringRequestTarget(String string)
	{
        this(""text/plain"", Charset.defaultCharset(), string);
	}
// ... snip

However it does not exist in jdk 1.4 which is a requirement for wicket.

I suggest using

	public StringRequestTarget(String string)
	{
            this(""text/plain"", Charset.forName(Application.get().getRequestCycleSettings().getResponseRequestEncoding()), string);
	}

",,,,,,,,,,,,,,,,,29/Aug/08 09:59;pete;wicket-1809-wicket-1.3.patch;https://issues.apache.org/jira/secure/attachment/12389158/wicket-1809-wicket-1.3.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202740,,,Fri Aug 29 10:07:08 UTC 2008,,,,,,0|i0kf6n:,117277,,,,,,,,"29/Aug/08 10:07;pete;I changed priority to 'Blocker' based on the help in jira

-> Blocker = Blocks development and/or testing work, production could not run",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket-extensions has unused reference to commons-collections.jar,WICKET-1799,12402942,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,pete,pete,24/Aug/08 09:00,27/Sep/08 15:46,14/Mar/19 03:09,27/Sep/08 15:41,,,,,,,,,,,,1.3.5,1.4-RC1,,wicket-extensions,,,,,,,,,,,0,,,,,,"It seems that wicket-extensions (both 1.3 and 1.4) holds an unused reference to common-collections.jar in it's pom.xml. 

  <dependency>
    <groupId>commons-collections</groupId>
    <artifactId>commons-collections</artifactId>
  </dependency>

I removed that reference and could still compile everything without any error. Could someone double-check that and remove it if it's really not needed. this would save us from another 570 kb :-)",,,,,,,,,,,,,,,,,29/Aug/08 09:49;pete;wicket-1799-wicket-1.3.patch;https://issues.apache.org/jira/secure/attachment/12389156/wicket-1799-wicket-1.3.patch,29/Aug/08 09:49;pete;wicket-1799-wicket-1.4.patch;https://issues.apache.org/jira/secure/attachment/12389157/wicket-1799-wicket-1.4.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2008-09-27 04:19:16.588,,,no_permission,,,,,,,,,,,,202732,,,Sat Sep 27 15:46:42 UTC 2008,,,,,,0|i0kf7j:,117281,,,,,,,,"29/Aug/08 09:48;pete;Patches included...

Got a clean compile on 1.3.x and 1.4.x after removing commons-collections. I see no reason why this reference is needed so please remove it if you agree.",27/Sep/08 04:19;ivaynberg;seems like this was already removed from 1.4,"27/Sep/08 15:13;pete;for 1.3 the pom.xml is correct, however in 1.4.x the reference is still in there.",27/Sep/08 15:46;pete;thanks!,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"wicket-1.3.x uses class from java 1.5, therefore doesn't compile on java 1.4 as it should",WICKET-1792,12402625,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,pete,pete,19/Aug/08 12:40,31/Aug/08 07:53,14/Mar/19 03:09,31/Aug/08 07:43,,,,,,,,,,,,1.3.5,,,wicket,,,,,,,,,,,0,,,,,,"current wicket 1.3.x does not compile with jdk 1.4

class 

  org.apache.wicket.util.crypt.KeyInSessionSunJceCryptFactory 

uses the class 

  java.util.UUID

which exist @since 1.5

this should be fixed as wicket-1.3 requires a minimum jdk of 1.4",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-08-31 07:43:49.897,,,no_permission,,,,,,,,,,,,202727,,,Sun Aug 31 07:43:49 UTC 2008,,,,,,0|i0kf8f:,117285,,,,,,,,31/Aug/08 07:43;ivaynberg;thanks for fixing johan :),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in feedback panel,WICKET-1780,12401894,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,07/Aug/08 13:17,08/Aug/08 08:54,14/Mar/19 03:09,08/Aug/08 08:54,1.3.4,,,,,,,,,,,1.3.5,1.4-RC1,,,,,,,,,,,,,0,,,,,,"WicketMessage: Error attaching this container for rendering: [MarkupContainer [Component id = feedbackul, page = nl.topicus.tripleapoc.web.pages.deelnemer.intake.IntakeStap1Personalia, path = 11:layLeft:feedback:feedbackul.FeedbackPanel$2, isVisible = true, isVersioned = false]]

Root cause:

java.lang.NullPointerException
     at org.apache.wicket.markup.html.panel.FeedbackPanel.newMessageDisplayComponent(FeedbackPanel.java:324)
     at org.apache.wicket.markup.html.panel.FeedbackPanel$MessageListView.populateItem(FeedbackPanel.java:88)
     at org.apache.wicket.markup.html.list.ListView.onPopulate(ListView.java:573)
     at org.apache.wicket.markup.repeater.AbstractRepeater.onBeforeRender(AbstractRepeater.java:127)
     at org.apache.wicket.Component.internalBeforeRender(Component.java:1003)
     at org.apache.wicket.Component.beforeRender(Component.java:1035)
     at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1589)
     at org.apache.wicket.Component.onBeforeRender(Component.java:3684)
     at org.apache.wicket.Component.internalBeforeRender(Component.java:1003)
     at org.apache.wicket.Component.beforeRender(Component.java:1035)
     at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1589)
     at org.apache.wicket.Component.onBeforeRender(Component.java:3684)
     at org.apache.wicket.Component.internalBeforeRender(Component.java:1003)
     at org.apache.wicket.Component.prepareForRender(Component.java:2168)
     at org.apache.wicket.ajax.AjaxRequestTarget.respondComponent(AjaxRequestTarget.java:747)
     at org.apache.wicket.ajax.AjaxRequestTarget.respondComponents(AjaxRequestTarget.java:649)
     at org.apache.wicket.ajax.AjaxRequestTarget.respond(AjaxRequestTarget.java:564)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:104)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1177)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1248)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1349)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:493)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:387)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:199)

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-08-07 16:52:01.513,,,no_permission,,,,,,,,,,,,202716,,,Thu Aug 07 16:52:01 UTC 2008,,,,,,0|i0kf9j:,117290,,,,,,,,"07/Aug/08 14:03;dashorst;this happened when I added the message of an exception that occurred to the feedback queue using error(e.getMessage()); the a NPE has a null-message, so this instructed Wicket to create a FeedbackMessage(..., null, ...). Later on this causes a NPE in the feedback panel.

Though I think that empty messages are useless to users, the framework should not crash upon them. If we don't accept null messages, we should throw an IllegalArgumentException from the FeedbackMessage constructor, which allows the developer to pinpoint where he went wrong, instead of having to step through all code.

Any objections to throwing an IllegalArgumentException from the FeedbackMessage constructor?",07/Aug/08 16:52;ivaynberg;i think IAE is fine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RequestCycle.urlFor modifies page parameters,WICKET-1740,12399898,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jjviana,jjviana,09/Jul/08 12:44,05/Oct/08 19:34,14/Mar/19 03:09,05/Oct/08 19:34,1.3.4,,,,,,,,,,,1.3.5,1.4-RC1,,,,,,,,,,,,,0,,,,,,"The method RequestCycle.urlFor(final Component component,final RequestListenerInterface listener, ValueMap params) (RequestCycle.java line 824) obtains a PageParameters instance from the current page or creates a new instance if the page has no associated PageParameters. It then proceeds to add to the PageParameters instance all the parameters passed on the 'params' argument. If its using the PageParameters instance associated with the current Page that means the parameters of the page are permanently altered and any code later in the request cycle that depends upon these parameters is going to be broken. 
I believe the soluction would be to clone the PageParameters instance obtained from the Page, as in:

	PageParameters pageParameters = page.getPageParameters();
			if (pageParameters == null)
			{
				pageParameters = new PageParameters();
			}
			else
				pageParameters = (PageParameters)pageParameters.clone();

The above change doesn't seem to break any test cases.



",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202679,,,2008-07-09 12:44:25.0,,,,,,0|i0kfcv:,117305,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicketTester does not find HTML mark-up if custom location is used.,WICKET-1737,12399809,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,thrantal,kefker,kefker,08/Jul/08 12:20,18/Jul/08 03:36,14/Mar/19 03:09,17/Jul/08 09:33,1.3.4,1.4-M3,,,,,,,,,,1.3.5,1.4-RC1,,wicket,,,,,,,,,,,0,,,,,,"If a custom HTML mark-up location is used as described in the ApacheWicket Wiki  the wicketTester does not find mark-up to render pages.

refer to:
http://cwiki.apache.org/WICKET/control-where-html-files-are-loaded-from.html#ControlwhereHTMLfilesareloadedfrom-InWicket1.3

Nevertheless running the application with ApacheTomcat 6.0.16 everything renders fine.

Remark:
wicketTester has been instanciated using custom test application extended from the application used, overriding newSession for different purpose.
",,,,,,,,,,,,,,,,,17/Jul/08 02:42;thrantal;sample1737-1.3-SNAPSHOT.zip;https://issues.apache.org/jira/secure/attachment/12386256/sample1737-1.3-SNAPSHOT.zip,09/Jul/08 09:08;kefker;sample1737.zip;https://issues.apache.org/jira/secure/attachment/12385604/sample1737.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2008-07-09 03:24:42.948,,,no_permission,,,,,,,,,,,,202676,,,Fri Jul 18 03:36:09 UTC 2008,,,,,,0|i0kfd3:,117306,,,,,,,,"09/Jul/08 03:24;thrantal;Thanks for reporting, this sounds like a problem that impedes your unit testing a lot when using a custom markup location.

Would it be possible for you to provide a quickstart with a WicketTester test failing because of this?

Or better yet a patch against Wicket code that provides a failing unit test.

Meanwhile, in jdave-wicket there is an example of starting components with markup provided in a String
http://svn.laughingpanda.org/svn/jdave/trunk/jdave-wicket/src/java/jdave/wicket/ComponentSpecification.java

You might be able to do something similar to work around this issue, although it might involve too much code.","09/Jul/08 09:08;kefker;Please find attached a wicket 1.3.4 quickstart sample for this issue...

If you run the jetty server using mvn jetty:run or by Start.java the HomePage.class renders fine,
even if HTML mark-up is located in src/html and not in the classes folder.

If you run the TestHomePage.java as JUnit test if will fail with MarkupNotFoundException.",09/Jul/08 13:36;thrantal;Thanks! I'll try to have a look soon.,"12/Jul/08 19:54;thrantal;I've committed a fix in the 1.3 branch. Could you please try with the latest 1.3-SNAPSHOT? If it works, I'll also apply the fix in trunk (1.4).","16/Jul/08 14:50;kefker;no,

thanks for the patch, but unfortunately it did not solve the problem.

The mark-up is still not found during JUnit testing running mvn test
... which leads to org.apache.wicket.markup.MarkupNotFoundException:

DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_de_DE.html' on path [folders = [], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_de_DE.html' using classloader sun.misc.Launcher$AppClassLoader@11b86e7
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_de.html' on path [folders = [], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_de.html' using classloader sun.misc.Launcher$AppClassLoader@11b86e7
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage.html' on path [folders = [], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage.html' using classloader sun.misc.Launcher$AppClassLoader@11b86e7

As you can see my custom defined place has no been looked-up.

Allthough the page HomePage.java is rendered fine without  mark-up exception running mvn jetty:run.","17/Jul/08 02:40;thrantal;Hmm, what a pity. Let's see. With 1.3.4 I get this and mvn clean test failing

thrantal@poro:~/work/sample1737$ mvn clean test | grep 'Attempting to locate resource' | grep 'sample1737/HomePage'
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en_US.html' on path [folders = [], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en_US.html' using classloader sun.misc.Launcher$AppClassLoader@1a16869
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en.html' on path [folders = [], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en.html' using classloader sun.misc.Launcher$AppClassLoader@1a16869
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage.html' on path [folders = [], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage.html' using classloader sun.misc.Launcher$AppClassLoader@1a16869

Then I upgrade to 1.3-SNAPSHOT

thrantal@poro:~/work/sample1737$ perl -pe 's+<wicket.version>1.3.4</wicket.version>+<wicket.version>1.3-SNAPSHOT</wicket.version>+' -i pom.xml 

thrantal@poro:~/work/sample1737$ mvn clean test | grep 'Attempting to locate resource' | grep 'sample1737/HomePage'
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en_US.html' on path [folders = [src/html], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en_US.html' using classloader sun.misc.Launcher$AppClassLoader@1a16869
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en.html' on path [folders = [src/html], webapppaths: []]
DEBUG - ResourceStreamLocator      - Attempting to locate resource 'com/eds/java/wicket/sample1737/HomePage_en.html' using classloader sun.misc.Launcher$AppClassLoader@1a16869

and the build passes, too.

I have it working both with Sun Java  1.6.0_10-beta-b25 and 1.5.0_16-b02.

Are you sure you have got a fresh 1.3-SNAPSHOT? Could you try removing wicket 1.3-SNAPSHOT jars from your ~/m2/repository?

I'm also attaching my version of the quickstart with which I'm unable to produce the problem (sample1737-1.3-SNAPSHOT.zip) .",17/Jul/08 02:42;thrantal;A version of the error-producing quickstart with wicket dependency updated to 1.3-SNAPSHOT,"17/Jul/08 08:35;kefker;Yes!

May be this was a refresh problem - now it works!

Thank you very, very much for the fix and best regrads from Germany.","17/Jul/08 09:32;kefker;I just added your fix to your live project and now everything works fine with JUnit.
Thank you, once again for your support.","18/Jul/08 03:36;thrantal;You're welcome, and thanks to your for reporting and testing. I now applied this to trunk (1.4) as well.",,,,,,,,,,,,,,,,,,,,,,,
BookmarkableListenerInterfaceRequestTarget should call component.prepareForRender instead of beforeRender,WICKET-1725,12399437,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,knopp,knopp,02/Jul/08 11:32,02/Jul/08 14:38,14/Mar/19 03:09,02/Jul/08 14:38,1.4-M2,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,just calling beforeRender doesn't cleanup the PREPARED_FOR_RENDER flag,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202664,,,2008-07-02 11:32:53.0,,,,,,0|i0kfen:,117313,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"IValueMap redefines methods from parent interface Map<String, Object> which causes name clashes and redundancy",WICKET-1695,12397994,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,ivaynberg,pete,pete,10/Jun/08 22:16,29/Aug/08 10:33,14/Mar/19 03:09,20/Jun/08 17:26,,,,,,,,,,,,1.4-M3,,,,,,,,,,,,,,0,,,,,,"IValueMap redefines methods that are declared in the super interface Map<String, Object> which is redundant and also causes name clashes in IDEA (and probably other environments as well).

patch included.
",,,,,,,,,,,,,,,,,10/Jun/08 22:16;pete;name-clash-resolved.patch;https://issues.apache.org/jira/secure/attachment/12383792/name-clash-resolved.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202639,,,2008-06-10 22:16:11.0,,,,,,0|i0kfhr:,117327,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket complains that ValueMap$NullSafeKeyComparator is not serializable,WICKET-1694,12397989,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,frankbille,pete,pete,10/Jun/08 21:44,29/Aug/08 10:32,14/Mar/19 03:09,12/Jun/08 22:10,1.4-M3,,,,,,,,,,,1.4-M3,,,wicket,,,,,,,,,,,0,,,,,,"wicket complains that ValueMap$NullSafeKeyComparator is not serializable:

2070 ERROR [btpool0-19]   org.apache.wicket.util.lang.Objects     - Error serializing object class testapp.pages.ContactPage [object=[Page class = testapp.pages.ContactPage, id = 0, version = 0]]
org.apache.wicket.util.io.SerializableChecker$WicketNotSerializableException: Unable to serialize class: org.apache.wicket.util.value.ValueMap$NullSafeKeyComparator
Field hierarchy is:
  0 [class=testapp.pages.ContactPage, path=0]
    java.lang.Object org.apache.wicket.Component.data [class=[Lorg.apache.wicket.MetaDataEntry;]
      java.lang.Object org.apache.wicket.Component.data[0] [class=org.apache.wicket.MetaDataEntry]
        java.lang.Object org.apache.wicket.MetaDataEntry.object [class=org.apache.wicket.PageParameters]
          private java.util.Comparator java.util.TreeMap.comparator [class=org.apache.wicket.util.value.ValueMap$NullSafeKeyComparator] <----- field that is not serializable
	at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:349)
	at org.apache.wicket.util.io.SerializableChecker.checkFields(SerializableChecker.java:618)
	at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:541)
	at org.apache.wicket.util.io.SerializableChecker.checkFields(SerializableChecker.java:618)
	at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:541)
	at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:395)
	at org.apache.wicket.util.io.SerializableChecker.checkFields(SerializableChecker.java:618)
	at org.apache.wicket.util.io.SerializableChecker.check(SerializableChecker.java:541)
	at org.apache.wicket.util.io.SerializableChecker.writeObjectOverride(SerializableChecker.java:687)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:298)
	at org.apache.wicket.util.io.IObjectStreamFactory$DefaultObjectStreamFactory$2.writeObjectOverride(IObjectStreamFactory.java:127)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:298)
	at org.apache.wicket.util.lang.Objects.objectToByteArray(Objects.java:1100)
	at org.apache.wicket.protocol.http.pagestore.AbstractPageStore.serializePage(AbstractPageStore.java:200)
	at org.apache.wicket.protocol.http.pagestore.DiskPageStore.storePage(DiskPageStore.java:814)
	at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.put(SecondLevelCacheSessionStore.java:327)
	at org.apache.wicket.Session.requestDetached(Session.java:1391)
	at org.apache.wicket.RequestCycle.detach(RequestCycle.java:1113)
	at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1384)
	at org.apache.wicket.RequestCycle.request(RequestCycle.java:499)
	at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:387)
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:199)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:726)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
	at org.mortbay.jetty.Server.handle(Server.java:324)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:828)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:450)
Caused by: java.io.NotSerializableException: org.apache.wicket.util.value.ValueMap$NullSafeKeyComparator
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1081)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
	at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:391)
	at java.util.TreeMap.writeObject(TreeMap.java:1466)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
	at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1251)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1075)
	at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
	at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:391)
	at org.apache.wicket.protocol.http.pagestore.AbstractPageStore$PageSerializer.serializePage(AbstractPageStore.java:319)
	at org.apache.wicket.Page.writePageObject(Page.java:1335)
	at org.apache.wicket.Component.writeObject(Component.java:4303)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:585)
	at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
	at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
	at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
	at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
	at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)
	at org.apache.wicket.util.io.IObjectStreamFactory$DefaultObjectStreamFactory$2.writeObjectOverride(IObjectStreamFactory.java:119)
	... 24 more
",,,,,,,,,,,,,,,,,10/Jun/08 22:20;pete;let-null-safe-key-comparator-implement-serializable.patch;https://issues.apache.org/jira/secure/attachment/12383793/let-null-safe-key-comparator-implement-serializable.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-06-11 14:18:01.824,,,no_permission,,,,,,,,,,,,202638,,,Wed Jun 11 20:00:25 UTC 2008,,,,,,0|i0kfhz:,117328,,,,,,,,10/Jun/08 22:20;pete;this patch will let ValueMap$NullSafeKeyCompator implement java.io.Serializable,11/Jun/08 14:18;frankbille;I must have forgotten it. If you have the time could you write a generic test that make sure that a valuemap is serializable? (Then I wouldn't have forgotten it),11/Jun/08 20:00;pete;Use IDEA I say! When you enable the serialization error check options you will get serialization issues highlighted in yellow. just so much easier :-),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
concurrency issue / race condition in current wicket (will sometimes fail under stress),WICKET-1693,12397942,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,pete,pete,10/Jun/08 19:07,14/Dec/08 21:59,14/Mar/19 03:09,14/Dec/08 21:59,1.3.4,1.4-M3,,,,,,,,,,1.3.5,1.4-RC1,,wicket,,,,,,,,,,,1,,,,,,"In current wicket there seems to be a concurrency issue / race condition.

I did some stress test with JMeter on my very simple wicket app with a very simple stateful page (mostly to determine render performance of wicket in pages/sec). The test was done with approximately 200-500 concurrent threads.

After running for a few seconds NullPointerExceptions were appearing in the console log.

I uploaded the log which contains quite a few stacktraces.","jetty 6.1.9, mac os x 10.5.3, jdk 1.5, wicket 1.4.x trunk (#665751)",,,,,,,,,,,,,,,,10/Jun/08 21:57;pete;WorkBench.jmx;https://issues.apache.org/jira/secure/attachment/12383791/WorkBench.jmx,10/Jun/08 19:08;pete;stacktrace-stress-test.txt;https://issues.apache.org/jira/secure/attachment/12383768/stacktrace-stress-test.txt,20/Jun/08 08:07;pete;test-project-for-wicket-1.3.tar.gz;https://issues.apache.org/jira/secure/attachment/12384354/test-project-for-wicket-1.3.tar.gz,10/Jun/08 21:57;pete;test-project.tar.gz;https://issues.apache.org/jira/secure/attachment/12383790/test-project.tar.gz,,,,,4.0,,,,,,,,,,,,,,,,,,,2008-06-10 20:21:35.575,,,no_permission,,,,,,,,,,,,59314,,,Sun Dec 14 21:59:37 UTC 2008,,,,,,0|i0kfi7:,117329,,,,,,,,"10/Jun/08 20:21;knopp;That's weird, could you provide the URLs you are hitting? Do you e.g. create page with bookmarkable url and then hit it again with listener interface or is it something else? Looks like there might be problem with our locking being too relaxed.",10/Jun/08 21:57;pete;uploaded my sample project + jmeter config file to reproduce the error,"10/Jun/08 22:03;pete;If you want to run the test project to reproduce the bug.

un-tar-gz the project and open with IDEA 7 (didn't try with eclipse or IDEA?)

run TestLauncher.main()

open WorkBench.jmx in JMeter and press 'Start'

see NullPointerExceptions appearing in the log after a few seconds...

(at least it did on my macbook pro intel, mac os x 10.5.3, jvm 1.5)
",20/Jun/08 08:07;pete;upload the test project again without generics to test wicket-1.3 (current) with it. Unfortunately this issue seems to affect 1.3 _and_ 1.4.,14/Dec/08 21:59;jcompagner;seems that it is already fixed i can run the test for quite some times without any problems,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Memory leak in DiskPageStore,WICKET-1679,12397272,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,sfussenegger,sfussenegger,02/Jun/08 10:02,07/Jul/08 16:35,14/Mar/19 03:09,07/Jul/08 16:32,1.3.3,,,,,,,,,,,1.3.5,,,wicket,,,,,,,,,,,0,,,,,,"No entries are removed from DiskPageStore.sessionIdToEntryMap. I guess, this should be added to the DiskPageStore.unbind(String sessionId) method:

        public void unbind(String sessionId)
        {
                // FIX: replace get() with remove()
                SessionEntry entry = (SessionEntry)sessionIdToEntryMap.get(sessionId);
                if (entry != null)
                {
                        if (isSynchronous())
                        {
                                entry.unbind();
                        }
                        else
                        {
                                List pages = getPagesToSaveList(sessionId);
                                synchronized (pages)
                                {
                                        flushPagesToSaveList(sessionId, pages);
                                        entry.unbind();
                                }
                                pagesToSaveAll.remove(sessionId);
                        }
                }
        }",,900,900,,0%,900,900,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-07-07 16:32:47.484,,,no_permission,,,,,,,,,,,,202625,,,Mon Jul 07 16:32:47 UTC 2008,,,,,,0|i0kfiv:,117332,,,,,,,,02/Jun/08 10:03;sfussenegger;see also http://www.nabble.com/Memory-leak-in-DiskPageStore-td17597466.html,07/Jul/08 14:54;sfussenegger;I had my proposed fix in production for while now and it works very well. Could this please be fixed? It absolutely is a no-brainer!,"07/Jul/08 16:32;knopp;Sorry for the delay, i thought the fix was backported to1.3 already",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prolem with 'mouseactive' in wicket-autocomplete.js when AutoCompleteBehaviour is added (twice) during Ajax roundtrip,WICKET-1659,12396716,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,roland.huss,roland.huss,23/May/08 14:29,02/Jun/08 10:06,14/Mar/19 03:09,02/Jun/08 10:06,1.4-M1,,,,,,,,,,,1.3.4,1.4-M3,,wicket-extensions,,,,,,,,,,,0,,,,,,"There is a subtle problem, with the way how the autocomplete menu is created lazily in wicket-autocomplete.js when 
the AbstractAutoCompleteBehaviour is used dynamically in Ajax roundtrips e.g. for adding addition auto complete
fields dynamically.

The auto complete menu is added as an addition <div> to the document and stays there even after an Ajax roundtrip, so 
the <div> is reused, as well as mouse event listeners on the menu:

function getAutocompleteMenu() {
    var choiceDiv=document.getElementById(getMenuId());
    if (choiceDiv==null) {
       var container = document.createElement(""div"");
       ....
       container.onmouseout=function() {
          mouseactive=0;
       };
       container.onmousemove=function() {
          mouseactive=1;
       }
};


However, since Wicket.AutoComplete get initialized a second time for during the Ajax update, a new mouseactive variable is created, which 
is used in the closures for tweaking the even handling (onChange(), onBlur()), which never gets updated by these reused container (and hence
is always 0).

One simple solution to this problem is to cleanup the autocomplete menu in the initialize() if present:

function initialize(){
 
    // Remove the autocompletion menu if still present from
    // a previous call. This is required to properly register
    // the mouse event handler again (using the new stateful 'mouseactive'
    // variable which just gets created)
    var choiceDiv=document.getElementById(this.getMenuId());
    if (choiceDiv != null) {
        choiceDiv.parentNode.parentNode.removeChild(choiceDiv.parentNode);
    }

    .....
}
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-05-30 11:34:06.951,,,no_permission,,,,,,,,,,,,202606,,,Mon Jun 02 10:06:55 UTC 2008,,,,,,0|i0kfkf:,117339,,,,,,,,"30/May/08 11:34;jcompagner;applied on 1.3, still need to do it on 1.4",02/Jun/08 10:06;jcompagner;applied it also for 1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketTester#clickLink doesn't update lastRenderedPage,WICKET-1658,12396697,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,frankbille,slonopotamus,slonopotamus,23/May/08 09:51,27/May/08 20:54,14/Mar/19 03:09,27/May/08 20:54,1.3.3,1.4-M1,,,,,,,,,,1.3.4,1.4-M3,,wicket,,,,,,,,,,,2,,,,,,If clickLink is used on a link that calls setResponsePage then that page doesn't appear in WicketTester's lastRenderedPage.,,,,,,,,,,,,,,,,,26/May/08 05:42;slonopotamus;wicket-1658.tar.gz;https://issues.apache.org/jira/secure/attachment/12382749/wicket-1658.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-05-25 20:39:19.12,,,no_permission,,,,,,,,,,,,202605,,,Tue May 27 07:32:53 UTC 2008,,,,,,0|i0kfkn:,117340,,,,,,,,25/May/08 20:39;frankbille;I can't reproduce with latest trunk. Do you have a unit test that can show this? I have pushed two unit tests where I tried to reproduce this behavior. (see http://svn.apache.org/viewvc?view=rev&revision=660029),26/May/08 05:42;slonopotamus;Please find attached testcase.,26/May/08 20:15;frankbille;Fix pushed. Can you please confirm?,"27/May/08 06:13;slonopotamus;Confirmed, fixed. Great thanks!","27/May/08 07:32;frankbille;Ups, wrong way (still need to push fix to 1.3)",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Invalid argument in wicket-ajax.js (line 606) causes not loading ajax lazy load panel in IE,WICKET-1653,12396609,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,knopp,newgro,newgro,22/May/08 09:26,27/Nov/08 08:13,14/Mar/19 03:09,26/Nov/08 18:30,1.3.3,,,,,,,,,,,,,,wicket,,,,,,,,,,,7,,,,,,see description at http://www.nabble.com/javascript-error-in-internet-explorer-td16732896.html,IE6.0.2900.2180 on xp,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-05-29 13:17:43.297,,,no_permission,,,,,,,,,,,,59298,,,Thu Nov 27 07:32:12 UTC 2008,,,,,,0|i0kfkv:,117341,,,,,,,,29/May/08 13:17;slonopotamus;Any hope this will be fixed soon?,29/May/08 19:33;knopp;Any chance of providing quickstart that could reproduce this behavior? Does this also happen for wicket examples?,"20/Jun/08 14:53;ulrikem;The behaviour can be reproduced as follows:
1. You'll need a fresh install of Windows XP Service Pack 2, without any patches installed.
2. Whether IE6 or IE7 is irrelevant since the core issue seems to be in Microsoft XML Core Services (see below)
3. Navigate your IE to http://wicketstuff.org/wicket13/ajax/lazy-loading
4. Script error occurs as described above

Note that the problem does not turn up when going to http://www.wicket-library.com/wicket-examples/ajax/lazy-loading (I assume this is because that install of the examples is based on wicket version 1.2.7).

The actual cause why the error shows up is a bug in Microsoft XML Core Services. When installing Patch 936021 (http://support.microsoft.com/?kbid=936021), the problem disappears. But we can't rely on everybody patching their systems, can we...

Btw, the error does not only turn up in the GET case (AjaxLazyLoadPanel), but also in the POST case (I can't come up with an example here)","30/Oct/08 07:49;slonopotamus;Hmm... So you have bugreport, you have complaining users, you have steps to reproduce, you have a patch. Why not fix this bug and forget about it?",30/Oct/08 12:33;knopp;I bumped up the priority. I'll look at it as soon as I get XP working in vmware (which will be as soon as my new RAM arrives. Which can take a while unfortunately).,"25/Nov/08 18:08;tahitiangabriel;This bug seems to have been fixed in 1.3.5. I don't have this error anymore since i've upgraded to wicket 1.3.5.

Lines 840 and 889 in file wicket-ajax.js has been changed to :
if (typeof(Wicket.Focus.lastFocusId) != ""undefined"" && Wicket.Focus.lastFocusId != """" && Wicket.Focus.lastFocusId != null)
				    t.setRequestHeader(""Wicket-FocusedElementId"", Wicket.Focus.lastFocusId);



",27/Nov/08 07:32;slonopotamus;Closed too early. Nobody confirmed bug is fixed on 1.4 branch.,,,,,,,,,,,,,,,,,,,,,,,,,,
Bookmarkable / Stateless form submit bug,WICKET-1643,12396284,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,donohoedigital,donohoedigital,18/May/08 19:44,19/May/08 21:09,14/Mar/19 03:09,19/May/08 21:09,1.3.3,1.4-M1,,,,,,,,,,1.4-M3,,,wicket,,,,,,,,,,,0,,,,,,"A stateless bookmarkable form submission isn't working correctly for submissions after reboot or session expiration.  This may be due to the use of MixedParamUrlCodingStrategy:

 believe I've tracked down the problem to this code in BookmarkablePageRequestTargetUrlCodingStrategy: 

                // do some extra work for checking whether this is a normal request to a 
                // bookmarkable page, or a request to a stateless page (in which case a 
                // wicket:interface parameter should be available 
                final String interfaceParameter = (String)parameters 
                                .remove(WebRequestCodingStrategy.INTERFACE_PARAMETER_NAME); 

                if (interfaceParameter != null) 
                { 
                        WebRequestCodingStrategy.addInterfaceParameters(interfaceParameter, requestParameters); 
                        return new BookmarkableListenerInterfaceRequestTarget(pageMapName, 
                                        (Class)bookmarkablePageClassRef.get(), parameters, requestParameters 
                                                        .getComponentPath(), requestParameters.getInterfaceName(), 
                                        requestParameters.getVersionNumber()); 
                } 


The issue is that the 'parameters' will never contain the INTERFACE_PARAMETER_NAME because it would have been removed in WebRequestCodingStrategy:decode:215 which as far as I can tell is always called first (from RequestCycle.step.RESOLVE_TARGET:1233). 

The 'requestParameters' should already have the interface parameters, so it isn't clear why the addInterfaceParameters() logic is being called again (it is already called in WebRequestCodingStrategy:decode:200). 

I've got a patch forthcoming.

",Any,,,,,,,,,,,,,,,,18/May/08 19:53;donohoedigital;1643.patch;https://issues.apache.org/jira/secure/attachment/12382271/1643.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-05-19 21:09:37.132,,,no_permission,,,,,,,,,,,,202596,,,Mon May 19 21:09:37 UTC 2008,,,,,,0|i0kfmf:,117348,,,,,,,,18/May/08 19:53;donohoedigital;Cleaned up the code a bit as well. ,19/May/08 21:09;jcompagner;applied (still need to backport to 1.3),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"ModalWindow can not be ""reused""",WICKET-1637,12396087,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,pete,pete,15/May/08 09:49,29/Aug/08 10:30,14/Mar/19 03:09,29/Aug/08 10:30,,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,"ModalWindow's methods setContent(Component) and setPageCreator() are not properly implemented. You should be able to call setContent() and setPageCreator() in sequence (or vice versa).  However this will not work:

I use one general purpose ModalWindow in my page to display several types of popups in it (of type 'component' and 'page')

<body>
  <div wicket:id=""popup""></div>
  ...
</body>

some of these popups use setPageCreator() others use setContent().

however, once you use setContent(Component) you cannot use setPageCreator() anymore, because ModalWindow keeps the custom component / page creator stored and does not reset these properties as required.

fix is attached (very simple, contains only two new lines :)",,,,,,,,,,,,,,,,,15/May/08 09:51;pete;wicket-1637-modal-window-reuse.patch;https://issues.apache.org/jira/secure/attachment/12382098/wicket-1637-modal-window-reuse.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-07-18 08:18:50.487,,,no_permission,,,,,,,,,,,,202590,,,Fri Jul 18 10:54:39 UTC 2008,,,,,,0|i0kfmn:,117349,,,,,,,,15/May/08 09:51;pete;would be great if you could apply this patch for 1.4 _and_ 1.3,"18/Jul/08 08:18;jcompagner;this fix really breaks our code

if i do

setPageCreator(xxx)

then i dont except that i have to do that everytime.. Its a property that i set on my modal window
Why is it set to null internally suddenly??

Byt the way we reused 1 instance of a ModalWindow all the time without any problems (except now :( )","18/Jul/08 08:47;pete;@johan: However in the past you could not 'reuse' the popup if you mixed calls of setContent() and setPageCreator(). Could you elaborate a little more why this fix will break your code?

The problem in the past was:


  popup use #1 : popup.setContent(content1)

    internal state:   pageCreator = null, content = content1
    
      -> content1 will be shown


  popup use #2:   popup.setPageCreator(pc1)

    internal state:  pageCreator = pc1, content = content1

      -> content1 will still be shown (but pc1 was expected!)


popup.setContent(null) doesn't work ... you need to call popup.setContent(popup.empty)

however 'empty' is a private field in ModalWindow and can not be accessed.

so what's wrong with alternating the popup source by mutually exclusive calls of setContent() and setPageCreator() ?
",18/Jul/08 10:54;jcompagner;updating to the latest code fixed my problem i just had a build where the pageCreator was always set to null,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PagingNavigator.setEnabled(false) doesn't work ,WICKET-1619,12395827,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,xsergey,xsergey,12/May/08 12:18,06/Nov/08 14:47,14/Mar/19 03:09,04/Nov/08 22:11,1.3.3,,,,,,,,,,,1.3.6,1.4-RC2,,wicket,,,,,,,,,,,0,,,,,,"1. Create paging navigator PagingNavigator 
2. call PagingNavigator.setEnabled(false)
3. navigator will be rendered as enabled, if click on any link (""1"", ""2"" etc) - content of the data view will be changed.

In many cases it's necessary disable navigator, for example, when user need to edit only single line of DataView other controls need to be disabled. ",,,,,,,,,,,,,,WICKET-1919,,,04/Nov/08 17:26;jthomerson;1619.patch;https://issues.apache.org/jira/secure/attachment/12393316/1619.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-11-04 17:26:18.497,,,no_permission,,,,,,,,,,,,202576,,,Tue Nov 04 17:26:18 UTC 2008,,,,,,0|i0kfov:,117359,,,,,,,,"04/Nov/08 17:26;jthomerson;Here is one possible way of fixing this.  Two potential issues I see:

1 - setEnabled is being called on the links when they are added - this works if someone calls PagingNavigator.setEnabled(boolean) when they are creating it, but might not work if they override isEnabled and depend on some other criteria.... not sure, I'd have to think about that more.

2 - I made changes to Link.isEnabled - they should be double-checked to make sure that it's not going to cause other problems.

PS - this patch is relative to the ""wicket"" submodule",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
addDomReadyEvent unreliable for Safari,WICKET-1607,12395754,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,n8han,n8han,09/May/08 22:39,10/May/08 15:13,14/Mar/19 03:09,10/May/08 15:13,1.3.0-beta4,1.3.0-final,1.3.0-rc1,1.3.0-rc2,1.3.1,1.3.2,1.3.3,,,,,1.3.4,1.4-M2,,wicket,,,,,,,,,,,0,,,,,,"Because Safari doesn't support an onDomReady event, wicket-event.js emulates that behavior using timeouts when that browser is detected. However, the timeout is only set once, for 10ms; window.setTimeout() does not produce a repeating timeout. If the document object is not ready at that point, the registered functions are never called. Often it is ready, so the bug is masked.

I discovered this problem in a page that uses the DateTimeField  component, which uses onDomReady for its initialization. Sometimes the component works fine, other times nothing happens when you click. It's a fairly complicated page that apparently Safari may spend more than 10ms building.",Safari 3.1.1,,,,,,,,,,,,,,,,09/May/08 22:43;n8han;safari-domready.patch;https://issues.apache.org/jira/secure/attachment/12381802/safari-domready.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-05-10 15:13:57.905,,,no_permission,,,,,,,,,,,,202564,,,Sat May 10 15:13:57 UTC 2008,,,,,,0|i0kfp3:,117360,,,,,,,,"09/May/08 22:43;n8han;This patch sets a new timer if the DOM is not ready when an old timer fires. It also removes the mechanism to call clearTimeout(), which isn't necessary as the timer will have fired its one time (if it was ever set) before domReady was called.",10/May/08 15:13;jcompagner;applied,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typos in JavaDoc of IMarkupResourceStreamProvider.java,WICKET-1598,12395599,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,jcompagner,funkattack,funkattack,08/May/08 10:01,10/May/08 15:50,14/Mar/19 03:09,10/May/08 15:50,,,,,,,,,,,,1.3.4,1.4-M2,,,,,,,,,,,,,0,,,,,,"Index: src/main/java/org/apache/wicket/markup/IMarkupResourceStreamProvider.java
===================================================================
--- .	(revision 654460)
+++ .	(working copy)
@@ -20,8 +20,8 @@
 import org.apache.wicket.util.resource.IResourceStream;
 
 /**
- * To be implemented by MarkupContainer which whish to implement there own algorithms for loading
- * the markup resource stream.
+ * To be implemented by MarkupContainer which wish to implement their own algorithms for loading the
+ * markup resource stream.
  * <p>
  * Note: IResourceStreamLocators should be used in case the strategy to find a markup resource is
  * meant to be applied to ALL components of your application.
@@ -26,7 +26,7 @@
  * Note: IResourceStreamLocators should be used in case the strategy to find a markup resource is
  * meant to be applied to ALL components of your application.
  * <p>
- * Note: See IMarkupCacheKeyProvider if you whish to implement your own cache key algorithm, which
+ * Note: See IMarkupCacheKeyProvider if you wish to implement your own cache key algorithm, which
  * sometimes is useful when the MarkupContainer implements its own IMarkupResourceStreamProvider as
  * well.
  * 
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202557,,,2008-05-08 10:01:21.0,,,,,,0|i0kfpj:,117362,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
We should mark session dirty when at least one page is touched,WICKET-1570,12394861,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,knopp,knopp,27/Apr/08 11:21,27/Apr/08 12:48,14/Mar/19 03:09,27/Apr/08 12:48,1.3.3,,,,,,,,,,,1.3.4,1.4-M1,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202529,,,2008-04-27 11:21:09.0,,,,,,0|i0kfrr:,117372,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxButton break form data when IRequestSettings.#getResponseRequestEncoding is not UTF-8.,WICKET-1569,12394854,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,t_yano,t_yano,27/Apr/08 08:26,11/May/08 15:56,14/Mar/19 03:09,11/May/08 15:56,1.3.3,,,,,,,,,,,1.3.4,1.4-M2,,wicket,,,,,,,,,,,0,,,,,,"The AjaxButton encode all of input string by 'encodeUrlComponent()' JavaScript function at Wicket.Form.encode. The function encode the input string always by UTF-8 (it's a specification of ECMAScript), but WicketFilter always decode it by the encoding defined by the IRequestSettings#setResponseRequestEncoding() method.

So if the response encoding is not UTF-8, all the input data will be broken at the decoding time. As a workaround,  we can avoid the problem by setting the output encoding to ""UTF-8"". But many web sites is using other encodings than UTF-8. For example, people often use ""Shift_JIS"" encoding for web site in Japan(It is a most popular encoding in Japan).

To fix this problem, I think, you need to change WicketFilter class and check request headers when you decode input data. If the request has a 'wicket-ajax' header and the value is 'true', you need decode the posted data by 'UTF-8'. Otherwise decode them by the encoding defined by IRequestSettings#setResponseRequestEncoding();

The changed code is below. It is a modification code at line 286 of WicketFilter class of Wicket 1.3.3.
======================
if (servletRequest.getCharacterEncoding() == null) {
    try {
        // It this request is a wicket-ajax request, we need decode the
        // request always by UTF-8, because the request data is encoded by
        // encodeUrlComponent() JavaScript function, which always encode data 
        // by UTF-8.
        String wicketAjaxHeader = servletRequest.getHeader(""wicket-ajax"");
        if(wicketAjaxHeader != null && wicketAjaxHeader.equals(""true"")) {
            servletRequest.setCharacterEncoding(""UTF-8"");
        } else {
            // The encoding defined by the wicket settings is used to
            // encode the responses. Thus, it is reasonable to assume
            // the request has the same encoding. This is especially
            // important for forms and form parameters.
            servletRequest.setCharacterEncoding(webApplication.getRequestCycleSettings().getResponseRequestEncoding());
        }
    } catch (UnsupportedEncodingException ex) {
        throw new WicketRuntimeException(ex.getMessage());
    }
}
=======================

 Thanks.

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-05-04 16:13:53.128,,,no_permission,,,,,,,,,,,,202528,,,Sun May 11 15:56:49 UTC 2008,,,,,,0|i0kfrz:,117373,,,,,,,,"04/May/08 16:13;jcompagner;i can apply this patch just fine, i am just thinking will it always be true?
for example i see that we use an if:

if (encodeURIComponent) {
        return encodeURIComponent(text);
    } else {
        return escape(text);
    }
then we just escape()

what happens then? Or is that encode always used?","07/May/08 08:01;t_yano;encodeURIComponent is introduced by JavaScript 1.5, and the browsers, which Wicket officially support for Ajax (http://cwiki.apache.org/WICKET/faqs.html#FAQs-WhichbrowsershavebeentestedwithWicketAJAX%253F), are supporting JavaScript 1.5.

So encodeURIComponent is used always on the browsers.

  The effect of escape/unescape functions is depend on browswers, not on a specification. And escape/unescape functions can not encode/decode multi-byte strings correctly. So I never use that in my program.

  But the functions work correctly for single-byte string. So the if-else block is effective yet for such users with old browser. If you want to support old browsers, you can leave the block as is.

  There is no way to support old browsers with multi-byte string. You can simplly say them: Use a new browser supporting JavaScript 1.5.","07/May/08 10:28;t_yano;Today I made a discussion about this issue with my friends, and could get some good opinions from them.

- the use of escape and encodeURIComponent is different. escape() is not the function to encode URI. So it should not be used at same place with encodeURIComponent.

  - the purpose of encodeURIComponent function is: To transform URI elements into safely postable form for servers.
  - the purpose of escape function is: To transform raw string data into safely displayable form for browsers.
  
therefore, now I think that you should not use the escape function to encode POST data, should change the if-else block and use only encodeURIComponent function.

Thanks.","11/May/08 15:56;jcompagner;are you sure escape is incorrect? What does a norma form post do? if i would type ""this is me"" in a text field? Would the spaces be converted to %20 or not?
Dont know so i let the escape be.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Non-existant package resources lazily added to pool,WICKET-1556,12394407,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,nathan@technically.us,nathan@technically.us,21/Apr/08 03:35,04/May/08 15:18,14/Mar/19 03:09,04/May/08 15:18,1.3.3,,,,,,,,,,,1.3.4,,,wicket,,,,,,,,,,,0,,,,,,"When a SharedResourceRequestTarget is looking for a resource respond to the request, it can (improperly) create a package resource that does not exist and add it to the shared resource pool. While this doesn't pose an immediate problem, it has a seriously side effect for auto-link resolution in subsequent requests. If a local-specific potential name coincides with the non-existant shared resource, that bad reference will be used to generate the auto-link URL.

For example:
A page refers to href=""style.css"" in an autolink. This loads correctly, UNTIL anyone on the internet requests ""style_en.css"" (which could be an old resource name still known to crawlers). Now that name is added to the resource pool, and the next request for locale ""en"" will find that bad resource in pool, thinking it is a good local-specific stylesheet, and render href=""style_en.css"" for the page. This resource does not exist, will not be found, and all ""en"" users will now see the page without styles.

This is fully reproducible in Wicket 1.3.3, while 1.3.2 is not susceptible. I'm not sure where the effective code change was (it doesn't seem to be in this chunk of code), but this particular problem can be easily fixed by checking if a resource exists before trying to ""get"" it and add it to the pool. Will upload patch.
",any environment,,,,,,,,,,,,,,,,21/Apr/08 03:35;nathan@technically.us;lazy-res.diff;https://issues.apache.org/jira/secure/attachment/12380593/lazy-res.diff,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202517,,,Mon Apr 21 03:35:54 UTC 2008,,,,,,0|i0kft3:,117378,,,,,,,,"21/Apr/08 03:35;nathan@technically.us;checks for existence before get, add",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractTree shouldn't require tree nodes to implement TreeNode,WICKET-1555,12394395,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,knopp,knopp,20/Apr/08 19:55,02/May/08 19:20,14/Mar/19 03:09,02/May/08 19:20,,,,,,,,,,,,1.4-M1,,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-05-02 19:20:38.517,,,no_permission,,,,,,,,,,,,202516,,,Fri May 02 19:20:38 UTC 2008,,,,,,0|i0kftb:,117379,,,,,,,,02/May/08 19:20;frankbille;Closed by request,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""Using your own built artifacts"" should point out 1.4-SNAPSHOT",WICKET-1554,12394387,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,frankbille,jlaskowski,jlaskowski,20/Apr/08 12:51,20/Apr/08 14:52,14/Mar/19 03:09,20/Apr/08 14:52,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,The document Building from SVN in Using your own built artifacts (http://wicket.apache.org/building-from-svn.html) mentiones 1.3-SNAPSHOT as the latest version of Wicket built from its sources. It should be 1.4-SNAPSHOT.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-04-20 14:52:20.209,,,no_permission,,,,,,,,,,,,202515,,,Sun Apr 20 14:52:20 UTC 2008,,,,,,0|i0kftj:,117380,,,,,,,,"20/Apr/08 14:52;frankbille;Done, thx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
javascript status variable hides the window.status variable because it is not declared as a far in wicket-ajax.js,WICKET-1551,12394303,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,jcompagner,jcompagner,18/Apr/08 12:15,18/Apr/08 12:17,14/Mar/19 03:09,18/Apr/08 12:17,1.3.3,,,,,,,,,,,1.3.4,1.4-M1,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202512,,,2008-04-18 12:15:49.0,,,,,,0|i0kftr:,117381,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Memory leak with PropertyResolver (in running test suites),WICKET-1549,12394224,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,tkurki,tkurki,17/Apr/08 17:33,11/May/08 10:45,14/Mar/19 03:09,11/May/08 10:45,1.3.2,,,,,,,,,,,1.3.4,1.4-M2,,wicket,,,,,,,,,,,0,,,,,,"Memory requirement  for running the test suite for a Wicket application increase as the number of constructed Applications (for example BaseWicketTester.DummyWebApplication) goes up.

The static applicationToClassesToGetAndSetters Map holds Applications as keys. There is no equals/hashCode so a reference for each newly constructed test Application will be stuffed in there and not reused for identical Applications.

I solved the problem for my project by implementing equals & hashCode in our DummyProjectXApplication.

There seems to be something related going on in WICKET-625 with Application.internalDestroy, which removes the Application reference when the webapp is unloaded. After a test is done with the Application it might use the same mechanism for ""unloading"" the application?",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-05-11 10:45:33.103,,,no_permission,,,,,,,,,,,,202510,,,Sun May 11 10:45:33 UTC 2008,,,,,,0|i0kftz:,117382,,,,,,,,11/May/08 10:45;jcompagner;changed that MockWebApplication (the base class of wicket tester) will call destroy on the real application object.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generified IConverter,WICKET-1532,12393907,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,shake,shake,14/Apr/08 19:52,14/Apr/08 20:42,14/Mar/19 03:09,14/Apr/08 20:42,1.4-M1,,,,,,,,,,,1.4-M1,,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,14/Apr/08 19:54;shake;iconverter_generics.patch;https://issues.apache.org/jira/secure/attachment/12380099/iconverter_generics.patch,14/Apr/08 19:53;shake;iconverter_generics.patch;https://issues.apache.org/jira/secure/attachment/12380098/iconverter_generics.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2008-04-14 20:42:19.401,,,no_permission,,,,,,,,,,,,202494,,,Mon Apr 14 20:42:19 UTC 2008,,,,,,0|i0kfvr:,117390,,,,,,,,"14/Apr/08 19:54;shake;Hmm, forgot two files... This one should be better(?)",14/Apr/08 20:42;jcompagner;applied,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DataView generified,WICKET-1514,12393659,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,jcompagner,shake,shake,10/Apr/08 14:02,12/Apr/08 15:31,14/Mar/19 03:09,12/Apr/08 15:31,1.4-M1,,,,,,,,,,,1.4-M1,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,10/Apr/08 14:02;shake;Generified_DataView.patch;https://issues.apache.org/jira/secure/attachment/12379846/Generified_DataView.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-04-12 15:31:46.375,,,no_permission,,,,,,,,,,,,202477,,,Sat Apr 12 15:31:46 UTC 2008,,,,,,0|i0kfwv:,117395,,,,,,,,12/Apr/08 15:31;jcompagner;applied,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FormDispatcherRequest creates invalid parameter map,WICKET-1510,12393600,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,knopp,knopp,09/Apr/08 23:53,09/Apr/08 23:53,14/Mar/19 03:09,09/Apr/08 23:53,1.3.3,,,,,,,,,,,1.3.4,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202473,,,2008-04-09 23:53:08.0,,,,,,0|i0kfxj:,117398,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MarkupCache style/variation/locale support broken,WICKET-1507,12393554,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,tesh11,tesh11,09/Apr/08 18:01,07/May/08 22:22,14/Mar/19 03:09,07/May/08 22:22,1.3.2,,,,,,,,,,,1.3.4,1.4-M2,,wicket,,,,,,,,,,,0,,,,,,"We're running into a problem with the change made for this issue: WICKET-1370

Basically, if you have a situation like this where the Login page extends DefaultPage and uses <wicket:extend>:

Login.html
DefaultPage.html
DefaultPage_style1.html
DefaultPage_style2.html

The markup for DefaultPage will always be based on the first style the site is hit with.  This is because the location string (""Login.html"") hasn't changed with the style change.",,,,,,,,,,,,,,WICKET-1370,,,07/May/08 15:12;jthomerson;WICKET-1507-FIX-and-TESTCASE.patch;https://issues.apache.org/jira/secure/attachment/12381602/WICKET-1507-FIX-and-TESTCASE.patch,07/May/08 13:48;jthomerson;WICKET-1507-testcase.patch;https://issues.apache.org/jira/secure/attachment/12381597/WICKET-1507-testcase.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2008-05-07 05:12:41.266,,,no_permission,,,,,,,,,,,,59242,,,Wed May 07 22:22:56 UTC 2008,,,,,,0|i0kfxz:,117400,,,,,,,,"07/May/08 05:12;jthomerson;I tried writing a test case that would reproduce this so that I could work on a fix.  I could not reproduce with this test case, which I think covers the described situation.  I am testing on TRUNK, which is currently 1.4-SNAPSHOT, and the issue was reported with 1.3.2, so it might have been fixed between now and then.

Attached patch is the test case I wrote.  ","07/May/08 07:15;jcompagner;So is this fixed or not?
Can somebody who does see this in their webapp try it out with trunk/snapshot (1.3 or 1.4)?","07/May/08 08:09;tesh11;I haven't had a chance to test this out yet but it appears as though the test case is testing a slightly different scenario which I would expect to work from looking at the code.  In the example above, the page we're trying to load doesn't have different markup for style1 or style2 but the base does.  It will take me some time to get set up to verify this myself, but if someone could change the testcase to only have src/test/java/org/apache/wicket/markup/MarkupInheritanceExtension_1.html without the separate style1 and style2 files, then I think that will illustrate the problem.

Thanks","07/May/08 13:47;jthomerson;Thanks for the clarification - I can now reproduce by modifying the test I had.  I will try to see if I can find a fix, or this will at least (hopefully) help one of the core committers by giving them a reproducible test to start with and fix.  I'll update the patch above with the new one.",07/May/08 13:48;jthomerson;This is the modified test case that does fail.,"07/May/08 14:48;tesh11;Thanks!  If I get a chance, I'll dig into the code again and see if I have any suggestions on how we might be able to fix this.","07/May/08 15:12;jthomerson;This is a fix for this bug, including a testcase to reproduce it without the fix applied.
Ran all tests, and they all still succeeded.","07/May/08 22:22;jcompagner;i applied the patch, i changed it a little bit more so that the location string that a MergedMarkup will get it from the base Markup
That base markup can i guess be a MergedMarkup again (extend/child/extend/child)",,,,,,,,,,,,,,,,,,,,,,,,,
MarkupCache.putIntoCache doesn't behave correctly!!,WICKET-1501,12393492,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,jkriesten,jkriesten,09/Apr/08 08:09,09/Apr/08 13:16,14/Mar/19 03:09,09/Apr/08 13:16,1.3.3,,,,,,,,,,,1.3.4,1.4-M1,,wicket,,,,,,,,,,,0,,,,,,"'putIntoCache' checks for the locationString not to be null instead of the cacheKey!

This way you always get old markup returned instead of the freshly supplied markup which shouldn't be cached at all.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-04-09 11:19:35.875,,,no_permission,,,,,,,,,,,,59261,,,Wed Apr 09 13:08:52 UTC 2008,,,,,,0|i0kfyf:,117402,,,,,,,,09/Apr/08 08:26;jkriesten;I don't actually understand why the markup is loaded from the markupCache in putIntoCache at all - it's already provided as a method argument...,"09/Apr/08 11:19;jcompagner;i dont get it, the method putIntoCache SHOULD check for the location string. Because that is the one that goes into the markupCache
the cacheKey doesn't go into that markupCache at all anymore that only goes into the markupKeyCache

So as far as i can see the putIntoCache method is fine. 
And why it also can return it is this:

// We don't lock the cache while loading a markup. Thus it may
				// happen that the very same markup gets loaded twice (the first
				// markup being loaded, but not yet in the cache, and another
				// request requesting the very same markup). Since markup
				// loading in avg takes less than 100ms, it is not really an
				// issue. For consistency reasons however, we should always use
				// the markup loaded first which is why it gets returned.
				markup = (Markup)markupCache.get(locationString);

So thats threadding.
putIntoCache puts the markup into the cache if not there or if it is there returns the one that is in there (the first one parsed)
If you have new stuff then that is not the place to overwrite markup. You first have to call 
public final Markup removeMarkup(final String cacheKey)

","09/Apr/08 11:55;jkriesten;Johan -

I return 'null' for the cacheKey of my template. That's fine. The Markup isn't cached _under_this_ key.

The problem arises because wicket caches the Markup in putIntoCache also under the locationString - which has nothing to do with the cacheKey. So, markup is cached under two keys by wicket, which leads to the problem. 

Regards, --- Jan.","09/Apr/08 12:14;jcompagner;cache keys shouldn't be the keys that go into the markpuCache
they should only go into the markupKeyCache map

Where is a cache key going into the markupCache?

it is now 2 fold you have:

Map<CacheKey,LocationString>
Map<LocationString,Markup>

that is how it should work now.

","09/Apr/08 12:28;jkriesten;hi johan,

huh?? i have no cache key for the template - it just shall not be handled by wicket's cache system (it's already cached by freemarker and changes every request)....

so - not having a cache key means i can't lookup the locationString in the first map, right?

regards, --- jan.","09/Apr/08 12:41;jcompagner;if you have a null cache key then markup cache should ignore it completely
Where is i still put into the cache even if the cache key is null?","09/Apr/08 12:52;jkriesten;That's what I was trying to say:

Even though cacheKey is 'null' - the markup is still cached under locationString.

Since the resulting Markup is always returned from 'putIntoCache' - the originally updated markup in the parameter to 'putIntoCache' is thrown away and replaced by the old cached one...

Regards, --- Jan.","09/Apr/08 13:08;jcompagner;ahh ok so loadMarkup is the method that is incorrect.

I will fix that that putInCache is not called when cache key == null",,,,,,,,,,,,,,,,,,,,,,,,,
IntegerConvert cannot handle locale specific input/output,WICKET-1494,12393364,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,matthewyoung,matthewyoung,08/Apr/08 04:22,05/Oct/08 19:03,14/Mar/19 03:09,05/Oct/08 19:03,1.3.3,,,,,,,,,,,1.3.5,,,wicket,,,,,,,,,,,0,,,,,,"IntegerConverter, and possibly anything extends AbstractIntegerConverter cannot parse locale formatted input or output locale formatted string.  E.g., IntegerConverter.convertToObject(""999,999"",  new Locale(""us"")) raise parseexception.  IntegerConverter.convertToString(new Integer(""999999"", new Locale(""us""))  => ""999999"" instead of ""999,999"".

This is because in AbstractIntegerConverter:

	public NumberFormat getNumberFormat(Locale locale)
	{
		NumberFormat numberFormat = (NumberFormat)numberFormats.get(locale);
		if (numberFormat == null)
		{
			numberFormat = NumberFormat.getIntegerInstance(locale);
			numberFormat.setParseIntegerOnly(true);
			numberFormat.setGroupingUsed(false);     <<<<<<<<<<<<<<<<<<<<<<<<<<  this is the problem
			numberFormats.put(locale, numberFormat);
		}
		return (NumberFormat)numberFormat.clone();
	}

Is it possible to remove ""numberFormat.setGroupingUsed(false);""?",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-10-05 19:03:57.704,,,no_permission,,,,,,,,,,,,202459,,,Sun Oct 05 19:03:57 UTC 2008,,,,,,0|i0kfz3:,117405,,,,,,,,"05/Oct/08 19:03;jcompagner;the problem is that then others are not happy anymore: WICKET-1421

and i dont think i want by default grouping enabled because that is most of the time just plain ugly that you get 1.000 or 1,000 if you just want to print 1000

so what i did was lift the final of all the converters we have so you can override getNumberFormat(Locale) on it and do what ever you want.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbortWithWebErrorCodeException in onBeforeRender causes WicketRuntimeException,WICKET-1478,12393099,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,msparer,msparer,04/Apr/08 07:46,05/Oct/08 16:00,14/Mar/19 03:09,05/Oct/08 16:00,1.3.2,,,,,,,,,,,1.3.5,,,wicket,,,,,,,,,,,0,,,,,,"Using custom error pages as described on http://cwiki.apache.org/WICKET/error-pages-and-feedback-messages.html, a wicket RTE gets thrown ""There is no application attached to current thread [threadname]"" when a AbortWithWebErrorCodeException is thrown in the onBeforeRender method of a WebPage. Note that this _only_ happens when using a custom error page defined in web.xml.

See attached quickstart for the complete stacktrace (and my usecase)
See also the mailinglist entry on http://www.nabble.com/Throw-AbortWithWebErrorCodeException-in-onBeforeRender-to16446341.html#a16473849",,,,,,,,,,,,,,,,,04/Apr/08 07:46;msparer;quickstart404.jar;https://issues.apache.org/jira/secure/attachment/12379365/quickstart404.jar,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-04-06 11:41:32.751,,,no_permission,,,,,,,,,,,,202445,,,Sun Oct 05 16:00:55 UTC 2008,,,,,,0|i0kg07:,117410,,,,,,,,"06/Apr/08 11:41;jcompagner;OK, when setting an error status (httpServletResponse.sendError(errorCode)), the container will try to resolve that in that call itself. This will result in a second wicket call in the same thread. Because of that we will clean all thread locals like RequestCycle and Application. I do reset those now to the previous values.

The problem is that we have more thread locals which also could be affected. Like Sessions thread locals (dirty pages) Also the RequestContext for our portlet support how to handle that?
We need to look at this in a next release a bit more (1.4)

So for the most part this is fixed (if not everything) for the next 1.3.x release.

Ate: can you quickly look at this code in WicketFilter:
				// unset the application thread local if it didn't exist already.
				if (previous == null)
				{
					Application.unset();
					RequestContext.unset();
				}
				else
				{
					Application.set(previous);
				}
You see i dont do anything with RequestContext when the previous app was there..
Can i do that? Or is this not an issue at all in portlets?

Reassign to me when you have looked at it.","06/Apr/08 13:13;adouma;Johan,

I don't have time to evaluate this right now: this is something too tricky to be able to review by looking at the code itself. I need to test this out in the portal to be sure what happens.
What I'm curious about though is: why do you ""reset"" the Application to previous? Why can't you just clear it properly (e.g. setting the threadlocals really to null) instead?

I'm willing to test this out and see how it works when running as a portlet, but it'll have to wait until after the ApacheCon (so next week the earliest).
For now, you're changes should be fine for plain webapps as the default non-portlet RequestContext instance doesn't keep any state anyway (the PortletRequestContext does however).","06/Apr/08 16:56;jcompagner;We did clean it up, but the problem is that it is already set for the first request
As i said doing this:

httpServletResponse.sendError(errorCode)

will result in a redispatch of that code immediately so inside that call this is sort of the stacktrace:

wicketfilter.doget() 
wicketfilter.dofilter() -> does the second request
jettycode
httpServletResponse.sendError(errorCode)
WebErrorResponseRequestTarget.response()
wicketfilter.doget()
wicketfilter.dofilter()  -> does the first request

so you see if we would cleanup ALL the thread locals in the second request wicketfilter.
We have a problem when the  WebErrorResponseRequestTarget.response() comes back
Because everything is cleared, The Application is gone the RequestCycle is gone.
So everything that comes after that (detach and so on) will bomb out because there are no more threadlocals.


","10/Apr/08 13:54;jcompagner;Also the discussion there is about session leakage and so on on the mailing list
i also did get some mails where people where checking Application/Session/RequestCycle and RequestContext
if they where still there at points (complete beginning of a request)
And they told me that RequestContext was still there quite a lot.. So that seems wrong somehow i am also investigation that some more
But if you could check for places where the RequestContext is not cleared (and application and session are) ...

",27/Sep/08 06:21;ivaynberg;where are we with this johan?,"05/Oct/08 16:00;jcompagner;i am closing this one, should be fixed",,,,,,,,,,,,,,,,,,,,,,,,,,,
Referencing Page may cause StackOverflowError,WICKET-1476,12393027,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,seitz,seitz,03/Apr/08 13:38,06/Apr/08 21:06,14/Mar/19 03:09,06/Apr/08 21:06,1.3.2,,,,,,,,,,,1.3.4,,,wicket,,,,,,,,,,,0,,,,,,"scenario:
+ 2 pages. each page stores itself in the session in the constructor ( -> last accessed instance of a page is stored in session (which ultimately is rather bad in the first place))
+ have a final reference to session in page's constructor
+ access page 1 mounted as ""first"" (-> pageId=0)
+ access page 2 mounted as ""second"" several times so that new pages are created until page1 gets serialized
+ access the serialized page 1 via ""/first.0""
+ StackOverflowError

",,,,,,,,,,,,,,,,,06/Apr/08 14:56;seitz;StackOverflowBug.zip;https://issues.apache.org/jira/secure/attachment/12379504/StackOverflowBug.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-04-03 14:20:12.696,,,no_permission,,,,,,,,,,,,202443,,,Sun Apr 06 21:06:42 UTC 2008,,,,,,0|i0kg0f:,117411,,,,,,,,03/Apr/08 13:39;seitz;try attached quickstart to reproduce the error,03/Apr/08 14:20;jcompagner;hmm final reference to the session? that isn't the best thing to do...,"03/Apr/08 15:39;seitz;agreed, it still causes the StackOverFlowError.
there may be other ways to hold on to a reference to a page.
this is just meant as an example (maybe a bad one) to reproduce and possibly fix the error.

we can also decide not to encourage such ""mistakes"" by keeping the flooded stack...","06/Apr/08 10:39;jcompagner;I am trying and trying but i will not get a stackoverflow

also final MySession session in the constructor doesn't have any effect on what is serialized
so i changed it to:

public class FirstPage extends WebPage {

	final MySession session = MySession.get();
	public FirstPage() {

		session.setHomepage(this);
		setStatelessHint(false);
	}
}

but also then it works fine for me.

What platform and jvm versions are you testing?
","06/Apr/08 15:02;seitz;Johan, seems like I uploaded a wrong export of the project. sorry for this.
the new quickstart ends up in a StackOverflowError on my machine (Vistax64, JDK1.6.0_04-32bit)

1) go to http://localhost:8080/first (which redirects to first.0)
2) manually enter the address http://localhost:8080/second (-> second.1)
3) manually enter http://localhost:8080/first.0 in the address bar (don't use the back button)
4) StackOverflowError

","06/Apr/08 21:06;jcompagner;the example could be even a bit simpler
The problem was that when pages where references in Component (metadata) or MarkupContainter (childs)
then the page readObject isnt yet called to register the page as being read in.
Moved to Component now so that it is in the lowest wicket class.",,,,,,,,,,,,,,,,,,,,,,,,,,,
BaseWicketTester.isComponentOnAjaxResponse() test is too strong,WICKET-1473,12392914,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,frankbille,lefevre00,lefevre00,02/Apr/08 09:32,04/Jun/08 07:26,14/Mar/19 03:09,04/Jun/08 07:26,1.3.2,1.4-M2,,,,,,,,,,1.3.4,1.4-M3,,wicket,,,,,,,,,,,0,,,,,,"Using 1.3.0 but still present in 1.3.2 source.

The response i got from the ajax request was :

<?xml version=""1.0"" encoding=""UTF-8""?><ajax-response><header-contribution encoding=""wicket1"" ><![CDATA[<head xmlns:wicket=""http://wicket.apache.org""><script type=""text/javascript"" src=""resources/org.apache.wicket.markup.html.WicketEventReference/wicket-event.js""></script>
<script type=""text/javascript"" src=""resources/org.apache.wicket.ajax.WicketAjaxReference/wicket-ajax.js""></script>
<script type=""text/javascript"" src=""resources/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/wicket-ajax-debug.js""></script>
<script type=""text/javascript"" id=""wicket-ajax-debug-enable""><!--/*--><![CDATA[/*><!--*/
wicketAjaxDebugEnable=true;
/*-->]^]^>*/</script>

<script type=""text/javascript"" src=""resources/org.apache.wicket.extensions.ajax.markup.html.autocomplete.AutoCompleteBehavior/wicket-autocomplete.js""></script>
<script type=""text/javascript"" src=""resources/com.amdm.ajf.wicket.component.autocomplete.ImprovedAutoCompleteBehavior/improved-autocomplete.js""></script>
</head>]]></header-contribution><component id=""ville9""  encoding=""wicket1"" ><![CDATA[<input value=""TOULOUSE"" autocomplete=""off"" maxlength=""26"" type=""text"" onfocus=""this.className='focus';"" size=""28"" name=""view:adresse:adresseInner:villeFrancaiseDiv:ville"" onchange=""wicketThrottler.throttle( 'th1', 200, function() { var wcall=wicketAjaxPost('?wicket:interface=:0:updateExpertWizard:form:view:adresse:adresseInner:villeFrancaiseDiv:ville::IBehaviorListener:3:-1', wicketSerialize(Wicket.$('ville9')),null,null, function() {return Wicket.$('ville9') != null;}.bind(this));});"" id=""ville9"" onblur=""this.className='normal';""/><script type=""text/javascript""><!--/*--><![CDATA[/*><!--*/
new Wicket.AutoComplete('ville9','?wicket:interface=:0:updateExpertWizard:form:view:adresse:adresseInner:villeFrancaiseDiv:ville::IActivePageBehaviorListener:1:-1&amp;wicket:ignoreIfNotActive=true',false);
/*-->]^]^>*/</script>
]]></component><component id=""codePostalBinde8""  encoding=""wicket1"" ><![CDATA[<input value=""34200"" autocomplete=""off"" maxlength=""5"" type=""text"" onfocus=""this.className='focus';"" size=""5"" name=""view:adresse:adresseInner:villeFrancaiseDiv:codePostalBinde"" onchange=""wicketThrottler.throttle( 'th2', 200, function() { var wcall=wicketAjaxPost('?wicket:interface=:0:updateExpertWizard:form:view:adresse:adresseInner:villeFrancaiseDiv:codePostalBinde::IBehaviorListener:3:-1', wicketSerialize(Wicket.$('codePostalBinde8')),null,null, function() {return Wicket.$('codePostalBinde8') != null;}.bind(this));});"" id=""codePostalBinde8"" onblur=""this.className='normal';""/><script type=""text/javascript""><!--/*--><![CDATA[/*><!--*/
new Wicket.AutoComplete('codePostalBinde8','?wicket:interface=:0:updateExpertWizard:form:view:adresse:adresseInner:villeFrancaiseDiv:codePostalBinde::IActivePageBehaviorListener:1:-1&amp;wicket:ignoreIfNotActive=true',false);
/*-->]^]^>*/</script>
]]></component></ajax-response>

And my test is :

tester.assertComponentOnAjaxResponse(""updateExpertWizard:form:view:adresse:adresseInner:villeFrancaiseDiv:ville"");

It fails in BaseWicketTester.isComponentOnAjaxResponse() :

// Look for that the component is on the response, using the markup id
		boolean isComponentInAjaxResponse = ajaxResponse.matches(""(?s).*<component id=\"""" +
			markupId + ""\"" ?>.*"");
		failMessage = ""Component wasn't found in the AJAX response"";

because of the attribut  { encoding=""wicket1"" } present in the component tag. The regex must be sweeter like (for example):
""(?s).*<component id=\"""" + markupId  + ""\"" .* ?>.*"" (or much much better ;-)
",Testing my ajax autocomplete usage,1800,1800,,0%,1800,1800,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-06-04 07:16:31.173,,,no_permission,,,,,,,,,,,,202440,,,Wed Jun 04 07:16:31 UTC 2008,,,,,,0|i0kg0n:,117412,,,,,,,,04/Jun/08 07:16;frankbille;I'm ready to commit the fix for it but svn.eu.apache.org seems to have problems at the moment (and I don't want to go through the steps of checking out svn.apache.org and applying patch etc...),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DiskPageStore may cause memory leaks when the files can't be written,WICKET-1470,12392841,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,knopp,knopp,01/Apr/08 13:49,01/Apr/08 13:57,14/Mar/19 03:09,01/Apr/08 13:57,1.3.2,,,,,,,,,,,1.3.3,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202437,,,2008-04-01 13:49:48.0,,,,,,0|i0kg0v:,117413,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StringResourceModel should implement IComponentAssignedModel,WICKET-1467,12392743,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,knopp,knopp,31/Mar/08 14:09,31/Mar/08 14:34,14/Mar/19 03:09,31/Mar/08 14:34,1.3.2,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202435,,,2008-03-31 14:09:35.0,,,,,,0|i0kg13:,117414,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Session. requestDetached() does not replicate dirty pages to session in some situations, breaking application clustering",WICKET-1455,12392484,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jjviana,jjviana,27/Mar/08 19:37,29/Mar/08 13:46,14/Mar/19 03:09,29/Mar/08 13:46,1.3.2,,,,,,,,,,,1.3.3,,,,,,,,,,,,,,0,,,,,,"
In Session.java line 1406 there is a test for deciding whether to set the page as an attribute to the session. The test reads:
    if (page.isStateless())

Page does not override isStateless, and the default implementation (in Component) will return true for most pages.
That means pages are not re-added to the session after being changed and this in turn breaks clustering (the results are most vivid when using a non-sticky load balancer).

The fix is to change line 1406 to:

if (page.isPageStateless())

Maybe this is a typing mistake in the original code?




",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-27 19:51:38.211,,,no_permission,,,,,,,,,,,,202423,,,Thu Mar 27 19:51:38 UTC 2008,,,,,,0|i0kg1z:,117418,,,,,,,,"27/Mar/08 19:51;jcompagner;hmm for second level cache that doesn't matter to much because that code (if it is a page) doesnt result in anything anyway

The dirty list and the touched pages list on session are with the secondlevel cache a bit confusing, because SLCS doesn't use the dirty list to set the pages as attributes on the session.

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketServlet does not set content type on fallback(),WICKET-1453,12392446,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jjviana,jjviana,27/Mar/08 13:59,04/May/08 15:27,14/Mar/19 03:09,04/May/08 15:27,1.3.2,,,,,,,,,,,1.3.4,,,wicket,,,,,,,,,,,0,,,,,,"In Wicket 1.3.2, if a resource request is not handled by the wicket filter then it is handled by the fallback() method.
This method does not set the content type while responding, which breaks CSS in some situations (in particular when using tomcat behind Apache with mod_jk).
",,,,,,,,,,,,,,,,,27/Mar/08 14:08;jjviana;WicketServlet.patch;https://issues.apache.org/jira/secure/attachment/12378720/WicketServlet.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-03-27 15:41:59.898,,,no_permission,,,,,,,,,,,,202421,,,Thu Mar 27 15:41:59 UTC 2008,,,,,,0|i0kg2f:,117420,,,,,,,,27/Mar/08 14:08;jjviana;The attached patch fixes the problem,27/Mar/08 15:41;jcompagner;looks pretty straightforward but i believe its matejs code,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error in javadoc class description in MySignInPage,WICKET-1452,12392395,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,,shakespear,shakespear,27/Mar/08 00:11,16/Sep/08 20:32,14/Mar/19 03:09,27/Mar/08 00:20,1.3.2,,,,,,,,,,,1.3.3,,,wicket-examples,,,,,,,,,,,0,,,,,,"In the class comment of class MySignInPage it says that it extends MySignInPage, should of course be SignInPage.

/**
 * Simple example of a sign in page. It extends MySignInPage, a base class which provide standard
 * functionality for typical log-in pages
 * 
 * @author Jonathan Locke
 */
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-27 00:20:53.957,,,no_permission,,,,,,,,,,,,202420,,,Thu Mar 27 00:20:53 UTC 2008,,,,,,0|i0kg2n:,117421,,,,,,,,27/Mar/08 00:20;seitz;thanks,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ajax Re-render does not work after AbstractRestartResponseException(),WICKET-1450,12392282,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,matthewyoung,matthewyoung,25/Mar/08 18:20,13/Oct/08 20:20,14/Mar/19 03:09,13/Oct/08 20:20,1.3.2,,,,,,,,,,,1.3.5,,,wicket,,,,,,,,,,,0,,,,,,"To handle possible exception in Model#getObject(): I do

1) make note of exception has occurred (and subsequently only return some error value and not cause exception thrown again),
2) register an error feedback message,
3) calll page.detach()  (for clean up and reset?, I'm not sure but I know this makes FeedbackPanelErrorMessage reload message from session) and
4) throw new AbstractRestartResponseException() to re-render response with the new error message from the model shown.

I'm finding that this works perfectly in non-Ajax.  But in Ajax, there are 2 problems:

1) the error message register in step 2) above is not rendered in the FeedbackPanel
2) the Ajax response is incomplete, it's missing the label component in my test case and missing the </ajax-response> closing tag.


Test case below:  if you enter ""blowup"" in the text field, the label's model will do the steps outline above.  Run this in non-Ajax and you will see two error messages as expected.  Run in Ajax, you will see the problem (open Wicket Ajax Debug panel to see).


= = = =     HomePage.html:

<html>
<head></head>
    <span wicket:id=""message"">message will be here</span>
    <form wicket:id=""form"">
        <input type=""text"" wicket:id=""word""/>
        <input type=""submit"" value=""Enter"" wicket:id=""submitButton""/>
    </form>
    <span wicket:id=""feedback"">FEEDBACK</span>
</html>


= = = = =  HomePage.java:


public class HomePage extends WebPage {

	private static final long serialVersionUID = 1L;

	private String word;
	
    public HomePage(final PageParameters parameters) {

        add(new FeedbackPanel(""feedback"") {
        	private static final long serialVersionUID = 1L;
        	@Override protected void onBeforeRender() {
        		System.out.println(""= = = = FeedbackPanel onBeforeRender()"");
       			System.out.println(""         FeedbackbackMessageModel = "" + getFeedbackMessagesModel().getObject());
        		super.onBeforeRender();
        	}
        }.setOutputMarkupPlaceholderTag(true));
        // if the word ""blowup"" is entered,
        //this register a error message and throw 
        IModel model = new Model() {
        	private static final long serialVersionUID = 1L;
			@Override public Object getObject() {
				if (word != null && word.equals(""blowup"")) {
					word = ""-w-e-b-l-e-w-u-p-"";
					HomePage.this.fatal(""[2/2]This message is from Model."");
					getPage().detach();
					System.out.println(""! ! ! ! ! throwing  new AbstractRestartResponseException()"");
					throw new AbstractRestartResponseException() {
						private static final long serialVersionUID = 1L;
					};
				} else {
					return ""The word is: \"""" + (word == null ? "" n u l l "" : word) + ""\"""";
				}
			}
        };
        add(new Label(""message"", model) {
        	private static final long serialVersionUID = 1L;
        	@Override protected void onBeforeRender() {
        		System.out.println(""= = = = Label onBeforeRender(), model = "" + getModel().getObject());
        		super.onBeforeRender();
        	}
        }.setOutputMarkupId(true));
        Form form = new Form(""form"", new CompoundPropertyModel(this));
        add(form);
        form.add(new TextField(""word"").setRequired(true));
    	AjaxFallbackButton submitButton = new AjaxFallbackButton(""submitButton"", form) {
    		private static final long serialVersionUID = 1L;
        	@Override protected void onSubmit(AjaxRequestTarget target, Form f) {
        		if (word != null && word.equals(""blowup"")) {
        			HomePage.this.error(""[1/2]This message is from onSubmit. There should also be a message from model"");
        		}
            	if (target != null) {
            		target.addComponent(HomePage.this.get(""feedback""));		// clear error feedback if any
            		target.addComponent(HomePage.this.get(""message""));
            	}
        	}
        	
        	@Override protected void onError(AjaxRequestTarget target, Form f) {
        		target.addComponent(HomePage.this.get(""feedback""));		// show updated error feedback
        	}
        };
        form.add(submitButton);
    }
}



= = = = =  WicketApplication.java:

public class WicketApplication extends WebApplication
{    
	public WicketApplication() {
	}
	
	public Class<? extends WebPage> getHomePage() {
		return HomePage.class;
	}
	
	
	@Override public RequestCycle newRequestCycle(Request request, Response response) {
		return new WebRequestCycle(this, (WebRequest) request, (WebResponse) response) {
			@Override public Page onRuntimeException(Page page, RuntimeException e) {
				// page can be null
				if (page == null) {
					return super.onRuntimeException(page, e);
				}
				return page;
			}
		};
	}

}
",Windows XP Java 1.6.0_05-b13,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-07-09 11:48:30.458,,,no_permission,,,,,,,,,,,,202418,,,Mon Oct 13 20:20:03 UTC 2008,,,,,,0|i0kg2v:,117422,,,,,,,,09/Jul/08 11:48;a_wronski@gazeta.pl;The same problem is in Wicket 1.3.4,05/Oct/08 18:35;jcompagner;the responses where not correctly reset when doing a abort when there is already content in the buffers,"12/Oct/08 20:00;dashorst;The unit tests fail after this issue was fixed. I'm not sure if the unit tests fail because this issue was fixed wrong, or that the test has a bug, or that the test tests the wrong thing.

This issue is now blocking 1.3.5","13/Oct/08 20:20;jcompagner;test was wrong, WebResponse didnt know it was in Ajax mode.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lazy registration in SharedResourceRequestTarget fails,WICKET-1446,12392242,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,tonyvegas,tonyvegas,25/Mar/08 10:50,25/Mar/08 11:24,14/Mar/19 03:09,25/Mar/08 11:24,1.3.2,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"The lazy registration of shared resources which are not of scope org.apache.wicket.Application fails.
It fails because registers SharedResourceRequestTarget the resource with 

sharedResources.add(resourceKey, packageResource);

but should use

sharedResources.add(scope, path,null,null, packageResource);

The problem is that add(final String name, final Resource resource) expects a name for the resource and not the complete resource key.
As consequence the resource is registered again and again with scope org.apache.wicket.Application.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-25 11:24:19.071,,,no_permission,,,,,,,,,,,,202414,,,Tue Mar 25 11:24:19 UTC 2008,,,,,,0|i0kg3b:,117424,,,,,,,,"25/Mar/08 11:24;jcompagner;i fixed this issue but created a new one WICKET-1447 because i think not all problems are fixed
and we need to make the api of SharedResources a bet better. because a get() and an add() with both a String argument that are not the same thing is confusing.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AbstractDecimalConverter has a numberFormats fields that holds NumberFormats, But those are not thread save...",WICKET-1444,12392131,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jcompagner,jcompagner,23/Mar/08 15:35,24/Mar/08 11:09,14/Mar/19 03:09,24/Mar/08 11:09,1.3.2,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"We really should remove that map because now they can be used multi threaded because for example the DoubleConverter has a static INSTANCE variable..

The AbstractIntegerConverter doesnt do that caching for example, that returns a new Format instance everytime.

The problem is that we can remove that map just fine, expects that we have setNumberFormat(Locale,Format) method
thats is a method that is very wrong because ot the caching, And they should use/override getNumberFormat when you call setNumberFormat..
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202412,,,Mon Mar 24 11:09:49 UTC 2008,,,,,,0|i0kg3r:,117426,,,,,,,,"24/Mar/08 11:09;jcompagner;we just clone all NumberFormats before returning them.
I think this is the fastest and safest way to do it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
nested forms inside a multipart form can't be submitted via ajax,WICKET-1442,12392119,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,seitz,seitz,22/Mar/08 22:16,26/Dec/11 12:24,14/Mar/19 03:09,22/Mar/08 22:19,1.3.1,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"nested forms can't be submitted via ajax if any of the parent forms contain a fileuploadfield (which makes the root form a multipart).

fix: skip changing the request to a multipart request in Form#handleMultiPart, if it's an ajax request.
these two types of requests mutually exclude each other anyway.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2011-12-26 10:36:48.294,,,no_permission,,,,,,,,,,,,202410,,,Mon Dec 26 12:24:02 UTC 2011,,,,,,0|i0kg3z:,117427,,,,,,,,22/Mar/08 22:21;seitz;btw: kudos to matej ;),"26/Dec/11 10:36;axel_becker;I get the same Error in wicket 1.4.15 and 1.4.19. 
In my Page are one Parentform and two Subforms.
Subform-1 with Filedupload on Ajaxsubmit sets the isMultipart of my parentForm to true.
Subform-2 with Ajaxsubmit inside a modal Dialog.

On submit of Subform-2, the isMultipart() of my parentForm is true an i get the Exception. 
Furthermore, i can't find a hook, where i can skip the handleMultipart() of my parentForm.
I think, this issue should be reopen but i havn't the previliges.

thanks
axel",26/Dec/11 12:24;mgrigorov;Open a new ticket with a quickstart. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractDefaultAjaxBehavior doesn't work when added directly to page,WICKET-1440,12392044,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,dashorst,dashorst,21/Mar/08 13:09,21/Mar/08 13:11,14/Mar/19 03:09,21/Mar/08 13:10,1.3.2,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"The AbstractDefaultAjaxBehavior will generate an invalid wicketAjaxGet call when it is added directly to a Page.


function openAutomatischeMaatregelWindow() {
var wcall=wicketAjaxGet('../../?wicket:interface=:4::IBehaviorListener:1:2',null,null, function() {return Wicket.$('id438') != null;}.bind(this));
}

the Wicket.$('id438') doesn't exist.",,60,60,,0%,60,60,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202408,,,2008-03-21 13:09:52.0,,,,,,0|i0kg47:,117428,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
detach behavior,WICKET-1438,12391999,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,mrmean,mrmean,20/Mar/08 21:00,24/Mar/08 14:21,14/Mar/19 03:09,24/Mar/08 14:21,1.3.1,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"This was originally posted as a ConcurrentModificationException during detach on the wicket user list (http://markmail.org/message/xnrot5hm4wvow7dq) but later investigations show that there is something else not right.
Let me begin by restating the original problem:

A couple of days ago Warren came to me with a problem. If he attached
a behavior to a component which potentially throws a
RestartResponseAtInterceptPageException a
ConcurrentModificationException would bubble all the way into tomcat
code.
Now you probably are going to say: ""Then don't do that"" ;) but the
fact that an exception escapes wicket is imo reason to investigate.

So i did some digging. The situation is as follows:
In the renderHead method of an IHeaderContributor a check is performed
for an authenticated user, if none is found a RRAIPE is thrown.
One of the places that executes renderHead is the onDetach of WebPage.
Now suppose we have a Page A which has a component decorated with this
header contributor, the page also contains a Button to log off users.
The onsubmit for this button is as simple as log user off and
setResponsePage(class).
This page is usually only accessible if an authenticated user is
available so everything works fine if that is the case.
But then the user decides to log off, the onsubmit is triggered and
exits normally. the request continues and reaches the point where the
RequestCycle is detaching all RequestTargets (at that point there are
2 targets, 1 for the current page and 1 set during the onsubmit).
During the detach the renderHead method is executed along with the
check for an authenticated user. Since there isn't one anymore a
RRAIPE is thrown, adding a 3rd target to the stack of RequestTargets.
The RRAIPE bubbles up to RequestCycle.detach() and is caught and
logged there. Then wicket attempts to detach the next RequestTarget
but since an iterator is used to loop through all targets, the
iterator detects the stack has been changed and throws a
ConcurrentModificationException. Ultimately resulting in a tomcat
error page.

I tried changing the iterator loop to a regular for(int i=0;i < .....)
loop and this seems to fix the problem, even if later on more
requesttargets are added wicket happily executes them and comes up
with the desire page.
There is one disadvantage i see with this solution: the requesttarget
throwing the RRAIPE is not fully detached. Perhaps the RRAIPE can be
swallowed after it has added a RequestTarget and only in the case of a
detach phase. That way the rest of the page could be normally
detached.


Here is where it gets interesting:
Johan noticed that WebPage.detach should not call renderHead during detach.
In fact the only reason it does so is during development when it does not detect a header element. It then checks if there indeed should not be a header by visiting the behaviors and comparing the output to what it currently has. However as the code comments point out it then does nothing with that information because the code that should handle it does not work yet.

So the question became why does the page does not have a header element. At first i thought this is because in this case a setResponsePage is done which would suppress any rendering of the current page.
However this is not the case as renderhead is also called during detach in a normal page render. It does not matter if the markupfile contains a header element or not. As it turns out the presence of a header element is checked by getting a wicket component with id _header_ This always returns null as there is no such child component. There is however a child component with an id like _header_0

",,,,,,,,,,,,,,,,,20/Mar/08 21:08;mrmean;securebutton_app.rar;https://issues.apache.org/jira/secure/attachment/12378348/securebutton_app.rar,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-03-20 21:36:16.515,,,no_permission,,,,,,,,,,,,202406,,,Mon Mar 24 14:21:22 UTC 2008,,,,,,0|i0kg4f:,117429,,,,,,,,"20/Mar/08 21:08;mrmean;This is a small application showing the ConcurrentModificationException, courtesy of Warren.
It is not a quickstart but an eclipse project. Dependencies are swarm 1.30 and wicket 1.3.1 or later.","20/Mar/08 21:36;jcompagner;yeah we need to check out why the header component is not found
(besides fixing the loop that is not that big of a deal)

because it seems that the detach behavior of webpage never finds the header component because it is inserted with an index.
Maybe that is also why the test didn't work? (the disabled part of that body check)","24/Mar/08 14:21;jcompagner;fixed the issue that RequestCycle.detach errors with ConcurrentMod Exception

also improved the check for header container for checking if the body/head are there.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MarkupCache NPEs when null (never cache) cacheKey is returned from IMarkupCacheKeyProvider,WICKET-1433,12391774,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jcompagner,jcompagner,18/Mar/08 18:19,18/Mar/08 19:19,14/Mar/19 03:09,18/Mar/08 18:19,1.3.2,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"the new cache implementation broke the support for cachekey == null
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202402,,,2008-03-18 18:19:42.0,,,,,,0|i0kg5b:,117433,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
findSubmittingButton will fail when button without form is added before form,WICKET-1414,12390796,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,saki,saki,11/Mar/08 22:34,24/Mar/08 11:21,14/Mar/19 03:09,24/Mar/08 11:21,1.3.1,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"Form submitting button is not found when page contains another button, which is not part of form and is added to the page hierarchy before form. When it is added after the form, it is working. The problem is in the method of Form class:

	public final IFormSubmittingComponent findSubmittingButton()
	{
		IFormSubmittingComponent submittingComponent = (IFormSubmittingComponent) getPage().visitChildren(
			IFormSubmittingComponent.class, new IVisitor()

which is serching for the submitting button in the whole page instead of the form only. I think correctly should be

	public final IFormSubmittingComponent findSubmittingButton()
	{
		IFormSubmittingComponent submittingComponent = (IFormSubmittingComponent)visitChildren(
			IFormSubmittingComponent.class, new IVisitor()

",,,,,,,,,,,,,,,,,23/Mar/08 10:18;saki;myproject.zip;https://issues.apache.org/jira/secure/attachment/12378450/myproject.zip,11/Mar/08 22:36;saki;myproject.zip;https://issues.apache.org/jira/secure/attachment/12377646/myproject.zip,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2008-03-23 05:38:43.076,,,no_permission,,,,,,,,,,,,202385,,,Mon Mar 24 11:21:14 UTC 2008,,,,,,0|i0kg73:,117441,,,,,,,,"11/Mar/08 22:36;saki;project created from quick start containing 2 pages illustrating the problem and unit tests, which should pass, but one of them fails.","23/Mar/08 05:38;ivaynberg;there are a couple of things wrong with your example.

one) button outside the form is not supported and is not a proper use of the component. Link is the proper component to use here (and can be attached to <button> tag) or a SubmitLink if you need to submit the form from outside.

two) <button type=""button""> is not meant to submit a form. you can try type=""submit"" if its inside the form, or add javascript to onlick ( which is what Link attached to <button> does)","23/Mar/08 07:17;saki;Igor,
you are totally right in your statements. I'm do not want to use button without the form normally, I've used it only by mistake. It lead to this strange behavior, so I was just carious why it is working in one case and in second not.

My point is if I use this button without the form in front of valid form, the valid form is not working, if it's after, it is working. The reason is you are searching for submitting component in whole page.

one) If  button outside the form is not supported, would be nice to issue some warning or exception

two) i do not know if submittingButton in form can be outside of form on not. In case that not, it does not make sense to search for it in whole page, should be searched only in form. In case you have page with lot of components it can bring significant speed improvement.

Do you have any example, where the submitting button is outside the form (by your first statement it should not exist) ? If it can not be outside the form, should not be any problem to search only in form scope instead of page scope.
","23/Mar/08 07:21;ivaynberg;your first example did nothing for me either. since both were <button type=""button""> tags the form was never submitted.

there are a few usecases where a submitting component can be outside a form. see SubmitLink, AjaxSubmitLink, AjaxButton.

-igor
",23/Mar/08 10:18;saki;mvn packege fails on second test. Form contains correct type of button now,"23/Mar/08 10:47;saki;Igor,
I do not know if it make sense for you or not, the solution would be to search in form first, and if nothing found in page. The first search would be successful for all submits by form children (most of cases), second would catch components outside form. Advantege - quicker in first case, disadvantage - it's a change and slower in second case.

	/**
	 * Gets the IFormSubmittingComponent which submitted this form.
	 * 
	 * @return The component which submitted this form, or null if the processing was not triggered
	 *         by a registered IFormSubmittingComponent
	 */
	public final IFormSubmittingComponent findSubmittingButton()
	{
		IVisitor visitor = new IVisitor()
		{
			public Object component(final Component component)
			{
				// Get submitting component
				final IFormSubmittingComponent submittingComponent = (IFormSubmittingComponent)component;

				// Check for component-name or component-name.x request string
				if (submittingComponent.getForm() != null &&
					submittingComponent.getForm().getRootForm() == Form.this &&
					(getRequest().getParameter(submittingComponent.getInputName()) != null || getRequest().getParameter(
						submittingComponent.getInputName() + "".x"") != null))
				{
					if (!component.isVisible())
					{
						throw new WicketRuntimeException(""Submit Button "" +
							submittingComponent.getInputName() + "" (path="" +
							component.getPageRelativePath() + "") is not visible"");
					}
					return submittingComponent;
				}
				return CONTINUE_TRAVERSAL;
			}
		};
		IFormSubmittingComponent submittingComponent = (IFormSubmittingComponent)visitChildren(
			IFormSubmittingComponent.class, visitor);
		if (submittingComponent == null)
			submittingComponent = (IFormSubmittingComponent)getPage().visitChildren(
				IFormSubmittingComponent.class, visitor);
		return submittingComponent;
	}
","23/Mar/08 12:59;jcompagner;what i find strange is why your button that is before the form is passing this if:

if (submittingComponent.getForm() != null &&
						submittingComponent.getForm().getRootForm() == Form.this &&
						(getRequest().getParameter(submittingComponent.getInputName()) != null || getRequest().getParameter(
							submittingComponent.getInputName() + "".x"") != null)

first of all your button is outside the form right?
So that buttons value isn't submitted, so why is there a request param that is exactly the input name of that component??
Do you have 2 buttons one in the form 1 outside of the form (that still has that form as its root form) with the same name?","23/Mar/08 14:34;saki;Johan, as Igor noted, normally it should not happed, I did it and thus found it by mistake.

To explain in detail:  

The buttons have different name. The component tree is either

page without error
  Label message 
  Form form
     Button button1 (child of form)
  Button button2 (child of page)

or

page with error (in code switched order of adding, html exactly the same)
  Label message 
  Button button2 (child of page)
  Form form
     Button button1 (child of form)

The error is because when form is searching for submitting component, it searches through all components of page and calls getForm() method of button2, which throws exception. On page without error the button1 is found, so it will not reach button2 and can not throw exception ...

I think the correct solution would be either to disallow to add button (meant IFormSubmittingComponent) without parent form, or ignore such button during search, or partial solution suggested above. But again, under normal conditions it should not happen. I do not have any idea if it is valid in HTML/XHTML have button without form ...
","23/Mar/08 14:55;jcompagner;ok then the fix should be
that getForm() doesn't throw an exception...

it doesnt do that for submit link:

	public Form getForm()
	{
		if (form != null)
		{
			return form;
		}
		else
		{
			return (Form)findParent(Form.class);
		}
	}


but it does for Button (and its subclasses) because that uses the getForm() from FormComponent

	public Form getForm()
	{
		class FindFormVisitor implements Component.IVisitor
		{
			Form form = null;

			public Object component(Component component)
			{
				form = (Form)component;
				return Component.IVisitor.STOP_TRAVERSAL;
			}
		}

		Form form = (Form)findParent(Form.class);
		if (form == null)
		{
			// check whether the form is a child of a surrounding border
			final Border border = (Border)findParent(Border.class);
			if (border != null)
			{
				FindFormVisitor formVisitor = new FindFormVisitor();
				border.visitChildren(Form.class, formVisitor);
				form = formVisitor.form;
			}
			if (form == null)
			{
				throw new WicketRuntimeException(""Could not find Form parent for "" + this);
			}
		}
		return form;
	}

and we expect in the code i past that getForm() just return null and not an exception.
so i guess what we can do is let Button override getForm() just like SubmitLink

Then Button is is a FormComponent that doesn't throw an exception. but i dont see a big problem with that? Igor?","23/Mar/08 15:01;jcompagner;i will check this in if nobody has a problem with it:

Button.	public Form getForm()
	{
		try
		{
			return super.getForm();
		}
		catch (WicketRuntimeException wre)
		{
			// ignore this and return null. (Form.findSubmittingComponent expects this)
		}
		return null;
	}

(i do this because there is some special code for borders in getform of formcomponent that i dont want to completely copy.)",24/Mar/08 11:21;jcompagner;Button.getForm() will not throw an exception,,,,,,,,,,,,,,,,,,,,,,
FormTester doesn't initialise values for RadioGroups,WICKET-1411,12390747,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,david.shepherdson,david.shepherdson,11/Mar/08 12:44,22/May/08 10:19,14/Mar/19 03:09,23/Mar/08 03:06,1.3.0-final,,,,,,,,,,,1.3.3,,,,,,,,,,,,,,0,,,,,,"In the constructor for FormTester, a visitor runs through all the form components and sets their initial values in the request. However, the visitor only deals with components that are instances of specific classes: currently AbstractTextComponent, DropDownChoice, RadioChoice, CheckBox, ListMultipleChoice and CheckGroup.

Notably absent from that list is RadioGroup; if a RadioGroup is present in the form, it won't have any value set in the request and therefore when the form is submitted, if it's a required field the form validation will fail.

We're working around this by adding the following code to the onFormComponent(FormComponent) method of the listener:

                else if (formComponent instanceof RadioGroup)
                {
                    final String value = formComponent.getValue();
                    Object choiceValue = formComponent.visitChildren(Radio.class, new IVisitor()
                    {

                        public Object component(Component component)
                        {
                            // O-P Preserve old escaping value, then turn escaping off
                            // so that values aren't escaped unnecessarily.
                            boolean oldEscaping = component.getEscapeModelStrings();
                            component.setEscapeModelStrings(false);
                            Radio radio = (Radio)component;
                            String radioValue = radio.getValue();
                            // O-P Restore the previous escaping setting.
                            component.setEscapeModelStrings(oldEscaping);
                            if (radio.getModelObject().toString().equals(value))
                            {
                                return radioValue;
                            }
                            return CONTINUE_TRAVERSAL;
                        }

                    });
                    if (choiceValue != null) {
                        setFormComponentValue(formComponent, (String) choiceValue);
                    }
                }

(See issue WICKET-1094 for the reason for the 'O-P' comments about escaping, though I'm not sure that they're really needed in this case.)

Would it also be sensible to add a fallback case; something like the following?

                else
                {
                    setFormComponentValue(formComponent, formComponent.getValue());
                }

That would deal with any user-defined components that are subclasses of FormComponent but not of one of the existing Wicket components. (Though I'm not sure how common that is; we haven't done it ourselves.)",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202382,,,Thu May 22 10:19:23 UTC 2008,,,,,,0|i0kg7b:,117442,,,,,,,,22/May/08 10:19;david.shepherdson;Thank you -- I can confirm that the fix works as of the 1.3.3 release.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RequestLogger counts active requests wrong,WICKET-1409,12390680,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,dashorst,dashorst,10/Mar/08 17:11,29/Aug/08 12:42,14/Mar/19 03:09,29/Aug/08 12:42,1.3.0-final,1.3.1,,,,,,,,,,1.3.4,,,,,,,,,,,,,,0,,,,,,"The request logger doesn't decrease the number of active requests correctly in wicket 1.3.

New data when running in debugger. The active request count is updated when the request logger data is put into the session (why?):

RequestLogger.getCurrentRequest() line: 192	
RequestLogger.objectUpdated(Object) line: 365	
Application$1(HttpSessionStore).setAttribute(Request, String, Object) line: 153	
Application$1(SecondLevelCacheSessionStore).setAttribute(Request, String, Object) line: 721	
IridiumSession(Session).setAttribute(String, Object) line: 1281	
IridiumSession(Session).requestDetached() line: 1381	
IridiumRequestCycle(RequestCycle).detach() line: 1091	
IridiumRequestCycle(RequestCycle).steps() line: 1348	
IridiumRequestCycle(RequestCycle).request() line: 493	
WicketFilter.doGet(HttpServletRequest, HttpServletResponse) line: 358	
WicketFilter.doFilter(ServletRequest, ServletResponse, FilterChain) line: 194	

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-10 20:50:57.272,,,no_permission,,,,,,,,,,,,202380,,,Fri Aug 29 12:42:28 UTC 2008,,,,,,0|i0kg7j:,117443,,,,,,,,"10/Mar/08 20:50;jcompagner;any idea why?
or how to reproduce?
we do have a session listener right?","24/Mar/08 14:43;jcompagner;i dont see how the active request are going wrong..

it is increased when a RequestData object is created for the current thread/request
and it is decreased when the RequestLogger detaches and finishes the RequestData object.","13/May/08 08:38;jcompagner;its not about the data put into the session

its when the first call to getCurrentRequest() is being done. on the request logger.

What that is and where it comes from can be anything.
",13/May/08 10:52;dashorst;Seems to work for us.,"29/Aug/08 12:42;dashorst;Looking at our application, this has been fixed.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxSubmitLink doesn't always find enclosing form properly,WICKET-1397,12390242,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,david.shepherdson,david.shepherdson,05/Mar/08 11:20,16/Sep/08 20:32,14/Mar/19 03:09,08/Mar/08 01:00,1.3.0-final,,,,,,,,,,,1.3.2,,,,,,,,,,,,,,0,,,,,,"If the AjaxSubmitLink constructor that doesn't take in a form is called, it calls the constructor that does take in a form with null for the form. This seems correct, and it passes the form argument into the constructor of the AjaxFormSubmitBehavior as also seems correct. AjaxFormSubmitBehavior has a private getForm() method that, if the form is null, sensibly searches through the component hierarchy to find a form that contains the component. This is also good. :-)

The bit that seems wrong is that the overridden onSubmit(AjaxRequestTarget) and onError(AjaxRequestTarget) methods in AjaxSubmitLink's version of AjaxFormSubmitBehavior call AjaxSubmitLink's onSubmit and onError with the form argument that was originally passed into the constructor. This means that if you originally called the one-argument constructor for AjaxSubmitLink, the onSubmit and onError methods will be called with a null form, rather than the actual form that was submitted.

As far as I can see, an easy fix for this would be to make getForm() in AjaxFormSubmitBehavior protected rather than private, and then to call getForm() in the overridden onSubmit and onError in AjaxSubmitLink's version of AjaxFormSubmitBehavior. That way the AjaxSubmitLink's onSubmit and onError would always be called with the actual form that was submitted.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-08 01:00:10.82,,,no_permission,,,,,,,,,,,,202370,,,Thu May 22 11:52:12 UTC 2008,,,,,,0|i0kg9b:,117451,,,,,,,,08/Mar/08 01:00;seitz;thanks,22/May/08 11:52;david.shepherdson;Thanks -- I can confirm that this is fixed in 1.3.3.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"BigDecimalConverter does not work with space - eg, French or Russian Locales.",WICKET-1395,12390216,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,ned.collyer,ned.collyer,04/Mar/08 21:54,07/Mar/08 21:57,14/Mar/19 03:09,07/Mar/08 21:57,1.3.1,,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"Space character is not getting correctly translated when converting to BigDecimal.

The following occurs with a bound BigDecimal field

Input: 3000
Submit
Output: 3 000
-----
Input: 3 000
Submit
Output: 3 


The following code highlights the problem.

BigDecimalConverter bdc = new BigDecimalConverter();
System.out.println(bdc.convertToObject(""3 000"", Locale.FRENCH));
=>3

DoubleConverter dc = new DoubleConverter();
System.out.println(dc.convertToObject(""3 000"", Locale.FRENCH));
=>3000.0

I think I found the problem.

BigDecimalConverter#convertToObject is calling getNumberFormat(locale), but it should be calling AbstractNumberConverter#parse like DoubleConverter does (or something similar).

It looks like code to handle the different ""thousand"" separators has been added there.

Also of note, it does not appear that the BigDecimalConverter is covered by the Converters test.

See thread http://www.nabble.com/BigDecimal-converter---broken-for-French-Russian-%21--ts15820747.html for more context.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-07 21:57:48.618,,,no_permission,,,,,,,,,,,,202368,,,Fri Mar 07 21:57:48 UTC 2008,,,,,,0|i0kg9j:,117452,,,,,,,,07/Mar/08 21:57;jcompagner;fixed it by doing the same stuff as the double converter,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""charset=UTF-8"" is appended to Content-Type of  DynamicWebResources",WICKET-1388,12389924,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,nielsbo,nielsbo,29/Feb/08 21:43,08/Mar/08 21:33,14/Mar/19 03:09,08/Mar/08 21:33,1.3.1,,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"After upgrading from wicket 1.2.6 to 1.3.1 we now have a big problem when opening PDF files inside the IE browser window. 
Instead the PDF file is now loaded as a separate window, leaving the Browser window empty.

I traced the problem down wicket always appending "";charset=UTF-8"" to the Content-Type, and this can be viewed by using a http debugger:

Wicket 1.2.6: Works 
Content-Type: application/pdf 

Wicket 1.3.1: PDF opened outside the browser.
Content-Type: application/pdf; charset=UTF-8 

The "";charset=UTF-8"" is appended in ResourceStreamRequestTarget, and I can't see a way to override it. 

Please make it possible to have the Content-Type as set by the DynamicWebResource","IE 6.0, Acrobat Reader 7.0.9",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-08 21:33:54.124,,,no_permission,,,,,,,,,,,,202362,,,Sat Mar 08 21:33:54 UTC 2008,,,,,,0|i0kga7:,117455,,,,,,,,"08/Mar/08 21:33;jcompagner;this is weird, ResourceStreamRequestTarget does set that charset already long long time.
But there are other changes in that area.

i guess it only makes sense to append charset=XXX to the content type if the type is of type text so i changed the code to check first the content type",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cookie Path of persistent FormElements wrong,WICKET-1387,12389893,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,almaw,dpeters,dpeters,29/Feb/08 16:49,09/Mar/08 15:31,14/Mar/19 03:09,09/Mar/08 15:31,1.3.1,,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"My web-app runs on the context-path ""/mdb-war-wicket""

the JSESSIONID cookie is set correctly by jetty:
Name	JSESSIONID
Value	rz0z72x33e4p
Host	localhost
Path	/mdb-war-wicket
Secure	No
Expires	At End Of Session

But the persistent cookies of my form are set to Path ""/"":
Name	signInPanel:signInForm:username
Value	mdb
Host	localhost
Path	/
Secure	No
Expires	Sun, 30 Mar 2008 16:31:00 GMT

This can be a real problem when more than one application runs in the app-server.
","eclipse, maven, jetty-plugin / resin",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-09 15:31:54.339,,,no_permission,,,,,,,,,,,,202361,,,Sun Mar 09 15:31:54 UTC 2008,,,,,,0|i0kgaf:,117456,,,,,,,,"09/Mar/08 15:31;jcompagner;we just had setPath(""/"")
because previously we did getWebRequest().getContext())

But that method is gone now. But the problem is can we really do this:

			cookie.setPath(getWebRequest().getHttpServletRequest().getContextPath());

if we are behind a firewall?

I committed that for now, but i guess we should look for better ways to do it
I guess the Application.getXXXSetting().getContextPath() does have to return that people can configure correctly
for this kind of stuff and also for creating full urls (for generating urls for emails and so on)


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket.sourceforge.net/wicket-quickstart is totally obsolete and too easily found in search engines,WICKET-1375,12389639,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,murphyatgenome,murphyatgenome,27/Feb/08 01:41,23/Mar/08 15:42,14/Mar/19 03:09,23/Mar/08 15:42,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"The whole http://wicket.sourceforge.net/wicket-quickstart/ tree makes Wicket look like a dead or dying project.  If it hasn't been updated since 2006, I assume it should just be replaced with redirects to the current Quick Start page on the main Wicket site (http://wicket.apache.org/quickstart.html).  

As a Wicket newbie, I have encountered this dead content several times during Google searches.  It really needs to be dealt with as soon as possible.  How many people are finding this and get turned off?",,1800,1800,,0%,1800,1800,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-23 15:42:56.305,,,no_permission,,,,,,,,,,,,202350,,,Sun Mar 23 15:42:56 UTC 2008,,,,,,0|i0kgbb:,117460,,,,,,,,"23/Mar/08 15:42;dashorst;I've updated the sites with a warning on top.

These sites *WILL* stay alive for old users. If a newbie can't search using google and use his brain to figure out where to get the newest Wicket release, I don't want him as a user.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket.properties cannot be found in OSGi,WICKET-1371,12389526,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,aharris,aharris,25/Feb/08 20:29,09/Apr/08 13:37,14/Mar/19 03:09,09/Apr/08 13:37,1.3.1,,,,,,,,,,,1.4-M1,,,wicket,,,,,,,,,,,0,,,,,,"The wicket.properties file is not being loaded by the Application class due to exclusive use of the thread context classloader in Wicket 1.3.1 when used in an OSGi environment.

From looking at Wicket's Application code, it appears that multiple wicket.properties files can exist, and it will load them all.  So, the wicket.properties in wicket.jar should always be loaded as well as any other  wicket.properties that are application specific.  This will work in a traditional WAR file.

However, in OSGi, each bundle has its own classloader.  So, if Wicket is in its own bundle and my web application is in its own bundle, the current implementation of Application will not work.  Using only the thread context classloader will not accomodate loading multiple wicket.properties.  Multiple classloaders must be checked.  

Here's a reference to an mail list thread:  
http://www.nabble.com/NPE-in-PropertyResolver.getGetAndSetter%28%29-td11194510.html#a15647641

I've put together and tested a modified Application.java which works in OSGi.  Would something like this be acceptable?

public final void initializeComponents()
{
        // Load any wicket properties files we can find
        try
        {
            Set loadedFiles = new HashSet();
            // Load properties files used by all libraries
           
            // Try the classloader for the wicket jar/bundle
            Enumeration resources = Application.class.getClassLoader()
                                .getResources(""wicket.properties"");
            loadResources(resources, loadedFiles);

            // Try the classloader for the user's application jar/bundle
            resources = getClass().getClassLoader()
                                .getResources(""wicket.properties"");
            loadResources(resources, loadedFiles);

            // Try the context class loader
            resources = Thread.currentThread()
                                .getContextClassLoader()
                                .getResources(""wicket.properties"");
            loadResources(resources, loadedFiles);
        }
        catch (IOException e)
        {
                        throw new WicketRuntimeException(""Unable to load initializers file"", e);
        }

        // now call any initializers we read
        callInitializers();
}

private void loadResources(Enumeration resources, Set loadedFiles) throws IOException
{
        if (resources != null)
        {
                while (resources.hasMoreElements())
                {
                        InputStream in = null;
                        try
                        {
                                final URL url = (URL)resources.nextElement();
                                if (!loadedFiles.contains(url))
                                {
                                          log.info(""resource url: {} "", url);
                                          final Properties properties = new Properties();
                                          in = url.openStream();
                                          properties.load(in);
                                          load(properties);
                                          loadedFiles.add(url);
                                }
                        }
                        finally
                        {
                                if (in != null)
                                {
                                        in.close();
                                }
                        }
                }
        }
    } ","Windows XP, Java 5, Wicket 1.3.1, Equinox OSGi 3.3.1",,,,,,,,,,,,,,,,08/Mar/08 16:49;jcompagner;classresolverpatch.txt;https://issues.apache.org/jira/secure/attachment/12377448/classresolverpatch.txt,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-02-26 06:34:40.949,,,no_permission,,,,,,,,,,,,202347,,,Wed Apr 09 13:37:48 UTC 2008,,,,,,0|i0kgbr:,117462,,,,,,,,26/Feb/08 06:34;jcompagner;this is kind of touching the samething that we discussed a few days ago. We really should use the ClassResolver of the application i guess because thats our hook into osgi,"08/Mar/08 16:49;jcompagner;does this patch work for you?
We already have IClassResolver interface for OSGI to load the right classes
So that one should also be used for loading resources

The default implementation is what you did.","11/Mar/08 15:50;aharris;Johan,

Thanks for the patch.  It has one problem.  DefaultClassResolver.getResources(String name) never uses the ""name"" parameter, but still has the hard-coded string ""wicket.properties"".  

Otherwise, I think this will work.  I'll try it out.
",09/Apr/08 13:37;jcompagner;applied the patch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bogus LocalizedImageResource#isStateless(),WICKET-1340,12388413,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,slonopotamus,slonopotamus,12/Feb/08 07:30,28/Dec/09 14:00,14/Mar/19 03:09,12/Feb/08 15:16,1.3.0-final,1.3.1,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,1,,,,,,"Image without resource/resource reference should be stateless.

Bug is located in LocalizedImageResource#isStateless(), which should read ""return resourceReference == null;""

Test case is attached.",,,,,,,,,,,,,,,,,12/Feb/08 14:35;slonopotamus;Image2Test.java;https://issues.apache.org/jira/secure/attachment/12375367/Image2Test.java,12/Feb/08 07:31;slonopotamus;ImageTest.java;https://issues.apache.org/jira/secure/attachment/12375313/ImageTest.java,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2008-02-12 12:49:04.337,,,no_permission,,,,,,,,,,,,202320,,,Wed Feb 13 13:38:46 UTC 2008,,,,,,0|i0kgev:,117476,,,,,,,,"12/Feb/08 12:49;jcompagner;this is not true.

an Image is statefull if it doesn't have a ResourceReference
If it does have a resource reference then it is a shared resources with a shared resource reference url and then it is stateless.

Look at the method: protected void onComponentTag(final ComponentTag tag) of Image if the image doesn't have a RR then 
it will generate a callback to itself and that mean statefull","12/Feb/08 14:18;slonopotamus;Sadly I have to reopen this issue. Please find attached testcase (Image2Test.java). It tries to prove what you say (and fails...).

I cannot find any way to create a stateless Image. Could you show me an example?","12/Feb/08 14:35;slonopotamus;Sorry, mistyped your name","12/Feb/08 15:16;jcompagner;ok that made it more clear what you tried to test.
it should be fixed now in head.","13/Feb/08 08:10;slonopotamus;Just some thoughts:

1) Wrong assersion messages:
testEmpty -> ""image withOUT resource reference should be statefull""
testResource -> ""image with resource should be statefull""

2) Confusing javadoc in LocalizedImageResource#isStateless(). It says:
@return If it is stateless (if resource is null)

But current implementation checks if resource is NOT null.

3) I still doesn't understand why rr-less image is statefull. What's it's state? It doesn't have any variables defined -> no state. And image with rr has state - it contains knowledge about what exact resource this image references.
Look at your test case. Empty images has state, but non-empty image doesn't have state. This is very confusing.

So I strongly recommend you to take a deep breath and thing about this issue once more.","13/Feb/08 09:34;jcompagner;I fixed the message for testResource, deleted the testEmpty because when i thought about it that one didn't make any sense.
Because the empty one is completely depending on the markup the image has.

improved the javadoc: ""@return true if it has a resourceReference. (it points to a shared resource)""

stateless is not about variables or that kind of stuff.
A component is statefull if it generates a callback link to itself. And if an Image doesn't have a resourceReference but only a Resource then it generates a callback link so that it will serve the Resource itself.","13/Feb/08 10:44;slonopotamus;> And if an Image doesn't have a resourceReference but only a Resource then it generates a callback link so that it will serve the Resource itself.

I understand case with Resource. However empty image (that takes url from template) doesn't have any resource. And it doesn't generate callback to itself.

If image is empty then LocalizedImageResource searches for src attribute on tag and invokes LocalizedImageResource#loadStaticImage. Which sets ResourceReference! So empty image turns into image with ResourceReference (which is stateless as you say).","13/Feb/08 11:22;jcompagner;if you are looking through the code
then do look through ALL the code, there is one case that a resource is made
But this is why i removed the test with just the id constructor
Because testing it doesn't make any sense without markup that specifices more stuff.","13/Feb/08 12:24;slonopotamus;Ok, let's sum up.

1) Image should be stateful if it has Resource [either in LocalizedImageResource or in model].
2) Otherwise (if it has ResourceReference [either in LocalizedImageResource or in model]) it should be stateless.
3) If image is empty (it doesn't have R/RR in model and it doesn't have R/RR in LocalizedImageResource) then it cannot become stateful because in this case src tag attribute will be used and RR will be created so image will be the same as in 2.

Right?","13/Feb/08 13:38;jcompagner;better would be:

1> an Image is statefull it the LocalizedImageResource doesnt have a ResourceReference (to a null or to a current resource)

2> if Image is empty then most likely a ResourceReference is generated (and <1> applies) but a Resource could be generated in one spefic case (ImageFactory) then it is statefull",,,,,,,,,,,,,,,,,,,,,,,
"AjaxFormChoiceComponentUpdatingBehavior just updates the group ""grandchildren""",WICKET-1332,12388276,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,memeplex,memeplex,09/Feb/08 20:17,24/Mar/08 18:27,14/Mar/19 03:09,24/Mar/08 15:17,1.3.1,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,2,,,,,,"Up to 1.3.0, there was a bug in that AjaxFormChoiceComponentUpdatingBehavior updated just the group's direct children. Now it generates the header script quoted below, that iterates over the direct children and then over the children of these, triggering the event for the input grandchildren only. So the situation is even worse. I think that attachChoiceHandlers should descend recursively and search for input elements along all the group descendants, not just one arbitrarily chosen level.

function attachChoiceHandlers(markupid, callbackscript) {
 var choiceElementGroup = document.getElementById(markupid);
 for( var x = 0; x < choiceElementGroup.childNodes.length; x++ ) {
   var choiceElementList = choiceElementGroup.childNodes[x];   for( var y = 0; y < choiceElementList.childNodes.length; y++ ) {
     if (choiceElementList.childNodes[y] && choiceElementList.childNodes[y].tagName) {
       var tag = choiceElementList.childNodes[y].tagName.toLowerCase();
       if (tag == 'input') {
         Wicket.Event.add(choiceElementList.childNodes[y],'click', callbackscript);       }
     }
   }
 }
}
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-02-09 20:58:47.387,,,no_permission,,,,,,,,,,,,202312,,,Mon Mar 24 18:27:28 UTC 2008,,,,,,0|i0kgf3:,117477,,,,,,,,"09/Feb/08 20:28;memeplex;Here is a fix I'm using meanwhile, using proptotype:

function attachChoiceHandlers(markupid, callbackscript) {
 $(markupid).descendants().each(function(element) {
   if (element && element.tagName) {
     if (element.tagName.toLowerCase() == 'input') {
       Wicket.Event.add(element, 'click', callbackscript);     }
   }
 });
}",09/Feb/08 20:58;ivaynberg;can you whip up some js to handle this?,"09/Feb/08 23:38;memeplex;Igor, here is a version not dependant on prototype, it worked for me but i can't ensure it's bullet proof.

    @Override
    public void renderHead(IHeaderResponse response) {
        super.renderHead(response);
        AppendingStringBuffer asb = new AppendingStringBuffer();
        asb.append(""function attachChoiceHandlers(markupId, callbackScript) {\n"");
        asb.append(""  function attachToDescendants(node) {\n"");
        asb.append(""    var childNodes = node.childNodes;\n"");
        asb.append(""    if (!childNodes) return;\n"");
        asb.append(""    for (var i = 0 ; i < childNodes.length ; i ++) {\n"");        
        asb.append(""      var childNode = childNodes[i];\n"");        
        asb.append(""      if (childNode.tagName) {\n"");
        asb.append(""        if (childNode.tagName.toLowerCase() == 'input') {\n"");
        asb.append(""          Wicket.Event.add(childNode, 'click', callbackScript);\n"");
        asb.append(""        }\n"");
        asb.append(""        attachToDescendants(childNode);\n"");
        asb.append(""      }\n"");
        asb.append(""    }\n"");
        asb.append(""  }\n"");
        asb.append(""  attachToDescendants(wicketGet(markupId));\n"");
        asb.append(""}\n"");
        response.renderJavascript(asb, ""attachChoice"");
        response.renderOnLoadJavascript(""attachChoiceHandlers('"" + getComponent().getMarkupId() +
                ""', function() {"" + getEventHandler() + ""});"");
    }
","19/Feb/08 21:33;memeplex;Here is a shorter, safer and faster version that uses getElementsByTagName instead of a recursive descent. It also checks for the type of input fields in order to attach handlers just to radios and checkboxes.

        asb.append(""function attachChoiceHandlers(markupId, callbackScript) {\n"");
        asb.append(""  var inputNodes = wicketGet(markupId).getElementsByTagName('input');\n"");
        asb.append(""  for (var i = 0 ; i < inputNodes.length ; i ++) {\n"");
        asb.append(""    var inputNode = inputNodes[i];\n"");
        asb.append(""    if (!inputNode.type) continue;\n"");
        asb.append(""    var inputType = inputNode.type.toLowerCase();\n"");
        asb.append(""    if (inputType == 'check' || inputType == 'radio') {\n"");
        asb.append(""      Wicket.Event.add(inputNode, 'click', callbackScript);\n"");
        asb.append(""    }\n"");
        asb.append(""  }\n"");
        asb.append(""}\n"");","24/Mar/08 15:17;jcompagner;i applied that last patch, can everybody test for the different browsers if it works now?","24/Mar/08 16:58;memeplex;Johan, after posting this I realized that it should say 'checkbox' instead of 'check', but forgot to comment about it at that time.","24/Mar/08 18:27;jcompagner;changed that, would be nice to have some unit test for that but thats a bit hard to test...",,,,,,,,,,,,,,,,,,,,,,,,,,
"AbstractPageableView has transient cachedItemCount, but doesn't set it to -1 on deserialization.",WICKET-1323,12387928,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,benjamin.keil,benjamin.keil,06/Feb/08 02:35,10/Mar/19 10:37,14/Mar/19 03:09,06/Feb/08 09:54,1.3.1,,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"AbstractPageableView declares:

private transient int cachedItemCount;

When this is deserialized,  cachedItemCount gets set to 0.  This means that the method isItemCountCached() will return true on a deserialized AbstractPageableView.  This, in turn, causes getCurrentPage() to return 0, even when the user is not navigating the first page.

For me, this is causing huge problems with the paging navigator.

My current workaround is this is to add this method to my DataView implementation:

private Object readResolve() throws ObjectStreamException {
	final Class<?> myClass = getClass();
	final Class<?> dataView = myClass.getSuperclass();
	final Class<?> dataViewBase = dataView.getSuperclass();
	final Class<?> abstractPagableView = dataViewBase.getSuperclass();
	try {
		final Field field;
		field = abstractPagableView.getDeclaredField(""cachedItemCount"");
		field.setAccessible(true);
		field.setInt(this, -1);
	} catch (Exception e) {
		throw new RuntimeException(e);
	}
	return this;
}

Obviously it would be better if the AbstractPagingView could take care of this itself.",Gentoo Linux / AMD64X2 / Java 6,,,,,,,,,,,,WICKET-6644,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-02-06 09:54:11.228,,,no_permission,,,,,,,,,,,,202304,,,Thu Feb 07 15:21:48 UTC 2008,,,,,,0|i0kgfr:,117480,,,,,,,,"06/Feb/08 09:54;jcompagner;i added:
	private void readObject(java.io.ObjectInputStream s) throws java.io.IOException,
		ClassNotFoundException
	{
		// Read in all fields
		s.defaultReadObject();
		clearCachedItemCount();
	}","07/Feb/08 15:21;benjamin.keil;Awesome, thanks!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StringResourceModel incorrectly escapes ' characters in choice formats,WICKET-1319,12387787,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,tesh11,tesh11,04/Feb/08 15:56,16/Sep/08 20:32,14/Mar/19 03:09,09/Mar/08 16:09,1.3.0-final,,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"Here is a sample format that breaks when migrating from 1.2.6 to 1.3.  We've currently worked around it by locating the string and using MessageFormat ourselves:

foo.label={0,choice,-1#n/a|-1<'{1}{0,number,#,##0.00}'}",,,,,,,,,,,,,,,,,09/Mar/08 12:38;jcompagner;patch.txt;https://issues.apache.org/jira/secure/attachment/12377480/patch.txt,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-03-08 15:22:19.107,,,no_permission,,,,,,,,,,,,202300,,,Mon Mar 10 09:04:41 UTC 2008,,,,,,0|i0kgg7:,117482,,,,,,,,"08/Mar/08 15:22;jcompagner;i guess you use it like this:

StringResourceModel(""label"", this, null, new Object[] { new Integer(10) }))

so by giving the param that uses the MessageFormat class. We also seem to have PropertySubstitution ourslfs by giving a model with it
its a bit confusing to have 2 things that sort of do the same thing...

But i see gerolf did change the ' escaping it moved it from PropertyVariableInterpolator to StringResourceModel (MessageFormat part) but those are not really related to each other...

Gerolf can you take a look? (revision 596906: moved single-quote-escaping from PropertyVariableInterpolator to StringResourceModel)","09/Mar/08 00:42;seitz;found a problem with the interaction of PropertyVariableInterpolator and StringResourceModel:
PVI always escapes single quotes (for use with MessageFormat), whereas SRM only uses MessageFormat if the ""Object[] parameters"" parameter is not null.

Always using MessageFormat (even when there's no {0}, ... parameter in the resource string) would mean, that users would need to properly escape *every* single quote in every string. don't think that's a good move.

don't know if making PVI aware that there might be other kind of variables ({0}...) and only let it escape the result string if such a parameter is present, is the right solution.

any thoughts?","09/Mar/08 12:21;seitz;for a quick fix, we could add a field ""boolean escapeSingleQuotes"" to PropertyVariableInterpolator which indicates whether #getValue should escape single quotes before returning the value.
however, this would make PVI aware that the strings are postprocessed in a certain way (MessageFormat#format).
so probably something like a EscapeStrategy in VariableInterpolator would fit for the more general case.
EscapeStrategy would either contain a Map<Character /*toEscape*/, String/*escape sequence*/> or just a ""char escapeCharacter"" and a list of charactersToEscape...

any thoughts?","09/Mar/08 12:38;jcompagner;i have another patch
Its also a hack.... But all the test passes and we dont really change any interface except make Localizer
public String substitutePropertyExpressions(final Component component, final String string,
		final IModel model)

public.

","09/Mar/08 16:09;jcompagner;I applied my patch for now.
Maybe in 1.4 we should rewrite Localizer.substitutePropertyExpressions to have an extra param IEscapeStrategy ","09/Mar/08 16:28;seitz;thanks, Johan.",10/Mar/08 09:04;tesh11;Thanks for this fix!,,,,,,,,,,,,,,,,,,,,,,,,,,
autolinked resources have locale appended,WICKET-1307,12387208,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,n8han,n8han,25/Jan/08 23:09,21/Apr/08 13:41,14/Mar/19 03:09,21/Apr/08 13:41,1.3.0-final,1.3.1,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"For a resource that does not have a locale-specific file, it should be appended to the resource key. This works correctly for the first request to a page with the autolinked resource; you get a file name that matches the one in the sources. But on all following requests a locale (like _en_US) will be inserted into the name. While the resource can be served (because it's been added to the shared resource pool) this name has a significant downside. It can not be resolved in reverse. Therefore, if the server is restarted and a client already knows of that resource location including the _en_US and requests it before requesting the page that auto-link it, a 404 such as this is returned:

Unable to find package resource [path = ts4/web/wicket/component/FeedbackPanel_en_US.css, style = null, locale = null]

Futhermore, all future requests will fail, even after the page with the component has rendered, because the bad resource specifier has been added to the pool.

The reason for this behavior is complicated, but it comes down to this static method:

PackageResource.get(final Class scope, final String path, final Locale locale, final String style)

Not only goes it ""get"" the resource, it adds it to the resource pool. The autolinker, in the course of finding the right resource (with a locale matching actual file names) inadvertently adds the wrong resource by trying to get it as a test. It discovers the right resource and serves it with that name on the first request, but following that it is able to find the resource in the pool with the wrong name and so serves it in that manner.",,,,,,,,,,,,,,,,,25/Jan/08 23:14;n8han;resource.patch;https://issues.apache.org/jira/secure/attachment/12374098/resource.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-02-02 12:19:04.709,,,no_permission,,,,,,,,,,,,202289,,,Mon Apr 21 13:41:03 UTC 2008,,,,,,0|i0kgh3:,117486,,,,,,,,25/Jan/08 23:14;n8han;This patch removes the line that adds the shared resource in the get() function. I can't guarantee that it doesn't break anything that depends upon get() also doing the add. In applying it I confirmed that it does solve the problem and does not have any apparent side effects in the t.s. codebase.,"02/Feb/08 12:19;jcompagner;it did break one thing.
PackageResourceTest ...

Now PackageResource.bind() doesn't really bind anymore..",02/Feb/08 12:23;jcompagner;i added the  add line again but now in the bind method itself and not in get ,02/Feb/08 19:44;ehillenius;Sorry about that. And thanks for fixing it.,"18/Apr/08 17:39;n8han;1.3.3 is doing this again, anyone know what happened?",18/Apr/08 20:22;jdonnerstag;please provide a junit test case with the correct assertion. Only than you can be sure that the functionality doesn't change.,"20/Apr/08 23:17;nathan@technically.us;The procedure needed to reveal this bug is bit elaborate for a unit test (it requires multiple requests, and the markup itself is the only sure place to validate). For now I will concentrate on debugging it and supplying a new patch.","21/Apr/08 03:39;nathan@technically.us;Okay I found the problem. It's different enough from the way this one was originally observed and triggered that I created a new bug, WICKET-1556. This one may be closed again.",21/Apr/08 13:41;frankbille;Closed by demand,,,,,,,,,,,,,,,,,,,,,,,,
AbstractTextComponent requires itself to be rendered before conversion happens,WICKET-1305,12387181,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,snekoval,snekoval,25/Jan/08 17:25,07/Mar/08 22:10,14/Mar/19 03:09,07/Mar/08 22:10,1.3.0-final,,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"The bug is reproduced as follows:

1. Use StatelessForm.
2. Use compound model, eg CompoundPropertyModel. In this case, form components are not initially aware of their model types.
3. Use any text component inside, eg TextField

What happens:

1. In StatelessForm, form processing occurs BEFORE components were actually rendered.
2. BUT AbstractTextComponent guesses its model type ONLY in onBeforeRender().
3. onBeforeRender() never gets called, so text component doesn't know its actual type and cannot convert properly.
4. Everything crashes because of incorrect type (validators and form submission is working wrong).

Obviously, this processing sequence needs to be fixed (eg retrieve model type early or check for stateless forms explicitly).",wicket 1.3-final,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-07 22:10:10.423,,,no_permission,,,,,,,,,,,,202287,,,Fri Mar 07 22:10:10 UTC 2008,,,,,,0|i0kghb:,117487,,,,,,,,07/Mar/08 22:10;jcompagner;convertInput now checks if the type is already resolved or not,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"AbstractAjaxTimerBehavior gets only a ""Page Expired"" back",WICKET-1296,12386613,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,thza,thza,18/Jan/08 14:59,18/Mar/08 20:25,14/Mar/19 03:09,18/Mar/08 20:25,1.3.0-final,,,,,,,,,,,1.3.1,,,wicket,,,,,,,,,,,0,,,,,,"I added a AbstractAjaxTimerBehavior to the Page without any actions.
After the programmed timeout the page is showing a ""Page Expired"" page.

I extracted the AJAX Call back URL from the generated Page and put in into the browser. I also received a ""Page Expired"" page.
","Windows XP, JDK 1.5 - 09, Jetty 6, Firefox 2.0.0.11",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-03-09 14:48:10.173,,,no_permission,,,,,,,,,,,,202280,,,Tue Mar 18 20:24:52 UTC 2008,,,,,,0|i0kghr:,117489,,,,,,,,"09/Mar/08 14:48;jcompagner;do you have a test case?
is your page serializable, are you sure you dont have serializeable exceptions in your log?","18/Mar/08 20:24;thza;Hello,
this case is working with 1.3.1.
Thank you.
Regards
Thomas

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Links on the main page are not clicable under IE 6,WICKET-1287,12386360,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,xsergey,xsergey,16/Jan/08 09:32,16/Sep/08 20:32,14/Mar/19 03:09,21/Jan/08 13:34,1.3.0-rc2,,,,,,,,,,,1.3.0-final,,,wicket-examples,,,,,,,,,,,0,,,,,,"Steps to reproduce:
1. Open IE 6 
2. Go to http://wicketstuff.org/wicket13/
3. All links to the examples are not clickable

It seems tha the problem is caused by ie.css for this demo. Please look at is.css:
#container {
	background-image: none;
	filter:progid:DXimageTransform.Microsoft.AlphaimageLoader(src='images/bg_container.png', sizingMethod='scale');

If simply use background-image: url('images/bg_container.png') - all links are clickable","Live Demo http://wicketstuff.org/wicket13/
Windows XP SP 2, IE 6.0",,,,,,,,,,,,,,,,17/Jan/08 09:41;xsergey;IE.PNG;https://issues.apache.org/jira/secure/attachment/12373374/IE.PNG,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2008-01-21 13:34:28.513,,,no_permission,,,,,,,,,,,,202271,,,Mon Jan 21 15:45:22 UTC 2008,,,,,,0|i0kgiv:,117494,,,,,,,,"17/Jan/08 09:45;xsergey;1. The issue was reported to the public demo http://wicketstuff.org/wicket13/ and still reproducible. What version is currently deployed on this server?

2. I attached information about the browser. Please feel free to request any additional details if it help you to resolve the problem.","21/Jan/08 13:34;frankbille;It is already fixed in the 1.3 final release. You can see it if you download the dist and run the examples.

I have created a task for redeploying the examples on the site: WICKET-1298",21/Jan/08 15:45;xsergey;Thank you ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
iframe get request done 2x after ajax change in IE,WICKET-1257,12385500,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,tomdesmet,tomdesmet,03/Jan/08 15:17,14/Jan/08 19:24,14/Mar/19 03:09,14/Jan/08 06:46,1.3.0-final,1.3.0-rc2,,,,,,,,,,1.3.1,,,wicket,,,,,,,,,,,0,,,,,,"http://www.nabble.com/bug%3A-iframe-get-request-done-2x-after-ajax-change-in-IE-to14598132.html

We have a page that has an iframe and an ajax button.
When the ajax button is clicked, the iframe is replaced by a new iframe with specific src.

We have encountered the phenomenon where the iframe src is requested
two times to the server after the button gets clicked.

After some debugging, the problem was pinned down and
lies within the file org\apache\wicket\ajax\wicket-ajax.js

The problem is within the function ""replaceOuterHtmlIE"".

There is some kind of ""hack"" to read the <script> tags within the received html...

First the content of the div is filled with a table containing received ajax component markup:
 
  tempDiv.innerHTML = '<table style=""display:none"">' + text + '</table>';

This way script tags can be retrieved. Afterwards the innerHTML is replaced by a div containing received text.

  tempDiv.innerHTML = '<div style=""display:none"">' + text + '</div>';

Both statements cause IE to fetch the urls within the contained text (in our case <iframe src=""someurl""></iframe> tags).

We patched this the following way ...

The first occurence of tempDiv.innerHTML, The content of the div is filled with a table containing a div.

  tempDiv.innerHTML = '<table style=""display:none""><div style=""display:none"">' + text + '</div></table>';

After the script tags are retrieved, the table gets removed from the structure,
and the div within the table is connected to tempDiv.

  var table=tempDiv.firstChild;
  var childDiv=table.firstChild.firstChild;
  tempDiv.removeChild(table);
  tempDiv.appendChild(childDiv);

Would it be possible to apply this patch to the next wicket version?

We experienced some problems with the patch, below is the updated version that we use.

var table=tempDiv.firstChild;
tempDiv.removeChild(table);
if(tempDiv.childNodes.length==0) {
  var childDiv=table.firstChild.firstChild;
  table.firstChild.removeChild(childDiv);
  tempDiv.appendChild(childDiv);
}
else {
  tempDiv.removeChild(tempDiv.lastChild); // slash table
  tempDiv.removeChild(tempDiv.lastChild); // div
  var childDiv=document.createElement(""div"");
  childDiv.style.display=""none"";
  var child;
  while(tempDiv.childNodes.length>0) {
    child=tempDiv.firstChild;
    tempDiv.removeChild(child);
    childDiv.appendChild(child);
  }
  tempDiv.appendChild(childDiv);
}",All platforms / Internet Explorer,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2008-01-12 20:38:45.412,,,no_permission,,,,,,,,,,,,202244,,,Mon Jan 14 06:46:51 UTC 2008,,,,,,0|i0kgmv:,117512,,,,,,,,"12/Jan/08 20:38;knopp;I have committed a fix but a different than you suggest. Problem with your suggestion is that you are trying to reuse DOM tree created with the first innerHTML. But the tree is invalid and often lacks certain elements (or certain other are wrong).

Would be great if you could try the current trunk and let me know if it solves your problem.","14/Jan/08 06:46;tomdesmet;Your patch (Rev. 611477) works fine. Thank you very much!
This bug can be closed.",14/Jan/08 06:46;tomdesmet;Your patch (Rev. 611477) works fine. Thank you very much! ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Temporary files not deleting when multipart upload fails with IO error,WICKET-1230,12384711,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,yar,yar,15/Dec/07 21:16,29/Dec/07 14:30,14/Mar/19 03:09,16/Dec/07 17:47,1.3.0-rc1,,,,,,,,,,,1.3.0-final,,,wicket,,,,,,,,,,,0,,,,,,"I just want to delete temporary files when upload fails (user cancelled or IO error occured), this is really important when uploading files about 500Mb, and this bug makes security hole (anyone can eating my server's disk space by posting incomplete large files).

I can't  find simple workaround, and I think that fix by developers will more easy.

For example you can handle IO error in class org.apache.wicket.util.upload.FileUploadBase, method parseRequest, when IO error occured, just delete all created temporary files, and only after deleting files throw your FileUploadException.

I hope you will fix it soon.
Thanks.

",,,,,,,,,,,,,,,,,16/Dec/07 06:57;yar;FileUploadBase.java;https://issues.apache.org/jira/secure/attachment/12371746/FileUploadBase.java,16/Dec/07 18:05;yar;FileUploadBase.java.patch;https://issues.apache.org/jira/secure/attachment/12371755/FileUploadBase.java.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2007-12-16 17:12:02.314,,,no_permission,,,,,,,,,,,,59291,,,Sun Dec 16 18:05:56 UTC 2007,,,,,,0|i0kgov:,117521,,,,,,,,16/Dec/07 07:40;yar;I attached my fixed file,16/Dec/07 17:12;ivaynberg;how about a patch?,16/Dec/07 17:47;jcompagner;applied,"16/Dec/07 18:05;yar;I don't know exactly how to create patches.
I created it with diff program.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deleting a treenode results in NPE,WICKET-1226,12384646,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,rdleeper,rdleeper,14/Dec/07 11:53,30/Dec/07 15:19,14/Mar/19 03:09,30/Dec/07 14:02,1.3.0-rc1,,,,,,,,,,,1.3.0-final,,,wicket,,,,,,,,,,,0,,,,,,"I have a LinkTree with the root node visible.  When deleting the last child tree node from the root, I get a NullPointerException.

java.lang.NullPointerException
     at org.apache.wicket.markup.html.tree.BaseTree.isNodeLast(BaseTree.java:167)
     at org.apache.wicket.markup.html.tree.BaseTree.access$000(BaseTree.java:49)
     at org.apache.wicket.markup.html.tree.BaseTree$JunctionBorder.renderBefore(BaseTree.java:215)
     at org.apache.wicket.Component.render(Component.java:2254)
     at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1240)
     at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1407)
     at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1344)
     at org.apache.wicket.Component.renderComponent(Component.java:2419)
     at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1354)
     at org.apache.wicket.markup.html.tree.AbstractTree$TreeItem.onRender(AbstractTree.java:203)
     at org.apache.wicket.Component.render(Component.java:2256)
     at org.apache.wicket.markup.html.tree.AbstractTree$TreeItemContainer$1.visitItem(AbstractTree.java:383)
     at org.apache.wicket.markup.html.tree.AbstractTree.visitItemAndChildren(AbstractTree.java:1430)
     at org.apache.wicket.markup.html.tree.AbstractTree.visitItemChildren(AbstractTree.java:1449)
     at org.apache.wicket.markup.html.tree.AbstractTree.visitItemAndChildren(AbstractTree.java:1431)
     at org.apache.wicket.markup.html.tree.AbstractTree.visitItemChildren(AbstractTree.java:1449)
     at org.apache.wicket.markup.html.tree.AbstractTree.visitItemAndChildren(AbstractTree.java:1431)
     at org.apache.wicket.markup.html.tree.AbstractTree.access$4(AbstractTree.java:1428)
     at org.apache.wicket.markup.html.tree.AbstractTree$TreeItemContainer.onRender(AbstractTree.java:390)
     at org.apache.wicket.Component.render(Component.java:2256)
     at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1240)
     at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1407)
     at org.apache.wicket.MarkupContainer.renderAssociatedMarkup(MarkupContainer.java:631)
     at org.apache.wicket.markup.html.panel.Panel.onComponentTagBody(Panel.java:112)
     at org.apache.wicket.Component.renderComponent(Component.java:2419)
     at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1354)
     at org.apache.wicket.Component.render(Component.java:2256)
     at org.apache.wicket.Component.renderComponent(Component.java:2359)
     at org.apache.wicket.ajax.AjaxRequestTarget.respondComponent(AjaxRequestTarget.java:702)
     at org.apache.wicket.ajax.AjaxRequestTarget.respondComponents(AjaxRequestTarget.java:604)
     at org.apache.wicket.ajax.AjaxRequestTarget.respond(AjaxRequestTarget.java:519)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:103)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1100)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1169)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1248)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:489)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:354)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:194)
     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
     at homeiq.hib.web.HibernateFilter.doFilter(HibernateFilter.java:68)
     at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1084)
     at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
     at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
     at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
     at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712)
     at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
     at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
     at org.mortbay.jetty.Server.handle(Server.java:313)
     at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:506)
     at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:830)
     at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:514)
     at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
     at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:381)
     at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:396)
     at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442)

A possible fix is the following:

In BaseTree.java:

               public void renderBefore(Component component)
		{
			Response response = RequestCycle.get().getResponse();
			TreeNode parent = node.getParent();

			CharSequence classes[] = new CharSequence[level];
			for (int i = 0; i < level; ++i)
			{
                                // FIX
				//if (isNodeLast(parent))
                                if ( parent == null || isNodeLast(parent) ) {
				{
					classes[i] = ""spacer"";
				}
				else
				{
					classes[i] = ""line"";
				}

				parent = parent.getParent();
			}

			for (int i = level - 1; i >= 0; --i)
			{
				response.write(""<td class=\"""" + classes[i] + ""\""><span></span></td>"");
			}

			if (isNodeLast(node))
			{
				response.write(""<td class=\""half-line\"">"");
			}
			else
			{
				response.write(""<td class=\""line\"">"");
			}
		}",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-12-20 15:48:53.124,,,no_permission,,,,,,,,,,,,202216,,,Sun Dec 30 15:19:29 UTC 2007,,,,,,0|i0kgpb:,117523,,,,,,,,"20/Dec/07 15:48;knopp;Hi, I've committed the suggested fix. Can you please try if it helps?",30/Dec/07 14:02;rdleeper;Yes the fix worked for me.  Thanks!,30/Dec/07 15:19;frankbille;The fix made it in for 1.3.0 final,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Temporary behaviors are not removed at the end of request,WICKET-1223,12384538,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,knopp,knopp,13/Dec/07 01:20,29/Dec/07 14:30,14/Mar/19 03:09,20/Dec/07 16:41,1.3.0-rc2,,,,,,,,,,,1.3.0-final,,,wicket,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202213,,,2007-12-13 01:20:49.0,,,,,,0|i0kgpj:,117524,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket-contrib-jasperreport JRResource serialization problem,WICKET-1217,12384395,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,montebove,montebove,11/Dec/07 10:13,13/Dec/07 09:06,14/Mar/19 03:09,13/Dec/07 09:05,1.3.0-rc1,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In  wicket-contrib-jasperreport code using a recent JasperReports version (2.0.2 in my application, but the problem is there also with previous releases) with Wicket 1.3 there is a bug in class JRResource that make it not serializable generating errors from the Wicket 1.3 serialization ckecks. It is determined by the call to JasperFillManager.fillReport(report, params, dataSource)  that changes the reportParameters (it's an HashMap) variable adding not serializable objects to it.

A simple solution is replacing the code in  getReportParameters() of JRResource  avoiding to return directly the variable:
        public Map getReportParameters()
        {
                //modified for jasperreport 2.0.2 serialization problem
                return new HashMap(reportParameters);
        } ",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202208,,,Thu Dec 13 09:05:43 UTC 2007,,,,,,0|i0kgpz:,117526,,,,,,,,13/Dec/07 09:05;montebove;Fixed in revision  3360 of wicket-contrib-jasperreports.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""ERROR: Error while parsing response: Invalid argument"" when refreshing form with DatePicker on IE",WICKET-1211,12384173,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,amatheus,amatheus,07/Dec/07 14:14,29/Dec/07 14:30,14/Mar/19 03:09,11/Dec/07 08:54,1.3.0-rc1,,,,,,,,,,,1.3.0-final,,,wicket-extensions,,,,,,,,,,,0,,,,,,"I found a strange problem with a Wicket application in IE using Ajax.

It works fine predictable in the 10 first clicks. in the 11th one it fails with ""Error while parsing response: Invalid argument.""

The response from the server (from wicket ajax debug window) is identical (except by the random url parameter and error message) before and after the 10th one.

In Firefox it works fine all times...

I managed to reproduce the error in a small page, it behaves exactly the same, except that it happens from the 14th to the 15th time...

II figured out that the error was apearing just if I override the enableMonthYearSelection to retur true.","Windows XP, Internet Explorer 6 and 7",,,,,,,,,,,,,,,,07/Dec/07 14:20;amatheus;test.zip;https://issues.apache.org/jira/secure/attachment/12371229/test.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-12-11 08:54:49.638,,,no_permission,,,,,,,,,,,,59310,,,Tue Dec 11 08:54:49 UTC 2007,,,,,,0|i0kgq7:,117527,,,,,,,,"07/Dec/07 14:20;amatheus;If you click on the date, it will work 14 times, in the 15th one if fails saing: ERROR: Error while parsing response: Invalid argument.

This happens only in IE.

","11/Dec/07 08:54;jcompagner;i fixed this yesterday, i am afraid it won't make it into the next RC that already is build.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wicket.Event getId() causes error in IE6,WICKET-1202,12383799,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,cdeal,cdeal,03/Dec/07 15:13,11/Dec/07 08:57,14/Mar/19 03:09,11/Dec/07 08:57,1.3.0-rc1,,,,,,,,,,,1.3.0-rc2,,,wicket,,,,,,,,,,,0,,,,,,"on 11/27/2007 (rev 598811?), mknopp introduced two new js methods in wicket-event.js.  This code causes javascript errors (on IE6) with the onload script.  Other events on the page are fine, but (at least) the onLoad event uses the window object and IE issues the message ""Object doesn't support this property or method"".

Specifically, I traced the problem to line 97: element.getAttribute(""id"").  getAttribute() is not supported by the window object.",,,,,,,,,,,,,,,,,03/Dec/07 15:15;cdeal;qs-wicketevent.zip;https://issues.apache.org/jira/secure/attachment/12370841/qs-wicketevent.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-12-11 08:57:13.588,,,no_permission,,,,,,,,,,,,202195,,,Tue Dec 11 08:57:13 UTC 2007,,,,,,0|i0kgqn:,117529,,,,,,,,"03/Dec/07 15:15;cdeal;This quickstart (against 1.3.0-SNAPSHOT) simply adds a HeaderContributor that wants to put an alert in the onLoad event.  Using IE6, you will get a javascript error and the alert will not be seen.",11/Dec/07 08:57;jcompagner;this is fixed in RC2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in IndexedHybridUrlCodingStrategy during encoding,WICKET-1198,12383750,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,02/Dec/07 21:18,02/Dec/07 21:19,14/Mar/19 03:09,02/Dec/07 21:19,1.3.0-rc1,,,,,,,,,,,1.3.0-rc2,,,wicket,,,,,,,,,,,0,,,,,,"java.lang.NullPointerException
     at org.apache.wicket.request.target.coding.IndexedHybridUrlCodingStrategy.appendParameters(IndexedHybridUrlCodingStrategy.java:51)
     at org.apache.wicket.request.target.coding.HybridUrlCodingStrategy.encode(HybridUrlCodingStrategy.java:409)
     at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.pathForTarget(WebRequestCodingStrategy.java:459)
     at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.encode(WebRequestCodingStrategy.java:236)
     at org.apache.wicket.RequestCycle.encodeUrlFor(RequestCycle.java:744)
     at org.apache.wicket.RequestCycle.urlFor(RequestCycle.java:847)
     at org.apache.wicket.Component.urlFor(Component.java:3086)
     at org.apache.wicket.protocol.http.WebRequestCycle.redirectTo(WebRequestCycle.java:144)
     at org.apache.wicket.request.target.component.PageRequestTarget.respond(PageRequestTarget.java:58)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:103)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1100)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1169)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1248)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:489)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:343)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:193)

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202192,,,Sun Dec 02 21:19:23 UTC 2007,,,,,,0|i0kgrb:,117532,,,,,,,,02/Dec/07 21:19;dashorst;Fixed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketTester NPE on redirect,WICKET-1187,12383286,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,jla415,jla415,27/Nov/07 05:22,16/Dec/07 19:25,14/Mar/19 03:09,16/Dec/07 18:38,1.3.0-rc1,,,,,,,,,,,1.3.0-rc2,,,wicket,,,,,,,,,,,0,,,,,,"
Trying to test a redirect after a form submit causes a NullPointerException in some cases

java.lang.NullPointerException
	at org.apache.wicket.protocol.http.MockHttpServletResponse.sendRedirect(MockHttpServletResponse.java:534)
	at org.apache.wicket.protocol.http.WebResponse.redirect(WebResponse.java:232)
	at org.apache.wicket.protocol.http.BufferedWebResponse.close(BufferedWebResponse.java:66)
	at org.apache.wicket.protocol.http.MockWebApplication.processRequestCycle(MockWebApplication.java:386)
	at org.apache.wicket.util.tester.FormTester.submit(FormTester.java:588)
	at com.mycompany.TesterRedirectTest.testRedirectShouldntNpe(TesterRedirectTest.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:40)



see http://www.nabble.com/NPE-in-FormTester.submit-tf4875862.html for the email dialogue

attached is a quickstart that reproduces the problem




",,,,,,,,,,,,,,,,,27/Nov/07 05:23;jla415;testernpe.tgz;https://issues.apache.org/jira/secure/attachment/12370264/testernpe.tgz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-12-16 18:38:37.102,,,no_permission,,,,,,,,,,,,202183,,,Sun Dec 16 19:25:52 UTC 2007,,,,,,0|i0kgsn:,117538,,,,,,,,16/Dec/07 18:38;jcompagner;Should be already fixed in rc2,"16/Dec/07 19:13;frankbille;Changed fix version to rc2, cause you say it's already fixed in rc2",16/Dec/07 19:25;jcompagner;yeah but i thought then it is in the release notes of rc3....,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Task does not deal very well with a terminated thread,WICKET-1181,12383056,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,sbailliez,sbailliez,22/Nov/07 11:45,29/Dec/07 14:30,14/Mar/19 03:09,16/Dec/07 18:36,1.3.0-rc1,,,,,,,,,,,1.3.0-final,,,wicket,,,,,,,,,,,0,,,,,,"For some weird reason, several time I was looking for a reason why wicket did not pickup the changes in resources through the modification watcher and why it was not stopping at all even in the run code... as I noticed the thread was terminated (for an unknown reason, the uncaughtexceptionhandler is only java5)

The task cannot figure itself whether the thread is really started or not.

Rather than using isStarted flag which is static after it is set, I would also Thread.getState() to figure out whether it is active or not",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-12-16 18:36:47.229,,,no_permission,,,,,,,,,,,,202177,,,Sun Dec 16 18:36:47 UTC 2007,,,,,,0|i0kgtj:,117542,,,,,,,,"16/Dec/07 18:36;jcompagner;thread.getState()? which thread?

I added a try/catch/finally and do reset the boolean..",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ZeroPaddingIntegerConverter/AbstractConverter does not support null,WICKET-1178,12383053,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,sbailliez,sbailliez,22/Nov/07 11:25,29/Dec/07 14:30,14/Mar/19 03:09,16/Dec/07 18:08,1.3.0-rc1,,,,,,,,,,,1.3.0-final,,,wicket,,,,,,,,,,,0,,,,,,"java.lang.NullPointerException
     at org.apache.wicket.util.convert.converters.AbstractConverter.parse(AbstractConverter.java:55)
     at org.apache.wicket.util.convert.converters.AbstractNumberConverter.parse(AbstractNumberConverter.java:76)
     at org.apache.wicket.util.convert.converters.ZeroPaddingIntegerConverter.convertToObject(ZeroPaddingIntegerConverter.java:66)
     at org.apache.wicket.markup.html.form.FormComponent.convertInput(FormComponent.java:1134)
     at org.apache.wicket.markup.html.form.FormComponent.validate(FormComponent.java:1016)
     at org.apache.wicket.markup.html.form.Form$15.validate(Form.java:1644)
     at org.apache.wicket.markup.html.form.Form$ValidationVisitor.formComponent(Form.java:152)
     at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:400)
     at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:387)
     at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:387)
     at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrderHelper(FormComponent.java:387)
     at org.apache.wicket.markup.html.form.FormComponent.visitFormComponentsPostOrder(FormComponent.java:365)
     at org.apache.wicket.markup.html.form.Form.visitFormComponentsPostOrder(Form.java:982)
     at org.apache.wicket.markup.html.form.Form.validateComponents(Form.java:1640)
     at org.apache.wicket.markup.html.form.Form.validate(Form.java:1631)
     at org.apache.wicket.markup.html.form.Form.process(Form.java:794)
     at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:766)
     at java.lang.reflect.Method.invoke(Method.java:597)
     at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:183)
     at org.apache.wicket.request.target.component.listener.ListenerInterfaceRequestTarget.processEvents(ListenerInterfaceRequestTarget.java:73)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:90)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1094)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1169)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1248)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:489)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:343)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:193)",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-12-16 18:08:51.832,,,no_permission,,,,,,,,,,,,202174,,,Sun Dec 16 18:08:51 UTC 2007,,,,,,0|i0kgu7:,117545,,,,,,,,"16/Dec/07 18:08;jcompagner;since 7 nov i do see this:
		if (value == null)
		{
			return null;
		}

And i see that you still have an old stacktrace so i guess you used a version just before that fix",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FormComponentFeedbackIndicator and FormComponentFeedbackBorder is broken,WICKET-1172,12382869,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,dmrzh,dmrzh,20/Nov/07 12:02,21/Nov/07 16:12,14/Mar/19 03:09,21/Nov/07 16:12,1.3.0-rc1,,,,,,,,,,,1.3.0-rc2,,,wicket,,,,,,,,,,,3,,,,,,"FormComponentFeedbackIndicator is not work. FormComponentFeedbackIndicator  always invisible because:
first render forms contain no errors, 
method FormComponentFeedbackIndicator.onBeforeRender  (line 78)  sets component invisible.
onBeforeRender() not call for invisible components.

workaround: override isVisible method :

 @Override
      public boolean isVisible() {
        return Session.get().getFeedbackMessages().hasMessage(this.getFeedbackMessageFilter());
      }


method onBeforeRender don't need override in org.apache.wicket.markup.html.form.validation.FormComponentFeedbackIndicator

same situation with FormComponentFeedbackBorder .",,,,,,,,,,,,,,,,,21/Nov/07 14:26;slonopotamus;IndicatorTest.java;https://issues.apache.org/jira/secure/attachment/12369980/IndicatorTest.java,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-11-21 13:14:07.733,,,no_permission,,,,,,,,,,,,59309,,,Wed Nov 21 16:12:52 UTC 2007,,,,,,0|i0kgv3:,117549,,,,,,,,"21/Nov/07 13:14;jcompagner;this is weird, because the FormComponentFeedbackBorder it self is still visible..
Its the indicator that will be set to none visible which is a child of the FormComponentFeedbackBorder
so onBeforeRender should be called on it because isVisible of the border itself should still return true.

You are right about the FormComponentFeedbackIndicator that one sets itself none visible so then it goes wrong. But can you be sure/test that it also really goes wrong for FormComponentFeedbackBorder ?
Do you have a simple test (junit if possible)","21/Nov/07 14:27;slonopotamus;Please find testcase in attached file.
There are two tests:
* testFixedVisible, which runs fixed FormComponentFeedBackIndicator (and passes)
* testVisible, which runs current FormComponentFeedBackIndicator (and fails)","21/Nov/07 16:12;jcompagner;I made 2 unit test one for the border and one for the indicator.
The indicator did fail as you described, but the border did work fine.

I fixed the indicator problem.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxEditableLabel#setModel() is broken,WICKET-1160,12382510,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,pete,pete,14/Nov/07 12:19,14/Nov/07 13:10,14/Mar/19 03:09,14/Nov/07 13:10,,,,,,,,,,,,1.3.0-rc2,,,wicket-extensions,,,,,,,,,,,0,,,,,,"The following code

            AjaxEditableLabel label = new AjaxEditableLabel(""someid"");
            label.setModel(...);

will throw an NullPointerException.

The reason is...

	public final Component setModel(IModel model)
	{
		super.setModel(model);
		*** getLabel().setModel(model); ****
		getEditor().setModel(model);
		return this;
	}

getLabel() returns null because the label is not initialized.

I suggest the following fix:

	protected final Component getLabel()
	{
		return label;
	}

should be changed to

	protected final Component getLabel()
	{
		if (label == null)
		{
			initLabelAndEditor(getParentModel());
		}
		return label;
	}


this is similar to getEditor() which already initializes the component if it is null...

",,,,,,,,,,,,,,,,,14/Nov/07 12:25;pete;AjaxEditableLabel.patch;https://issues.apache.org/jira/secure/attachment/12369504/AjaxEditableLabel.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-11-14 13:10:30.214,,,no_permission,,,,,,,,,,,,202159,,,Wed Nov 14 13:10:30 UTC 2007,,,,,,0|i0kgvr:,117552,,,,,,,,14/Nov/07 12:25;pete;Here's a patch,14/Nov/07 13:10;jcompagner;applied,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
empty <wicket:fragment> shorthand <wicket:fragment /> does not work,WICKET-1141,12382185,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,sebster,sebster,09/Nov/07 12:26,14/Nov/07 12:53,14/Mar/19 03:09,14/Nov/07 12:53,1.3.0-beta4,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,"When making an empty fragment like so:

<wicket:fragment wicket:id=""emptyFragment"" />

It does not work, and all the html which follows the fragment until the end of the file is put into the fragment.
",,,,,,,,,,,,,,,,,10/Nov/07 12:19;sebster;patch.txt;https://issues.apache.org/jira/secure/attachment/12369289/patch.txt,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202142,,,2007-11-09 12:26:57.0,,,,,,0|i0kgx3:,117558,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Back button and lazyLoadPanel,WICKET-1137,12382111,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,killbulle,killbulle,08/Nov/07 17:25,29/Dec/07 14:30,14/Mar/19 03:09,16/Dec/07 16:37,1.3.0-beta4,1.3.0-rc1,,,,,,,,,,1.3.0-final,,,wicket-extensions,,,,,,,,,,,0,,,,,,"using the navigator back button with a lazyLoad panel in form generate an internal Error
tried to use meta cache-control no-store(as discussed in the forum) dont do the job :(

the problem happens only when the lazyloadpanel is in a form with a  datefield(yui extensions)
see the attached file ;)
Error trace(on page an trace)

java.lang.IllegalStateException: No behavior listener found with behaviorId 0; Component: [MarkupContainer [Component id = content, page = com.essec.espacerecruteur.wicket.web.extraction.ExtractionPage, path = 2:extractionForm:brochures:content.SelectedListPanel, isVisible = true, isVersioned = true]]
	at org.apache.wicket.request.target.component.listener.BehaviorRequestTarget.processEvents(BehaviorRequestTarget.java:95)
	at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:90)
	at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1091)
	at org.apache.wicket.RequestCycle.step(RequestCycle.java:1166)
	at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1245)
	at org.apache.wicket.RequestCycle.request(RequestCycle.java:489)
	at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:319)
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:169)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1089)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712)
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
	at org.mortbay.jetty.Server.handle(Server.java:281)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502)

regards Marc(thks for this great framework !)
",windows/jdk6/,,,,,,,,,,,,,,,,18/Nov/07 21:55;killbulle;HomePage.html;https://issues.apache.org/jira/secure/attachment/12369756/HomePage.html,18/Nov/07 21:56;killbulle;HomePage.java;https://issues.apache.org/jira/secure/attachment/12369757/HomePage.java,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2007-11-08 23:46:31.072,,,no_permission,,,,,,,,,,,,202139,,,Sun Dec 16 16:37:35 UTC 2007,,,,,,0|i0kgxr:,117561,,,,,,,,"08/Nov/07 23:46;jcompagner;how do you exactly get this.
do you see that on the epage or just in the log?

Where are you going back to? the one with the lazyloading panel or do you go away from the one with the lazy loading panel?

can you trigger it here? http://wicketstuff.org/wicket13/ajax/lazy-loading",14/Nov/07 12:47;jcompagner;a bit more feedback is welcome!,"15/Nov/07 14:01;killbulle;Hi, 
the only thing i can add is that this behavior seems to be correlated with the fact  DataTextField is in the same  form as the Panel
if i remove my DateTextField it ok
regards 
Marc",15/Nov/07 15:48;jcompagner;do you have a quick start then?,"18/Nov/07 22:00;killbulle;oki a test case who break as you asked me,
sorry for my first bug post, hope this one helps
the next time i will do a better reporting with code !
wicket rocks..!
regards marc",16/Dec/07 16:37;jcompagner;Couldn't reproduce it completely but there was an other problem which i think had the same cause so now the behavior should always be able to be executed because it always will be there.,,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxEditableLabel: defaultNullLabel() should really be a defaultNullorEmptyLabel(),WICKET-1131,12381843,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jkriesten,jkriesten,05/Nov/07 14:53,14/Nov/07 13:06,14/Mar/19 03:09,14/Nov/07 13:06,1.3.0-beta4,,,,,,,,,,,1.3.0-rc2,,,wicket-extensions,,,,,,,,,,,0,,,,,,"defaultNullLabel() only inserts '...' when the model is NULL, not when the model contains an empty String.

So right now it's impossible to get empty Strings edited with this component.",any,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-11-14 13:06:50.755,,,no_permission,,,,,,,,,,,,202134,,,Wed Nov 14 13:06:50 UTC 2007,,,,,,0|i0kgy7:,117563,,,,,,,,14/Nov/07 13:06;jcompagner;added the test for an empty string,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ThreadLocal leak in new RequestContext code prevents clean undeploy of Wicket application,WICKET-1129,12381841,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,adouma,maxb,maxb,05/Nov/07 14:30,05/Nov/07 16:52,14/Mar/19 03:09,05/Nov/07 15:29,1.3.0-beta4,,,,,,,,,,,1.3.0-rc2,,,wicket,,,,,,,,,,,0,,,,,,"Analyzing heap dumps of Tomcat running my Wicket webapp shows that the webapp ClassLoader is not becoming unreferenced and garbage-collectable when the webapp is undeployed. The cause is the RequestContext ThreadLocal - this ThreadLocal is *not* being cleared before the WicketFilter returns control to Tomcat - as a result, Wicket RequestContext instances remain attached to Tomcat theadpool threads. Thus the reference chain of Thread -> threadLocalsMap -> RequestContext instance prevents the JVM from unloading the undeployed webapp classes.","Tomcat 5.5.23, Wicket 1.3.0-beta4",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-11-05 15:29:00.835,,,no_permission,,,,,,,,,,,,202132,,,Mon Nov 05 16:52:24 UTC 2007,,,,,,0|i0kgyf:,117564,,,,,,,,"05/Nov/07 15:29;jcompagner;i think i have fixed it all, introduced a unset on the RequestContext class and called it in all the places i could think off.
Ate its part of the Portlet stuff so could you give it a quick look an then close this issue?","05/Nov/07 16:52;adouma;Solution seems fine by me, and for this ""context"" the portlet side of things are just the same.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inner form validators not skipped when inner form disabled,WICKET-1124,12381690,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,gwynevans,gwynevans,02/Nov/07 09:07,16/Sep/08 20:32,14/Mar/19 03:09,15/Mar/08 00:30,1.3.0-beta4,,,,,,,,,,,1.3.1,,,wicket,,,,,,,,,,,0,,,,,,"The specific issue I've just run across is where I have a outer form and, depending upon a checkbox, might have an inner form being enabled or not.  (It's an inner form, rather than just a part of the main form as it's off as a component with it's own panel.)

Anyway, the inner form has password/confirmPassword fields and an EqualInputValidator, but if the form is displayed but then disabled again (via Ajax, if significant,) when the form's finally submitted I get a warning, saying ""IFormValidator in form '...' depends on a component that has been removed from the page or is no longer visible. Offending component id `password`.""

As Igor commented, ""looks like we need to update form processing code to skip inner disabled forms"".

/Gwyn",,,,,,,,,,,,,,,,,28/Dec/07 22:01;seitz;WICKET-1124.patch;https://issues.apache.org/jira/secure/attachment/12372305/WICKET-1124.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-11-14 13:51:39.543,,,no_permission,,,,,,,,,,,,202127,,,Sat Mar 15 00:30:43 UTC 2008,,,,,,0|i0kgyv:,117566,,,,,,,,"02/Nov/07 09:22;gwynevans;There is WICKET-709, which added the ability to remove the Validator, but (without yet looking at the source) I suspect the best way might be to have the validator check it's component is visible before validating.","14/Nov/07 13:51;jcompagner;are we going to fix this for 1.3? It would be nice to have this in an unit test !
Does anybody has one that we can include?","18/Dec/07 13:32;seitz;i have created a wiki page[0] that should act as a specification to document how nested forms are *intended* to work.

currently, there are 11 scenarios on the page, and i have modified form handling, so that all 11 scenarios in form of unit tests are passed.

please take some time to review the scenarios and add new scenarios that should be covered too and/or comment on existing scenarios, should you not agree with the specified behavior.

[0] http://cwiki.apache.org/WICKET/nested-forms.html","22/Dec/07 00:50;seitz;the attached patch handles nested forms according to the ""specification"" at http://cwiki.apache.org/WICKET/nested-forms.html
since this involved quite some changes of the form processing codebase, i will also start a vote on dev@, whether this patch should be applied before the (hopefully soon) coming 1.3.0-rc3/final
","28/Dec/07 22:01;seitz;patch no longer includes FormTester (just committed the changes anyway), as it's not really part of the ""problem""","15/Mar/08 00:30;seitz;i think we can close this one.
the enhanced nested forms support has been available since the 1.3.1 release.",,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing javascript header referencies when there are no body or head tags.,WICKET-1105,12381280,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,capo,capo,26/Oct/07 22:10,24/Mar/08 14:23,14/Mar/19 03:09,24/Mar/08 14:23,,,,,,,,,,,,1.3.3,,,wicket,,,,,,,,,,,0,,,,,,"I have two wicket portlets using RatingPanel they are almost same. There is one difference in the markup.

First:
<head>
	<link rel=""stylesheet"" type=""text/css"" href=""style.css""/>
</head>
<html>
	<span wicket:id=""rating""></span>
</html>

Second:
<html>
	<span wicket:id=""rating""></span>
</html>

In first one is request executed via ajax. In second one not. In first one rendered page contains reference to 'wicket-ajax.js' file but in the second not.
","wicket trunk revision 588784
JDK 1.5.0_13-b05
Maven version: 2.0.7",,,,,,,,,,,,,,,,26/Oct/07 22:18;capo;wicket-portlets-test.zip;https://issues.apache.org/jira/secure/attachment/12368528/wicket-portlets-test.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-10-26 22:33:46.762,,,no_permission,,,,,,,,,,,,202108,,,Mon Mar 24 14:23:34 UTC 2008,,,,,,0|i0kh0f:,117573,,,,,,,,"26/Oct/07 22:18;capo;Test portlets for bug reproduction.

Steps:
1. unzip file
2. 'mvn eclipse:eclipse' (for eclipse of course)
3. run 'TestPortal' bean like java application (in src/test/java folder)
4. type in your browser 'http://localhost:8083/portlet1' for good behavior (request via ajax)
5. type in your browser 'http://localhost:8083/portlet2' for bad behavior (normal request)
",26/Oct/07 22:33;knopp;The second markup file was missing both the <head> and <body> tags. Wicket needs at least <body> tag in markup file so that it knows where to put the <head> tags (in case those are not provided). Maybe we could log an error at least in this case?,26/Oct/07 22:48;capo;Huh what a quick support. Thanx.,01/Nov/07 09:33;knopp;We should throw an exception if there is no <body> tag in markup file. Right now we just silently fail to respond header contribuion which is not good.,"01/Nov/07 11:58;jcompagner;juergen, this is more your area i think, but can you look at this one or give me a pointer where to look?
We make with the HtmlHeaderSectionHandler that does the parsign and inserts a special tag if it find the body..
So this is sometimes not possible because there is no body. Then we need to throw an exception if somehow we 
want to contribute to that. But on which place exactly is an header container created (where we test on the special tag that got inserted)
i see the HtmlHeaderResolver but thats just testing specific tags so we can't do it there either.

So what could be the place to test if there is a HtmlHeaderContainer added to a page? it can't be onBeforeRender of the page becaus then the html header is not resolved yet right? So is it only possible after the render? test did we make a HtmlHeaderContainer yes or no? But then we don't know if we really needed it... But i guess thats not a problem. 

Normally all pages should have a html header container right (after render)","01/Dec/07 08:50;jdonnerstag;in WebPage.afterRender() we remove HeaderContainers from the component hierarchy. I extended that code in a way that if no HeaderContainer was found and we are in development mode than a HeaderContainer is created, added to the page and executed. The result is what would have been rendered and if that is more than nothing than we log and error. For know is just a log and no exception.

I keep this issue open for a few more days to watch it","01/Dec/07 09:47;jdonnerstag;a few more comments:

- it is onDetach() not afterRender().
- since onDetach() catches all exceptions but doesn't forward them, which means no error page, logging is probably the best we can do.
- there are 2 test cases in our test base which now print such a error message but since log.error is disabled you won't see them
- this is not a comprehensive test. If you replace or remove components which want to contribute to the header than they are not detected. And we are not testing everything, just webpages (no ajax calls)
- one of the problems is that basically all beahvors (AbstractBehavior) implement IHeaderContributor and thus you can test for components and behavior which implement that interface. You must actually test whether they write something to the header response.
",23/Mar/08 06:02;ivaynberg;are we going to add that error check johan?,"23/Mar/08 13:01;jcompagner;that check is pretty much already in but disabled..
And i dont know exactly why it is disabled, but that could be because the bug maurice did find a few days back.
I have first to check that one out then i can see if this check can be enabled again.",24/Mar/08 14:23;jcompagner;the test should now work correctly and not result in an error,,,,,,,,,,,,,,,,,,,,,,,
invisible TransparentResolver skips markup of visible children and thus resulting in an exception in Page#checkRendering (component not found in markup),WICKET-1095,12380956,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,seitz,seitz,22/Oct/07 23:34,01/Nov/07 09:44,14/Mar/19 03:09,31/Oct/07 23:25,1.3.0-beta4,,,,,,,,,,,1.3.0-rc1,,,,,,,,,,,,,,0,,,,,,"the code involved can be found at http://papernapkin.org/pastebin/view/13287

if a transparent (= isTransparentResolver() {return true;}) markupContainer is set to invisible, the component's markup is skipped (markupStream.skipComponent() in Component.java line 2319).
if the parent containing the transparent markupContainer is added to the ajax request target and there is a component (in this case a button) ""inside"" the transparent markupcontainer's markup but is actually a child of the transparent markupcontainer's parent, the button is never actually rendered (due to skipping the markup of the transparent webmarkupcontainer) but is still visibleInHierarchy (see Page.java line 1005), because the invisible transparent markupcontainer is not a parent of the button.

the ultimate question is: what is the desired behavior for an invisible transparentResolver? render it's ""children"" or not?",,,,,,,,,,,,,,,,,24/Oct/07 20:33;seitz;WICKET-1095.zip;https://issues.apache.org/jira/secure/attachment/12368324/WICKET-1095.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-10-31 23:25:38.347,,,no_permission,,,,,,,,,,,,202099,,,Thu Nov 01 09:44:26 UTC 2007,,,,,,0|i0kh0v:,117575,,,,,,,,22/Oct/07 23:36;seitz;files to reproduce the bug,24/Oct/07 20:33;seitz;attached a simpler scenario,"31/Oct/07 23:25;jcompagner;No the ""child"" components shouldnt be rendered. thats fine by me
Also the Page.checkRendering should take that into account. So now
if a component isn't rendered (but is visible) then we check if a sibling of that component
is a none visible transparent resolver. If that is the case then we just put out a warn statement but don't throw the exception.","01/Nov/07 09:44;jdonnerstag;Just as a side note. The root cause of the problem is that we require transparent resolvers which essentially destroy the tree like hierarchy of components. The reason why we need transparent resolvers is because in 1.3 we not yet able to read/analyze the associated markup of a component within its constructor, to create these automatic components which require transparent resolvers within the constructure and to add user components to the correct container (the automatically created one) instead of the container the user is adding his child component to. ",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BaseWicketTester doesn't call detach() for AJAX requests,WICKET-1093,12380889,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,david.shepherdson,david.shepherdson,22/Oct/07 09:28,14/Nov/07 14:53,14/Mar/19 03:09,14/Nov/07 14:53,1.3.0-beta4,,,,,,,,,,,1.3.0-rc2,,,,,,,,,,,,,,0,,,,,,"BaseWicketTester doesn't call detach() on the request cycle when clicking an AJAX link. This does not match the behaviour when running in a 'real' servlet container, when detach() *does* get called for the same AJAX requests.

One side effect of this is that AJAX header contributions are left in the page and cause problems when the next request occurs. For example, we have a page that we want to test. It contains an AJAX link and a (non-AJAX) form. We click the link, then fill in and submit the form. However, an exception is thrown when submitting the form as it tries to render the AJAX header contribution left over from the AJAX page. (Exception comes from checkHeaderRendering() in AjaxHeaderResponse.)

We are working around this problem by overriding BaseWicketTester's clickLink(String, boolean) method, so as to hang onto the RequestCycle and call its detach() method once the response has been made for AJAX requests; for example:


    RequestCycle requestCycle = null;

    if (linkComponent instanceof AjaxLink) {
        ...
        setupRequestAndResponse();
        requestCycle = createRequestCycle();
        AjaxRequestTarget target = new AjaxRequestTarget(link.getPage());
        requestCycle.setRequestTarget(target);

        link.onClick(target);

        target.respond(requestCycle);
    }
    ...
    if (requestCycle != null) {
        // Detach the requestCycle, so that state isn't left around
        // for any further use of this page.
        requestCycle.detach();
    }


This should be a very simple one-line fix (well, 1 x the number of AJAX requests made in BaseWicketTester's clickLink(...) method, which is 3).
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202097,,,2007-10-22 09:28:06.0,,,,,,0|i0kh1b:,117577,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IndexedParamUrlCodingStrategy creates a parameter in PageParameters when there is no parameter in the URL,WICKET-1092,12380859,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,lorban,lorban,21/Oct/07 18:18,30/Oct/07 20:35,14/Mar/19 03:09,30/Oct/07 20:35,1.3.0-beta4,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"If you mount a page like this:
 mount(new IndexedParamUrlCodingStrategy(""/page"", MyPage.class));

MyPage is a class with a contructor that accepts PageParameters.

When you try to access the page with any of these URLs:
 http://myserver/page/
or
 http://myserver/page

the PageParameters contains a single parameter ""0"" / """".

But when you try:
 http://myserver/page//
or
 http://myserver/page///

then the PageParameters is empty. ",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-30 20:35:57.46,,,no_permission,,,,,,,,,,,,202096,,,Tue Oct 30 20:35:57 UTC 2007,,,,,,0|i0kh1j:,117578,,,,,,,,"30/Oct/07 20:35;jcompagner;fixed, it test if the rest is only empty (only has an ending /)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ClassCastException with MetaDataEntry ,WICKET-1081,12380667,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,mindhaq,mindhaq,18/Oct/07 10:24,18/Oct/07 11:08,14/Mar/19 03:09,18/Oct/07 11:08,1.3.0-rc1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"Pages which are IAjaxIndicatorAware throw a ClassCastException and can't be rendered.

I will attach a TestCase.","Jetty6, JDK6, Wicket 1.3 trunk",,,,,,,,,,,,,,,,18/Oct/07 10:28;mindhaq;JIRA_WICKET_1081.tar.gz;https://issues.apache.org/jira/secure/attachment/12367935/JIRA_WICKET_1081.tar.gz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-10-18 11:08:48.563,,,no_permission,,,,,,,,,,,,202086,,,Thu Oct 18 11:08:48 UTC 2007,,,,,,0|i0kh1z:,117580,,,,,,,,"18/Oct/07 10:28;mindhaq;Simple TestCase reproducing the bug.

See also http://www.nabble.com/ClassCastException-with-MetaDataEntry-tf4645640.html#a13270447",18/Oct/07 11:08;jcompagner;thx for the unit test i added it to our unit tests and fix the problem.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StringResourceModel.toString() misbehavior,WICKET-1080,12380583,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jkriesten,jkriesten,17/Oct/07 11:27,29/Oct/07 22:22,14/Mar/19 03:09,29/Oct/07 22:22,1.3.0-beta4,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"StringResourceModel.toString() doesn't behave like the API documentation states any more.

It returns a lot of debug information instead of the the getString()-result as stated in the docs.

",any,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-17 12:06:06.477,,,no_permission,,,,,,,,,,,,202085,,,Mon Oct 29 22:22:50 UTC 2007,,,,,,0|i0kh27:,117581,,,,,,,,"17/Oct/07 12:06;tmaeder;I agree the doc can use some clarification. As for the behaviour: I dont' believe toString() was ever intended to deliver user-presentable text. So my vote goes towards fixing the javadoc. toString() is typically used in debuggers, and I find the new format way more informative.",29/Oct/07 22:22;jcompagner;change the doc of the toString() method,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
VisitChildren + IComponentResolver broken in beta 4?,WICKET-1077,12380435,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,jal,jal,15/Oct/07 09:27,29/Oct/07 21:56,14/Mar/19 03:09,29/Oct/07 21:56,1.3.0-beta4,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"If the components are added on the page using ComponentResolver, visitChildren() method seems to be working incorrectly.  Created following example which works in beta 3 but not in beta 4.",JDK 1.5,,,,,,,,,,,,,,,,15/Oct/07 09:28;jal;VisitChildrenExample.zip;https://issues.apache.org/jira/secure/attachment/12367741/VisitChildrenExample.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-10-15 22:59:25.869,,,no_permission,,,,,,,,,,,,202082,,,Mon Oct 29 21:56:01 UTC 2007,,,,,,0|i0kh2f:,117582,,,,,,,,15/Oct/07 09:28;jal;Example,"15/Oct/07 22:59;knopp;This doesn't seem to be a bug in Wicket. In fact, the bug was that it worked before. IComponentResolve.resolve is called during render when any modifications to component hierarchy are not permitted. So the resolved component needs to be added through the autoAdd method, which removes the component immediately after it's done rendering. So when you call visitChildren during the label rendering, the component is no longer there. 

Even if we kept the component, it still wouldn't work when you e.g. put the label before the resolver, as when label is being rendered, the component is not yet resolved (added to page), because it's only resolved during the render phase.",16/Oct/07 06:49;ehillenius;Assigned version (beta 4),29/Oct/07 21:56;jcompagner;auto add components are not removed in the detach phase. So they should be there in the render phase (after they have been added ofcourse),,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SubmitLink component does not render markup id,WICKET-1076,12380432,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,01sas,01sas,15/Oct/07 07:48,29/Oct/07 22:07,14/Mar/19 03:09,29/Oct/07 22:07,1.2.6,,,,,,,,,,,1.2.7,,,wicket,,,,,,,,,,,0,,,,,,"wicket.markup.html.form.SubmitLink component does not render markup id (even if setOutputMarkupId(true) was used), because it doesn't use a super method onComponentTag.","Window XP SP3, Java 1.6, Tomcat 5.0_09",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-15 17:30:15.616,,,no_permission,,,,,,,,,,,,202081,,,Mon Oct 29 22:07:32 UTC 2007,,,,,,0|i0kh2n:,117583,,,,,,,,"15/Oct/07 17:30;nickabusey;This also exists for WebMarkupContainer, maybe this is a larger Component issue?","29/Oct/07 22:07;jcompagner;we can't call super in onComponentTag. So implement a simple hack so that the id is outputted when the output markup id boolean is set

I don;t know what you are talking about a global component issue. WebMarkupContainer doesn't have this problem",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LocalizedImageResource: 'static' Resource lost after locale/style change ,WICKET-1075,12380425,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jonas,jonas,15/Oct/07 07:02,03/Nov/07 19:36,14/Mar/19 03:09,03/Nov/07 19:36,1.3.0-beta4,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"I think LocalizedImageResource.setSrcAttribute(...) shouldn't
reset the resource field to null if locales (and styles) don't match, since
Resource doesn't seem to be locale/style specific (unlike
ResourceReference) and cannot be reloaded/recomputed
as the commentary (incorrectly) suggests if the
Image(String id, Resource imageResource) constructor was
used.
In the meantime, the following workaround can be used: just wrap
the Resource with a Model.
e.g. instead of Image(String id, Resource imageResource)
use Image(String id, new Model(Resource imageResource))",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-16 06:46:17.985,,,no_permission,,,,,,,,,,,,202080,,,Sat Nov 03 19:36:01 UTC 2007,,,,,,0|i0kh2v:,117584,,,,,,,,"16/Oct/07 06:46;ehillenius;bulk set issues to next version. I only did a quick check (and filtered some out for 1.3.1), but we can always bump em again.","03/Nov/07 19:36;jcompagner;fix it, 
it was always meant to be like this but a || should be a && and because of this bug we did hide another bug that was also not really shown because the unit test covering that was wrong.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Setting UnexpectedExceptionDisplay to IExceptionSettings.SHOW_NO_EXCEPTION_PAGE doesn't throw Servlet Exception,WICKET-1038,12379612,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,aakoch,aakoch,03/Oct/07 21:25,09/Mar/08 15:10,14/Mar/19 03:09,09/Mar/08 15:10,1.3.0-beta3,,,,,,,,,,,1.3.2,,,wicket,,,,,,,,,,,0,,,,,,"Setting UnexpectedExceptionDisplay to IExceptionSettings.SHOW_NO_EXCEPTION_PAGE doesn't throw Servlet Exception.

In my application class:
        getExceptionSettings().setUnexpectedExceptionDisplay(IExceptionSettings.SHOW_NO_EXCEPTION_PAGE);

But when an exception is thrown, for example:
    public Sub1Page() {
        if (true)
            throw new RuntimeException(""This is a test"");
    }

I don't get a ServletException, but a page with no text.I would have expected the container (Weblogic in this case) to display something.

I looked in the code, but I don't see any place where the exception is wrapped in a ServletException.

I think it's supposed to be handled in AbstractRequestCycleProcessor.respond().","Weblogic 8.1
Java 1.4",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-16 06:46:15.503,,,no_permission,,,,,,,,,,,,202044,,,Sun Mar 09 15:10:52 UTC 2008,,,,,,0|i0kh5r:,117597,,,,,,,,"16/Oct/07 06:46;ehillenius;bulk set issues to next version. I only did a quick check (and filtered some out for 1.3.1), but we can always bump em again.",09/Mar/08 15:10;jcompagner;now the internal error status code will be set if no wicket error page will be shown,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Session size is constantly increasing on setResponsePage(getPage()),WICKET-1036,12379579,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,mvoigt,mvoigt,03/Oct/07 15:27,03/Oct/07 15:35,14/Mar/19 03:09,03/Oct/07 15:35,1.3.0-beta3,,,,,,,,,,,1.3.0-beta4,,,wicket,,,,,,,,,,,0,,,,,,"When using 

setResponsePage(getPage())

from inside Link.onClicked() or Form.onSubmit(), the session size is increased. When using setResponsePage(getPage().getClass()) the session size is back to normal.","Windows XP SP2, jboss-4.2.0GA",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202042,,,2007-10-03 15:27:24.0,,,,,,0|i0kh67:,117599,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Get Invalid Content-Length header returned by TCP junction server,WICKET-1029,12379469,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,deejee74,deejee74,02/Oct/07 09:19,02/Feb/09 07:24,14/Mar/19 03:09,02/Feb/09 07:24,1.2.6,,,,,,,,,,,1.5-M1,,,wicket,,,,,,,,,,,0,,,,,,"When I use wicket on my localhost everything goes fine.
When I use it behind WebSeal, WebSeal gives errors on the content length header of the wicket javascript files.
The error is: ""Invalid Content-Length header returned by TCP junction server""
To bypass it, I placed the following line in comment in wicket.Resource:
response.setContentLength((int)resourceStream.length());

Kind regards,

Jeroen","OS: Windows XP SP2
Java 1.4.2
IBM RAD 6.0.1
IBM WebSeal",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-16 06:49:51.739,,,no_permission,,,,,,,,,,,,202037,,,Sun Mar 23 14:45:30 UTC 2008,,,,,,0|i0kh6n:,117601,,,,,,,,16/Oct/07 06:49;ehillenius;Assigned version (beta 4),"29/Oct/07 22:31;jcompagner;What is invalid about that content length?
Is it to large? to little? Why do you need to disable it? That is not really what you want to do
You should set the content length and then start to stream it. So that the browser knows upfront
how many bytes it will get.","26/Nov/07 13:32;deejee74;I really don't know what's invalid about the content length.
It's just the message I received from WebSeal.

(Sorry for the late response, but I've been on holiday)","16/Dec/07 16:43;jcompagner;please try to debug this a bit because i don't know what todo with this issue. 
First somebody with that setup should try to find that cause and see if it is a wicket fault yes or no.","23/Mar/08 14:45;jcompagner;setting this one to 1.5 for now, please try to reproduce/debug a bit further else i will close it.",,,,,,,,,,,,,,,,,,,,,,,,,,,,
POSITIVE and NEGATIVE in NumberValidator are badly named (or contain a bug),WICKET-1017,12379204,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,sebster,sebster,27/Sep/07 15:42,29/Dec/07 14:30,14/Mar/19 03:09,18/Dec/07 10:07,1.3.0-beta3,,,,,,,,,,,1.3.0-final,,,wicket,,,,,,,,,,,0,,,,,,"The POSITIVE validator is a new number validator with minimum 0.
However 0 is not positive. Therefore, the validator should be called NONNEGATIVE. That or it should not allow 0.
The validation messages (at least in Dutch) state that the number must be LARGER than 0 if I enter a negative number.
However, 0 is of course accepted.

Thus, for consistency I think it would probably be best to fix this one way or the other.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-09-27 15:59:58.27,,,no_permission,,,,,,,,,,,,202025,,,Tue Dec 18 15:06:58 UTC 2007,,,,,,0|i0kh7b:,117604,,,,,,,,"27/Sep/07 15:59;jcompagner;'hmm
it all starts with the minimum(0) method,we do say there: 

	/**
	 * Gets a Integer minimum validator to check if a integer value is greater
	 * then the given minimum value.
	 * 
	 */
	public static NumberValidator minimum(long minimum)
	{
		return new MinimumValidator(minimum);
	}


but the check isn't   

if (value <= minimum) fail

but 

if (value < minimum) fail

now i am curious what people expect to happen.. is it including or not??

same goes for the maximum validator..
But do we change the maximum/minimum validators ?
Or what i also can do is add a param to the constructors of those with an including flag..
By default it stays what it is now except for the Positive and Negative onces.


Or we can always just say in  a wicket world the 0 is negative and positive!","27/Sep/07 16:39;sebster;The minimum validator is correct. If the value is STRICTLY LESS than the minimum, you should fail, and only then. It seems to me the javadoc is wrong there. It should read something like ""check if an integer value is at least the given minimum value"".

As far as POSITIVE being a minimum(0) validator, that seems incorrect to me. And I'd prefer it if the Wicket world didn't have it's own version of mathematics. ;-)

The ""inclusive"" flag seems useful to me, but then the naming is a bit unintuitive in my opinion.

","16/Oct/07 06:46;ehillenius;bulk set issues to next version. I only did a quick check (and filtered some out for 1.3.1), but we can always bump em again.","17/Dec/07 20:38;ivaynberg;imho parameters should always be INCLUSIVE. so range (3,5) should accept 3,4,5. minumum(0) should accept 0,1,2,...

why do we even have POSITIVE and NEGATIVE? obviously it is rather ambiguous. lets deprecate those. i mean does it really save that much having them as global instances? they still get serialized the same...","18/Dec/07 10:07;jcompagner;this works to

/**
	 * a validator for ensuring for a positive number value
	 */
	public static final NumberValidator POSITIVE = minimum(Double.MIN_VALUE);

	/**
	 * a validator for ensuring a negative number value
	 */
	public static final NumberValidator NEGATIVE = maximum(-Double.MIN_VALUE);

But maybe seb can shoot a hole in this. But my added unit test say it works!

I added numerous unit test on the way for the NumberValidator classes. So we have even a better coverage!","18/Dec/07 11:07;sebster;It's a beautiful fix, it took me a while to understand it. :-)

Double.MIN_VALUE is *REALLY* counterintuitive (especially considering Integer.MIN_VALUE).

bsh % -1.0 < Double.MIN_VALUE;
<true>
bsh % -1 < Integer.MIN_VALUE;
<false>

I still think it's a good idea to deprecate POSITIVE and NEGATIVE as Igor suggested and at least cleary mention the API change, because there will probably be people depending on the old behavior.
","18/Dec/07 15:06;sebster;By the way, the javadoc for the minimum and maximum validators are still not updated (and incorrect). They need to be precise as to whether or not the endpoints are included.

For example:

		 * Gets a Double maximum validator for checking if an number is smaller than the given maximum

Should read ""is at most"" or ""smaller than or equal to"". Same with the other validators (including the range validators).


",,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxButton using null as the form in the onSubmit() callback,WICKET-997,12378910,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,ivaynberg,freemant,freemant,22/Sep/07 03:20,24/Sep/07 21:32,14/Mar/19 03:09,24/Sep/07 21:32,1.3.0-beta3,,,,,,,,,,,1.3.0-beta4,,,wicket,,,,,,,,,,,0,,,,,,"If the following constructor is used:

	public AjaxButton(String id)
	{
		this(id, null);
	}
	
Then the ""form"" field is null. This is fine if we use getForm() to find its form. But the code below
is using its ""form"" field when calling the callbacks:

	public AjaxButton(String id, final Form form)
	{
		super(id);
		this.form = form;
		add(new AjaxFormSubmitBehavior(form, ""onclick"")
		{
			protected void onSubmit(AjaxRequestTarget target)
			{
				AjaxButton.this.onSubmit(target, form); //BUG: using the field, not getForm()
			}
			protected void onError(AjaxRequestTarget target)
			{
				AjaxButton.this.onError(target, form); //BUG: using the field, not getForm()
			}
			......
		});
	}

So either getForm() should be used or that constructor should be removed (consistent with AjaxFallbackButton).",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,202005,,,2007-09-22 03:20:43.0,,,,,,0|i0kh93:,117612,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StringIndexOutOfBoundsException in ServletWebRequest.getRelativePathPrefixToWicketHandler,WICKET-991,12378769,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,zlate.tele,zlate.tele,20/Sep/07 15:54,03/Nov/07 19:54,14/Mar/19 03:09,03/Nov/07 19:54,1.3.0-beta3,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"Request attribute 'javax.servlet.forward.servlet_path' may be equals to empty string.
See patch...","Gentoo Linux, Apache Tomcat 6.0.14",,,,,,,,,,,,,,,,20/Sep/07 16:16;zlate.tele;bug_example.tgz;https://issues.apache.org/jira/secure/attachment/12366298/bug_example.tgz,20/Sep/07 15:55;zlate.tele;getRelativePathPrefixToWicketHandler_patch.diff;https://issues.apache.org/jira/secure/attachment/12366295/getRelativePathPrefixToWicketHandler_patch.diff,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2007-10-16 06:46:22.646,,,no_permission,,,,,,,,,,,,201999,,,Sat Nov 03 19:54:56 UTC 2007,,,,,,0|i0kh9z:,117616,,,,,,,,"16/Oct/07 06:46;ehillenius;bulk set issues to next version. I only did a quick check (and filtered some out for 1.3.1), but we can always bump em again.",03/Nov/07 19:54;jcompagner;applied it,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PropertyResolver map,WICKET-988,12378637,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,linuxroot,linuxroot,19/Sep/07 10:18,03/Nov/07 15:59,14/Mar/19 03:09,03/Nov/07 16:00,1.2.3,1.2.4,1.2.5,1.2.6,1.3.0-beta1,1.3.0-beta2,1.3.0-beta3,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"Key of map can not contains dot (.). When key contains dot, than getObjectAndGetSetter method from PropertyResolver class function not correct.
example: expression = mapProperty[something.something] - It search getter/setter mapProperty.something.something",all,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-09-20 06:32:57.043,,,no_permission,,,,,,,,,,,,201996,,,Fri Sep 21 09:23:38 UTC 2007,,,,,,0|i0khan:,117619,,,,,,,,20/Sep/07 06:32;ivaynberg;the short of this is that we will not support keys with dots because dot is a special character? or we can switch to greedy map keys?,"21/Sep/07 09:10;linuxroot;The best would be if I can use dot character in a map key (map[""language.en""]), because the way it is implemented now it tries to return map.get(""languag"").get(""en]"") which ( I think ) is incorrect. I'm not sure if should be possible to use different expression/property as a key to get value (for example: map[property.property]). For me it's enough to be able to use dot in a key string.","21/Sep/07 09:23;jcompagner;yes i know what goes wrong, we just delete all [] and replace them with a . because that is how it works fast and easy.
I just have to see how easy this is to somehow keep the [] or mark it as one..
I hope i can do this this weekend.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stripping javascript comments and whitespace breaks application when using prototype library,WICKET-987,12378614,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,knopp,wireframe,wireframe,19/Sep/07 02:56,14/May/08 19:41,14/Mar/19 03:09,20/Jan/08 20:12,1.3.0-beta1,1.3.0-beta2,1.3.0-beta3,,,,,,,,,1.3.0-beta4,,,,,,,,,,,,,,1,,,,,,"whenever I enable stripping javascript comments and whitespace, I get javascript errors loading my prototype.js file.  Since wicket automatically enables this setting when in ""DEPLOYMENT"" mode, this is a real show stopper for releasing my app.

This has been talked about recently, but I would recommend using an ""official"" javascript minification library instead of this home rolled implementation.  The YUI compressor seems to be correctly licensed and would be a great option, but I don't care as long as this is fixed. see WICKET-918 for more info

attaching sample project that exhibits the problem.
","wicket-1.3.0-beta3, wicketstuff-scriptaculous-1.3-SNAPSHOT",,,,,,,,,,,,,,,,19/Sep/07 02:57;wireframe;minify-javascript.zip;https://issues.apache.org/jira/secure/attachment/12366146/minify-javascript.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-09-19 09:47:26.347,,,no_permission,,,,,,,,,,,,59239,,,Wed May 14 19:41:47 UTC 2008,,,,,,0|i0khav:,117620,,,,,,,,"19/Sep/07 02:57;wireframe;sample project that has the issue.  to startup application on port 8080 run:
mvn jetty:run ","19/Sep/07 09:47;knopp;Thanks for the quickstart. The problem with Javascript stripper should be fixed in trunk. The javascripts now load well. Still, the plugable stripper is on my to-do list and I'll try implement it soon.",10/Jan/08 15:59;edward.yakop;This bug is re-appear in the wicket 1.3.0 in the release version.,10/Jan/08 16:01;wireframe;reopening since it does not appear to be fixed in 1.3.0.,"10/Jan/08 18:01;knopp;Really? Can I get a quickstart then? Works okay for me, even with scriptaculous (tested with current trunk, I don't suppose it's different than wicket-1.3 final). ",10/Jan/08 18:02;knopp;Just a snippet of javascript that fails when minified would be enough.,12/Jan/08 19:03;knopp;I'm going to resolve this as fixed again unless someone submits a script that breaks.,"14/May/08 16:13;memeplex;Line 4025 of prototype 1.6.0.2 gets truncated from

  document.write(""<script id=__onDOMContentLoaded defer src=//:><\/script>"");

to

  document.write(""<script id=__onDOMContentLoaded defer src=

on deployment mode. I think this is critical because it would probably be fatal for applications in production that depends on prototype (ours does).

","14/May/08 19:02;knopp;I just tried that line (document.write(""<script id=__onDOMContentLoaded defer src=//:><\/script>"");) with current trunk and it strips just fine. ","14/May/08 19:04;knopp;Okay, with whole file i can see it. But the problem is before that line. This regex breaks the stripper
/\[((?:[\w-]*:)?[\w-]+)\s*(?:([!^$*~|]?=)\s*((['""])([^\4]*?)\4|([^'""][^\]]*?)))?\]/
","14/May/08 19:41;knopp;Actually, it's the part right before the regexp. Anyway, should be fixed in trunk, thanks for report. Can anyone bother to commit this to 1.3?",,,,,,,,,,,,,,,,,,,,,,
IndexedParamUrlCodingStrategy chokes inside appendParameters() on Stateless forms,WICKET-976,12378301,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,christoph,christoph,14/Sep/07 16:16,03/Oct/07 15:53,14/Mar/19 03:09,03/Oct/07 15:53,1.3.0-beta3,,,,,,,,,,,1.3.0-beta4,,,wicket,,,,,,,,,,,0,,,,,,"Please see this thread - http://www.nabble.com/Bug-in-IndexedParamUrlCodingStrategy-1.3-Beta3-tf4440109.html#a12669595 .

The issue is when ever i use the IndexParamUrlCodingStrategy on a page that contains a Stateless form, the following error occurs:

[RequestCycle] Not all parameters were encoded. Make sure all parameter names are integers in consecutive order starting with zero. Current parameter names are: [wicket:interface]
org.apache.wicket.WicketRuntimeException: Not all parameters were encoded. Make sure all parameter names are integers in consecutive order 

The issue seems to be that the pagemap is null and the Map parameters that are passed are not able to be parsed.

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-03 15:53:23.957,,,no_permission,,,,,,,,,,,,59256,,,Wed Oct 03 15:53:23 UTC 2007,,,,,,0|i0khbz:,117625,,,,,,,,03/Oct/07 15:53;jcompagner;fixed with the improved stateless forms and coding strategies fix,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IndexedParamUrlCodingStrategy seems to have problems handling resources,WICKET-972,12378257,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,pete,pete,14/Sep/07 08:40,03/Nov/07 20:08,14/Mar/19 03:09,03/Nov/07 20:08,,,,,,,,,,,,1.3.0-rc1,,,site,,,,,,,,,,,0,,,,,,"I will attach a testcase that demonstrates this issue.

when using urlFor inside a component on a page that is mounted with IndexedParamUrlCodingStrategy I get:

org.apache.wicket.WicketRuntimeException: Not all parameters were encoded. Make sure all parameter names are integers in consecutive order starting with zero. Current parameter names are: [wicket:interface]

Just check out the testcase to see for yourself",,,,,,,,,,,,,,,,,14/Sep/07 08:41;pete;test.zip;https://issues.apache.org/jira/secure/attachment/12365826/test.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-10-16 06:46:21.714,,,no_permission,,,,,,,,,,,,88618,,,Sat Nov 03 20:08:08 UTC 2007,,,,,,0|i0khcn:,117628,,,,,,,,"16/Oct/07 06:46;ehillenius;bulk set issues to next version. I only did a quick check (and filtered some out for 1.3.1), but we can always bump em again.",03/Nov/07 20:08;jcompagner;this is fixed with the recent changes/fixes in our mounts/urlstrategies,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicketstuff SNAPSHOT repository missign -jdk14 and -jdk15 artifacts.,WICKET-967,12378137,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,wlfshmn,wlfshmn,13/Sep/07 09:52,13/Sep/07 15:22,14/Mar/19 03:09,13/Sep/07 15:22,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"http://wicketstuff.org/maven/repository/org/apache/wicket/ is missing the -jdk14 and -jdk15 artifacts. These are depended upon as parents of core wicket poms, and as such, snapshots are currently uninstallable via maven unless the missing artifacts (of potentially stale versions) already existing in ones local repo.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201979,,,2007-09-13 09:52:15.0,,,,,,0|i0khcv:,117629,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FilteredAbstractColumn unary constructor expects Model instead of IModel,WICKET-960,12378032,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,ivaynberg,szocske,szocske,12/Sep/07 08:57,21/Sep/07 00:32,14/Mar/19 03:09,20/Sep/07 07:01,1.2.6,,,,,,,,,,,1.3.0-beta4,,,wicket-extensions,,,,,,,,,,,0,,,,,,"We have this now:

public FilteredAbstractColumn(Model displayModel)
	{
		super(displayModel);
	}

Here's the super constructor it delegates to:

public AbstractColumn(IModel displayModel)
	{
		this(displayModel, null);
	}


So I really don't see why the FilteredAbstractColumn would need Model descendants specifically.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201972,,,2007-09-12 08:57:54.0,,,,,,0|i0khd3:,117630,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Session invalidateNow() does not immediate remove the session from disk,WICKET-953,12377932,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,christoph,christoph,11/Sep/07 01:31,04/Nov/07 01:23,14/Mar/19 03:09,04/Nov/07 01:23,1.3.0-beta3,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,The only way i can see the session removed immediately is if Session invalidate() is called.  invalidateNow() does not remove the session from disk as expected.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-09-11 07:37:39.716,,,no_permission,,,,,,,,,,,,201965,,,Sun Nov 04 01:23:19 UTC 2007,,,,,,0|i0khdz:,117634,,,,,,,,"11/Sep/07 07:37;jcompagner;i think what happens is that invalidateNow invalidates the session immediately and then
the file is deleted  for that session. But then after the request the current page that is touched is saved
again so the file is created again for that session.

invalidateNow is a call that shouldn't be called for 99% of the times that you want to invalidate a session
i think even the current behavior is wrong if we call invalidateNow we should create a new http session somehow 
and start working with that one (maybe this already happens somehow but we still use the old id)","16/Oct/07 06:46;ehillenius;bulk set issues to next version. I only did a quick check (and filtered some out for 1.3.1), but we can always bump em again.","04/Nov/07 01:23;jcompagner;as i thought, the page is serialized again after it is being deleted,
I made an extra check so that for invalid sessions the page is not saved anymore",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
StatelessForm + QueryStringUrlCodingStrategy problem,WICKET-950,12377877,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,sebster,sebster,10/Sep/07 09:39,01/Nov/07 19:57,14/Mar/19 03:09,01/Nov/07 19:57,1.3.0-beta3,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"I have a StatelessForm in a page which is mounted via the QueryStringUrlCodingStrategy

However, *WHENEVER* I submit the form, I get a Page Expired.

When I use mountBookmarkablePage it works.

I get NO exceptions in the log.

If more info is necessary, feel free to ask.",Ubuntu Linux Feisty+Firefox2.0.0.6+Tomcat 5.5.23+JDK6,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-16 06:46:24.955,,,no_permission,,,,,,,,,,,,201962,,,Thu Nov 01 19:57:11 UTC 2007,,,,,,0|i0khef:,117636,,,,,,,,"12/Sep/07 22:10;sebster;It also fails with IndexParamUrlCodingStrategy. Now however, I do get an exception. Using Form instead of StatelessForm causes everything to work fine.

WicketMessage: Not all parameters were encoded. Make sure all parameter names are integers in consecutive order starting with zero. Current parameter names are: [wicket:interface]

Root cause:

org.apache.wicket.WicketRuntimeException: Not all parameters were encoded. Make sure all parameter names are integers in consecutive order starting with zero. Current parameter names are: [wicket:interface]
at org.apache.wicket.request.target.coding.IndexedParamUrlCodingStrategy.appendParameters(IndexedParamUrlCodingStrategy.java:102)
at org.apache.wicket.request.target.coding.BookmarkablePageRequestTargetUrlCodingStrategy.encode(BookmarkablePageRequestTargetUrlCodingStrategy.java:134)
at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.pathForTarget(WebRequestCodingStrategy.java:368)
at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.encode(WebRequestCodingStrategy.java:235)
at org.apache.wicket.RequestCycle.urlFor(RequestCycle.java:791)
at org.apache.wicket.Component.urlFor(Component.java:2808)
at org.apache.wicket.markup.html.form.Form.onComponentTag(Form.java:1492)
at org.apache.wicket.Component.renderComponent(Component.java:2158)
at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1315)
at org.apache.wicket.markup.html.form.Form.onRender(Form.java:1619)
at org.apache.wicket.Component.render(Component.java:2013)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1200)
at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1370)
at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1305)
at org.apache.wicket.Component.renderComponent(Component.java:2189)
at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1315)
at org.apache.wicket.Component.render(Component.java:2013)
at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:66)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1227)
at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1370)
at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1305)
at org.apache.wicket.Component.renderComponent(Component.java:2189)
at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1315)
at org.apache.wicket.Component.render(Component.java:2013)
at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:73)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1227)
at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1370)
at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1305)
at org.apache.wicket.Component.renderComponent(Component.java:2189)
at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1315)
at org.apache.wicket.Component.render(Component.java:2013)
at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:66)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1227)
at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1370)
at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1305)
at org.apache.wicket.Component.renderComponent(Component.java:2189)
at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1315)
at org.apache.wicket.Component.render(Component.java:2013)
at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:73)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1227)
at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1332)
at org.apache.wicket.Page.onRender(Page.java:1433)
at org.apache.wicket.Component.render(Component.java:2013)
at org.apache.wicket.Page.renderPage(Page.java:922)
at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:225)
at org.apache.wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:103)
at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1038)
at org.apache.wicket.RequestCycle.step(RequestCycle.java:1108)
at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1177)
at org.apache.wicket.RequestCycle.request(RequestCycle.java:500)
at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:261)
at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:127)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:210)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:870)
at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:685)
at java.lang.Thread.run(Thread.java:619)","16/Oct/07 06:46;ehillenius;bulk set issues to next version. I only did a quick check (and filtered some out for 1.3.1), but we can always bump em again.","01/Nov/07 19:57;jcompagner;Indexed and Query both should work fine now
We should have a few unit test for this
Build from the Stateless example 
1 statefull and 1 stateless pages with both statelessforms on them
and then render them and call the stateless form submit for every url coding strategy we have.

Who wants to make those! :)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
java.lang.NullPointerException at wicket.markup.html.list.ListView.renderItem(ListView.java:676),WICKET-943,12377811,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,jcompagner,01sas,01sas,08/Sep/07 06:34,29/Oct/07 20:35,14/Mar/19 03:09,29/Oct/07 20:35,1.2.6,,,,,,,,,,,1.2.7,,,wicket,,,,,,,,,,,0,,,,,,"This problem happens if parent component has been hidden by authorization strategy during the previous page render, but on the next render parent component becomes visible. This problem is common for all repeaters. The problem here is in internalOnAttach() method of repeaters. This method will not populate items if it not visible in hierarchy, but when it checks this it use old visible state (Component.FLAG_IS_RENDER_ALLOWED) of component (itself and parent components), this state is changed after setRenderAllowed() method in Component.java on 1630 line returns, but internalAttach() method is called earlier in Component.java on 1624 line. After that component become visible and will be rendered. But it can't be rendered because items were not populated, so null pointer exception occurs.

This problem can be fixed if method calls of internalAttach() and setRenderAllowed(isActionAuthorized(RENDER)) will be swapped or logic of repeaters (ListView, DataView, etc) components will be changed.","Window XP SP3, Java 1.6, Tomcat 5.0_09",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-03 15:00:37.415,,,no_permission,,,,,,,,,,,,59219,,,Mon Oct 29 20:35:33 UTC 2007,,,,,,0|i0khev:,117638,,,,,,,,"03/Oct/07 15:00;jcompagner;is this also an issue for 1.3? 

also i dont know if we can easily fix this is see comments in the code like:

	// check authorization
		// first the component itself
		// (after attach as otherwise list views etc wont work)
		setRenderAllowed();

So the component structure must be there before the setRenderedAllowed call?",03/Oct/07 15:05;knopp;setRenderAllowed(isActionAuthorized(RENDER))  must be called after beforeRender(). Can't we just call setRenderAllowed(true) in component detach?,"03/Oct/07 15:34;jcompagner;Then the are not rendered but aren't we then opening a security hole?
Because then the component is visible in the request/interface call phase so if one could guess the path it would be able to execute something right?

So then we have to quickly set it to visible before the onRender ?","04/Oct/07 03:32;01sas;I think that it a logical issue and need to be fixed here (in renderComponent method by switching method call), because logic of many components is based on visibility status. If after that some components will work incorrectly, then this components need to be fixed. This problem look likes a result of some quick crunch that was made earlier.

Or this bug also can be fixed by removing check of visibility status in attach method, but this will reduce system performance.","29/Oct/07 20:35;jcompagner;we now only call isVisible() instead of isVisibleInHierarchy()
 in 1.3 we already do that",,,,,,,,,,,,,,,,,,,,,,,,,,,,
PageMap.remove(Page) throws ClassCastException,WICKET-942,12377810,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,johnray,johnray,08/Sep/07 05:51,13/Sep/07 14:35,14/Mar/19 03:09,13/Sep/07 14:35,1.3.0-beta3,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,"When I try to expire a page by calling PageMap.remove(Page) I get the following exception

java.lang.ClassCastException: java.lang.Integer cannot be cast to org.apache.wicket.protocol.http.pagestore.PageWindowManager$PageWindowInternal
     at org.apache.wicket.protocol.http.pagestore.PageWindowManager.removePage(PageWindowManager.java:544)
     at org.apache.wicket.protocol.http.pagestore.DiskPageStore$SessionEntry.removePage(DiskPageStore.java:255)
     at org.apache.wicket.protocol.http.pagestore.DiskPageStore.removePage(DiskPageStore.java:623)
     at org.apache.wicket.protocol.http.pagestore.DiskPageStore.removePage(DiskPageStore.java:652)
     at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.removeEntry(SecondLevelCacheSessionStore.java:368)
     at org.apache.wicket.PageMap.remove(PageMap.java:289)

The problem in removePage() of the PageWindowManager class was that it wasn't getting the PageWindowInternal from the windows list. There is also a problem though in that it attempts to iterate through the window indexes and at the same time calls removePage() which removes them so you get a ConcurrentModificationException. I've tested the following and it works

	public void removePage(int pageId)
	{
		if (idToWindowIndices == null)
		{
			rebuildIndices();
		}

		List indicesList = (List) idToWindowIndices.get(pageId);
		if (indicesList == null)
		{
			return; // Return if page was already removed
		}

	        Object[] indices = indicesList.toArray();
        	for (int i=0; i < indices.length; i++)
		{
			PageWindowInternal window = (PageWindowInternal)windows.get((Integer)indices[i]);
			removePage(window.pageId, window.versionNumber, window.ajaxVersionNumber);
		}
	}

However I ran into another problem. When my page removes itself it then gets immediately added back in at the end of the request cycle in Session.requestDetached(). So its impossible for a page to expire itself. To fix this I would recommend changing the PageMap.remove(Page) method to

	public final void remove(final Page page)
	{
		// Remove the pagemap entry from session
		removeEntry(page.getPageMapEntry());
	        // Make sure it doesn't get added again at the end of the request cycle
        	Session.get().untouch(page);
	}

and then add the untouch() method to Session

	/**
	* THIS METHOD IS NOT PART OF THE WICKET PUBLIC API. DO NOT CALL IT.
	* <p>
	* This method will remove a page that was previously added via touch()
	* @param page
	*/
	public final void untouch(Page page)
	{
		List lst = (List)touchedPages.get();
		if (lst != null)
		{
			lst.remove(page);
		}
	}

With the above changes my code works as it did under version 1.2.6",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-09-12 09:53:36.625,,,no_permission,,,,,,,,,,,,201955,,,Thu Sep 13 14:35:19 UTC 2007,,,,,,0|i0khf3:,117639,,,,,,,,"12/Sep/07 09:53;knopp;Hi, thanks for the bug report. I wish we had more reports like this. I've attempted to fix the issue, can you plese test if the current trunk works for you?","12/Sep/07 17:09;johnray;In the removePage() method you removed the indicesList.toArray() so I now get a ConcurrentModificationException because the code tries to iterate through a list at the same time it's removing items. You could use something like this

	public void removePage(int pageId)
	{
		if (idToWindowIndices == null)
		{
			rebuildIndices();
		}
		List indices = (List)idToWindowIndices.get(pageId);

		if (indices != null)
		{
			Object[] indicesArray = indices.toArray(); // Make a copy of the list so we don't get a ConcurrentModificationException
			for (int i=0; i < indicesArray.length; i++)
			{
				int index = ((Integer)indicesArray[i]).intValue();
				PageWindowInternal window = (PageWindowInternal)windows.get(index);
				if (window.pageId == pageId)
				{
					removePage(window.pageId, window.versionNumber, window.ajaxVersionNumber);
				}
			}
		}
	}

The other alternative would be to pass the iterator through to the removePage() method so it can call Iterator.remove() but this seems a lot more complicated. Also the list should never really be that big so copying it to an array shouldn't impact performance.","12/Sep/07 21:36;knopp;Sorry, overlooked that. Will commit it soon.",13/Sep/07 13:09;knopp;Can you plese give it a try now? Hopefully the second attempt will work :),13/Sep/07 14:33;johnray;Everything works great now. Thanks.,13/Sep/07 14:35;johnray;Fixed and I've tested it.,,,,,,,,,,,,,,,,,,,,,,,,,,,
inconsistent state after setting AjaxDebugModeEnabled to true in an AjaxRequest,WICKET-916,12377295,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,faceman,faceman,01/Sep/07 06:09,16/Sep/08 20:32,14/Mar/19 03:09,13/Oct/07 20:36,1.3.0-beta3,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"when the application debugsetting AjaxDebugModeEnabled is changed from false to true in an AjaxRequest (e.g. via JMX), the following two statements in AbstractDefaultAjaxBehavior#renderHead are executed:

response.renderJavascript(""wicketAjaxDebugEnable=true;"", ""wicket-ajax-debug-enable"");
response.renderJavascriptReference(JAVASCRIPT_DEBUG);

as soon as the client recieves the response, the first javascript statement is executed and code in wicket-ajax.js ""thinks"" that ajax debug is enabled.
well it is, but wicket-ajax-debug.js has not arrived (or at least has not been processed) yet, and thus Wicket.Log.info() and Wicket.Log.error() will fail, because these methods access an object which is defined in wicket-ajax-debug.js.

This problem seems to be solved by changing the order of the statements in AbstractDefaultAjaxBehavior#renderHead, so that the ResourceReference JAVASCRIPT_DEBUG is rendered before wicketAjaxDebugEnable is set to true.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-13 20:36:21.274,,,no_permission,,,,,,,,,,,,201930,,,Sat Oct 13 20:36:21 UTC 2007,,,,,,0|i0khhj:,117650,,,,,,,,13/Oct/07 20:36;seitz;committed the change as mentioned above,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RefreshingView only gets rendered when TreeTable node is opened twice,WICKET-892,12376923,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,knopp,faceman,faceman,27/Aug/07 11:09,27/Aug/07 22:51,14/Mar/19 03:09,27/Aug/07 12:10,1.3.0-beta2,,,,,,,,,,,1.3.0-beta4,,,wicket,,,,,,,,,,,0,,,,,,"a RefreshingView inside an AbstractRenderableColumn subclass doesn't rendered until the containing TreeNode is opened, closed and opened again.",,,,,,,,,,,,,,,,,27/Aug/07 11:19;faceman;quickstart.zip;https://issues.apache.org/jira/secure/attachment/12364601/quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-08-27 12:09:24.119,,,no_permission,,,,,,,,,,,,201912,,,Mon Aug 27 12:09:24 UTC 2007,,,,,,0|i0khkn:,117664,,,,,,,,"27/Aug/07 11:19;faceman;quickstart project to reproduce the problem:

1) open ROOT node
2) open node [test 2.1]
3) RefreshingView of childnodes of [test 2.1] is not rendered
4) close and open node [test 2.1]
5) RefreshingView is rendered",27/Aug/07 12:09;knopp;Fix commited (by mistake) as WICKET-878,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ResourceSettings#getStringResourceLoaders throws an ArrayStoreException,WICKET-885,12376860,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,faceman,faceman,25/Aug/07 03:32,27/Aug/07 22:52,14/Mar/19 03:09,26/Aug/07 23:48,1.3.0-beta2,,,,,,,,,,,1.3.0-beta4,,,wicket-jmx,,,,,,,,,,,0,,,,,,"the current implementation throws an ArrayStoreException, because a list (containing IResourceStringLoader objects) is converted to a String[], which fails because String is not a supertype of at least one IResourceStringLoader object (and since String is final, it'll never be a supertype anyway).",,,,,,,,,,,,,,,,,25/Aug/07 03:34;faceman;getStringResourceLoader.patch;https://issues.apache.org/jira/secure/attachment/12364551/getStringResourceLoader.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201906,,,2007-08-25 03:32:27.0,,,,,,0|i0khlz:,117670,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DatePicker: invalid Javascript when component's wicket:id contains non-word character,WICKET-809,12375207,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,faceman,faceman,02/Aug/07 08:30,02/Aug/07 23:32,14/Mar/19 03:09,02/Aug/07 18:30,1.3.0-beta2,,,,,,,,,,,1.3.0-beta3,,,wicket-datetime,,,,,,,,,,,0,,,,,,"as reported by Doug Leeper on the mailing list (http://www.nabble.com/DateTimeField-issue-tf4194618.html#a11929171) the generated javascript is invalid if the component's wicket:id contains a non-word character.
this occurs eg. if the component is a DateTextField and the containing form uses a CompoundPropertyModel and the wicket:id is used to point to a nested property.",,,,,,,,,,,,,,,,,02/Aug/07 08:32;faceman;invalid_js.patch;https://issues.apache.org/jira/secure/attachment/12363029/invalid_js.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201836,,,Thu Aug 02 08:32:34 UTC 2007,,,,,,0|i0khtr:,117705,,,,,,,,"02/Aug/07 08:32;faceman;exchanges the existing method ""getMarkupId"" with a new method ""getEscapedMarkupId"", which is now used for the substitute variable ""widgetId"".
a new substitute variable ""componentId"" is assigned the return value of ""getMarkupId"".",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
getTo() in NavigatorLabel is off by one,WICKET-801,12374887,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,freemant,freemant,28/Jul/07 15:24,29/Jul/07 02:26,14/Mar/19 03:09,29/Jul/07 02:26,,,,,,,,,,,,1.3.0-beta3,,,wicket-extensions,,,,,,,,,,,0,,,,,,"The code of getTo() is:
		public int getTo()
		{
			if (getOf() == 0)
			{
				return 0;
			}
			return Math.min(getOf(), getFrom() + table.getRowsPerPage());
		}	
It should really be:
		public int getTo()
		{
			if (getOf() == 0)
			{
				return 0;
			}
			return Math.min(getOf(), getFrom() + table.getRowsPerPage()-1);
		}
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201828,,,Sun Jul 29 02:26:23 UTC 2007,,,,,,0|i0khuf:,117708,,,,,,,,29/Jul/07 02:26;freemant;Just found that it has been fixed in trunk (http://www.nabble.com/Re%3A-DataTable%3A-incorrect-%27showing-x-to-y-of-z%27-p11844368.html),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A Few Wicket Projects are Missing site.xml and wicket-site-skin,WICKET-798,12374746,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,tobrien,tobrien,26/Jul/07 22:04,15/Aug/07 15:34,14/Mar/19 03:09,15/Aug/07 15:34,1.3.0-beta2,,,,,,,,,,,1.3.0-beta3,,,site,,,,,,,,,,,0,,,,,,A few of the projects were missing site.xml site descriptors for Maven 2.  (patch attached.),,,,,,,,,,,,,,,,,26/Jul/07 22:05;tobrien;site_patch.txt;https://issues.apache.org/jira/secure/attachment/12362645/site_patch.txt,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-08-15 15:34:07.953,,,no_permission,,,,,,,,,,,,41769,,,Wed Aug 15 15:34:07 UTC 2007,,,,,,0|i0khun:,117709,,,,,,,,"26/Jul/07 22:05;tobrien;Patch relative to  http://svn.apache.org/repos/asf/incubator/wicket/trunk

Added site directories and site.xml to submodules that were missing these site descriptors.",15/Aug/07 15:34;dashorst;Applied patch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Patch to site skin to add the logo_graduated graphic,WICKET-797,12374739,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,tobrien,tobrien,26/Jul/07 21:25,12/Aug/07 08:16,14/Mar/19 03:09,12/Aug/07 08:16,1.3.0-beta2,,,,,,,,,,,1.3.0-beta2,,,site,,,,,,,,,,,0,,,,,,Pls add logo_graduated.png (attached) to the src/main/resources/style dir of wicket-site-skin,,,,,,,,,,,,,,,,,26/Jul/07 21:25;tobrien;logo_graduated.png;https://issues.apache.org/jira/secure/attachment/12362642/logo_graduated.png,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-08-12 08:16:28.073,,,no_permission,,,,,,,,,,,,201825,,,Sun Aug 12 08:16:28 UTC 2007,,,,,,0|i0khuv:,117710,,,,,,,,26/Jul/07 21:25;tobrien;Here's the PNG to add to this directory.,12/Aug/07 08:16;jdonnerstag;Looks like it made it already: http://wicket.apache.org/,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HTML validation cleanliness,WICKET-758,12373840,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,frankbille,victori,victori,15/Jul/07 04:09,13/Oct/07 12:20,14/Mar/19 03:09,15/Jul/07 21:44,1.2.2,1.2.3,1.2.4,1.2.5,1.2.6,1.3.0-beta1,1.3.0-beta2,,,,,1.3.0-beta3,,,wicket,,,,,,,,,,,0,,,,,,"AbstractRepeater generates IDs starting with integers, html ids can't start with a number.

Modication 
public String newChildId(); change -> return ""id""+String.valueOf(childIdCounter);

WicketAjaxIndicatorAppender append an alt tag to the indicator, line 74. 

Thanks

",osx jvm etc etc,,,,,,,,,,,WICKET-1070,,,,,15/Jul/07 08:39;frankbille;WICKET-758.patch;https://issues.apache.org/jira/secure/attachment/12361849/WICKET-758.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-07-15 07:56:44.687,,,no_permission,,,,,,,,,,,,201787,,,Sat Oct 13 12:16:35 UTC 2007,,,,,,0|i0khyf:,117726,,,,,,,,15/Jul/07 07:56;frankbille;Well thats actually true: http://www.w3.org/TR/html401/types.html#type-name,"15/Jul/07 08:39;frankbille;This is a proposed solution. I'm not really happy with it tbh, because of it's use of regex directly in Component. Can I get a second opinion on it?","15/Jul/07 16:05;knopp;I could live with that. Optionally, you can put the method to determine whether id is valid to JavascriptUtils.

","15/Jul/07 17:53;ivaynberg;we dont need anything so complicated as in the patch.

components are responsible for generating their ids, so in this case adjust the repeater to genate ""id""+num. we dont need all the extra regex matching, etc. imho.
","15/Jul/07 19:37;frankbille;imho it's more complicated to maintain id's in different places instead of once and for all ensure that the markup id is valid. It's fine that the repeater uses num as wicket id. I totally agree that it doesn't have to be something involving heavy regex, but imo it should be in the getMarkupId so other components don't have to worry about it.",15/Jul/07 19:42;ivaynberg;this is the kind of thing that will run 99.9% of the time for nothing. let component writers ensure they use proper ids. this is just useless overhead on a call that happens pretty frequently.,"15/Jul/07 20:08;frankbille;I guess you're right. My worry with this is that it's quite difficult to document to the users. The best place I can think of is setOutputMarkupid to say that ""remember that markup ids must begin with [a-zA-Z] so make sure that your wicket id starts with [a-zA-Z]"" or something. ","15/Jul/07 20:09;frankbille;-> Trivial, because it's not really a problem other than validators will fail.","15/Jul/07 20:35;ivaynberg;yeah. maybe something like that. however, i wouldnt take the documentation too far. this is html standards stuff. we do not need to document html standards in wicket - we just need to pay attention to them in the components we supply.",15/Jul/07 21:44;frankbille;Fixed in r556460.,"11/Sep/07 17:15;salk31;In 1.3-beta3 should it be returning ""id""+String.valueOf(childIdCounter) now? The comment suggests it is but the code doesn't.

Not sure if it is related but to keep my html monkey happy I changed ours to do ""id"" + String.valueOf... and ajax updates of that component broke. Claiming on the server side that it couldn't find the matching markup in the parent element. The only thing that had changed was the Component id.

To make it stranger it seems to work (for a single component in the repeater) if I hard code it to any number or the same id as used for the element to be repeated.

Make sense to anybody before I suffer the pain of debugging? Could it really care if the id is [0-9]+ or not?

Cheers

Sam",13/Oct/07 11:05;mindhaq;alt attribute for WicketAjaxIndicatorAppender was still missing. This breaks HTML validation.,"13/Oct/07 12:08;mindhaq;Corrected version of patch.

This happens when you fix a little HTML within Java just using a text editor. I'm so glad I can use Wicket, and normally don't have to work like that anymore.",13/Oct/07 12:16;frankbille;Created a separate issue for proper tracking,,,,,,,,,,,,,,,,,,,
Thread synchronization problems in FilePageStore,WICKET-746,12373540,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,ehillenius,ehillenius,11/Jul/07 18:25,29/Oct/07 21:50,14/Mar/19 03:09,29/Oct/07 21:50,,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,http://www.nabble.com/Thread-synchronization-problems-in-FilePageStore-tf4063498.html,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-08-20 20:37:42.596,,,no_permission,,,,,,,,,,,,201776,,,Mon Oct 29 21:50:10 UTC 2007,,,,,,0|i0ki07:,117734,,,,,,,,20/Aug/07 20:37;dashorst;Next release,26/Aug/07 16:57;knopp;I'm lowering the priority as FilePageStore is no longer the default page store.,29/Sep/07 15:06;jcompagner;i think we can close this one and remove the filepagestore all together then because i don't think it brings anything extra anymore?,29/Sep/07 15:10;ivaynberg;agreed,"29/Sep/07 15:53;dashorst;Vote on dev@?

I still see a use for it: browsing a user session by deserializing pages in a separate application. 

But that is not enough to veto the removal though.",29/Oct/07 21:50;jcompagner;removed it,,,,,,,,,,,,,,,,,,,,,,,,,,,
spelling mistake in Application_de.properties,WICKET-743,12373500,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,almaw,faceman,faceman,11/Jul/07 11:48,07/May/10 13:40,14/Mar/19 03:09,11/Jul/07 18:57,1.3.0-beta2,,,,,,,,,,,1.3.0-beta3,,,wicket,,,,,,,,,,,0,,,,,,"both NumberValidator.minimum and DateValidator.minimum contain spelling mistakes
the word ""gr\u00fcsser"" (grüsser) should acutally be spelled ""gr\u00f6\u00dfer"" (größer)
and since there is no 'ß' in swiss, i also added the file Application_ch.properties (including the change from ü to ö).",,,,,,,,,,,,,,,,,11/Jul/07 11:49;faceman;spelling_error.patch;https://issues.apache.org/jira/secure/attachment/12361577/spelling_error.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-07-11 18:57:38.695,,,no_permission,,,,,,,,,,,,41662,,,Wed Jul 11 18:57:38 UTC 2007,,,,,,0|i0ki0v:,117737,,,,,,,,"11/Jul/07 11:49;faceman;changes the word grüsser to größer
adds Application_ch.properties",11/Jul/07 18:57;almaw;Fixed in r555369.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Custom ILinkListener component causes error in cell on mounted page,WICKET-734,12373337,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,smellycat,smellycat,09/Jul/07 19:58,30/Oct/07 19:58,14/Mar/19 03:09,30/Oct/07 19:58,1.3.0-beta2,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"I created a custom LabelLink component that extends Label and implements ILinkListener.
The page is mounted like this: 
mountBookmarkablePage(""/"" + clazz.getSimpleName(), clazz);

If I add this in a panel to an AbstractColumn and click the link I receive the following error:
""unable to find component with path forumBrowserForm:forums:rows:1:cells:1:cell:link on page""

This error did not occur in 1.2.6 or if the page is not mounted.

The code for the LabelLink:

public abstract class LabelLink extends Label
        implements ILinkListener
{

    protected LabelLink(final String id, String label)
    {
        super(id, label);
    }

    protected LabelLink(final String id, IModel model)
    {
        super(id, model);
    }

    protected void onComponentTag(final ComponentTag tag)
    {
        tag.setName(""a"");
        tag.put(""href"", urlFor(ILinkListener.INTERFACE));
    }

    protected void onComponentTagBody(final MarkupStream markupStream, final ComponentTag openTag)
    {
        replaceComponentTagBody(markupStream, openTag, getModelObjectAsString());
    }

    public final void onLinkClicked()
    {
        onClick();
    }

    public abstract void onClick();

}

I also created a quickstart project for displaying this problem.
",,,,,,,,,,,,,,,,,10/Jul/07 18:38;smellycat;WicketLinkLabelTest.zip;https://issues.apache.org/jira/secure/attachment/12361521/WicketLinkLabelTest.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-07-10 17:57:06.928,,,no_permission,,,,,,,,,,,,201765,,,Tue Oct 30 19:58:31 UTC 2007,,,,,,0|i0ki27:,117743,,,,,,,,"10/Jul/07 17:57;jcompagner;where is the quickstart?

is the component path you see there really not on the page? what is wrong with that path?","10/Jul/07 18:38;smellycat;Quickstart project includes libraries and Intellij IDEA project files for your convencience if you happen to use that IDE.
","10/Jul/07 18:51;smellycat;""is the component path you see there really not on the page?""

The URL of the LabelLink inside the cell is:
http://localhost:8080/TestPage/wicket:interface/%3A3%3Atable%3Arows%3A4%3Acells%3A1%3Acell%3Alink1%3A1%3AILinkListener%3A%3A

The URL of the Link inside the cell is:
http://localhost:8080/?wicket:interface=:3:table:rows:4:cells:1:cell:link2:1:ILinkListener::

There are differences between those URL's.
I do not know how to see whether these paths are on the page or not.

I think it's easiest if you try it out by yourself and see how the page constructor is called.
",21/Aug/07 14:07;jbq;Looks reasonable to do for the next release,"26/Aug/07 19:56;knopp;You need to make your link not stateless. 
    protected boolean getStatelessHint() {
    	return false;
    }","26/Aug/07 19:57;knopp;Currently Mounted pages dont support stateless urls (the page instance is not resolved if specified, instead new instance is created).","30/Oct/07 19:58;jcompagner;I tried to fix this.
It still will give you exceptions if you rendered the repeater 2 times (so first clicked on a another link)
Becaues then stateless won't really work because the repeater then genenerates items with an index greater then the first time
and those can't really be generated.

I did improve the error.",,,,,,,,,,,,,,,,,,,,,,,,,,
MockWebApplication doesn't redirect  properly to mounted pages under RestartResponseAtInterceptPageException,WICKET-702,12372470,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,msandori,msandori,26/Jun/07 21:32,04/Nov/07 15:16,14/Mar/19 03:09,03/Nov/07 20:37,1.3.0-beta1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"The MockWebApplication doesn't decode the redirect request properly when redirecting to a mounted page due to a RestartResponseAtInterceptPageException.

This is the test:

  @Test
    public void testPageRender()
    {
        WicketTest tester = new WicketTester(new MyApplication());
        //must be logged in to get to the Profile page
        tester.startPage(Profile.class);
        //should redirect to the Login page
        tester.assertRenderedPage(Login.class);
    }

The application mounts pages via:

mount(""/main"", PackageName.forPackage(Profile.class.getPackage()));

Running the test results in this exception:

org.apache.wicket.WicketRuntimeException: Already redirecting to 'main/Login'. Cannot redirect more than once
	at org.apache.wicket.protocol.http.BufferedWebResponse.redirect(BufferedWebResponse.java:100)
	at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:219)
	at org.apache.wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:103)
	at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:981)
	at org.apache.wicket.RequestCycle.step(RequestCycle.java:1048)
	at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1127)
	at org.apache.wicket.RequestCycle.request(RequestCycle.java:489)
	at org.apache.wicket.protocol.http.MockWebApplication.postProcessRequestCycle(MockWebApplication.java:426)
	at org.apache.wicket.protocol.http.MockWebApplication.processRequestCycle(MockWebApplication.java:372)
	at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:237)

What is happening is that the redirect URL ""main/Login"" is not getting resolved to a bookmarkable page and the RequestParameters is therefore not setup correctly. Then in WebRequestCycleProcessor.resolve(final RequestCycle requestCycle, final RequestParameters requestParameters) the bookmarkablePageClass of the requestParameters is null and the method resolves to the Home page instead of the page that is intended to redirect to. This causes an attempt to redirect again thereby causing the exception.

If the mount() is removed then the unit test passes.",,,,,,,,,,,,,,,,,03/Jul/07 15:29;jbq;20070703-WICKET-702.txt;https://issues.apache.org/jira/secure/attachment/12361056/20070703-WICKET-702.txt,03/Jul/07 13:40;msandori;LoginPage.html;https://issues.apache.org/jira/secure/attachment/12361031/LoginPage.html,03/Jul/07 13:40;msandori;LoginPage.java;https://issues.apache.org/jira/secure/attachment/12361030/LoginPage.java,03/Jul/07 13:40;msandori;ProtectedPage.html;https://issues.apache.org/jira/secure/attachment/12361033/ProtectedPage.html,03/Jul/07 13:40;msandori;ProtectedPage.java;https://issues.apache.org/jira/secure/attachment/12361032/ProtectedPage.java,03/Jul/07 13:37;msandori;RestartWithMountedPageTest.java;https://issues.apache.org/jira/secure/attachment/12361029/RestartWithMountedPageTest.java,,,6.0,,,,,,,,,,,,,,,,,,,2007-06-27 07:54:07.239,,,no_permission,,,,,,,,,,,,201734,,,Sun Nov 04 15:16:17 UTC 2007,,,,,,0|i0ki5r:,117759,,,,,,,,"27/Jun/07 07:54;jbq;Would you please file a patch to complement the existing unit tests in jdk-1.4/wicket/src/test/java so that we can work on this bug and find a fix, or provide new unit tests as attachment?","03/Jul/07 13:44;msandori;I have attached a new unit test that demonstrates this issue.

I have not committed to the Wicket codebase before so I didn't want to submit a patch and I am not sure of the best location for this test so it is just setup to work in the root test directory.

If the ""getApplication().mountxxx()"" calls are removed, then the tests pass.

I don't know enough about the Wicket internals to propose how to correct the problem.

Thanks.
","03/Jul/07 15:29;jbq;This patch provides a workaround for the issue, but it is not good enough as redirect URL is already supposed to be absolute, and it breaks some unit tests.",16/Jul/07 10:35;jbq;Anyone tested the patch successfully?  Any feedback on this?  Any better idea to fix this?,20/Aug/07 20:37;dashorst;Next release,23/Aug/07 12:07;mrmean;As submitted to the user list the current solution breaks the behavior of continueToOriginalDestination  when not using mounted urls. Uncomment the code in org.apache.wicket.markup.html.form.login.InterceptTest to see it fail.,23/Aug/07 12:11;jcompagner;reopend for maurice!,"23/Aug/07 12:54;jbq;Remove occurences of "".."" from the path","03/Oct/07 15:28;david.shepherdson;This issue is still happening with the latest version from the trunk. Unlike Maurice above, we're seeing this happen when using continueToOriginalDestination(...) with a page that happens to be mounted.

Specifically, we tell WicketTester to start with our home page class (which is mounted at '/home'). That causes a redirectToInterceptPage(...) to the log-in page, with '/AppName' stored as the original destination URL. When the log-in page eventually calls continueToOriginalDestination(...), a redirect is requested with '../AppName' as the redirect parameter. As I understand it, Wicket then determines that this resolves to the home page, and decides it needs to redirect to '/AppName/home' (which is where we have the home page mounted) -- and at this point, the 'Cannot redirect more than once' exception is thrown.","03/Nov/07 20:37;jcompagner;the test case that is given works now in the current code base.
I think it is fixed by the fixes i made last night now the redirect url is always context path relative. (it is resolved better now in MockHttpResponse.sendRedirect()","04/Nov/07 13:11;mrmean;Thanks Johan....
I now have 22 failing junit tests.
caused by a nullpointer on line 534 of MockHttpServletRequest:
RequestCycle.get() returns null, because it is already detached.
The difference in my junit test and the intercept tests seems to lie in the fact that somehow i get a BufferedWebResponse where the wicket junit test gets a regular WebResponse.
The BWR does not call HttpServletResponse.sendRedirect(url) where the regular WR does. this causes this call to be executed later after the RC detach.

Maurice

",04/Nov/07 15:16;mrmean;There was indeed a problem with the MHSR in combination with the BWR but johan fixed it.,,,,,,,,,,,,,,,,,,,,,
"If the model is List, PropertyResolver doesn't try to find fields.",WICKET-698,12372414,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jal,jal,26/Jun/07 09:00,26/Jun/07 11:53,14/Mar/19 03:09,26/Jun/07 11:53,1.3.0-beta2,,,,,,,,,,,1.3.0-beta3,,,wicket,,,,,,,,,,,1,,,,,,,JDK 1.5,,,,,,,,,,,,,,,,26/Jun/07 09:02;jal;VectorModelTest.java;https://issues.apache.org/jira/secure/attachment/12360557/VectorModelTest.java,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-06-26 11:53:24.82,,,no_permission,,,,,,,,,,,,201730,,,Tue Jun 26 11:53:24 UTC 2007,,,,,,0|i0ki67:,117761,,,,,,,,26/Jun/07 09:02;jal;Test case for this bug.,"26/Jun/07 11:53;jcompagner;now for a list i do try to find a field when the rest is failing:

findMethod if expresion is () or findGetter
if method not found then look if it is an index.
if that fails then it will look for a method anyway and last it will look for the field

For a Map this doesnt happen. You can't have fields in a map you can only target 
fields through a getter in a Map or explicitly by defining map.xxx() so it will just look up the method.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BookmarkablePageLink renders incorrectly to homepage with page parameters with QueryStringUrlCodingStrategy,WICKET-690,12372291,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,almaw,wouterv,wouterv,24/Jun/07 18:34,07/Sep/07 09:04,14/Mar/19 03:09,07/Sep/07 08:34,1.3.0-beta1,,,,,,,,,,,1.3.0-beta3,,,wicket,,,,,,,,,,,0,,,,,,"I'm writing a BookmarkablePageLink using parameters and the QueryStringUrlCodingStrategy like this:

				PageParameters params = new PageParameters();
				params.add(""y"", Integer.toString(cal.get(Calendar.YEAR)));
				params.add(""m"", Integer.toString(cal.get(Calendar.MONTH) + 1));
				BookmarkablePageLink link = new BookmarkablePageLink(""link"", Home.class, params);

This renders nicely when used on the homepage as:
/?y=2007&m=6

but when this is used on a page other than the homepage, the current page gets prepended like:
/page?y=2007&m=6 
instead of the above correct link",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-06-25 07:43:56.415,,,no_permission,,,,,,,,,,,,201722,,,Fri Sep 07 09:04:28 UTC 2007,,,,,,0|i0ki73:,117765,,,,,,,,25/Jun/07 07:43;jbq;Can you please copy/paste the generated HTML fragment for the link?  There is a good chance that a ../ is missing.,"25/Jun/07 08:54;wouterv;Indeed, it has something to do with slashes, I'll add some more information:

So. Here are is the mount I added the BookmarkablePageLink to.

mount(new QueryStringUrlCodingStrategy(""/quote"", QuoteDetails.class));

and homepage:

	@Override
	public Class getHomePage() {
		return Home.class;
	}

So the bookmark link is placed in QuoteDetails and renders this HREF:
		<a href=""?m=7&amp;y=2007""><span>juli 2007</span></a>

while it should be rendering
		<a href=""/?m=7&amp;y=2007""><span>juli 2007</span></a>

I said it renders nicely on the homepage, but this isn't true, it does the same as the above, but works because of the relative link
","07/Sep/07 07:29;ivaynberg;wouter, is this still happening with the current trunk?","07/Sep/07 08:33;wouterv;I tested this with beta3, and now the problem is gone",07/Sep/07 08:34;wouterv;Problem is gone when using beta3,07/Sep/07 08:35;wouterv;good job :-),"07/Sep/07 09:04;almaw;Sorry, I meant to close this ages ago. :)",,,,,,,,,,,,,,,,,,,,,,,,,,
DatePicker doesn't work with TextField,WICKET-688,12372288,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,freemant,freemant,24/Jun/07 14:08,05/Jul/07 08:37,14/Mar/19 03:09,24/Jun/07 17:46,1.3.0-beta1,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,0,,,,,,"DatePicker doesn't work with a TextField even though whose type has been set to java.util.Date. This is because when it tries to get a converter for DateTime.class, a DefaultConverter is returned instead of null. So it won't try to get a converter for Date.class:

	protected void checkComponentProvidesDateFormat(Component component)
	{

		if (component instanceof ITextFormatProvider)
		{
			// were ok
			return;
		}

		IConverter converter = component.getConverter(DateTime.class);
		if (converter == null)
		{
			converter = component.getConverter(Date.class);
		}
		if (converter instanceof DateConverter)
		{

			return; // This is ok
		}
		throw new WicketRuntimeException(
				""this behavior can only be added to components that either implement ""
						+ ITextFormatProvider.class.getName() + "" or that use ""
						+ DateConverter.class.getName() + "" configured with an instance of ""
						+ SimpleDateFormat.class.getName()
						+ "" (like Wicket's default configuration has)"");
	}
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201720,,,Thu Jul 05 08:37:43 UTC 2007,,,,,,0|i0ki7b:,117766,,,,,,,,05/Jul/07 08:37;freemant;Thanks. It works now.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DatePicker refers to gif files on Yahoo,WICKET-687,12372286,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,freemant,freemant,24/Jun/07 14:05,05/Jul/07 08:38,14/Mar/19 03:09,24/Jun/07 20:26,1.3.0-beta1,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,0,,,,,,"In org.apache.wicket.extensions.yui.calendar.DatePicker/calendar.js, the IMG_ROOT is set to an Internet site:

YAHOO.widget.Calendar.IMG_ROOT = (window.location.href.toLowerCase().indexOf(""https"") === 0 ? ""https://a248.e.akamai.net/sec.yimg.com/i/"" : ""http://us.i1.yimg.com/us.yimg.com/i/"");

This will work only when the computer is on the Internet. If it is run on an intranet, the icons will be broken.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-06-24 17:27:14.26,,,no_permission,,,,,,,,,,,,87556,,,Thu Jul 05 08:38:12 UTC 2007,,,,,,0|i0ki7j:,117767,,,,,,,,"24/Jun/07 17:27;ehillenius;From YUI's documentation:
------------------------------------------------------------------------------------------------
YAHOO.widget.Calendar.IMG_ROOT  - static String
The path to be used for images loaded for the Calendar
Deprecated: You can now customize images by overriding the calclose, calnavleft and calnavright default CSS classes for the close icon, left arrow and right arrow respectively 
------------------------------------------------------------------------------------------------

found at http://developer.yahoo.com/yui/docs/YAHOO.widget.Calendar.html
",24/Jun/07 20:18;ehillenius;See also WICKET-692,"24/Jun/07 20:26;ehillenius;I updated to 2.2.2 and tested where it gets the images from. They now are loaded as packaged resources, such as from http://localhost:8080/wicket-examples/forminput/resources/org.apache.wicket.extensions.yui.calendar.DatePicker/assets/callt.gif
",05/Jul/07 08:38;freemant;Thanks. It works now.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ReloadingWicketFilter not working with markup inheritance,WICKET-685,12372242,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jbq,ptrthomas,ptrthomas,22/Jun/07 17:46,25/Sep/07 16:03,14/Mar/19 03:09,24/Sep/07 22:17,1.3.0-beta1,,,,,,,,,,,1.3.0-beta4,,,wicket,,,,,,,,,,,0,,,,,,"This is happening for latest snapshot (2007-06-22).  Last time I refreshed from Maven was 2007-06-06 when things were working fine.

Problem occurs when I use the ReloadingWicketFilter, does not matter if in Wicket development mode or not.

My login page is not using markup inheritance, it works fine.  But after login success, next page (home page) causes this error:

=========

2007-06-22 22:46:15,531 [btpool0-6] DEBUG [org.apache.wicket.application.ReloadingClassLoader] - clzLocation=/E:/peter/jtrac-trunk/jtrac/target/jtrac/WEB-INF/classes/info/jtrac/wicket/BasePage.class
2007-06-22 22:46:15,562 [btpool0-6] INFO [org.apache.wicket.application.ReloadingClassLoader] - Watching changes of class E:\peter\jtrac-trunk\jtrac\target\jtrac\WEB-INF\classes\info\jtrac\wicket\BasePage.class
2007-06-22 22:46:15,562 [btpool0-6] DEBUG [org.apache.wicket.application.ReloadingClassLoader] - clzLocation=/E:/peter/jtrac-trunk/jtrac/target/jtrac/WEB-INF/classes/info/jtrac/wicket/DashboardPage.class
2007-06-22 22:46:15,562 [btpool0-6] INFO [org.apache.wicket.application.ReloadingClassLoader] - Watching changes of class E:\peter\jtrac-trunk\jtrac\target\jtrac\WEB-INF\classes\info\jtrac\wicket\DashboardPage.class
2007-06-22 22:46:15,562 [btpool0-6] ERROR [org.apache.wicket.RequestCycle] - Markup of type 'html' for component 'info.jtrac.wicket.DashboardPage' not found. Enable debug messages for org.apache.wicket.util.resource to get a list of all filenames tried:
[Page class = info.jtrac.wicket.DashboardPage, id = 1, version = 0]
org.apache.wicket.markup.MarkupNotFoundException: Markup of type 'html' for component 'info.jtrac.wicket.DashboardPage' not found. Enable debug messages for org.apache.wicket.util.resource to get a list of all filenames tried:
[Page class = info.jtrac.wicket.DashboardPage, id = 1, version = 0]
	at org.apache.wicket.MarkupContainer.getAssociatedMarkupStream(MarkupContainer.java:342)
	at org.apache.wicket.markup.html.WebPage.onBeforeRender(WebPage.java:363)
	at org.apache.wicket.Component.beforeRender(Component.java:846)
	at org.apache.wicket.Page.renderPage(Page.java:885)
	at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:225)

============

Root cause:

org.apache.wicket.WicketRuntimeException: Parameter clazz must be instance of container
at org.apache.wicket.markup.MarkupCache.getMarkup(MarkupCache.java:244)
at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.checkForMarkupInheritance(InheritedMarkupMarkupLoader.java:99)
at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.loadMarkup(InheritedMarkupMarkupLoader.java:65)
at org.apache.wicket.markup.loader.DefaultMarkupLoader.loadMarkup(DefaultMarkupLoader.java:56)
at org.apache.wicket.markup.MarkupCache.loadMarkup(MarkupCache.java:389)
at org.apache.wicket.markup.MarkupCache.loadMarkupAndWatchForChanges(MarkupCache.java:462)
at org.apache.wicket.markup.MarkupCache.getMarkup(MarkupCache.java:282)
at org.apache.wicket.markup.MarkupCache.getMarkupStream(MarkupCache.java:188)
at org.apache.wicket.MarkupContainer.getAssociatedMarkupStream(MarkupContainer.java:331)
at org.apache.wicket.markup.html.WebPage.onBeforeRender(WebPage.java:363)
at org.apache.wicket.Component.beforeRender(Component.java:846)
at org.apache.wicket.Page.renderPage(Page.java:885)
at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:225)

===========

Couple of other points, if I now type in the URL of another page which is bookmarkable, that works and from there if I go to the home page things are fine.  Looks like now the class + markup gets cached etc.

Another thing is if in my extension of ReloadingWicketFilter I exclude the class that is the base page for markup inheritance, things start working but I get a different class conflict error somewhere deep in the navigation and component hierarchy, let me know if you need me to send the lof for this also.

If this is of any relevance, I am using a custom AuthorizationStrategy - so that is how the login page comes up in the first place: throw new RestartResponseAtInterceptPageException(LoginPage.class) - and then from Login page I do continueToOriginalDestination() - maybe this has something to do with it?
",,,,,,,,,,,,,,,,,24/Sep/07 11:22;ptrthomas;test.zip;https://issues.apache.org/jira/secure/attachment/12366456/test.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-06-22 20:18:47.832,,,no_permission,,,,,,,,,,,,201718,,,Tue Sep 25 16:03:42 UTC 2007,,,,,,0|i0ki7z:,117769,,,,,,,,22/Jun/07 17:49;ptrthomas;In the onSubmit of the login page I just tried setResponsePage(DashboardPage.class) instead of continueToOriginalDestination() - still the same problem.,"22/Jun/07 20:18;jbq;Can you please update your Wicket snapshot as it should have better error reporting, and provide the full stacktrace?  Do you use a component manager like Spring?  Can you include the code of your custom ReloadingWicketFilter with the included/excluded patterns?

Thanks in advance.","23/Jun/07 07:21;ptrthomas;Ok, updated to latest snapshot.  Here is the wicket error page snip:

============

WicketMessage: Markup of type 'html' for component 'info.jtrac.wicket.DashboardPage' not found. Enable debug messages for org.apache.wicket.util.resource to get a list of all filenames tried:
[Page class = info.jtrac.wicket.DashboardPage, id = 1, version = 0]

Root cause:

org.apache.wicket.WicketRuntimeException: Parameter clazz must be an instance of info.jtrac.wicket.DashboardPage, but is a info.jtrac.wicket.BasePage
at org.apache.wicket.markup.MarkupCache.getMarkup(MarkupCache.java:242)
at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.checkForMarkupInheritance(InheritedMarkupMarkupLoader.java:99)
at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.loadMarkup(InheritedMarkupMarkupLoader.java:65)
at org.apache.wicket.markup.loader.DefaultMarkupLoader.loadMarkup(DefaultMarkupLoader.java:56)
at org.apache.wicket.markup.MarkupCache.loadMarkup(MarkupCache.java:387)
at org.apache.wicket.markup.MarkupCache.loadMarkupAndWatchForChanges(MarkupCache.java:460)
at org.apache.wicket.markup.MarkupCache.getMarkup(MarkupCache.java:280)
at org.apache.wicket.markup.MarkupCache.getMarkupStream(MarkupCache.java:188)
at org.apache.wicket.MarkupContainer.getAssociatedMarkupStream(MarkupContainer.java:331)
at org.apache.wicket.markup.html.WebPage.onBeforeRender(WebPage.java:363)
at org.apache.wicket.Component.beforeRender(Component.java:846)
at org.apache.wicket.Page.renderPage(Page.java:885)
at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:225)

============ log4j log with DEBUG on for org.apache.wicket ==================

2007-06-23 12:36:46,140 [btpool0-7] DEBUG [org.apache.wicket.application.ReloadingClassLoader] - clzLocation=/E:/peter/jtrac-trunk/jtrac/target/jtrac/WEB-INF/classes/info/jtrac/wicket/BasePage.class
2007-06-23 12:36:46,171 [btpool0-7] INFO [org.apache.wicket.application.ReloadingClassLoader] - Watching changes of class E:\peter\jtrac-trunk\jtrac\target\jtrac\WEB-INF\classes\info\jtrac\wicket\BasePage.class
2007-06-23 12:36:46,171 [btpool0-7] DEBUG [org.apache.wicket.application.ReloadingClassLoader] - clzLocation=/E:/peter/jtrac-trunk/jtrac/target/jtrac/WEB-INF/classes/info/jtrac/wicket/DashboardPage.class
2007-06-23 12:36:46,171 [btpool0-7] INFO [org.apache.wicket.application.ReloadingClassLoader] - Watching changes of class E:\peter\jtrac-trunk\jtrac\target\jtrac\WEB-INF\classes\info\jtrac\wicket\DashboardPage.class
2007-06-23 12:36:46,171 [btpool0-7] ERROR [org.apache.wicket.RequestCycle] - Markup of type 'html' for component 'info.jtrac.wicket.DashboardPage' not found. Enable debug messages for org.apache.wicket.util.resource to get a list of all filenames tried:
[Page class = info.jtrac.wicket.DashboardPage, id = 1, version = 0]
org.apache.wicket.markup.MarkupNotFoundException: Markup of type 'html' for component 'info.jtrac.wicket.DashboardPage' not found. Enable debug messages for org.apache.wicket.util.resource to get a list of all filenames tried:
[Page class = info.jtrac.wicket.DashboardPage, id = 1, version = 0]
	at org.apache.wicket.MarkupContainer.getAssociatedMarkupStream(MarkupContainer.java:342)
	at org.apache.wicket.markup.html.WebPage.onBeforeRender(WebPage.java:363)
	at org.apache.wicket.Component.beforeRender(Component.java:846)
	at org.apache.wicket.Page.renderPage(Page.java:885)
	at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:225)

=============

Here is the source code of my ReloadingWicketFilter:

http://fisheye3.cenqua.com/browse/j-trac/trunk/jtrac/src/main/java/info/jtrac/wicket/JtracReloadingWicketFilter.java?r=1017

Just now, I tried one more thing, I removed the 2 excludes for my custom Application and Session, then everything works fine until somehere something tries to cast getApplication() and there it fails with a classcast exception which is why I had added these two lines in the first place.

Things have been working with the filter as given for the last 2 or 3 months now.","23/Jun/07 07:31;ptrthomas;Ok great, now things are working fine with this, I switched on the Spring exclude:

        ReloadingClassLoader.includePattern(""info.jtrac.wicket.*"");
        ReloadingClassLoader.includePattern(""info.jtrac.wicket.yui.*"");
        // ReloadingClassLoader.excludePattern(""info.jtrac.wicket.JtracApplication"");
        // ReloadingClassLoader.excludePattern(""info.jtrac.wicket.JtracSession"");
        ReloadingClassLoader.excludePattern(""org.springframework.*""); 

So apologies, yes I have a couple of Spring managed objects in my Application and Session.  What threw me off was that my earlier config was working for a long time

Obviously I had experimented with various exclude settings and was aware of the documentation saying you should exclude Spring, but things were working without having to do that so I didn't.  Until now.  

I guess you can close this issue?  But curious to know what changed.","23/Jun/07 10:47;jbq;It's a bit tricky to make the reloading work with Spring.  You have to define class naming conventions and enforce them.  The main idea behind all of this, is that you will come across problems if the same class is loaded in two different classloaders, one is the parent classloader, and the other is the reloading classloader.

In your include/exclude patterns, I don't see the point of excluding ""org.springframework.*"", this should not be needed.  But of course JtracApplication and JtracSession *must* be included, otherwise you won't be able to use them successfully in the Wicket components, as you will have two copies of the class in two different classloaders.

And about Wicket making your usecase fail suddenly is because the internal handling of classes has slightly changed recently, but what you encounter is just a side effect of the misconfigured include/exclude patterns in the first place.

Glad it works now and that you use this feature successfully.",23/Jun/07 14:13;ptrthomas;Thanks for all the help.  I use this feature and it is one of the main reasons I am not switching to groovy or the like for the time being.  Huge time saver :)  Thanks again.,"24/Jun/07 10:00;almaw;JBQ: should we make this happen by default?
ReloadingClassLoader.excludePattern(""org.springframework.*"");","24/Jun/07 12:14;jbq;As I said in the reply to Peter, excluding org.springframework.* does not make sense as it is never supposed to be included in the first place.","24/Sep/07 11:21;ptrthomas;I decided to reopen this old issue for the history.  Also, this nabble thread would be relevant:

http://www.nabble.com/Has-something-changed-in-markup-inheritance--t3963374.html#a11345518

I'm trying with 1.3.0-beta3 and still have problems.  I long for the good old days of SNAPSHOT when the ReloadingWicketFilter worked in my particular setup.  So I have attached a quickstart and I will do my best to help improve this.

How to replicate:

Use the attached quickstart.
Point browser to context root, HomePage comes up.
Click on the link to go to ""Next Page""
Make an edit to ""TestPage.java"", re-deploy the changed class
give enough time (couple of seconds?) for the classloading to take effect
Now click on the link on TestPage with the text ""ClickMe""

===========================
Unexpected RuntimeException

WicketMessage: Markup of type 'html' for component 'test.TestPage' not found. Enable debug messages for org.apache.wicket.util.resource to get a list of all filenames tried:
[Page class = test.TestPage, id = 1, version = 0]

Root cause:

org.apache.wicket.WicketRuntimeException: Parameter clazz must be an instance of test.TestPage, but is a test.BasePage
at org.apache.wicket.markup.MarkupCache.getMarkup(MarkupCache.java:270)
at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.checkForMarkupInheritance(InheritedMarkupMarkupLoader.java:99)
at org.apache.wicket.markup.loader.InheritedMarkupMarkupLoader.loadMarkup(InheritedMarkupMarkupLoader.java:65)
at org.apache.wicket.markup.loader.DefaultMarkupLoader.loadMarkup(DefaultMarkupLoader.java:56)
at org.apache.wicket.markup.MarkupCache.loadMarkup(MarkupCache.java:415)
===========================

Let me know if you need any more details!","24/Sep/07 22:17;jbq;Improve Javadoc: make sure to clear your session cookie before reloading the
application home page (or any other bookmarkable page) to get rid of old pages
stored in session","25/Sep/07 16:03;ptrthomas;Closing as per discussion here:

http://www.nabble.com/Experiences-with-ReloadingWicketFilter-t4508710.html",,,,,,,,,,,,,,,,,,,,,,
Need to escape select html option value,WICKET-642,12371518,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,sbelur,sbelur,13/Jun/07 06:03,30/Oct/07 23:33,14/Mar/19 03:09,30/Oct/07 19:17,1.2.4,1.2.5,1.2.6,1.3.0-beta1,,,,,,,,1.2.7,1.3.0-rc1,,wicket,,,,,,,,,,,0,,,,,,"
Versions affectec : My  version of wicket is 1.2.4 .However it is present even in the trunk as well.

Currently if option value contains double quotes  in a dropdown choice,
the value got on the server side is empty string.

The method appendOptionHtml of AbstactChoice class does not
escape markup for option values as it does for display values.






","Any OS , tomcat server",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-06-24 13:41:42.211,,,no_permission,,,,,,,,,,,,201677,,,Tue Oct 30 23:33:02 UTC 2007,,,,,,0|i0ki9r:,117777,,,,,,,,"24/Jun/07 13:41;jdonnerstag;I tend to agree that all data put into the markup output by Wicket should be HTML escaped by default. I would change ChoiceRenderer.getIdValue() to escape the return value. But I guess it is Johan who knows more about than I do.

Juergen",16/Oct/07 06:49;ehillenius;Assigned version (beta 4),30/Oct/07 19:17;jcompagner;call also escapeMarkup for the option value,30/Oct/07 20:30;dashorst;Should we fix this also in 1.2.x?,"30/Oct/07 22:39;jcompagner;you whiner.
done.","30/Oct/07 23:33;dashorst;I wasn't whining, just wondering if it were a great idea to patch it on 1.2.x too. Fortunately you took it that way, and implemented it. Now the 1.2.7 guys have this too (however, that is one reason less to move to 1.3, which is not so great)

but THANKS!",,,,,,,,,,,,,,,,,,,,,,,,,,,
detach() is not called when nested object is IDetachable but not IModel in CompoundPropertyModel,WICKET-621,12371079,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,dashorst,dashorst,06/Jun/07 20:59,06/Jun/07 21:00,14/Mar/19 03:09,06/Jun/07 21:00,1.3.0-beta1,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,0,,,,,,"Sometimes you have an object that is not an IModel but only IDetachable and nest that in a CompoundPropertyModel (or a PropertyModel). The detachable is not detached because the CompoundPropertyModel and the AbstractPropertyModel explicitly check on IModel implementations, not IDetachable implementations.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201658,,,Wed Jun 06 21:00:52 UTC 2007,,,,,,0|i0kicf:,117789,,,,,,,,06/Jun/07 21:00;dashorst;Changed IModel to IDetachable and added unit tests.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stateless forms don't work with QueryStringUrlCodingStrategy,WICKET-607,12370636,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,nheudecker,nheudecker,31/May/07 20:10,01/Nov/07 19:27,14/Mar/19 03:09,01/Nov/07 19:27,1.3.0-beta1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"Trying to submit a stateless form to a page using QueryStringUrlCodingStrategy results in a NumberFormatException on the form's name:

java.lang.NumberFormatException: For input string: ""myStatelessForm""
     at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
     at java.lang.Integer.parseInt(Integer.java:447)
     at java.lang.Integer.parseInt(Integer.java:497)
     at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.addInterfaceParameters(WebRequestCodingStrategy.java:519)
     at org.apache.wicket.protocol.http.request.WebRequestCodingStrategy.decode(WebRequestCodingStrategy.java:188)
     at org.apache.wicket.Request.getRequestParameters(Request.java:179)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1049)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1135)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:490)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:248)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:122)",N/A,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-31 20:15:23.642,,,no_permission,,,,,,,,,,,,201646,,,Thu Nov 01 19:27:36 UTC 2007,,,,,,0|i0kidz:,117796,,,,,,,,31/May/07 20:15;jcompagner;do you have the request url that goes wrong? (so the form action url),31/May/07 23:09;nheudecker;http://localhost:8080/home?wicket:interface=%3A0%3ApromoColumn%3ApromoCodePanel%3AmyStatelessForm%3A%3AIFormSubmitListener%3A,"01/Jun/07 08:50;jcompagner;we seem to miss the last %3A == :  == the dept param?
just another wicket url:

wicket:interface=:1:actionLink::ILinkListener::

2 :: after the listener interface

And dept is AlMaws baby!","04/Jun/07 17:48;almaw;Although the above /was/ an issue, it was fixed a while back. Unfortunately, stateless forms for QueryStringUrlCodingStrategy still do not work. :-(

The issue here is that WebRequestCycleProcessor is looking for a component path before it looks for mounts. And once it has found a component path, it's trying to resolve a rendered page for it. Of course, with stateless stuff, there is no rendered page available in the PageMap, so you get a PageExpiredException.","04/Jun/07 17:49;almaw;This is sufficiently complex that I'm not convinced it'll make it into beta2, sorry. Reallocating to rc1.","04/Jun/07 18:55;almaw;Even if we fix this (put in an ugly catch block, for example), things still didn't work, due to QueryStringUrlCodingStrategy not knowing about BookmarkableListenerRequestTargets (see the special-case code in BookmarkablePageRequestTargetUrlCodingStrategy.decode() for example).

I fixed that in trunk in r544204, only I'm now not sure I've done the right thing - I think maybe we should be calling AbstractRequestCycleProcessor.resolveBookmarkablePage() instead, as that does much the same thing. Problem is, they're on different ""layers"" of the code, if you see what I mean.

Perhaps the code needs factoring out? Or maybe QueryStringUrlCodingStrategy needs to not extend BookmarkablePageRequestTargetUrlCodingStrategy? Or something else?

I'm not sure what's best to do here, and would appreciate some help from someone more familiar with the code. ","13/Jul/07 17:07;ehillenius;Maybe we should look at this at the same time: http://www.nabble.com/stateless-forms-don%27t-work-on-mounted-pages-tf4073295.html

","01/Nov/07 19:27;jcompagner;seems to work fine now. 
I changed the stateless example application a bit to test it 
Both pages are with QueryString and then have StatelessForms
the real stateless once can create new page
the statefull one reuses it.",,,,,,,,,,,,,,,,,,,,,,,,,
"AbstractTextComponent#setConvertEmptyInputStringToNull(true) does not work with IObjectClassAwareModels (affects TextField, etc.)",WICKET-606,12370628,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,almaw,almaw,almaw,31/May/07 18:34,02/May/13 02:29,14/Mar/19 03:09,07/Jun/07 17:16,1.3.0-beta1,,,,,,,,,,,1.3.0-beta2,,,,,,,,,,,,,,0,,,,,,"The unit tests ought to cover this, but apparently don't. A TextField should convert empty strings to nulls if you call setConvertEmptyInputStringToNull(true) on it (which the constructors do by default).

However, this doesn't currently work:
 - AbstractTextComponent#getConvertEmptyInputStringToNull() is only called from AbstractTextComponent#convertValue(String[]).
 - AbstractTextComponent#convertValue(String[]) is called from FormComponent#convert(), but only if the component doesn't have a type assigned to it.
 - As soon as you use a PropertyModel (which implements IObjectClassAwareModel), this means empty strings are no longer converted to nulls.

This is obviously a great big blocker and needs fixing ASAP.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-31 20:03:16.66,,,no_permission,,,,,,,,,,,,59233,,,Thu Jun 07 17:16:09 UTC 2007,,,,,,0|i0kie7:,117797,,,,,,,,"31/May/07 20:03;jcompagner;that is not that simple because if you have a type then the type converter is in control how to handle nulls and empty strings
for example if the type is a Number then an empty string will always return null (no matter what it is)

os if you are saying false in convert empty string to null and the type is not String then something really goes wrong.

So the only use of the getConvertEmptyInput is if the type is a String, so the question is how are we going to give that behavior
to the StringConverter??

the only thing i can think of is that AbstractTextComponent does override:

	public IConverter getConverter(Class/* <?> */type)
	{
		return getSession().getConverter(type);
	}


and if the type is String return a wrapper around the converter
that is given by the session. And handle the value based on the conver empty input setting.

any other ideas?","31/May/07 20:03;jcompagner;by the way. The problem with this is IF the developer overrides getConverter again
he has to honer this them selfs.

","31/May/07 21:32;knopp;If you really think that this problem only happens with Strings, then the solution can be easy. We simply won't set component type to String if the target type is string. We can just ignore the type.

E.g.

	protected void onBeforeRender()
	{
		super.onBeforeRender();
		if (getType() == null)
		{
			Class type = getModelType(getModel());
			if (String.class.equals(type) == false)
			{
				setType(getModelType(getModel()));
			}
		}
	}

WDYT?","31/May/07 21:38;jcompagner;i think that would work yes
It should be allowed to set the type yourself (but that is still the case) because i could think of some string->string conversions (mask textfields and so on)
and getConverter is i think only used when a type is set.
",04/Jun/07 12:06;almaw;Fixed in r544135.,"06/Jun/07 05:50;thrantal;After I updated to a fresh 1.3.0 snapshot today (and these changes got applied), one of our tests started failing because a TextField got its input trimmed even though we didn't want it to happen.

What does the trimming is FormComponent.convertValue():

        protected Object convertValue(String[] value) throws ConversionException
        {
                return value != null && value.length > 0 && value[0] != null ? value[0].trim() : null;
        }

So I think that a side effect of these changes has been that now FormComponent.convertValue() gets always called to String-type text components (at least when using a PropertyModel). 

I find it suspicious that the framework would always trim input by default; at least it could be overridable (though you can already override the whole convertValue()). What puzzles me a bit more is how this side effect was caused by these changes.

What do you think?","06/Jun/07 06:04;ehillenius;I agree with Timo that trimming the value doesn't sound right (though I must admit that I'm not sure what we were doing before. We should temporarily trim to e.g. check for an 'empty' string, but we should keep the input as provided.","06/Jun/07 09:14;jcompagner;we always trimmed. So this is not new behavior this is behavior we always had just because convertValue() wasn't called anymore for String values so it didn't show this for a while in 1.3
i think in 99% of the cases i want trimming.","07/Jun/07 17:16;almaw;This bug is fixed - behaviour is back to 1.2.x-style and trunk prior to the patch that created this particular issue.

If you think trimming whitespace is a bug then please open a separate issue for it.",,,,,,,,,,,,,,,,,,,,,,,,
Stateless form skips page parameters,WICKET-605,12370619,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,joeb,joeb,31/May/07 17:27,31/Oct/07 13:43,14/Mar/19 03:09,31/Oct/07 13:43,1.3.0-beta1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"Page parameters are not included in stataless form action parameter.

I think stateless form should override urlFor(RequestListenerInterface listener) method and append page parameters. (Submit works if I manually add them at runtime ie. with firebug plugin in browser.)","linux, glassfish v2",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-31 19:37:07.989,,,no_permission,,,,,,,,,,,,201645,,,Wed Oct 31 13:43:06 UTC 2007,,,,,,0|i0kief:,117798,,,,,,,,"31/May/07 19:37;jcompagner;This should be automatically done
the bookmarkable part of the stateless form url should already contain the page parameters and then the wicket:interface param

because this shouldn't only work for the url of the form but for all stateless urls like stateless links!

","31/May/07 19:50;jcompagner;this is pretty annoying this is the part of RequestCycle that does the trick:

	public final CharSequence urlFor(final Component component,
			final RequestListenerInterface listener)
	{
		// Get Page holding component and mark it as stateful.
		final Page page = component.getPage();
		final IRequestTarget target;
		if (listener != IRedirectListener.INTERFACE && component.isStateless()
				&& page.isBookmarkable())
		{
			target = new BookmarkableListenerInterfaceRequestTarget(page.getPageMapName(),
					page.getClass(), new PageParameters(), component, listener);
		}

as you can see we do here 'new PageParameters()' 
and thats why there aren't any in the url. 
But what should we put in there? How do we get  the right once?
can we just get the from the current request? I don't think so
the only reliable thing to ask for is the page. But then the page has to have a method like getPageParameters()
but we don't have anything like that at the moment so what is going to be returned ?
","31/May/07 21:15;joeb;I have some stateless pages on my portal (contents loaded by id, ie. a news details, list forums, documents in a topic, ...) so these pages are available for guests too without the need of session. These pages have a login form so users can log in quickly and after it they get the same content. But the content is different with empty parameters.

If I submit a form on a parameterized page the page should not be changed after submit. Stateful components are not recreated on submit, they can hold models but stateless pages needs information for reconstruction. I think stateless links and stateless forms should include the parameters of the current page with a solution like calling getPageParameters().","04/Jun/07 16:37;ehillenius;The best hack I can currently imagine is to set the current PageParameters instance as a threadlocal somewhere (RequestCycle?) when the WebPage(PageParameters) constructor is called (btw, I see no reason why this constructor couldn't be moved to Page... we can do that regardless), and clean it up again in RequestCycle#detach.

It would be yet another threadlocal unfortunately, but otoh it is valuable information to have accesible, which is hard to get to right now.

WDYT?",06/Jun/07 02:32;ehillenius;See discussion here http://www.nabble.com/Re%3A--jira--Commented%3A-%28WICKET-605%29-Stataless-form-skips-page-parameters-tf3867201.html,06/Jun/07 02:32;ehillenius;You want to get this one Johan?,"06/Jun/07 05:47;ehillenius;So, to pick some of the discussion from the thread, I think we currently agree that we could keep a reference to the pageparameters object in the request target (as a normal property) if the pageparameters object is passed to the constructor, and for the other things that are mentioned in the discussion, we can introduce meta data on the request cycle.","06/Jun/07 07:37;ehillenius;I think I fixed it right like this. But I wouldn't mind a review, Johan :)","06/Jun/07 08:14;joeb;I've tested it from current trunk and works fine :) With that patch page parameters are available in other components (like panels, menu) too so they don't need to be passed (in constructor).","06/Jun/07 08:44;jcompagner;i think it should work yes, because we only set the params in the Resolve step and i guess then only one is being made.
","12/Jun/07 16:54;ivaynberg;we unrolled revision #544754

the problem introduced by this revision was that the requestcycle kept reusing old pageparameters in the urlfor call. this would lead to urls growing if parameters were added to them on client side

so for example the first time the url would be
?wicekt:interface=xxx&param=blah
next request
?wicekt:interface=xxx&param=blah&param=boppatyblah
next request
?wicekt:interface=xxx&param=blah&param=boppatyblah&param=tiredblah

we cannot just keep recycling request parameters",12/Jun/07 17:09;ehillenius;We didn't have to throw out the reference to the current request parameters though. This was helping more people/ cases and is unrelated to appending those request parameters.,"12/Jun/07 18:57;ehillenius;I saw the usual heroic remarks (wtf!, retarded!) on the IRC log about the fact that PageParameters sets itself as the parameters object in the request cycle.

If you would actually follow that code a bit, you can see that it only sets itself when the request is still resolving; after that the parameter just won't be set so you can construct the page parameters object while handling events and rendering etc as much as you like. Solving it like this looked better to me than doing it the request cycle processing itself, as that would be exactly the kind of code-duplication introducing fix people have been complaining about lately. 

This is the idea, and I hope I didn't overlook something (mind you I did ask for a review). If anyone has a better solution, please contribute.","12/Jun/07 20:45;jcompagner;igor: when did that happen exactly?
because in the first phase (where the page paramets could be created and set) we only do that for a bookmarkable page.
So are you saying that we should just remove them again in the response phase? So that all urls for are not using that PageParam object?
(so the params are only created before the listener interface call, and when we start to render they are gone again)?

because how else could they be reused ob places where we shouldn't have them??","12/Jun/07 21:50;ivaynberg;this is what i do:
b.append(urlFor(ILinkListener.INTERFACE));
b.append(""&"").append(getJavascriptWidgetId()).append(""='+args;\n"");

so the callback is generated and then invoked when the user clicks the link

what happens is that every time the user clicks the link an extra javascriptwidgetid param gets stuck in the request parameters because requestcycle keeps reusing the original requests pageparameters

so first url looks like this: ?wicket:interface=::&calendar=+args
then after a click it looks like this: ?wicket:interface=::&calendar=20070612&calendar=+args
and after another: ?wicket:interface=::&calendar=20070612&calendar=20070612&calendar=+args
and so on","12/Jun/07 23:57;almaw;Eelco wrote:
>If you would actually follow that code a bit, you can see that it only sets itself when the request is still resolving

Can I note that if this is the case, some comments in the PageParameters constructor(s) to that effect might have been useful. ;-)","13/Jun/07 00:04;ehillenius;Yes, which is what the current version has.

	/**
	 * Set this on request cycle. Request will decide whether to keep it as a
	 * reference or not.
	 */
	private void setOnRequestCycle()
	{
		RequestCycle cycle = RequestCycle.get();
		if (cycle != null)
		{
			cycle.setPageParameters(this);
		}
	}","13/Jun/07 00:10;almaw;Hmmm. Is it just me, or is this really unintuitive?
If I call a method Foo.setBar(Object bar) I expect it to set the field bar of the instance Foo to the given value.

I don't care if it's javadoc'ed or not, I just really don't like this code:

final void setPageParameters(PageParameters parameters)
{
    if (currentStep == RESOLVE_TARGET)
    {
         this.pageParameters = parameters;
    }
}","13/Jun/07 00:29;ehillenius;Yeah, I don't like it much either, but I don't see a better alternative. The PageParameters objects having to know what 'the current step' is would be equally bad (or imo worse) and doing this stuff during request target resolving would result in code duplication in an area that already grew into messy code.

But like I said, if you have a better proposal, I'm all ears.","13/Jun/07 05:16;jcompagner;but where do those args comming from??
as eelco said the args are only resolved in the first phase. And in that phase the PageParam object is only made i believe for a Bookmarkable call.

So the args that you have how do you create those?

So somehowe it is also generated for you for normal interface request? Then that is what we should try to avoid. Only with a bookmarkable request the PageParams should be hold on to in the request cycle.

But what should happen in your case?? Why are you adding the args? Isn't it supposed to add args?","13/Jun/07 06:06;ivaynberg;@johan

the problem is this

on first request i do 
String temp=urlfor(interface);
String url=temp+""&foo=bar"";
and it works just great

but now on second request to the same page when i do
String temp2=urlfor(interface) temp2!=temp. in fact temp2=url. this is the problem, i expect temp2=temp, but it remembers the pageparameters from previous requests and adds them to the urlfor calls.
",20/Aug/07 20:37;dashorst;Next release,26/Aug/07 18:03;knopp;What's the state of this?,"30/Oct/07 22:28;jcompagner;ok. So just reusing the params is not an option because other params that aren't really the page params are then also recycled

So i think i am back to the first sugesstion of me, we introduce a getPageParameters() method on page. (or web page)
those is by default empty and a developer has to override and set them so that those are used from now on for that specific page instance.
(ofcourse we could also introduce a set and get PageParamters and store them as metadata)

any objections to that? or better ideas?","31/Oct/07 13:43;jcompagner;ok i fixed it so that the PageParameters that are used with the constrution of a page, if you give the params through in your constructor super call, are remembered and used when generating the stateless links.

I added an extra constructor in Page and WebPage and improved the javadoc a bit so that it is know that you have to give the pageparams through to the super call if you want to remember them for that page instance.",,,,,,,,
equals() in ResourceStreamRequestTarget compares the wrong filename,WICKET-593,12370336,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,jcompagner,freemant,freemant,27/May/07 02:35,27/May/07 10:50,14/Mar/19 03:09,27/May/07 10:50,1.2.6,,,,,,,,,,,1.2.7,1.3.0-beta2,,wicket,,,,,,,,,,,0,,,,,,"In ResourceStreamRequestTarget, the equals() method is:

	public boolean equals(Object obj)
	{
		if (obj instanceof ResourceStreamRequestTarget)
		{
			ResourceStreamRequestTarget that = (ResourceStreamRequestTarget)obj;
			return resourceStream.equals(that.resourceStream)
					&& ((fileName != null) ? fileName.equals(this.fileName) : true);
		}
		return false;
	}

Note that the fileName is comparing to itself. It should really be: 

	fileName.equals(that.fileName)
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201636,,,2007-05-27 02:35:32.0,,,,,,0|i0kifj:,117803,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
continueToOriginalDestination / RestartResponseAtInterceptPageException with page parameters broken,WICKET-588,12370024,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,almaw,wouterv,wouterv,23/May/07 08:06,01/Nov/07 09:28,14/Mar/19 03:09,01/Nov/07 09:28,1.3.0-beta1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"I'm using the login/authorization strategy taken from the wicket
examples, which is
throw new RestartResponseAtInterceptPageException(SignIn.class);

in the application class and calling

continueToOriginalDestination()

in the login page.

However when I'm using a bookmarkable page with PageParameters, the
parameters get lost in the process..",,,,,,,,,,,,,,,,,23/May/07 08:08;wouterv;patch.txt;https://issues.apache.org/jira/secure/attachment/12357957/patch.txt,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-05-23 14:01:16.559,,,no_permission,,,,,,,,,,,,201631,,,Thu Nov 01 09:28:13 UTC 2007,,,,,,0|i0kig7:,117806,,,,,,,,"23/May/07 08:08;wouterv;I've created a patch which works for me, it changes the way the originial url is stored:

",23/May/07 14:01;jcompagner;i needed to tweak a little bit more but it should work now correctly,"24/May/07 17:17;wouterv;The solution does not work when running in a context other than the root.
So when signing in to path /myapp/admin/stuff
the redirect after signin is to /admin/stuff, without the /myapp",20/Aug/07 20:37;dashorst;Next release,"31/Oct/07 18:17;wouterv;FYI: I've updated tot beta4 in my application, and it looks like the bug is gone.",01/Nov/07 09:28;jcompagner;closing it then.,,,,,,,,,,,,,,,,,,,,,,,,,,,
AbstractTextComponent is using onAttach when it should be onBeforeRender,WICKET-578,12369677,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,cdeal,cdeal,18/May/07 13:50,18/May/07 19:23,14/Mar/19 03:09,18/May/07 19:23,1.3.0-beta1,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,0,,,,,,"See http://www.nabble.com/Wicket-Examples-1.3-%28latest%29-that-give-errors-tf3761594.html#a10632812

This is the stacktrace that represents the problem:

09:14:01,917 ERROR RequestCycle:1205 - Cannot modify component hierarchy during attach phase
org.apache.wicket.WicketRuntimeException: Cannot modify component hierarchy during attach phase
        at org.apache.wicket.Component.checkHierarchyChange(Component.java:3593)
        at org.apache.wicket.Component.addStateChange(Component.java:2602)
        at org.apache.wicket.markup.html.form.FormComponent.setRequired (FormComponent.java:723)
        at org.apache.wicket.markup.html.form.FormComponent.setType(FormComponent.java:740)
        at org.apache.wicket.markup.html.form.AbstractTextComponent.onAttach(AbstractTextComponent.java :106)
        at org.apache.wicket.MarkupContainer.internalAttach2(MarkupContainer.java:1368)
        at org.apache.wicket.Component.attach(Component.java:2957)
        at org.apache.wicket.MarkupContainer.addedComponent (MarkupContainer.java:875)
        at org.apache.wicket.MarkupContainer.add(MarkupContainer.java:151)
        at com.csc.aims.framework.wicket.DataEntryPanel.createTextField(DataEntryPanel.java:190)
        at com.csc.aims.framework.wicket.DataEntryPanel.createTextField(DataEntryPanel.java:176)
        at com.csc.aims.specchange.wicket.RomRatesPanel.createComponents(RomRatesPanel.java:111)
        at com.csc.aims.framework.wicket.InitializablePanel.onBeforeRender (InitializablePanel.java:65)
        at com.csc.aims.framework.wicket.DataEntryPanel.onBeforeRender(DataEntryPanel.java:364)
        at org.apache.wicket.Component.beforeRender(Component.java:3037)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren (MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender (Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren (MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender (Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren (MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender (Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren (MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender (Component.java:3046)
        at org.apache.wicket.MarkupContainer.onBeforeRenderChildren(MarkupContainer.java:1433)
        at org.apache.wicket.Component.beforeRender(Component.java:3046)
        at org.apache.wicket.Page.renderPage (Page.java:872)
        at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:223)
        at org.apache.wicket.request.AbstractRequestCycleProcessor.respond (AbstractRequestCycleProcessor.java:103)
        at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1011)
        at org.apache.wicket.RequestCycle.step(RequestCycle.java:1073)
        at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1142)
        at org.apache.wicket.RequestCycle.request(RequestCycle.java:490)
        at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java :248)
        at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:122)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke (StandardContextValve.java:178)
        at org.apache.catalina.valves.FastCommonAccessLogValve.invoke(FastCommonAccessLogValve.java:495)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java :126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service (CoyoteAdapter.java:148)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)
        at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java :664)
        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-18 19:23:17.912,,,no_permission,,,,,,,,,,,,201623,,,Fri May 18 19:23:17 UTC 2007,,,,,,0|i0kigv:,117809,,,,,,,,18/May/07 19:23;jcompagner;changed onAttach -> onBeforeRender,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
<wicket:body>[body]</wicket> works strange,WICKET-560,12369185,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,pete,pete,13/May/07 10:08,14/May/07 11:48,14/Mar/19 03:09,14/May/07 11:48,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"While

   <wicket:body/> 

works fine in a border component the following code behaves strangely:

<wicket:body>[some mockup html]</wicket:body>

it will not _only_ render the body component but instead

  [body component]</wicket:body>

so there will be a left over closing tag without the equivalent opening tag in the resulting html...

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-13 15:19:54.062,,,no_permission,,,,,,,,,,,,201606,,,Mon May 14 11:48:01 UTC 2007,,,,,,0|i0kij3:,117819,,,,,,,,"13/May/07 10:09;pete;in case it helps - these are my markup settings:

    final IMarkupSettings markupSettings = getMarkupSettings();
    markupSettings.setCompressWhitespace(true);
    markupSettings.setStripComments(true);
    markupSettings.setStripWicketTags(true);
    markupSettings.setStripXmlDeclarationFromOutput(true);
",13/May/07 15:19;jdonnerstag;fixed and junit test added,"14/May/07 07:26;pete;maybe this is not related to the fix...

the wicket:body works fine now but the 

  <wicket:head>..</wicket:head>

does not seem to be rendered anymore.

I have a very simple example here and get no output for the header contribution.
",14/May/07 09:56;jdonnerstag;Ups. All junit tests passed successfully. Can you attach your example (quickstart or junit test) please.,"14/May/07 11:47;pete;Sorry, the problem seems to be caused by a fix of 

  https://issues.apache.org/jira/browse/WICKET-549

Once I stop using <html wicket:id=""html"">

the header contribution is there again...

I will report that on WICKET-549

So, the fix works fine - and - thanks a lot for fixing it!! :-))
",14/May/07 11:48;pete;fixed,,,,,,,,,,,,,,,,,,,,,,,,,,,
New attach->beforeRender refactor breaks ajax updating of list views,WICKET-558,12369157,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,jcompagner,jonathan.locke,jonathan.locke,12/May/07 06:57,28/May/07 12:31,14/Mar/19 03:09,28/May/07 12:31,1.3.0-beta1,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,0,,,,,,"Because components are created in onBeforeRender in list views (it calls populateItem then), it is necessary for AJAX renderings now to call beforeRender on every component to be updated before proceeding with the render.  Since the current code does not do this, you get a NPE when rendering happens since the item was never populated.

It looks like AjaxRequestTarget.respondComponent should call before render on the component tree (similar to how it does in Page) just before it's about to render.  But I'm unsure if this is the right place to make the change.  

Johan can you look at this since you were doing this refactor and probably know all the details?",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-14 21:40:38.678,,,no_permission,,,,,,,,,,,,59221,,,Mon May 28 12:31:12 UTC 2007,,,,,,0|i0kijj:,117821,,,,,,,,"14/May/07 21:40;jcompagner;the current code does do this..

piece of Component.renderComponent :

                               beforeRender(); <<<<<<<<<<<<<<
                              
                                // SOME code SKIPPED

				// Render the component and all its children
				render(markupStream);
			}
			finally
			{
				// Make sure the original markup stream is back in place
				parent.setMarkupStream(originalMarkupStream);
				afterRender(); <<<<<<<<<<<<<<<<<<<<<<","28/May/07 12:31;jcompagner;this was about some feedback issue, can be closed now",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RedirectPage inside ListView causes page expiration issues,WICKET-557,12369146,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,memeplex,memeplex,11/May/07 22:15,28/May/07 13:09,14/Mar/19 03:09,28/May/07 13:09,1.3.0-beta1,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,0,,,,,,"I have a page with a number of Links, some of them internal (to the wicket application), some of them external (to RedirectPages). If I follow one of the externals (opening it into a different tab/window) something like a cache clean up seems to happen, because after that any of the internal links give a page expiration error. 

I have coded a little example: a simple page with just one external and one internal link. I can not reproduce the problem in this reduced scenario. But if both links are rows of a ListView, after following the external one once, the internal one gets expired. 

I have attached an eclipse project with a page for each situation: simple, list. There is a jetty launcher inside so that you can fire it up. You can then browse
the two cases at the urls:

http://localhost:8080/redirect/app/simple
http://localhost:8080/redirect/app/list

(just ignore the tab package; it's an example with the ListView embedded into a TabbedPanel from which I came up to the other examples by successive reductions). ",,,,,,,,,,,,,,,,,11/May/07 22:15;memeplex;redirect.tgz;https://issues.apache.org/jira/secure/attachment/12357146/redirect.tgz,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-05-14 01:16:53.501,,,no_permission,,,,,,,,,,,,201605,,,Mon May 28 13:09:33 UTC 2007,,,,,,0|i0kijr:,117822,,,,,,,,14/May/07 01:16;almaw;That's an interesting one. Thanks for the comprehensive quickstart. We'll look into this.,"14/May/07 01:25;almaw;This seems to be a bug with the SecondLevelCacheSessionStore. If you use the HttpSessionStore, the problem goes away.

To use HttpSessionStore, do this in your WebApplication class:

	@Override
	protected ISessionStore newSessionStore() {
		return new HttpSessionStore(this);
	}

I'm reassigning this one to Johan, as the SecondLevelCacheSessionStore is his baby.","28/May/07 13:09;jcompagner;the test was incorrect, and because the log.error wasn't reported in the console it didn't get noticed that ListRow isn't serializeable:
when i do this:

class ListRow  implements Serializable

it goes fine.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryStringUrlCodingStrategy does not handle multi-valued parameters,WICKET-539,12368727,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jbq,ingramchen,ingramchen,06/May/07 03:00,16/Jul/07 11:50,14/Mar/19 03:09,16/Jul/07 10:40,1.2.6,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,0,,,,,,"When using QueryStringUrlCodingStrategy with multiple window support, for example: 

mount(""/mountPath"", new QueryStringUrlCodingStrategy(""/mountPath"", Other.class));

and use BookmarkablePageLink:

public Index() {
	add(new BookmarkablePageLink(""link"", Other.class).setParameter(""foo"", 123L));
}

ideally the url should be:
/context/app/mountPath?foo=123

if open the link in new window, in 1.2.5, the url is
/context/app/mountPath?foo=123&wicket:pageMapName=wicket-0

however, in 1.2.6. the url become:
/context/app/mountPath?foo=%5BLjava.lang.String%3B%406f0241&wicket:pageMapName=wicket-0


"," linux 2.6.x
 tomcat5, 6
 jdk6",,,,,,,,,,,,,,,,01/Jun/07 10:09;jbq;20070601-wicket-WICKET-539.txt;https://issues.apache.org/jira/secure/attachment/12358706/20070601-wicket-WICKET-539.txt,31/May/07 08:08;ingramchen;patch.tar.gz;https://issues.apache.org/jira/secure/attachment/12358596/patch.tar.gz,06/May/07 03:00;ingramchen;quickstart.tar.gz;https://issues.apache.org/jira/secure/attachment/12356826/quickstart.tar.gz,,,,,,3.0,,,,,,,,,,,,,,,,,,,2007-05-06 17:34:46.476,,,no_permission,,,,,,,,,,,,201588,,,Mon Jul 16 11:50:19 UTC 2007,,,,,,0|i0kilj:,117830,,,,,,,,06/May/07 03:00;ingramchen;quick start to reproduce the bug,"06/May/07 17:34;jbq;Fixed in trunk, thanks for reporting.  Note that there is a similar problem described in WICKET-65","31/May/07 03:41;ingramchen;I tried current 1.2.x trunk (2007/05/31) with quick start
but it seems that it's still broken.

Could you run quick-test which I provided again to verify ?
 ","31/May/07 07:20;jbq;This issue is not fixed in the 1.2.x branch indeed. The fix is only available in Wicket trunk == Wicket 1.3.  Based on the fix I made (look at the Subversion commits tab in this issue), it should be possible to come up with a patch for the 1.2.x branch however.  Any chance you can prepare one?","31/May/07 08:08;ingramchen;I back port your changes to 1.2.x (just copy and paste), see attachment

for assertion in QueryStringUrlCodingStrategyTest, I change

assertEquals(""mount/point?a=1&a=2&b=1"", path);
to 
assertEquals(""/mount/point?a=1&a=2&b=1"", path);

The quick start works. But I don't know why path contains ""/"" in 1.2.x but not in 1.3. 
",01/Jun/07 10:15;jbq;Applying this fix to the 1.2.x branch means we also fix WICKET-65 for consistency.  That's too much of a change for the maintenance branch in my opinion.,"04/Jun/07 06:25;ingramchen;hmm.. if we can't fix for 1.2.x branch, at least provide some workaround to avoid it. 
This bug is not just a corner case, it already hurts our production system.",04/Jun/07 15:43;ehillenius;See discussion here http://www.nabble.com/Re%3A-%28WICKET-539%29-QueryStringUrlCodingStrategy-does-not-handle-multi-valued-parameters-tf3863672.html,"16/Jul/07 10:40;jbq;This issue is actually fixed in beta2 already.  If you want this issue to be backported on the 1.2.x branch, please poll the users list.","16/Jul/07 11:50;ingramchen;We apply related patches and do custom build for 1.2.x for ourself, so this is not urgent for us. 
and we will migrate to 1.3 soon.

i think this issue can be closed.",,,,,,,,,,,,,,,,,,,,,,,
remove page versions from the second level cache when explicitly removed,WICKET-519,12368386,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,ehillenius,ehillenius,01/May/07 13:01,09/Dec/07 11:22,14/Mar/19 03:09,28/May/07 20:49,1.3.0-beta1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"Someone at Matej's session had an interesting question about how pages can be removed from the history when you explictly want to avoid users being able to go back to that version (i.e. expire them). Removing the page from the page map works fine with the HttpSessionStore, but doesn't with SecondLevelCacheSessionStore by the looks of it; FilePageStore#removePage just removes from pending but once it is serialized to disk, it will always be availalbe. I think this is wrong. An explicit call to PageMap#remove(Page) should remove it from second level cache so that it is in effect expired.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-12 13:06:15.601,,,no_permission,,,,,,,,,,,,201571,,,Mon May 28 20:49:10 UTC 2007,,,,,,0|i0kinj:,117839,,,,,,,,"12/May/07 13:06;knopp;Sure we can do that. But thinking of it, there are so many simple ways of making the page no longer available in wicket (e.g add a obsolete flag and check it in onatach)...",12/May/07 17:31;ehillenius;Just makes sense API wise though.,28/May/07 20:49;jcompagner;Pages are now removed from disk also (if you do PageMap.clear/remove then all the pages or Pagemap.remove(Page) then only that page.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
problem with browser back-button and links after ajax replace,WICKET-491,12367769,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,ptrthomas,ptrthomas,22/Apr/07 15:16,12/May/07 14:33,14/Mar/19 03:09,12/May/07 13:31,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"I'm having this problem when I back-button to a page with a panel that replaced itself with another panel containing a link - and re-try the link:

WicketMessage: Method onLinkClicked of interface org.apache.wicket.markup.html.link.ILinkListener targeted at component [MarkupContainer [Component id = link, page = test.HomePage, path = 0:panel:link.FirstPanel$1, isVisible = true, isVersioned = true]] threw an exception

Root cause:

java.lang.IllegalArgumentException: object is not an instance of declaring class
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:39)
at java.lang.reflect.Method.invoke(Method.java:585)
at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:186)
at org.apache.wicket.request.target.component.listener.ListenerInterfaceRequestTarget.processEvents (ListenerInterfaceRequestTarget.java:73)
at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:90)
at org.apache.wicket.RequestCycle.processEventsAndRespond (RequestCycle.java:975)
at org.apache.wicket.RequestCycle.step(RequestCycle.java:1048)
at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1127)
at org.apache.wicket.RequestCycle.request(RequestCycle.java :489)
at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:248)

I'm attaching a quickstart.",,,,,,,,,,,,,,,,,22/Apr/07 15:17;ptrthomas;test-quickstart.zip;https://issues.apache.org/jira/secure/attachment/12356006/test-quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-05-12 13:31:20.608,,,no_permission,,,,,,,,,,,,201547,,,Sat May 12 14:33:34 UTC 2007,,,,,,0|i0kipr:,117849,,,,,,,,12/May/07 13:31;knopp;Works well with latest wicket,"12/May/07 14:33;ptrthomas;It works.  This is fantastic, the ajax replace / back button / link problems have gone now.

Thank you and all those who have been working hard on Ajax versioning etc.  This is a big one.  I am thrilled!",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Buggy behaviour in PageMap.access(IPageMapEntry,int). Wicket1.2.4",WICKET-487,12367646,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,kadirsener,kadirsener,20/Apr/07 08:24,29/Oct/07 20:55,14/Mar/19 03:09,29/Oct/07 20:55,1.2.4,1.2.5,,,,,,,,,,1.2.7,1.3.0-rc1,,wicket,,,,,,,,,,,0,,,,,,"On 4/19/07, Kadir Sener GUMUS <chaoticknight@gmail.com> wrote:
Hi all,
in our application, we were experiencing PageExpired pages. When i digged in wicket sources i found something causes my problem and now it is ok after change the behaviour. I dont know if it was fixed in later releases, i wanted to share that you all. 
 
Plz enlighten me if i am wrong or that is an expected behaviour. Let me explain the case:
Assume that we have a pageMap contains 3 page entry inside as ordered as ""pageA.version0, pageB.version0, pageB.version1""  and we pressed the back button from pageB.v1 to pageB.v0!  Before calling this ""access(IPageMapEntry,int)"" method in ""get(int,int)"" of PageMap, ""page.getVersion(versionNumber)"" method is called. In that method, if the page goes back to initial version(0), versionManager is removed! Therefore, "" topPage.getVersions()"" returns 1 as default. Consequently, ""else"" block was running and removing whole page (pageB), and......Bomb!! ""PageExpired"" :)
 
Here it is the changed code:
 
....(PageMap.class)
private

final void access( final IPageMapEntry entry, final int version){ 
.....


if (top instanceof Page) 
{


// If there's more than one version
Page topPage = (Page)top; 

if (topPage.getVersions() > 1) 
{


// Remove version the top access version (-1)
topPage.getVersion(topAccess.getVersion()-1); 
}


//--- PLZ look at here!!  (K.GUMUS)
//else
else if (topPage.getNumericId() != access.id && topPage.getCurrentVersionNumber() != access. version) 
{


// Remove whole page
remove(topPage); 
}

}

....


regards,
Kadir Sener GUMUS
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-09-07 16:18:42.36,,,no_permission,,,,,,,,,,,,201543,,,Mon Oct 29 20:55:04 UTC 2007,,,,,,0|i0kipz:,117850,,,,,,,,07/Sep/07 16:18;dashorst;Is this something for you? And does this affect Wicket 1.3 as well? I only assigned it to 1.2.7,"29/Oct/07 20:55;jcompagner;I applied your else if
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Backport RequestCycle#updateSession and pagemap#session removal to 1.2.x,WICKET-476,12367333,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,dashorst,dashorst,16/Apr/07 23:15,22/Apr/07 12:13,14/Mar/19 03:09,18/Apr/07 21:43,1.2.5,,,,,,,,,,,1.2.6,,,,,,,,,,,,,,0,,,,,,A cleanup bug in the requestcycle may leave dirty objects in the dirtyObjects threadlocal. Removing RequestCycle.updateSession and pagemap#session as we did in 1.3 solves this particular problem.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-04-17 10:19:08.105,,,no_permission,,,,,,,,,,,,201534,,,Sun Apr 22 12:13:54 UTC 2007,,,,,,0|i0kir3:,117855,,,,,,,,17/Apr/07 10:19;jcompagner;this fix can be done without any break of api if needed.,"18/Apr/07 21:43;jcompagner;not a complete backport, but fixed without api break.","20/Apr/07 10:10;jbq;For reference this is the associated Subversion commit:

{noformat}
r529917 | jcompagner | 2007-04-18 10:42:01 +0200 (Mer, 18 avr 2007) | 1 line
Changed paths:
   M /incubator/wicket/branches/wicket-1.2.x/wicket/src/main/java/wicket/PageMap.java
   M /incubator/wicket/branches/wicket-1.2.x/wicket/src/main/java/wicket/Session.java

clean up fix for dirty objects
{noformat}
",20/Apr/07 10:32;jbq;Shouldn't we throw an exception in PageMap.getSession() instead of logging an error to make it obvious to the end user that there is something wrong?  Sometimes people don't pay much attention to the logs. ,"20/Apr/07 11:44;jcompagner;i think that is a bit dangerous. IF (and then it is bug that getSession is there purely to see if the bug is still there somehow...) but if getSession() is still wrong
and we throw there an exception but that pagemap is somehow already in the http session then we have a problem. Because that session is then completely not useable anymore (the exception will happen everytime) 
So the only real other option is session.invalidate()...","22/Apr/07 12:13;dashorst;To clarify the issue a bit more: this issue solves an infrequent occurring security bug, best 
described by the following comment:

> We have the weirdest thing going on, which is as random and rare
> as it is deadly. Every once in a while, on a blue moon, the user can see
> other person's data on his screen! A simple click on the tree - and he got
> somebody else's data. Then, after more clicks, they disappear.

This occurs really infrequently, but is serious and deadly enough to warrant a new release (1.2.6).

We deduced the root of this problem to be a ThreadLocal (Session#dirtyObjects) that was not 
cleaned up at the end of a request, leaving stray data in the thread for another session to pick 
up. The ThreadLocal was not cleaned up in very specific circumstances and the session cross 
over only happened in rare circumstances.

This issue has been resolved by always cleaning up the thread local and never occurred on our
servers since.
",,,,,,,,,,,,,,,,,,,,,,,,,,,
AjaxFormComponentUpdatingBehavior won't work for RadioChoices,WICKET-470,12367201,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,memeplex,memeplex,14/Apr/07 13:48,03/Oct/07 14:47,14/Mar/19 03:09,03/Oct/07 14:47,1.3.0-beta1,,,,,,,,,,,1.3.0-beta4,,,wicket,,,,,,,,,,,1,,,,,,"Below is the generated html and js for a simple RadioChoice(""sex"", Arrays.asList(""M"", ""F"")) with an attached behavior. Notice how wicketSerialize will take the else branch for span elements, so it will always return """". Maybe the behavior should be patched, maybe the js, maybe there is a need for another behavior, I don't know.

<span wicket:id=""sex"" id=""sex5"" onblur=""var
wcall=wicketAjaxPost('test?wicket:interface=:2:testForm:sex::IBehaviorListener:0',
wicketSerialize(document.getElementById('sex5')), function() { },
function() { });"">

<input name=""sex"" type=""radio"" value=""0"" id=""sex_0""/><label
for=""sex_0"">M</label><br />
<input name=""sex"" type=""radio"" value=""1"" id=""sex_1""/><label
for=""sex_1"">F</label><br />

</span>

wicketSerialize = Wicket.Form.serializeElement;

Wicket.Form.serializeElement = function(e) {
var tag = e.tagName.toLowerCase();
if (tag == ""select"") {
return Wicket.Form.serializeSelect(e);
} else if (tag == ""input"" || tag == ""textarea"") {
return Wicket.Form.serializeInput(e);
} else {
return """";",,,,,,,,,,,,,,,,,18/Apr/07 09:25;jcompagner;AjaxFormChoiceComponentUpdatingBehavior.java;https://issues.apache.org/jira/secure/attachment/12355738/AjaxFormChoiceComponentUpdatingBehavior.java,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-04-18 09:25:26.184,,,no_permission,,,,,,,,,,,,88731,,,Wed Oct 03 14:47:39 UTC 2007,,,,,,0|i0kirr:,117858,,,,,,,,"18/Apr/07 09:25;jcompagner;I already wrote such a thing, don't know if it does take all kinds of radio choices or checkbox choices
because  of this:

                asb.append(""function attachChoiceHandlers(markupid, callbackscript) {\n"");
		asb.append("" var choiceElement = document.getElementById(markupid);\n"");
		asb.append("" for( var x = 0; x < choiceElement.childNodes.length; x++ ) {\n"");
		asb.append(""   if (choiceElement.childNodes[x] && choiceElement.childNodes[x].tagName) {\n"");
		asb.append(""     var tag = choiceElement.childNodes[x].tagName.toLowerCase();\n"");
		asb.append(""     if (tag == 'input') {\n"");
		asb.append(""       Wicket.Event.add(choiceElement.childNodes[x],'click', callbackscript);"");
		asb.append(""     }\n"");		
		asb.append(""   }\n"");
		asb.append("" }\n"");
		asb.append(""}\n"");

I am not going deeper then just the child nodes of a radiochoice or group
But for the default CheckboxMultiplyChoice or RadioChoice it should work fine.
I am still thinking about integrating this into AjaxFormComponentUpdatingBehavior so that it checks for the type
and then does different things depending on this.

","18/Apr/07 09:27;jcompagner;Matej can you also do a quick look on this class?
and maybe add the js functioni now build up in the javacode into wicket-ajax.js
improving it so that it walks recursivly through the childs of the radio or check container.

If this all pretty much work we could integrate it into AjaxFormComponentUpdatingBehavior","18/Apr/07 10:39;knopp;I think this approach is wrong. Sorry :)

What we should do have method Wicket.Form.serializeElementOrChildren, which would act like this:
if the give element is a form element, return Wicket.Form.serializeElement(element);
otherwise traverse children recursively and serialize them.

This should work for both RadioChoice and CheckboxMultiplyChoice without the invasive javascript you suggested. Unless I'm wrong of course :)  ","18/Apr/07 10:51;jcompagner;what do you mean with that invasive javascript?
(that asb.append() stufff?)
that has nothing to do with serialization!
That is handled in the event handler that does this:

return getCallbackScript(new AppendingStringBuffer(""wicketAjaxPost('"").append(
				getCallbackUrl()).append(
				""', wicketSerializeForm(document.getElementById('"" + getComponent().getMarkupId()
						+ ""',false))""), null, null);

You see i use the boolean false ^^ so that it doesn't try to find a parent form..

that script i have here above does nothing more then on every input (that should be a radio or check)
add an onclick event handler. That again calls the above event handler code.

So that Wicket.Form.serializeElementOrChildren we already have, That is that boolean you added for me!
",12/May/07 14:29;knopp;I believe you are working on this now?,"13/May/07 18:49;jcompagner;yes we already have a (partial maybe) working thing now AjaxFormChoiceComponentUpdatingBehavior
that works for the most basic once.

We should integrate this into AjaxFormComponentUpdatingBehavior so that it behaves as one.","13/May/07 20:13;memeplex;Just for the record, I'm successfuly using AjaxFormChoiceComponentUpdatingBehavior since a month ago. For me it's more than enough.","03/Oct/07 14:47;jcompagner;ok closing this bug, we could merge the 2 into each other in the futher if needed,
I improved the javadoc a bit so that they point to each other",,,,,,,,,,,,,,,,,,,,,,,,,
field [locale] in [org.apache.wicket.ResourceReference] can not be serialized,WICKET-463,12367052,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,pete,pete,12/Apr/07 11:45,09/Dec/07 11:21,14/Mar/19 03:09,28/May/07 15:27,1.3.0-beta1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"I am getting this on the current 1.3 snapshot (revision 527772):

org.apache.wicket.util.io.WicketSerializeableException: Error reading field: locale for object class: class org.apache.wicket.ResourceReference
children->children->children->children->children->resourceReference
NOTE: if you feel Wicket is at fault with this exception, please report to the mailing list. You can switch to JDK based serialization by calling: org.apache.wicket.util.lang.Objects.setObjectStreamFactory(new IObjectStreamFactory.DefaultObjectStreamFactory()) e.g. in the init method of your application
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:426)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:97)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.readField(ClassStreamHandler.java:871)
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:416)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:97)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.readField(ClassStreamHandler.java:871)
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:416)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:97)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.readField(ClassStreamHandler.java:871)
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:416)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:97)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:134)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.readField(ClassStreamHandler.java:871)
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:416)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:97)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:134)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.readField(ClassStreamHandler.java:871)
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:416)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:97)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:134)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.readField(ClassStreamHandler.java:871)
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:416)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:97)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.lang.Objects.byteArrayToObject(Objects.java:402)
	at org.apache.wicket.protocol.http.FilePageStore.getPage(FilePageStore.java:476)
	at org.apache.wicket.protocol.http.SecondLevelCacheSessionStore$SecondLevelCachePageMap.get(SecondLevelCacheSessionStore.java:139)
	at org.apache.wicket.Session.getPage(Session.java:642)
	at org.apache.wicket.request.AbstractRequestCycleProcessor.resolveRenderedPage(AbstractRequestCycleProcessor.java:418)
	at org.apache.wicket.protocol.http.WebRequestCycleProcessor.resolve(WebRequestCycleProcessor.java:131)
	at org.apache.wicket.RequestCycle.step(RequestCycle.java:1001)
	at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1102)
	at org.apache.wicket.RequestCycle.request(RequestCycle.java:471)
	at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:248)
	at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:122)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)
	at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)
	at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
	at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
	at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.NullPointerException
	at org.apache.wicket.util.io.ClassStreamHandler.createObject(ClassStreamHandler.java:303)
	at org.apache.wicket.util.io.WicketObjectInputStream.readObjectOverride(WicketObjectInputStream.java:92)
	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:345)
	at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.readField(ClassStreamHandler.java:871)
	at org.apache.wicket.util.io.ClassStreamHandler.readFields(ClassStreamHandler.java:416)
	... 54 more

field [locale] in [org.apache.wicket.ResourceReference] is not serializable for whatever reason...

this happens in my app when I hit the back button and click on a formerly generated link...


",java 1.5,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-04-25 19:23:16.897,,,no_permission,,,,,,,,,,,,201524,,,Mon May 28 15:27:37 UTC 2007,,,,,,0|i0kisf:,117861,,,,,,,,"25/Apr/07 19:23;ehillenius;Maybe this is related:

ERROR org.apache.wicket.util.lang.Objects
 ""Error serializing object class test.page.SignInPage [object=[Page
class = test.page.SignInPage, id = 1, version = 0]]""
org.apache.wicket.util.io.WicketSerializeableException: No
Serializable constructor found for class
org.apache.commons.logging.impl.SLF4JLocationAwareLog
test.page.SignInPage->log
NOTE: if you feel Wicket is at fault with this exception, please
report to the mailing list. You can switch to JDK based serialization
by calling: org.apache.wicket.util.lang.Objects.setObjectStreamFactory(new
IObjectStreamFactory.DefaultObjectStreamFactory()) e.g. in the init
method of your application
       at org.apache.wicket.util.io.ClassStreamHandler.<init>(ClassStreamHandler.java:252)
       at org.apache.wicket.util.io.ClassStreamHandler.lookup(ClassStreamHandler.java:116)
       at org.apache.wicket.util.io.WicketObjectOutputStream.writeObjectOverride(WicketObjectOutputStream.java:752)
       at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:322)
       at org.apache.wicket.util.io.ClassStreamHandler$ObjectFieldAndIndex.writeField(ClassStreamHandler.java:862)
       at org.apache.wicket.util.io.ClassStreamHandler.writeFields(ClassStreamHandler.java:387)
       at org.apache.wicket.util.io.WicketObjectOutputStream.writeObjectOverride(WicketObjectOutputStream.java:779)
       at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:322)
       at org.apache.wicket.util.lang.Objects.objectToByteArray(Objects.java:1102)
       at org.apache.wicket.protocol.http.FilePageStore.serializePage(FilePageStore.java:651)
       at org.apache.wicket.protocol.http.FilePageStore.access$900(FilePageStore.java:49)
       at org.apache.wicket.protocol.http.FilePageStore$PageSerializingThread.run(FilePageStore.java:237)
       at java.lang.Thread.run(Thread.java:619)
","28/May/07 15:27;jcompagner;Locale serialization is already fixed (the nullpointer)

the second one (the logger) is also not serializeable by the normal OOS because the logger doesn't implement serializeable",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EditableLabel is broken,WICKET-453,12366789,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,ehillenius,ehillenius,09/Apr/07 01:48,09/Apr/07 12:10,14/Mar/19 03:09,09/Apr/07 12:10,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,wicket-extensions,,,,,,,,,,,0,,,,,,"Try wicket-examples (http://localhost:8080/wicket-examples/ajax/?wicket:bookmarkablePage=%3Awicket.examples.ajax.builtin.EditableLabelPage) and see exception:

java.lang.IllegalStateException: No model found for this component, either pass one explicitly or make sure an inheritable model is available
	at wicket.extensions.ajax.markup.html.AjaxEditableLabel.getParentModel(AjaxEditableLabel.java:441)
	at wicket.extensions.ajax.markup.html.AjaxEditableLabel.<init>(AjaxEditableLabel.java:169)
	at wicket.examples.ajax.builtin.EditableLabelPage.<init>(EditableLabelPage.java:52)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
	at java.lang.Class.newInstance0(Class.java:350)
	at java.lang.Class.newInstance(Class.java:303)
	at wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:57)
	at wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:256)
	at wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:275)
	at wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:204)
	at wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:89)
	at wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:962)
	at wicket.RequestCycle.step(RequestCycle.java:1035)
	at wicket.RequestCycle.steps(RequestCycle.java:1114)
	at wicket.RequestCycle.request(RequestCycle.java:474)
	at wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:248)
	at wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:122)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
	at org.mortbay.jetty.Server.handle(Server.java:285)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:751)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:500)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:209)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-04-09 03:20:04.742,,,no_permission,,,,,,,,,,,,201514,,,Mon Apr 09 11:42:28 UTC 2007,,,,,,0|i0kit3:,117864,,,,,,,,09/Apr/07 03:20;ivaynberg;you refactored it so much it doesnt even look like my code anymore :),"09/Apr/07 11:42;jcompagner;i think that class did come directly from 2.0?
because how else can you call for the parent model inside of the constructor?

public AjaxEditableLabel(String id)
	{
		super(id);
		setOutputMarkupId(true);
		IModel model = getParentModel();
		this.tempModel = model;
	}

Can those calls in the different constructors not be removed and resolved later on?

",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
adding (and querying) feedback messages at construction time fails.,WICKET-442,12366363,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,ehillenius,ehillenius,01/Apr/07 18:33,02/Apr/07 20:27,14/Mar/19 03:09,02/Apr/07 18:38,1.2.5,1.3.0-beta1,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"See http://www.nabble.com/error%28...%29-No-page-found-for-component-tf3497125.html

Currently, adding (and querying) feedback messages fails whenever it is done on components that are not yet added to a page (or were removed from them due to component replacement).

There are two ways to fix this. The first fix is attached as a patch, and basically uses a thread local to temporarily store the messages and distribute them to the relevant page instances just in time or when rendering starts. The advantage of this method is that it is completely back wards compatible.

The other way to fix this is to store all messages, whether component specific or not, in the session, and pull them from there. We need to be careful about how/ when to clean these error messages up though. We can use this issue to think about it a little bit more.",,,,,,,,,,,,,,,,,02/Apr/07 00:26;ehillenius;WICKET-442-2.patch;https://issues.apache.org/jira/secure/attachment/12354714/WICKET-442-2.patch,02/Apr/07 00:35;ehillenius;WICKET-442-3.patch;https://issues.apache.org/jira/secure/attachment/12354715/WICKET-442-3.patch,01/Apr/07 18:34;ehillenius;WICKET-442.patch;https://issues.apache.org/jira/secure/attachment/12354704/WICKET-442.patch,,,,,,3.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201505,,,Mon Apr 02 18:38:55 UTC 2007,,,,,,0|i0kitr:,117867,,,,,,,,01/Apr/07 18:34;ehillenius;Page centric solution,02/Apr/07 00:26;ehillenius;patch based on messages in the session,"02/Apr/07 00:35;ehillenius;alternative session based patch. This one clears all page specific components at the start of the events part of a request, rather than just for this specific page.","02/Apr/07 18:38;ehillenius;Implemented session based approach with aggressive cleanup, but with the option for people to override.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket:message attribute broken - Unable to find component with id '-message_attr' - 1.3.0 snapshot,WICKET-440,12366283,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,ivaynberg,ptrthomas,ptrthomas,31/Mar/07 18:44,02/Apr/07 09:25,14/Mar/19 03:09,01/Apr/07 19:19,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"I'm using wicket-1.3.0-incubating-SNAPSHOT.jar Sat, 31 Mar 2007 16:45:30 GMT

The error I get is:

WicketMessage: Unable to find component with id '-message_attr' in [MarkupContainer [...]]

The markup is:

<input type=""submit"" wicket:message=""value=search""/>

This is kind of a blocker for me, I have this problem on almost every page.  Let me know if you need more information.

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-04-01 00:41:00.79,,,no_permission,,,,,,,,,,,,59249,,,Mon Apr 02 09:25:48 UTC 2007,,,,,,0|i0kitz:,117868,,,,,,,,"01/Apr/07 00:41;ivaynberg;fixed, and btw the syntax is
<input type=""submit"" wicket:message=""value:search""/> 
notice the comma between value and search instead of equals","01/Apr/07 05:39;ptrthomas;I just tried wicket-1.3.0-incubating-SNAPSHOT.jar - Sun, 01 Apr 2007 00:43:53 GMT

WicketMessage: No get method defined for class: class info.jtrac.wicket.LoginPage$LoginForm expression: -message_attr6

Root cause:

wicket.WicketRuntimeException: No get method defined for class: class info.jtrac.wicket.LoginPage$LoginForm expression: -message_attr6
at wicket.util.lang.PropertyResolver.getGetAndSetter(PropertyResolver.java:320)
at wicket.util.lang.PropertyResolver.getObjectAndGetSetter(PropertyResolver.java:198)
at wicket.util.lang.PropertyResolver.getValue(PropertyResolver.java:85)
at wicket.model.AbstractPropertyModel.getObject(AbstractPropertyModel.java:100)
at wicket.Localizer.substitutePropertyExpressions(Localizer.java:224)
at wicket.Localizer.getString(Localizer.java:180)
at wicket.Localizer.getString(Localizer.java:94)
at wicket.Component.getString(Component.java:1157)
at wicket.Component.getString(Component.java:1144)
at wicket.markup.parser.filter.WicketMessageTagHandler$AttributeLocalizer.onComponentTag(WicketMessageTagHandler.java:169)
at wicket.Component.renderComponentTag(Component.java:2897)
at wicket.Component.renderComponent(Component.java:1670)
at wicket.markup.html.WebComponent.onRender(WebComponent.java:60)
at wicket.Component.render(Component.java:1504)
at wicket.Component.render(Component.java:1470)
at wicket.MarkupContainer.autoAdd(MarkupContainer.java:219)
at wicket.markup.parser.filter.WicketMessageTagHandler.resolve(WicketMessageTagHandler.java:195)
at wicket.MarkupContainer.renderNext(MarkupContainer.java:1186)
at wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1329)
at wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1264)
at wicket.markup.html.form.Form.onComponentTagBody(Form.java:828)
at wicket.Component.renderComponent(Component.java:1679)
at wicket.MarkupContainer.onRender(MarkupContainer.java:1274)
at wicket.markup.html.form.Form.onRender(Form.java:914)
at wicket.Component.render(Component.java:1504)
at wicket.MarkupContainer.renderNext(MarkupContainer.java:1159)
at wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1329)
at wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1264)
at wicket.Component.renderComponent(Component.java:1679)
at wicket.MarkupContainer.onRender(MarkupContainer.java:1274)
at wicket.Component.render(Component.java:1504)
at wicket.MarkupContainer.renderNext(MarkupContainer.java:1159)
at wicket.MarkupContainer.renderAll(MarkupContainer.java:1291)
at wicket.Page.onRender(Page.java:983)
at wicket.Component.render(Component.java:1504)
at wicket.Page.renderPage(Page.java:388)
at wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:225)
at wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:102)
at wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:992)
at wicket.RequestCycle.step(RequestCycle.java:1059)
at wicket.RequestCycle.steps(RequestCycle.java:1138)
at wicket.RequestCycle.request(RequestCycle.java:474)
at wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:248)
at wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:122)

=====================================================

Markup is <input type=""submit"" wicket:message=""value:submit""/>

Maybe this is the right time to also ask about the change in IStringResourceLoader.  Here is a snip from my Application:

        // delegate wicket i18n support to spring i18n
        getResourceSettings().addStringResourceLoader(new IStringResourceLoader() {
            public String loadStringResource(Class clazz, String key, Locale locale, String style) {
                try {
                    return applicationContext.getMessage(key, null, locale);
                } catch(Exception e) {
                    // have to return null so that wicket can try to resolve again
                    // e.g. without prefixing component id etc.
                    return null;
                }
            }
            public String loadStringResource(Component component, String key) {
                Class clazz = component == null ? null : component.getClass();
                return loadStringResource(clazz, key, Session.get().getLocale(), null);
            }            
        });

============================

I'm wondering about the new method loadStringResource(Component component, String key) because it does not take a Locale parameter.  So I am doing Session.get().getLocale() - is this ok - or do you think it may impact performance in case this happens for resolving of all message instances.",01/Apr/07 19:19;ivaynberg;there was a bug in Component.getString(String) which wicketmessagetaghandler used. should be fixed now.,02/Apr/07 09:25;ptrthomas;works fine now.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"File handles are leaked when loading images from a jar file, Tomcat crashes",WICKET-438,12366234,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,stefanwille,stefanwille,30/Mar/07 17:19,21/Apr/07 20:44,14/Mar/19 03:09,21/Apr/07 20:44,1.2.5,,,,,,,,,,,1.2.6,1.3.0-beta1,,wicket,,,,,,,,,,,0,,,,,,"Wicket leaks file handles when it accesses image files that are part of a jar file, e.g. wicket-1.2.5.jar.


To reproduce this bug, please switch off the browser cache.

My Wicket application uses TreeTable. When I access the page with the TreeTable on my Mac server, I see the number of open file handles jump. If I do that repeatedly, I can leak about 50 file handles.

I observe the number of open file handles via this shell command: while true;  do sleep 1; lsof | grep wicket | wc -l; done

If I do the same test on a Linux server, the number of open files jumps so quickly that I reach 1015 open files after about 4 requests.  At this point, Tomcat runs out of file handles, writes a log entry in catalina.out and dies. Probably Tomcat shouldn't crash, but the problem is that Wicket leaks file handles.

I can also see leaked file handles when I repeatedly access an image from a jar file via http://localhost:8070/wicket-examples/ajax/resources/wicket.extensions.markup.html.tree.DefaultAbstractTree/res/tree-images.png

The problem can also be reproduced via wicket-examples 1.2.5 and its TreeTable example page by exanding and collapsing the tree table repeatedly.

If I unpack both wicket-1.2.5.jar and wicket-extensions-1.2.5.jar in WEB-INF/classes and delete the jars afterwards, the number of used file handles remains constant at 5! So access to images in WEB-INF/classes works fine.


""lsof | grep wicket"" gives me:

firefox-b 1372 stefan   19r     REG      14,2    486664  1733273 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
bash      1880 stefan  cwd      DIR      14,2       578  1058285 /Users/stefan/Software/wicket-1.2.5
bash      4339 stefan  cwd      DIR      14,2       578  1058285 /Users/stefan/Software/wicket-1.2.5
java      9529 stefan  txt      REG      14,2   1249210  1750285 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-1.2.zoomos-SNAPSHOT.jar
java      9529 stefan  txt      REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan  txt      REG      14,2     11063  1750305 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-spring-annot-1.2.5.jar
java      9529 stefan  txt      REG      14,2     24890  1750306 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-spring-1.2.5.jar
java      9529 stefan   29r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   30r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   31r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   32r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   33r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   34r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   35r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   36r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   37r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   38r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   39r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   40r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
java      9529 stefan   41r     REG      14,2    486664  1750274 /Users/stefan/Software/apache-tomcat-5.5.20/webapps/middletier/WEB-INF/lib/wicket-extensions-1.2.5.jar
[...many lines like this deleted]
","java version ""1.5.0_07"", Mac OS X 10.4, Tomcat 5.5.20
and also 
java version ""1.5.0_07"", Linux 2.6.8, Tomcat 5.5.17
Firefox 2.0.3 with Web developer Toolbar
",,,,,,,,,,,,,,,,13/Apr/07 14:05;stefanwille;UrlResourceStream.java;https://issues.apache.org/jira/secure/attachment/12355505/UrlResourceStream.java,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-03-31 13:28:44.363,,,no_permission,,,,,,,,,,,,201502,,,Sat Apr 21 18:43:15 UTC 2007,,,,,,0|i0kiuf:,117870,,,,,,,,"31/Mar/07 13:28;jbq;Did you ensure to deploy your application in *deployment* mode?  Did you have a look at the mailing-list archives?  This problem has been reported numerous times, and it's a bug in the JVM.  But a workaround exists in Wicket.","01/Apr/07 00:38;jcompagner;that workaround is only in 1.3 i think
We could backport this to 1.2.x if needed","02/Apr/07 12:22;stefanwille;Yes, I put my WebApplication in deployment mode. This is the code:

    @Override
    protected void init() {
        ...
        configure(DEPLOYMENT);
   }

I just searched the mailing list. In this posting

       http://www.nabble.com/File-descriptor-leak-in-DEVELOPMENT-mode-tf2280488.html#a6340061

Jean-Baptiste says the problem occurs not only in development but also in deployment mode.

We are using Wicket 1.2.5, so a backport of the workaround to 1.2.x would be great.

","13/Apr/07 14:04;stefanwille;We have backported the file UrlResourceStream.java from the trunk. This version works perfectly on Mac OS X. On Linux, the problem is reduced, but we can still get Tomcat to the point that it produces errors. We would appreciate if somebody from the Wicket team could do a proper backport of the workaround from 1.3.

I have attached our copy of UrlResourceStream.java in case somebody would like to use it.
","18/Apr/07 08:09;jcompagner;backported it for 1.2.6
Dont know why you still are able to crash tomcat. with that fix
do you still have that also with 1.3?","18/Apr/07 12:56;stefanwille;Hi Johan, thank you.  We have built Wicket from the branch 1.2.x in order to try your backport. The behaviour is the same as with the backport from 2.0 that we did ourselves - we still get more than 900 open wicket-extensions.jar files. 

Next we will try 1.3.
","18/Apr/07 16:12;stefanwille;Wicket 1.3 has the same problem. We we were not able to use our application with 1.3 because of the changed package names, but we tried wicket-examples on our Linux server. We saw the same situation.

We have disabled the browser cache. In wicket-examples, we opened the ""Tree and TreeTable"" example in the ajax demo. Then we clicked ""Expand All Nodes"". We got this:

$ while [ true ]; do lsof | grep wicket | wc -l; sleep 1;done
127
127
127
127
125
185
185
185
185
...

The jump to 185 file handles happened when we clicked the link.

The server has Java version ""1.5.0_07"", Linux 2.6.8, Tomcat 5.5.17.

Can I do anything to help with this issue?

","18/Apr/07 16:19;ehillenius;Ensure it realy is Wicket though. For my day project we recently fixed a file leak bug in Jetty (6.0/ 6.1), so it is entirely possible it's the container.","18/Apr/07 19:49;jcompagner;and it needs to load all the resources at least once. The question is now does it grow and grow when
there are really no new resources accessed?

",20/Apr/07 08:25;ingramchen;We have tried with latest Tomcat 6.0.10 but still have file-handle-grows-issue. This cause our site crashes twice a month... ,"20/Apr/07 08:49;jcompagner;If you could see what code triggers a file handle then we can look at it.
But i am affraid that we can't really do more about it, it really seems to be an jvm issue. We do try to close everything we can.
(but ofcourse maybe somewhere there is a place where we forget it...)\

You always can use the 2 tomcat context properties:

antiJARLocking and antiResourceLocking:  http://tomcat.apache.org/tomcat-5.5-doc/config/context.html

","20/Apr/07 09:25;jbq;In UrlResourceStream#lastModifiedTime() have you tried to remove the whole code within the ""if (urlConnection instanceof JarURLConnection)"" statement to see if it helps?  Also be careful with the finally statement that might open a connection to the JAR if (close == true).","20/Apr/07 09:34;jcompagner;That code IS the fix if we don't test if it is jar url connection and we do just what is in the else then we have a much much bigger problem.
Because then we are not able to close the jar file. And then we will leak a file handle everytime we access lastModifiedTime() (in developement mode you will run out of handles very shortly)

The only thing i can think of is that there are constantly new ResourceReferences/Resources created somehow to the same resouce (gif/css/js)
because in the constructor we have to do once: urlconnection.getContentType() and getContentLenght()
that will open the jar file. But this shouldn't happen becaues (package)resources are registered and loaded once.","20/Apr/07 16:03;stefanwille;We think that the remaining issue is caused by Linux, not Wicket.

We have tried Jetty 6.1.1 instead of Tomcat 5.5 on our Linux server, which didn't help.
Then we tried Wicket 1.3 with wicket-examples and Jetty on two other Linux machines, and the problem seems to be gone.
These two machines have a newer kernel and probably a newer glibc.

We still see the number of open wicket jar files increase by about 15, but it also decreases to the starting point, although slowly. 

Next Monday we are going to try the 1.2.6 development branch with our application on the two new Linux machines.



",20/Apr/07 16:09;ehillenius;The problems I've seen in the past with this also solely were with Linux.,"20/Apr/07 18:35;stefanwille;For Wicket 1.2.5, we've seen the problem both on Mac OS X and on Linux. With Wicket 1.2.6, the problem seems to be fixed on Mac OS X. 
We are going to try Wicket 1.2.6 with Linux next week.



","21/Apr/07 18:43;stefanwille;I have just tested our application with Wicket 1.2.6 on a fresh install of OpenSuse 10.2 Linux, and it works fine - no more leaking. If somebody else has a problem with leaked file handles, please try a later Linux version.  For me, the issue is solved. Thank you for helping.

I used Sun JDK 1.5.0_11 and Tomcat 5.5.20 for this test.

",,,,,,,,,,,,,,,,
"""IDE Plugins"" link on Wicket home page broken",WICKET-436,12366192,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,upayavira,twgoetz,twgoetz,30/Mar/07 09:06,15/Aug/07 13:38,14/Mar/19 03:09,15/Aug/07 13:38,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"The link goes to the confluence wiki, but seems to contain a ""create page"" action.
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-02 08:25:23.338,,,no_permission,,,,,,,,,,,,201500,,,Wed Aug 15 13:38:37 UTC 2007,,,,,,0|i0kiun:,117871,,,,,,,,"02/May/07 08:25;gwynevans;Thanks for reporting it - it was a bad link, now fixed in the Wiki site & awaiting the next cronjob run to publish to static site.","03/May/07 08:06;gwynevans;Wicket static site not being updated after edit of wiki 'source'.

Compare http://cwiki.apache.org/confluence/display/WICKETxSITE/Index (""Wicket 1.2.6"") with http://incubator.apache.org/wicket/ (""Wicket 1.2.5""), as well as the ""Navigation"" page change relating to the issue.","03/May/07 08:45;dashorst;Upayavira has the karma to press the magic button on the website to re-export the whole structure. This is necessary for the navigation page, as that one is 'included', and only changed pages are exported.","03/May/07 09:14;gwynevans;Sure, for the Navigation page, but I also changed the Index page & that's not updated!",15/Aug/07 13:38;dashorst;Doesn't seem to be a problem anymore,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ComponentTag.getAttributes()Lwicket/util/value/ValueMap broke,WICKET-434,12366134,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,,behlma,behlma,29/Mar/07 15:09,29/Mar/07 16:46,14/Mar/19 03:09,29/Mar/07 16:46,1.3.0-beta1,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,"Now someone else has ran into exactly the same problem - that's why I rule out the possibility of a dependency problem. Have tried everything, from recompiling to deleting everything, just won't work. I can fire up my application, even Wicket Quickstart, but as soon as I open up my browser and try to get to the application home page , I get this error (btw started happening after a svn update from two days ago).


ERROR - RequestCycle               - Can't instantiate page using constructor public net.testcomp.web.Start(wicket.PageParameters) and argument 
wicket.WicketRuntimeException: Can't instantiate page using constructor public net.testcomp.web.Start(wicket.PageParameters) and argument 
	at wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:174)
	at wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:65)
	at wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:256)
	at wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:275)
	at wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:204)
	at wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:89)
	at wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:986)
	at wicket.RequestCycle.step(RequestCycle.java:1059)
	at wicket.RequestCycle.steps(RequestCycle.java:1138)
	at wicket.RequestCycle.request(RequestCycle.java:474)
	at wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:248)
	at wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:122)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
	at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:173)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
	at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:146)
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
	at org.mortbay.jetty.Server.handle(Server.java:285)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:751)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:500)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:209)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:494)
	at wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:153)
	... 31 more
Caused by: java.lang.NoSuchMethodError: wicket.markup.ComponentTag.getAttributes()Lwicket/util/value/ValueMap;
	at wicket.markup.parser.filter.WicketTagIdentifier.nextTag(WicketTagIdentifier.java:112)
	at wicket.markup.parser.filter.TagTypeHandler.nextTag(TagTypeHandler.java:77)
	at wicket.markup.parser.filter.HtmlHandler.nextTag(HtmlHandler.java:80)
	at wicket.markup.parser.filter.WicketRemoveTagHandler.nextTag(WicketRemoveTagHandler.java:64)
	at wicket.markup.parser.filter.WicketLinkTagHandler.nextTag(WicketLinkTagHandler.java:96)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.WicketNamespaceHandler.nextTag(WicketNamespaceHandler.java:75)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.WicketMessageTagHandler.nextTag(WicketMessageTagHandler.java:73)
	at wicket.markup.parser.filter.BodyOnLoadHandler.nextTag(BodyOnLoadHandler.java:69)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.HtmlHeaderSectionHandler.nextTag(HtmlHeaderSectionHandler.java:80)
	at wicket.markup.parser.filter.HeadForceTagIdHandler.nextTag(HeadForceTagIdHandler.java:78)
	at wicket.markup.parser.filter.PrependContextPathHandler.nextTag(PrependContextPathHandler.java:107)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.EnclosureHandler.nextTag(EnclosureHandler.java:76)
	at wicket.markup.MarkupParser.parseMarkup(MarkupParser.java:253)
	at wicket.markup.MarkupParser.readAndParse(MarkupParser.java:195)
	at wicket.markup.MarkupCache.loadMarkup(MarkupCache.java:344)
	at wicket.markup.MarkupCache.loadMarkupAndWatchForChanges(MarkupCache.java:428)
	at wicket.markup.MarkupCache.getMarkup(MarkupCache.java:306)
	at wicket.markup.MarkupCache.getMarkupStream(MarkupCache.java:110)
	at wicket.MarkupContainer.getAssociatedMarkupStream(MarkupContainer.java:819)
	at wicket.markup.html.WebPage.commonInit(WebPage.java:210)
	at wicket.markup.html.WebPage.<init>(WebPage.java:98)
	at net.testcomp.core.BasePage.<init>(BasePage.java:23)
	at net.testcomp.web.PageTemplate.<init>(PageTemplate.java:26)
	at net.testcomp.web.Start.<init>(Start.java:12)
	... 36 more
2007-03-29 16:08:46.656::WARN:  Error for /test/app/
java.lang.NoSuchMethodError: wicket.markup.ComponentTag.getAttributes()Lwicket/util/value/ValueMap;
	at wicket.markup.parser.filter.WicketTagIdentifier.nextTag(WicketTagIdentifier.java:112)
	at wicket.markup.parser.filter.TagTypeHandler.nextTag(TagTypeHandler.java:77)
	at wicket.markup.parser.filter.HtmlHandler.nextTag(HtmlHandler.java:80)
	at wicket.markup.parser.filter.WicketRemoveTagHandler.nextTag(WicketRemoveTagHandler.java:64)
	at wicket.markup.parser.filter.WicketLinkTagHandler.nextTag(WicketLinkTagHandler.java:96)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.WicketNamespaceHandler.nextTag(WicketNamespaceHandler.java:75)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.WicketMessageTagHandler.nextTag(WicketMessageTagHandler.java:73)
	at wicket.markup.parser.filter.BodyOnLoadHandler.nextTag(BodyOnLoadHandler.java:69)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.HtmlHeaderSectionHandler.nextTag(HtmlHeaderSectionHandler.java:80)
	at wicket.markup.parser.filter.HeadForceTagIdHandler.nextTag(HeadForceTagIdHandler.java:78)
	at wicket.markup.parser.filter.PrependContextPathHandler.nextTag(PrependContextPathHandler.java:107)
	at wicket.markup.parser.AbstractMarkupFilter.nextComponentTag(AbstractMarkupFilter.java:84)
	at wicket.markup.parser.filter.EnclosureHandler.nextTag(EnclosureHandler.java:76)
	at wicket.markup.MarkupParser.parseMarkup(MarkupParser.java:253)
	at wicket.markup.MarkupParser.readAndParse(MarkupParser.java:195)
	at wicket.markup.MarkupCache.loadMarkup(MarkupCache.java:344)
	at wicket.markup.MarkupCache.loadMarkupAndWatchForChanges(MarkupCache.java:428)
	at wicket.markup.MarkupCache.getMarkup(MarkupCache.java:306)
	at wicket.markup.MarkupCache.getMarkupStream(MarkupCache.java:110)
	at wicket.MarkupContainer.getAssociatedMarkupStream(MarkupContainer.java:819)
	at wicket.markup.html.WebPage.commonInit(WebPage.java:210)
	at wicket.markup.html.WebPage.<init>(WebPage.java:98)
	at wicket.markup.html.pages.ExceptionErrorPage.<init>(ExceptionErrorPage.java:52)
	at wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:159)
	at wicket.RequestCycle.step(RequestCycle.java:1104)
	at wicket.RequestCycle.steps(RequestCycle.java:1138)
	at wicket.RequestCycle.request(RequestCycle.java:474)
	at wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:248)
	at wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:122)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
	at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:173)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:77)
	at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1065)
	at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:365)
	at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:185)
	at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
	at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:689)
	at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:391)
	at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:146)
	at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
	at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)
	at org.mortbay.jetty.Server.handle(Server.java:285)
	at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:457)
	at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:751)
	at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:500)
	at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:209)
	at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:357)
	at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:329)
	at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:475)

",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,59220,,,Thu Mar 29 16:46:46 UTC 2007,,,,,,0|i0kiuv:,117872,,,,,,,,29/Mar/07 16:46;behlma;mvn clean did the trick ;),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket-contrib-datepicker is broken,WICKET-421,12365808,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,almaw,a.klochkov,a.klochkov,26/Mar/07 12:45,05/Apr/07 18:48,14/Mar/19 03:09,26/Mar/07 15:38,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,,,,,,,,,,,,0,,,,,,"wicket-contrib-datepicker is broken due to changes in models. The fix is quite simple, I've created and attached a patch.",,,,,,,,,,,,,,,,,26/Mar/07 12:45;a.klochkov;datepicker.patch;https://issues.apache.org/jira/secure/attachment/12354210/datepicker.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-03-26 15:38:21.242,,,no_permission,,,,,,,,,,,,201487,,,Mon Mar 26 15:38:21 UTC 2007,,,,,,0|i0kiwn:,117880,,,,,,,,26/Mar/07 15:38;ehillenius;thanks,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Collisions between 'seperate' wicketAjaxGet calls.,WICKET-392,12365019,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,funkattack,funkattack,15/Mar/07 14:10,15/Mar/07 14:43,14/Mar/19 03:09,15/Mar/07 14:41,,,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"Two wicketAjaxGet calls collide if the second one is caled while the first one still processes the onSuccessScript.
See attached QuickStartPatch.","URL: https://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x
Rev: 518376
",,,,,,,,,,,,,,,,15/Mar/07 14:16;funkattack;ChannelBusyBug.diff;https://issues.apache.org/jira/secure/attachment/12353379/ChannelBusyBug.diff,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201458,,,Thu Mar 15 14:16:06 UTC 2007,,,,,,0|i0kiz3:,117891,,,,,,,,"15/Mar/07 14:16;funkattack;QuickStart patch.
It also contains, the wicket-ajax.js patch, I analyzed this Bug with.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Converter misusage/mangling in RadioChoice,WICKET-382,12364836,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,almaw,almaw,13/Mar/07 17:53,30/Oct/07 22:25,14/Mar/19 03:09,30/Oct/07 22:25,1.3.0-beta1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"1.x RadioChoice:433 is doing conversion. I don't think it should be.

I think the default ChoiceRenderer should be doing the conversion, and that if you supply your own, no conversion should be done.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-10-16 06:49:52.834,,,no_permission,,,,,,,,,,,,201449,,,Tue Oct 30 22:25:56 UTC 2007,,,,,,0|i0kizr:,117894,,,,,,,,16/Oct/07 06:49;ehillenius;Assigned version (beta 4),"30/Oct/07 19:12;jcompagner;but the choicerendere is doing the conversion:

			Object displayValue = getChoiceRenderer().getDisplayValue(choice);
			Class objectClass = displayValue == null ? null : displayValue.getClass();
			// Get label for choice
			final String label = getConverter(objectClass).convertToString(displayValue,
					getLocale());

only the result of the choice renderer is trying to be converted to a String value, If the choice renderer already gives a string
then that will most likely be returned.

So what are you saying we should really just cast or call toString() on the display value?
I think the current way is pretty good.","30/Oct/07 19:23;almaw;The issue is that the whole point of a ChoiceRenderer is that it renders choices - those Strings should not then be further converted.

It's quite possible to have a converter which does not just return the String as is, at which point this all breaks. So yes, we should just be calling .toString().

Perhaps we should see if the objectClass is already a String and just use it if so, otherwise do the conversion?","30/Oct/07 22:25;jcompagner;ok thats fine with me, so if it is string we dont convert anything else we do
I hope nobody wants to really convert again. 
I have a major dejavu now of a discussion of the oposite side.
That people do expect that the choice rendere shouldn't do the conversion
thats why getDisplayValue returns an object and not directly a string i changed that way back in jan 2006 
see revision 458725.

But i changed this in all places where that same kind of code was used.
Now i hope we don't broke some once code (the one that does want a string to be converted again
lets say format it differently.....)

We should have a bit more unit test for this thing i think...",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
form serialization doesn't recurse into all elements,WICKET-376,12364650,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,,nathan@technically.us,nathan@technically.us,10/Mar/07 17:56,15/Mar/07 07:49,14/Mar/19 03:09,15/Mar/07 07:49,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"Changes made to support serialization of nested forms (http://svn.apache.org/viewvc/incubator/wicket/branches/wicket-1.x/wicket/src/main/java/wicket/ajax/wicket-ajax.js?r1=515852&r2=515851&pathrev=515852) causes all DOM elements, not just form elements, to be iterated upon. However, existing code expects these elements to have a ""name"" attribute (and not to be disabled); lacking those, recursion stops and potential form elements below them are not considered for serialization.",,,,,,,,,,,WICKET-387,,,,,,10/Mar/07 17:59;nathan@technically.us;ajax-serialize.patch;https://issues.apache.org/jira/secure/attachment/12353054/ajax-serialize.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-03-14 20:38:24.825,,,no_permission,,,,,,,,,,,,59301,,,Wed Mar 14 20:38:24 UTC 2007,,,,,,0|i0kj0n:,117898,,,,,,,,"10/Mar/07 17:59;nathan@technically.us;Moves the name-attribute/disabled check so that all elements are recursed into, but only those having a name and that are not disabled are passed to the element serialization method.",14/Mar/07 20:38;n8han;This can be closed. A patch from #WICKET-387 (duplicate) has been checked in.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ListView can't undo changes to model,WICKET-349,12364022,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,freemant,freemant,03/Mar/07 13:08,03/Oct/07 15:50,14/Mar/19 03:09,03/Oct/07 15:50,1.2.5,1.2.6,,,,,,,,,,1.2.7,1.3.0-beta4,,wicket,,,,,,,,,,,1,,,,,,"Given the code below (adapted from the guestbook example):

		Form form = new Form(""form"") {
			protected void onSubmit() {
				List comments = listView.getList();
				listView.modelChanging();
				comments.add(new Comment(comment, new Date()));
				comment = """";
				listView.modelChanged();
			}
		};

Perform the steps:
1) add ""a"" to the ListView and submit, bringing the page to version 1.
2) add ""b"" to the ListView and submit, bringing the page to version 2.
3) add ""c"" to the ListView and submit, bringing the page to version 3.
4) press Back twice.
5) add ""x"" to the ListView and submit. This will try to revert the page back to version 1. But it will fail with an IllegalStateException (full stack trace is shown below).

This is because at step 3, the ListView contains two items: ""a"" and ""b"". Calling modelChanging() will store the model (a list containing ""a"" and ""b"") into a ModelChange object for later undo. The problem is, when this action is undone, ModelChange.undo() will call setModel() on the ListView, which will call removeAll() on itself. This will leave the ListView in a state different from the original (containing ""a"" and ""b"" items). This is not a problem if the ListView was to be rendered immediately (then it would create the items again). But in this case, the next step is to further undo the adding of item ""b"". However, the item's parent has just been set to null by removeAll().  This causes Component.remove() to throw an exception.

Full stack trace is here:
Unexpected RuntimeException

Root cause:

java.lang.IllegalStateException: Cannot remove [MarkupContainer [Component id = 1, page = <No Page>, path = 1.ListItem]] from null parent!
at wicket.Component.remove(Component.java:1469)
at wicket.version.undo.Add.undo(Add.java:81)
at wicket.version.undo.ChangeList.undo(ChangeList.java:93)
at wicket.version.undo.UndoPageVersionManager.undo(UndoPageVersionManager.java:217)
at wicket.version.undo.UndoPageVersionManager.getVersion(UndoPageVersionManager.java:167)
at wicket.Page.getVersion(Page.java:589)
at wicket.PageMap.get(PageMap.java:461)
at wicket.Session.getPage(Session.java:447)
at wicket.request.compound.DefaultRequestTargetResolverStrategy.resolveRenderedPage(DefaultRequestTargetResolverStrategy.java:215)
at wicket.request.compound.DefaultRequestTargetResolverStrategy.resolve(DefaultRequestTargetResolverStrategy.java:153)
at wicket.request.compound.AbstractCompoundRequestCycleProcessor.resolve(AbstractCompoundRequestCycleProcessor.java:48)
at wicket.RequestCycle.step(RequestCycle.java:992)
at wicket.RequestCycle.steps(RequestCycle.java:1084)
at wicket.RequestCycle.request(RequestCycle.java:454)
at wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:219)
at wicket.protocol.http.WicketServlet.doPost(WicketServlet.java:262)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:825)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:738)
at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526)
at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)
at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
at java.lang.Thread.run(Thread.java:595)

","WinXP, Tomcat 5.5.",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-05-31 20:08:12.616,,,no_permission,,,,,,,,,,,,201418,,,Wed Oct 03 15:50:57 UTC 2007,,,,,,0|i0kj2n:,117907,,,,,,,,27/May/07 03:06;freemant;This bug is still there in 1.2.6.,"31/May/07 20:08;jcompagner;in 1.3 with the SecondLevelCache this isn't a problem anymore
will see if i can reproduce this in 1.2.6 and if this is also still a problem in 1.3 with AccessStack",03/Oct/07 15:50;jcompagner;fixed it in both streams ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inheritable model cannot be a wrap model,WICKET-336,12363791,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jan.vermeulen@isencia.com,jan.vermeulen@isencia.com,28/Feb/07 15:20,29/Oct/07 21:46,14/Mar/19 03:09,29/Oct/07 21:46,1.3.0-rc1,,,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"In the code of Component:initModel(), when it comes accross an IWrapModel, it always gets its nested model, not considering if this model itself might be an IInheritableModel.

        for (Component current = getParent(); current != null; current = current.getParent())
        {
                // Get model
                IModel model = current.getModel();

                if (model instanceof IWrapModel)
                {
                        model = ((IWrapModel)model).getNestedModel();
                }

                if (model instanceof IInheritableModel)
                {
                        ....
                }
        }

Would it be correct do make the following correction ?

        if (model instanceof IWrapModel && !(model instanceof IInheritableModel))
                {
                        model = ((IWrapModel)model).getNestedModel();
                } ",n.a.,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-04-25 21:30:43.912,,,no_permission,,,,,,,,,,,,201405,,,Mon Oct 29 21:46:32 UTC 2007,,,,,,0|i0kj3z:,117913,,,,,,,,"25/Apr/07 21:30;jbq;Can you please try again on the new ""trunk"" branch, which is now version 1.3, and report if it is working?  The code has changed obviously.",29/Oct/07 21:46;jcompagner;test first if it is an inheritable model so then we don't unwrap,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CheckBox incorrectly converts its model value when a custom Boolean converter is installed,WICKET-330,12363676,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,bendis,bendis,27/Feb/07 10:24,29/Oct/07 22:47,14/Mar/19 03:09,29/Oct/07 22:47,1.3.0-beta3,2.0 branch (discontinued),,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,"When I use a custom localized Boolean converter (using my custom IConverterLocator) that converts ""Ano"" to true and ""Ne"" to false (Czech words for ""yes"" and ""no"") the CheckBox with 'true' getModelObject() will render unchecked. The problem is that CheckBox uses Strings.isTrue() to convert a value returned by getModelObjectAsString() which uses converters. The result is that true is incorrectly converted to false...

true -> convertToString() -> ""Ano"" -> Strings.isTrue() -> false",,,,,,,,,,,,,,,,,04/Oct/07 08:04;bendis;CheckBox.patch;https://issues.apache.org/jira/secure/attachment/12367055/CheckBox.patch,27/Feb/07 16:08;bendis;checkbox-getModelValue.patch;https://issues.apache.org/jira/secure/attachment/12352136/checkbox-getModelValue.patch,,,,,,,2.0,,,,,,,,,,,,,,,,,,,2007-02-27 11:31:55.189,,,no_permission,,,,,,,,,,,,201399,,,Mon Oct 29 22:47:24 UTC 2007,,,,,,0|i0kj4f:,117915,,,,,,,,"27/Feb/07 11:31;jcompagner;Where do you use those 2 ""Ano"" and ""Ne"" as a string?
Does the checkbox also print those?

You do store true and false in the database? So why are you converting that to a string for the checkbox? 

I would say you need a special converter if you store the ""Ano"" and ""Ne"" in the database and you need that to convert to true/false for the checkbox.
","27/Feb/07 12:25;bendis;>Where do you use those 2 ""Ano"" and ""Ne"" as a string? 
>Does the checkbox also print those? 

CheckBox prints nothing, it renders either checked or unchecked...

>You do store true and false in the database? So why are you converting that to a string for the checkbox? 
>
>I would say you need a special converter if you store the ""Ano"" and ""Ne"" in the database and you need that to convert to true/false for the checkbox. 
 
It doesn't matter if I store anything in the database... I just created my custom implementation of IConverterLocator which returns custom BooleanConverter that converts true <-> ""Ano"" and false <-> ""ne"" so that TextFiled<Boolean> with a boolean model shows ""Ano"" for ""true"" model value and ""Ne"" for false model value. And it works fine.

The problem is that a CheckBox uses internally a boolean converter to convert Boolean to a String and Strings.isTrue to convert String to Boolean.

This issue was discussed on the wicket-dev mailing list - subject ""Insane conversions inside CheckBox#onComponentTag (wicket-2.0)"".
","27/Feb/07 13:04;jcompagner;What is the getModelObject() of the checkbox? so without conversion of that checkbox?

Is that Boolean.TRUE or Boolean.FALSE?

If that is the case. Why have a custom converter for the checkbox? There shouldn't be anything converted.

so for this to work in your situation if you want a true-> XXX and a false -> YYY

onComponentTag:

		final String value = getValue(); <<< if rendered the first time: getModelObjectAsString() that goes through the converter so that converts true -> XXXX
		if (value != null)
		{
			try
			{
				if (Strings.isTrue(value)) << So this is wrong and should again use the converter to go from a string value to the real object???
				{
					tag.put(""checked"", ""checked"");
				}

But getValue after a submit returns ""on"" (default value of html)
So that is totally not what your getModelObjectAsString() returns..

So i guess what you want is something  like this:

protected final void onComponentTag(final ComponentTag tag)
	{
		checkComponentTag(tag, ""input"");
		checkComponentTagAttribute(tag, ""type"", ""checkbox"");

		final String value = getValue();
		if (value != null)
		{
                        tag.put(""value"",value);
			try
			{
				if (getConverter().convertToObject(value) == Boolean.TRUE)
				{
					tag.put(""checked"", ""checked"");
				}
				else
				{
					// In case the attribute was added at design time
					tag.remove(""checked"");
				}
			}


protected Object convertValue(String[] value)
	{
		String tmp = value != null && value.length > 0 ? value[0] : null;
		try
		{
                        return getConverter().convertToObject(tmp);
			//return Strings.toBoolean(tmp);
		}
		catch (StringValueConversionException e)
		{
			throw new ConversionException(""Invalid boolean input value posted \"""" + getInput()
					+ ""\"""", e).setTargetType(Boolean.class);
		}
	}","27/Feb/07 13:46;bendis;The problem is that getValue() returns either raw input (not converted) or model value converted by getConverter(...).convertToString(). In the first case, Strings.isTrue() is fine, but getConverter(...).convertToObject should be used in the latter case...","27/Feb/07 14:17;jcompagner;Yes that i know. i explained that with my previous comment.

So the fix is that we need to call the converter twice when rendering: in getModelObjectAsString, and then directly in onComponenTag again to convert it to an object. (must be then Boolean)
and then also set that value in the output of the page.


But then we can encounter a big other problem
What if people has it in the database just around? So not true or false but yes/no or Ano/Ne??

And they use the converter to give the checkbox a boolean so that it know that by Ano it must select and by Ne it shouldnt?
And on submit the checkbox sends a boolean true or false to the converter that converts it then what the underlying model wants (Ano or Ne)

So i still don't know what the right fix would be. I am still a bit inclined to say that the current behavior is fine. Because the converter in this case 
must just provide boolean -> model object or model object -> boolean..
Because if the database can't store booleans (you have those) and they do it just with 1 and 0 .. what then? What should your converter do then?
are you making from 1 -> Ano ? But what does then the other way do? Ano -> 1 ? But that is still not a boolean that Checkbox component can handle. He wants True or False..
to be able to know if it checked or not.

So how to fix this without breaking other things.. i don't know yet.  A Display Value of the Checkbox is just something he can't convert to a simple true/false.


",27/Feb/07 14:18;jcompagner;typo: A Display Value of the Checkbox is just something he CAN convert to a simple true/false. ,"27/Feb/07 15:57;bendis;A CheckBox can have only o Boolean model (CheckBox extends FormComponent<Boolean>) and I believe that wicket converters are designed to convert model Object to its String display representation and vice versa, not boolean <-> model objects. That's why they have a locale as the second conversion parameter. IMHO wicket converters should be completely decoupled from database or any other backend system. Models are responsible to communicate with database and they should handle conversions like 1 <-> Boolean.TRUE and 0 <-> Boolean.FALSE.

I believe that this could be the fix, it works for me:

public class CheckBox extends FormComponent<Boolean> implements IOnChangeListener
{
    ....
    @Override
    protected String getModelValue() {
        return Boolean.toString(Boolean.TRUE.equals(getModelObject()));
    }
    ...
}
","03/Oct/07 15:31;jcompagner;looking at this bug again, If i implement such a getModelValue() then what does the converter do?
Because it won't be called at all for Boolean to a String then

And when the data comes back your converter will also not get the converted value. So what is the use of setting the converter? Where is it used then?

So as far as i can see setting a converter on a Checkbox is weird. The converter really only works for text input fields.","04/Oct/07 08:01;bendis;> So as far as i can see setting a converter on a Checkbox is weird. The converter really only works for text input fields.
Yes, but I want to use the converter for TextFields and not for CheckBoxes! The problem is that there is a side-effect of the new converter: all CheckBoxes become broken.

Now the CheckBox relies on the default implementation of the Boolean converter (via the getModelObjectAsString method). What I propose is to get rid of this dependency and make CheckBoxes work independently of Boolean converters. ",04/Oct/07 08:04;bendis;The proposed patch.,"04/Oct/07 08:14;jcompagner;ahh ok, now it is clear to me then it is a global boolean converter that shouldn't be used by the checkbox.. will look into it.",29/Oct/07 22:47;jcompagner;fixed the CheckBox wil always use the default boolean converter (or somebody has to override that again),,,,,,,,,,,,,,,,,,,,,
rewrite wicket.examples.upload.UploadPage so that it doesn't has a reference to uploadfolder,WICKET-321,12363557,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,ehillenius,ehillenius,24/Feb/07 06:53,24/Feb/07 07:15,14/Mar/19 03:09,24/Feb/07 07:15,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket-examples,,,,,,,,,,,0,,,,,,Having a reference to the upload folder in the web page isn't very smart for clustering purposes and also doesn't reflect good programming practices.,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201390,,,Sat Feb 24 07:15:19 UTC 2007,,,,,,0|i0kj53:,117918,,,,,,,,24/Feb/07 07:15;ehillenius;And that list of files shouldn't be in there either.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
toString needs to be overriden in PortletRequest,WICKET-302,12363255,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Trivial,Fixed,janne,cserepj,cserepj,20/Feb/07 18:31,20/Feb/07 19:52,14/Mar/19 03:09,20/Feb/07 19:52,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"Request.toString() calls Request.getURL and in case of PortletRequest it throws a WicketRuntimeException when called from Page.internalOnDetach

> [RequestCycle] there was an error cleaning up target
> [BookmarkablePageRequestTarget@-1683338648
> pageClass=wicket.protocol.http.portlet.pages.
> PageExpiredPortletPage].
> wicket.WicketRuntimeException: URL is not available in portlet request
>         at
> wicket.protocol.http.portlet.WicketPortletRequest.getURL
> (WicketPortle
> tRequest.java:109)
>         at wicket.Request.toString(Request.java:197)
>         at java.lang.String.valueOf(String.java(Inlined Compiled Code))
>         at java.lang.StringBuffer.append(StringBuffer.java (Compiled Code))
>         at wicket.Page.internalOnDetach(Page.java:953)
>         at wicket.Component.internalDetach(Component.java:2541)
>         at
> wicket.MarkupContainer.internalDetach(MarkupContainer.java:373)
>          at wicket.Page.internalDetach(Page.java:292)
>         at
> wicket.request.target.component.BookmarkablePageRequestTarget.detach(
> BookmarkablePageRequestTarget.java:120)
>         at wicket.RequestCycle.detach( RequestCycle.java:859)
>         at wicket.RequestCycle.steps(RequestCycle.java:1134)
>         at wicket.RequestCycle.request(RequestCycle.java:456)
>         at
> wicket.protocol.http.portlet.WicketPortlet.render(WicketPortlet.java
> :
> 251)",JSR 168 portlet,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-02-20 19:52:55.47,,,no_permission,,,,,,,,,,,,201374,,,Tue Feb 20 19:52:55 UTC 2007,,,,,,0|i0kj67:,117923,,,,,,,,20/Feb/07 19:52;janne;fixed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"included AJAX JavaScript not exists, exception is thrown",WICKET-286,12362736,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,knopp,joeb,joeb,13/Feb/07 22:10,13/Feb/07 22:34,14/Mar/19 03:09,13/Feb/07 22:34,2.0 branch (discontinued),,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"My page has an AjaxSubmitLink and the javascript in HTML source (wicket-ajax.js, wicket-ajax-debug.js, ... ) for that component is not exists because of an exception.
The exception is thrown in wicket.markup.html.JavascriptPackageResource at line 133: ByteArrayOutputStream is created with negative (-1) length.

The following patch checks the size and creates stream with a not negative value. My AJAX link works with it but I did not verified if it is the right fix.

Index: JavascriptPackageResource.java
===================================================================
--- JavascriptPackageResource.java      (revision 507233)
+++ JavascriptPackageResource.java      (working copy)
@@ -130,7 +130,8 @@
                                        }
                                }

-                               ByteArrayOutputStream out = new ByteArrayOutputStream((int)stream.length());
+                               final int length = (int)stream.length();
+                               ByteArrayOutputStream out = new ByteArrayOutputStream(length > -1 ? length : 0);
                                Streams.copy(stream.getInputStream(), out);
                                stream.close();
                                ret = filterContent(out.toByteArray());
","Linux, NetBeans, Glassfish V2, JDK 6",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-02-13 22:21:10.13,,,no_permission,,,,,,,,,,,,201358,,,Tue Feb 13 22:30:05 UTC 2007,,,,,,0|i0kj7r:,117930,,,,,,,,13/Feb/07 22:21;knopp;Thanks for notice. Mind testing if it works now?,"13/Feb/07 22:30;joeb;Yes, it works with the patch.


",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wicket uses trivial encryption if com.sun.crypto.provider.SunJCE is not available,WICKET-260,12362173,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,mcculls,mcculls,07/Feb/07 09:20,10/Feb/07 08:11,14/Mar/19 03:09,10/Feb/07 08:11,1.2.4,1.2.5,,,,,,,,,,1.2.6,1.3.0-beta1,2.0 branch (discontinued),wicket,,,,,,,,,,,0,,,,,,"The wicket.util.crypt.SunJceCrypt class attempts to load Sun's JCE security provider class and throws an exception if it doesn't exist. Wicket then defaults to a trivial encryption implementation. However, the Java runtime may have other security providers that support the required encryption (PBEWithMD5AndDES). The following patch checks for statically registered providers (which users typically configure in their java.security file) before defaulting to the Sun JCE case.

Index: src/main/java/wicket/util/crypt/SunJceCrypt.java
===================================================================
--- src/main/java/wicket/util/crypt/SunJceCrypt.java	(revision 501736)
+++ src/main/java/wicket/util/crypt/SunJceCrypt.java	(working copy)
@@ -61,6 +61,11 @@
 	 */
 	public SunJceCrypt()
 	{
+		if ( Security.getProviders(""Cipher.""+CRYPT_METHOD).length > 0 )
+		{
+			return; // we are good to go!
+		}
+
 		try
 		{
 			// Initialize and add a security provider required for encryption
",,,,,,,,,,,,,,,,,07/Feb/07 09:21;mcculls;SunJceCrypt.java.patch;https://issues.apache.org/jira/secure/attachment/12350539/SunJceCrypt.java.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-02-09 18:04:00.323,,,no_permission,,,,,,,,,,,,201335,,,Sat Feb 10 08:11:28 UTC 2007,,,,,,0|i0kja7:,117941,,,,,,,,07/Feb/07 09:21;mcculls;The proposed patch.,"09/Feb/07 08:59;mcculls;Bumping up priority, because wicket fails to load the Sun JCE provider on the standard Mac OS X JVM, but with the patch it works.","09/Feb/07 18:04;ehillenius;Hmmm, really? I just used Sun JCE on Mac OSX JVM without any problems (but with Wicket 1.3).","09/Feb/07 18:04;ehillenius;Another thing is that our password field eats up any crypt related exception and says it can't load the crypt, even if there was something completely different going on.","10/Feb/07 08:10;dashorst;Was not fixed in 1.2.5, but will be part of 1.2.6","10/Feb/07 08:11;dashorst;Was not fixed in 1.2.5, but will be part of 1.2.6",,,,,,,,,,,,,,,,,,,,,,,,,,,
Deprecated example in wicket.util.convert.Converter,WICKET-257,12362077,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,novotnyr,novotnyr,06/Feb/07 08:21,26/Apr/07 08:53,14/Mar/19 03:09,26/Apr/07 08:53,1.2.2,1.2.3,1.2.4,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"There is a deprecated example in the wicket.util.convert.Converter example. Method newConverter() on the ConverterFactory seems to be gone in the Wicket 1.2.x.
Deprecated code:

 final IConverter converter = new ConverterFactory().newConverter();
 converter.setLocale(Locale.US);
 converter.convert(new Double(7.1), String.class); 

",,,,,,,,,,,,,,,,,06/Feb/07 08:22;novotnyr;wicket.util.convert.Converter.java.patch;https://issues.apache.org/jira/secure/attachment/12350414/wicket.util.convert.Converter.java.patch,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-02-09 23:52:16.399,,,no_permission,,,,,,,,,,,,201332,,,Thu Apr 26 08:53:05 UTC 2007,,,,,,0|i0kjan:,117943,,,,,,,,06/Feb/07 08:22;novotnyr;Patched JavaDoc,09/Feb/07 23:52;dashorst;1.2.5 build was already fixed.,"13/Feb/07 14:16;jbq;Done for branch 1.x.  However looking at trunk, src/main/java/wicket/util/convert/ConverterLocator.java seems to have wrong Javadoc as well:

{noformat}
 * <pre>
 * final IConverter converter = new CoverterLocatorFactory().newConverter();
 * converter.setLocale(Locale.US);
 * converter.convert(new Double(7.1), String.class);
 * </pre>
{noformat}","26/Apr/07 08:53;dashorst;As trunk is now Wicket 1.3, this one can be closed (it was fixed in 1.3)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support <script> src attribute by Link (TextTemplateLink),WICKET-250,12361841,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,dashorst,dashorst,02/Feb/07 12:48,02/Feb/07 20:58,14/Mar/19 03:09,02/Feb/07 20:51,1.2.5,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,,,,0,,,,,,"The Link class has support for the href proper elements and elements for generating an onclick handler. For the TextTemplateLInk this is not enough, as binding it to a <script> tag results in an onclick handler. As in the <head> tag it is  impossible to click on anything, this doesn't work.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201326,,,2007-02-02 12:48:21.0,,,,,,0|i0kjbj:,117947,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IPageMapEntry not used in SecondLevelCache.,WICKET-247,12361582,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jcompagner,jcompagner,30/Jan/07 18:42,09/Dec/07 11:20,14/Mar/19 03:09,28/May/07 20:53,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,1.3.0-rc1,,,wicket,,,,,,,,,,,0,,,,,,That is wrong!,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201323,,,Mon May 28 20:53:51 UTC 2007,,,,,,0|i0kjbr:,117948,,,,,,,,28/May/07 20:53;jcompagner;on all the places where the page gets serialized to a byte array now we now call first getPageMapEntry ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketServlet deprecation and WicketFilter,WICKET-245,12361545,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,edward.yakop,edward.yakop,30/Jan/07 08:57,30/Jan/07 09:25,14/Mar/19 03:09,30/Jan/07 09:25,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"Hi,

I'm one of the maintainer of ops4j-pax-wicket. Atm, I'm trying to
migrate pax-wicket to wicket-2.0 that can be found at
(https://scm.ops4j.org/repos/ops4j/branches/pax/wicket-2.0).

One of the problem that I found during migration is the fact that
WicketFilter uses reflection to instantiate application factory by
using the FilterConfig.getInitParam( ""applicationFactoryClassName"" ).
Since this is not advisable in OSGi (Due to problem of ensuring
whoever export the wicket bundle must have it's classloader be able to
load the application factory) and HttpService does not support Filter.
It would be better if the old pattern of WicketServlet is supported.

<code>
public class WicketServlet
{

 protected WicketFilter newWicketFilter()
 {
   return new WicketFilter();
 }

 public void init()
 {
   wicketFilter = newWicketFilter();
   filter.init(new FilterConfig()
   {
       ...
   });
 }
}
</code>

This way, I would be able to override the instantiation of
WicketFilter without having to reimplement my FilterConfig.

For example, my wicket servlet will look like like:
<code>
final class MyWicketServlet extends WicketServlet
{
   private final IWebApplicationFactory m_appFactory;

   MyWicketServlet( IWebApplicationFactory factory )
   {
       m_appFactory = factory;
   }

   protected final WicketFilter newWicketFilter()
   {
      return new WicketFilter()
      {
         protected IWebApplicationFactory getApplicationFactory()
         {
            return MyWicketServlet.this.m_appFactory;
         }
      };
   }
}
</code>

This way, reflection will not be used anymore in both instantiating
WebApplication (bypassing ContextParamWebApplicationFactory class) and
IWebApplicationFactory.

Regards,
Edward Yakop

Note:
Can we please remove the log.info part to mark WicketServlet is deprecated.
<code>
public WicketServlet()
{
 // log warning
 log.info(""********************************************"");
 log.info(""DEPRECATED! Please use WicketFilter instead."");
 log.info(""********************************************"");
}
</code>

Reply from Johan Compagner (jcompagner@gmail.com)
We will remove the warnings about the deprication when we will release 1.3/2.0
for now we want to point people as much as possible to the wicket filter.

The wicket servlet will still be there.

So you just want a factory method in wicket servlet where you can make the wicket filter?
can you add a RFE for this:
https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&mode=hide&pid=12310561&sorter/order=DESC&sorter/field=priority&resolution=-1&component=12311420

then i will add the factory method asap.


johan",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-01-30 09:25:02.672,,,no_permission,,,,,,,,,,,,201321,,,Tue Jan 30 09:25:02 UTC 2007,,,,,,0|i0kjc7:,117950,,,,,,,,30/Jan/07 09:25;jcompagner;factory method added in 1.3 and 2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ConcurrentModificationException in RequestLogger,WICKET-241,12361452,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,dashorst,dashorst,29/Jan/07 11:36,27/Feb/07 09:51,14/Mar/19 03:09,27/Feb/07 09:51,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"[2007-01-29 11:10:55,155] [TP-Processor103] StandardWrapperValve.invoke(260) | Servlet.service() for servlet vocus threw exception
java.util.ConcurrentModificationException
        at java.util.HashMap$HashIterator.nextEntry(HashMap.java:841)
        at java.util.HashMap$EntryIterator.next(HashMap.java:883)
        at java.util.HashMap$EntryIterator.next(HashMap.java:881)
        at java.util.HashMap.writeObject(HashMap.java:1037)
        at sun.reflect.GeneratedMethodAccessor37.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)
        at java.util.ArrayList.writeObject(ArrayList.java:569)
        at sun.reflect.GeneratedMethodAccessor1252.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1251)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1075)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)
        at wicket.util.lang.Objects.sizeof(Objects.java:1058)
        at wicket.PageMap.getSizeInBytes(PageMap.java:345)
        at wicket.Session.getSizeInBytes(Session.java:631)
        at wicket.protocol.http.RequestLogger.requestTime(RequestLogger.java:215)
        at wicket.RequestCycle.detach(RequestCycle.java:882)
        at wicket.RequestCycle.steps(RequestCycle.java:1118)
        at wicket.RequestCycle.request(RequestCycle.java:454)
        at wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:243)
        at wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:136)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:199)
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:282)
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:754)
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:684)
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:876)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
        at java.lang.Thread.run(Thread.java:595)
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-01-29 14:11:13.845,,,no_permission,,,,,,,,,,,,201317,,,Tue Feb 27 09:51:59 UTC 2007,,,,,,0|i0kjcn:,117952,,,,,,,,"29/Jan/07 12:41;dashorst;java.util.ConcurrentModificationException
        at java.util.ArrayList.writeObject(ArrayList.java:572)
        at sun.reflect.GeneratedMethodAccessor1252.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)
        at wicket.util.lang.Objects.sizeof(Objects.java:1058)
        at wicket.PageMap.getSizeInBytes(PageMap.java:345)
        at wicket.Session.getSizeInBytes(Session.java:631)
        at wicket.protocol.http.RequestLogger.requestTime(RequestLogger.java:215)
        at wicket.RequestCycle.detach(RequestCycle.java:882)
        at wicket.RequestCycle.steps(RequestCycle.java:1118)
        at wicket.RequestCycle.request(RequestCycle.java:454)
        at wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:243)
        at wicket.protocol.http.WicketServlet.doPost(WicketServlet.java:154)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:199)
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:282)
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:754)
        at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:684)
        at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:876)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
","29/Jan/07 14:11;jcompagner;phhhh

RequestTarget.detach() is not synched anymore.
So other request is already again working on that page..

hmmm..","31/Jan/07 17:05;dashorst;This causes leaks because onDetach is not called due to the exception in the RequestLogger. We have fixed the leaky exception in 1.3, but it might need a fix in 2.0 as well.

The exception will still occur.",27/Feb/07 09:51;jcompagner;the page barrier is released after the request logger did its stuff,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE in RequestLogger?,WICKET-240,12361449,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,dashorst,dashorst,29/Jan/07 11:00,27/Feb/07 09:57,14/Mar/19 03:09,27/Feb/07 09:57,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"java.lang.NullPointerException
        at java.util.LinkedList.writeObject(LinkedList.java:755)
        at sun.reflect.GeneratedMethodAccessor41.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:917)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1339)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1375)
        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1347)
        at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1290)
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)
        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)
        at wicket.util.lang.Objects.sizeof(Objects.java:1058)
        at wicket.Session.getSizeInBytes(Session.java:627)
        at wicket.protocol.http.RequestLogger.requestTime(RequestLogger.java:215)
        at wicket.RequestCycle.detach(RequestCycle.java:882)
        at wicket.RequestCycle.steps(RequestCycle.java:1118)
        at wicket.RequestCycle.request(RequestCycle.java:454)
        at wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:243)
        at wicket.protocol.http.WicketServlet.doGet(WicketServlet.java:136)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
",,,,,,,,,,,,,,WICKET-241,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-01-29 15:08:38.561,,,no_permission,,,,,,,,,,,,201316,,,Mon Jan 29 15:08:38 UTC 2007,,,,,,0|i0kjcv:,117953,,,,,,,,"29/Jan/07 15:08;jcompagner;this falls under the same thing as issue 241 (https://issues.apache.org/jira/browse/WICKET-241) does..
something is already altered in another request.
",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ajax requests increment page version,WICKET-216,12360725,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Blocker,Fixed,jcompagner,wireframe,wireframe,18/Jan/07 02:33,30/Jan/07 09:56,14/Mar/19 03:09,30/Jan/07 09:56,2.0 branch (discontinued),,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,Ajax requests increase page version. Johan promised to fix this soon.   here's the incentive!,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-01-30 09:56:50.86,,,no_permission,,,,,,,,,,,,201295,,,Tue Jan 30 09:56:50 UTC 2007,,,,,,0|i0kjev:,117962,,,,,,,,30/Jan/07 09:56;jcompagner;1.3 and 2.0 is in sync now,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
creating a mountBookmarkablePage with PageMap,WICKET-215,12360716,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,kadirsener,kadirsener,17/Jan/07 23:56,11/Mar/07 01:14,14/Mar/19 03:09,11/Mar/07 01:14,1.2.2,1.2.3,1.2.4,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"from wicket-user@lists.sourceforge.net:

On 1/18/07, Igor Vaynberg <igor.vaynberg@gmail.com> wrote:
lol, yes
i think someone got a bit overzealous with typesafety. please create a jira issue for it and we will change PageMap pageMap to String pageMapName

-igor



On 1/17/07, Kadir Sener GUMUS <chaoticknight@gmail.com> wrote:
Hi,
i want to mount a bookmarkablePage with custom pagemap parameter in Application.init() but as a normal result i am experiencing with no session error. Because PageMap.forName("""") requires a session. 
so can i ask you what the method ""mountBookmarkablePage(String path, PageMap pageMap, Class bookmarkablePageClass)"" is for? where do i have to define that? i couldnt find any usage description for the method. 
Thanks.
 
Kadir",no matter,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2007-02-18 22:45:24.009,,,no_permission,,,,,,,,,,,,201294,,,Thu Mar 01 05:41:52 UTC 2007,,,,,,0|i0kjf3:,117963,,,,,,,,18/Feb/07 22:45;ehillenius;Not applied to 1.2 is it is *formally* an API break.,"01/Mar/07 05:41;ivaynberg;but cant we just _add_ a method that takes a String instead of PageMap? adding a method is not an api break correct? and deprecate the old one?

apparently someone just hit this on the mailing list",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IPagingLabelProvider should extends Serializeable (backport from 2.0),WICKET-187,12359429,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,jcompagner,jcompagner,27/Dec/06 12:57,27/Dec/06 12:58,14/Mar/19 03:09,27/Dec/06 12:58,1.2.4,1.3.0-beta1,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"While i use the interface  of IPagingLabelProvider to define a paging label.
I was customed to write a anonymous class.
But i got a exception for Serializable.
Then i know this class must implements java.io.Serializable.
 
I hope the interface of I PagingLabelProvider can extends java.io.Serializable..
It will help a lot ,especially for anonymous class.



This was already done by igor in 2.0!! ",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201268,,,2006-12-27 12:57:24.0,,,,,,0|i0kjhz:,117976,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rememberMe is broken,WICKET-186,12359398,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,jdonnerstag,jdonnerstag,26/Dec/06 20:27,28/Apr/07 08:23,14/Mar/19 03:09,28/Apr/07 08:23,1.2.4,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,cookie based rememberMe doesn't work anymore. See signin2 and library examples,,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201267,,,Sat Apr 28 08:23:31 UTC 2007,,,,,,0|i0kji7:,117977,,,,,,,,28/Apr/07 08:23;jdonnerstag;Tested the examples. Seems to work again.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Link to see the examples broken,WICKET-185,12359335,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,,zedros,zedros,23/Dec/06 16:19,25/Dec/06 23:33,14/Mar/19 03:09,25/Dec/06 01:18,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"When on the page "" Quick Tour of Wicket"" , the various links (in the ""Running the Examples Yourself"" part) to run the examples are dead .

They all point to ""http://www.wicket-library.com/wicket-examples"".

That's quite a pity since we have the code but not the result of it visible.

Thanks in advance for fixing it.

ZedroS, website reader ;)","Firefox 2
Windows XP",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-12-25 01:18:47.0,,,no_permission,,,,,,,,,,,,201266,,,Mon Dec 25 23:33:40 UTC 2006,,,,,,0|i0kjif:,117978,,,,,,,,25/Dec/06 01:18;jdonnerstag;The applicaton reboot once everyday to remove data users used for playing,"25/Dec/06 10:16;zedros;Hi Juergen

I've tried again and it's still not working. I've tried with Opera, Firefox and IE7. Each time I've an ""Error on page load"" after quite a long waiting time.

I've done as well a try on http://www.wicket-library.com with the same result.

Then I did a ping on www.wicket-library.com which returned me the IP 69.59.195.56 but the waiting time of each request was timeouted, so no paquets went through.

Do you know where it comes from ?

thanks in advance
ZedroS","25/Dec/06 23:33;jdonnerstag;It is working for me and I've tried it several times during the last 24hrs. Dont know what your problem might be.

Juergen",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken link to the page Working with Wicket Models,WICKET-184,12359274,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,dashorst,zedros,zedros,22/Dec/06 09:34,07/Jul/07 14:53,14/Mar/19 03:09,07/Jul/07 14:53,,,,,,,,,,,,,,,site,,,,,,,,,,,0,,,,,,"When on the ""User's guide"" page (http://wicketframework.org/manual.html), there is a link to the page ""Working with Wicket Models"" (http://wicketframework.org/wiki/index.php/Models).

When clicking on this link, I end up on the page http://cwiki.apache.org/WICKET//index.php/Models with a 404 error.

Thanks in advance for fixing this minor issue.

BR
ZedroS","Firefox 2.0.0.1
Windows XP SP2",,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-12-22 09:57:56.0,,,no_permission,,,,,,,,,,,,201265,,,Sat Jul 07 14:53:03 UTC 2007,,,,,,0|i0kjin:,117979,,,,,,,,"22/Dec/06 09:57;gwynevans;Well, the wiki links on that page should goto:
* http://cwiki.apache.org/WICKET/newuserguide.html
* http://cwiki.apache.org/WICKET/working-with-wicket-models.html
* http://cwiki.apache.org/WICKET/lifecycle-of-a-wicket-application.html
but I'm not sure where the source is maintained - will have a look but adding this comment in the meantime.
/Gwyn","22/Dec/06 11:02;dashorst;I think in wicket/src/site/xdocs/manual.xml
","22/Dec/06 13:30;gwynevans;But which branch? - 1.x looked the closest, but couldn't find anywhere that matches the current site (specifically with the ""October 31st, 2006 - Wicket 1.2.3 released"" news).","22/Dec/06 15:28;dashorst;That one is in /releases..

But I think we'd best update only branches/wicket-1.2.x

As 1.2.4 will be the next released version on sourceforge, and 1.x will probably have those files removed (we'll be taking http://cwiki.apache.org/WICKETxSITE) as a basis for this instead of maven generated content).

Martijn",13/Jun/07 01:03;almaw;I don't know how to edit the old wicketframework.org site. Martijn - could you look into this?,07/Jul/07 14:53;dashorst;SVN shows no links pointing to wrong places.,,,,,,,,,,,,,,,,,,,,,,,,,,,
Component reAttach and versioning,WICKET-172,12358790,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,oscar.bueno@isencia.com,oscar.bueno@isencia.com,15/Dec/06 16:46,16/Dec/06 17:13,14/Mar/19 03:09,16/Dec/06 17:13,2.0 branch (discontinued),,,,,,,,,,,2.0 branch (discontinued),,,wicket,,,,,,,,,,,0,,,,,,"I'm reAttaching a component doing something like: 

MyFooPanel p1 = new MyFooPanel(this, ""panel"";); 
MyBarPanel p2 = new MyBarPanel(this, ""panel""); 
p1.reAttach(); 

When I try to restore to the initial page version I found that the component with id ""panel"" is not a children component of the page. 

I have investigated it and I think it is because when the component is reAttached the order in which the changes are added to the ChangesList is: 
- Add p2. 
- Remove p1. 

When the initial version is restored the undo functionality is done in reverse mode like, 
- Add p1. 
- Remove p2. 

The problem is p1 and p2 have the same id, so when p2 is removed what is removing is p1 that has just added. 

Oscar.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-12-16 17:13:35.0,,,no_permission,,,,,,,,,,,,201255,,,Sat Dec 16 17:13:35 UTC 2006,,,,,,0|i0kjjz:,117985,,,,,,,,"16/Dec/06 17:13;jcompagner;i changed the order of the calls to addedComponent and removedComponent
(so that a component is first removed then added when having the same id)

Also fixed that markupcontainer.remove(child)
will not remove the component if it is not really the child (but only has the same id)",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ListChoice doesn't set the default max rows for every constructor.,WICKET-148,12357991,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,jcompagner,jcompagner,jcompagner,07/Dec/06 10:41,07/Dec/06 10:45,14/Mar/19 03:09,07/Dec/06 10:45,1.2.3,1.2.4,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"I came to the same conclusion as Nino. What I have observed was this,

1. For,

ListChoice selection = new ListChoice(""disciplineSelection"", new Model(),
disciplines)

, a list box is created in the web page.

2. For,

ListChoice selection = new ListChoice(""disciplineSelection"", disciplines)

, a dropdown box is created in the web page.

3. For,

ListChoice selection = new ListChoice(""disciplineSelection"",
disciplines);selection.setMaxRow(8);

,  a list box is created in the web page.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201232,,,Thu Dec 07 10:45:36 UTC 2006,,,,,,0|i0kjl3:,117990,,,,,,,,07/Dec/06 10:45;jcompagner;aligned all the constructors.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException after deserialize wicket.util.concurrent.CopyOnWriteArrayList,WICKET-142,12357761,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ivaynberg,ingramchen,ingramchen,05/Dec/06 13:32,09/Dec/06 18:16,14/Mar/19 03:09,09/Dec/06 01:30,1.2.3,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,"wicket.feedback.FeedbackMessages by default using wicket.util.concurrent.CopyOnWriteArrayList for storage. however CopyOnWriteArrayList internally use a transient Object[] array_ without checking null and lazy initialization. This may cause NullPointerException after session replication or the like. Below is stack trace while testing terracotta session clustering :

WicketMessage: unable to get object, model: Model:classname=[wicket.feedback.FeedbackMessagesModel]:attached=true, called with component [MarkupContainer [Component id = messages, page = ngc.wicket.pages.MainPage , path = 7:globalFeedback:feedbackul:messages.FeedbackPanel$MessageListView, isVisible = true, isVersioned = false]]

Root cause:

java.lang.NullPointerException
at wicket.util.concurrent.CopyOnWriteArrayList.size (CopyOnWriteArrayList.java:152)
at wicket.feedback.FeedbackMessages.messages(FeedbackMessages.java:258)
at wicket.feedback.FeedbackMessagesModel.onGetObject(FeedbackMessagesModel.java:101)
at wicket.model.AbstractDetachableModel.getObject (AbstractDetachableModel.java:104)
at wicket.Component.getModelObject(Component.java:990)
at wicket.markup.html.panel.FeedbackPanel.updateFeedback(FeedbackPanel.java:234)
at wicket.Page$2.component (Page.java:372)
at wicket.MarkupContainer.visitChildren(MarkupContainer.java:744)
at wicket.Page.renderPage(Page.java:368)

  ",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-12-08 23:53:37.0,,,no_permission,,,,,,,,,,,,201226,,,Sat Dec 09 18:16:51 UTC 2006,,,,,,0|i0kjlr:,117993,,,,,,,,"08/Dec/06 23:53;ivaynberg;actually that class itself doesnt cause the NPE. if you look at the source code you will see that it has readobject overridden that reinitializes array_ field to a non-null value when the object is deserialized.

the problem here seems to be terracotta. it looks like it doesnt replicate the transient field nor does it invoke writeobject/readobject so the field is never reinitialized. looks like we need to discuss this with terracotta guys.","08/Dec/06 23:56;ivaynberg;source for CopyOnWriteArrayList

http://svn.apache.org/repos/asf/incubator/wicket/branches/wicket-1.x/wicket/src/main/java/wicket/util/concurrent/CopyOnWriteArrayList.java","09/Dec/06 00:52;ingramchen;arrh, I miss the readObject codes... you are right.
This issue can be closed ?
","09/Dec/06 00:54;orion;Here's a little more info about this issue that showed up on the Terracotta development mailing list.  I'm also going to attach a Terracotta config file that I cooked up when I was getting Wicket running in Terracotta.

On 12/8/06, Gary Keim <gkeim@terracottatech.com> wrote:

Java transient fields are not replicated unless you've set honor-transient=true
in your config:

<include>
  <class-expression>.....</class-expression>
  <honor-transient>true</honor-transient>
</include>

Honor-transient defaults to false.

The other way it will not be replicated is if you've explicity declared it a
DSO transient field.

A non-replicated field can be initialized using BeanShell script in your
config file

<include>

<class-expression>wicket.util.concurrent.CopyOnWriteArrayList
</class-expression>
  <on-load>
    <execute>self.array_ = new Object[0];</execute>
  </on-load>
</include>
","09/Dec/06 01:30;ivaynberg;this is a terracotta, wicket is not at fault here","09/Dec/06 01:48;orion;Here's a nice sample config that I cooked up when I was testing Wicket against Terracotta:

http://www.terracotta.org/confluence/display/wiki/Wicket","09/Dec/06 09:26;jcompagner;ahh but terracotta has to honor transient fields (don't serialize them) (else you can serialize everything including application and things that are not meant to be serialized)
But readObject should be invoked so that we can construct the object again right.

How does terracotta handle Hashmaps? Because that one is also depending on read object.

if you do this:

class-expression>wicket.util.concurrent.CopyOnWriteArrayList
</class-expression>
  <on-load>
    <execute>self.array_ = new Object[0];</execute>
  </on-load>
</include> 

then the array is initialized to be empty yes? But that is not right. that list is not empty.. It should have the values it had before.
I dont know why CopyOnWriteArrayList does that read/write for that array. Because it just seems to write out the array values
So why they are not just having that array non transient i don't know. So for this case i guess your transient honor setting 
for that class can be done.

But we in wicket have more code like that that is very valid to work that way. Like the URLCompressor class.
And i dont know how terracotta handles that but WeakReferences shouldn't be serialized or sent to another jvm at any time.

","09/Dec/06 18:16;sharrissf;HashMaps are managed Logically. Meaning the internal structure is not mapped identically between JVMs and instead the operations are recorded with the parameters and played back where needed. This is because the identiy hashcode for objects that have the same terracotta object id on one JVM will be different in a second JVM. That would lead to an incorrect internal structure.
In the case of HashMaps it is also more efficient to manage it logically. Anyway, that is all a bit of an aside. The point is just that we don't have to worry about read and write object  for logically managed objects. I suspect that we will make CopyOnWrite logically managed at some point as well.
",,,,,,,,,,,,,,,,,,,,,,,,,
Wrong webapp path in wicket-parent,WICKET-141,12357738,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,jbq,jbq,05/Dec/06 10:35,05/Dec/06 10:39,14/Mar/19 03:09,05/Dec/06 10:39,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,wicket,,,,,,,,,,,0,,,,,,"Hi,

There is a small change required to
wicket-1.x/wicket-parent/pom.xml to allow the examples to start,
see patch attached.

Thanks in advance,
-- 
     Jean-Baptiste Quenot
aka  John Banana   Qwerty
http://caraldi.com/jbq/ ",,,,,,,,,,,,,,,,,05/Dec/06 10:35;jbq;20061128-wicket-parent-pom-jetty;https://issues.apache.org/jira/secure/attachment/12346406/20061128-wicket-parent-pom-jetty,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2006-12-05 10:39:49.0,,,no_permission,,,,,,,,,,,,201225,,,Tue Dec 05 10:39:49 UTC 2006,,,,,,0|i0kjlz:,117994,,,,,,,,05/Dec/06 10:39;dashorst;fixed,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
servlet.jar is included in the wicket examples war file.,WICKET-134,12357535,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,dashorst,jcompagner,jcompagner,03/Dec/06 00:25,26/Apr/07 08:49,14/Mar/19 03:09,26/Apr/07 08:49,1.2.4,1.2.5,1.2.6,1.3.0-beta1,2.0 branch (discontinued),,,,,,,1.2.6,,,,,,,,,,,,,,0,,,,,,"when i make a war file out of the examples i see this jar also being included into the war:
servlet-api-2.5-6.0.1.jar

that is wrong. The servlet.jar can't be added to the war file it doesn't belong there.
Tomcat also warns you for this issue:
3-dec-2006 0:51:48 org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(C:\javatools\apache-tomcat-5.5.16\work\Catalina\localhost\wicket-examples\WEB-INF\lib\servlet-api-2.5-6.0.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2. Offending class: javax/servlet/Servlet.class
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-12-03 12:56:03.0,,,no_permission,,,,,,,,,,,,201218,,,Wed Apr 25 23:11:26 UTC 2007,,,,,,0|i0kjmn:,117997,,,,,,,,03/Dec/06 12:56;dashorst;From the version I see that it is done by the jetty dependency. Will need to look into that...,22/Apr/07 14:50;dashorst;Fixed by making the jetty dependencies 'provided'.,"25/Apr/07 23:11;jbq;Martijn, you said it's fixed, so can you resolve the issue?",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
wicket:fragment tag not handled properly when used with markup inheritance,WICKET-131,12357407,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jdonnerstag,ivaynberg,ivaynberg,30/Nov/06 22:29,25/Dec/06 23:53,14/Mar/19 03:09,25/Dec/06 23:53,2.0 branch (discontinued),,,,,,,,,,,2.0 branch (discontinued),,,wicket,,,,,,,,,,,0,,,,,,"there is a problem when handling wicket:fragment tags that are defined within wicket:extend tags.

the problem is in InheritedMarkupMarkupLoader:441

what happens is that first WicketTagIdentified properly assigns tag.id to be the wicket:id defined within the fragment tag
but then the InheritedMarkupMarkupLoader visits the fragment and resets its tag.id to an autogenerated id

when rendering occurs markupfragment cannot find the markup of the fragment because its tag.id has been changed",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-12-25 01:31:16.0,,,no_permission,,,,,,,,,,,,201215,,,Mon Dec 25 23:53:53 UTC 2006,,,,,,0|i0kjmv:,117998,,,,,,,,"25/Dec/06 01:31;jdonnerstag;I dont see how these things relate. wicket:fragment is not using auto-ids which is what InheritedMarkupMarkupLoader:441 handles. Do you have a junit test case?

Juergen",25/Dec/06 20:18;ivaynberg;see FragmentInheritanceTest and InheritedMarkupMarkupLoader:449,"25/Dec/06 23:53;jdonnerstag;remove some left over experimental code. Your test case is now working

Juergen",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
problem with RenderedDynamicImageResource not using the overridable methods,WICKET-130,12357384,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,ehillenius,ehillenius,30/Nov/06 18:14,30/Nov/06 18:15,14/Mar/19 03:09,30/Nov/06 18:15,,,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,,,,0,,,,,,"See http://www.nabble.com/problem-with-RenderedDynamicImageResource-%28wicket-2.0%29-tf2718555.html#a7579878
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201214,,,2006-11-30 18:14:33.0,,,,,,0|i0kjn3:,117999,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Debug settings / serialize session attributes option not working,WICKET-128,12357330,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,bendis,bendis,30/Nov/06 08:41,30/Nov/06 17:45,14/Mar/19 03:09,30/Nov/06 17:45,2.0 branch (discontinued),,,,,,,,,,,2.0 branch (discontinued),,,wicket,,,,,,,,,,,0,,,,,,"Session attributes are serialized even if this debug setting is turned off. I've noticed that the code that serializes attributes and logs their serialized size in HttpSessionStore#setAttribute is duplicated in Session#setAttribute - but without the debug settings condition. This code was added by the recent patch resolving WICKET-100 and only in the trunk, not in the wicket-1.x branch... why???

Regards,
Bendis",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-11-30 13:47:51.0,,,no_permission,,,,,,,,,,,,201212,,,Thu Nov 30 17:45:19 UTC 2006,,,,,,0|i0kjnb:,118000,,,,,,,,"30/Nov/06 13:47;jcompagner;yeah this is strange.
We can move it to Session.seAttribute but then it should be completely copied from HttpSessionStore:

// Do some extra profiling/ debugging. This can be a great help
		// just for testing whether your webbapp will behave when using
		// session replication
		if (Application.get().getDebugSettings().getSerializeSessionAttributes())
		{
			if (value instanceof Page)
			{
				((Page)value).internalDetach();
			}
			String valueTypeName = (value != null ? value.getClass().getName() : ""null"");
			try
			{
				final ByteArrayOutputStream out = new ByteArrayOutputStream();
				new ObjectOutputStream(out).writeObject(value);
				log.debug(""Stored attribute "" + name + ""{ "" + valueTypeName + ""} with size: ""
						+ Bytes.bytes(out.size()));
			}
			catch (Exception e)
			{
				throw new WicketRuntimeException(
						""Internal error cloning object. Make sure all dependent objects implement Serializable. Class: ""
								+ valueTypeName, e);
			}
		}

and removed in the store.
","30/Nov/06 17:45;ehillenius;Sorry, completely my fault. I forgot to remove code I used to track down a bug. Thanks for finding Martin.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
onDetach in HtmlHeaderContainer isn't being called -> java.io.NotSerializableException: wicket.response.StringResponse,WICKET-108,12356576,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,almaw,almaw,24/Nov/06 17:04,25/Nov/06 23:20,14/Mar/19 03:09,25/Nov/06 23:20,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,,,,0,,,,,,"Am rudely assigning this one to Eelco without consultation, as I think he broke it. ;)

HtmlHeaderContainer is keeping its reference to headerResponse, which isn't serializable, causing a java.io.NotSerializableException: wicket.response.StringResponse.

It should be throwing away the reference on #onDetach(). For some reason #onDetach() isn't being called when presumably it should be. I'm still getting up to speed with how all this stuff works, so hopefully you'll be able to chase this one more efficiently than I can.

In case it's useful, the stack trace for creating the HtmlHeaderContainer is something like this:
	HtmlHeaderResolver.resolve(MarkupContainer, MarkupStream, ComponentTag) line: 79	
	MyRandomPage(MarkupContainer).renderNext(MarkupStream) line: 1359	
	MyRandomPage(MarkupContainer).renderAll(MarkupStream) line: 942	
	MyRandomPage(Page).onRender(MarkupStream) line: 978	
	MyRandomPage(Component).render(MarkupStream) line: 1521	
	MyRandomPage(Page).renderPage() line: 413	
	BookmarkablePageRequestTarget.respond(RequestCycle) line: 226	
	DefaultResponseStrategy.respond(RequestCycle) line: 47	",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-11-24 19:22:27.0,,,no_permission,,,,,,,,,,,,201193,,,Sat Nov 25 23:20:25 UTC 2006,,,,,,0|i0kjo7:,118004,,,,,,,,"24/Nov/06 19:22;ehillenius;Hey, don't shoot the messenger; I merely applied a patch. And as the unit tests ran ok after that patch, I wasn't aware of any problems.

I haven't looked in much detail at at, but I'm not that intimate with the code, so I'm putting it back to unassigned (also because I have a deadline to make for Wicket In Action this weekend).",25/Nov/06 23:20;ehillenius;see also http://www.nabble.com/Component-internalDetach-is-not-called-for-updated-components-on-Ajax-Request-tf2705214.html#a7542974,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BrowserInfoPage yields incorrect offset,WICKET-103,12356445,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,ehillenius,ehillenius,23/Nov/06 02:04,23/Nov/06 02:07,14/Mar/19 03:09,23/Nov/06 02:06,,,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,,,,0,,,,,,"The BrowserInfoPage and ClientProperties currently give the wrong result for the timezone. It's hard to decide on what to fix, but I'm settling for fixing the javascript side. JavaScript's 'Date().getTimezoneOffset()' gives the time *to be substracted* from UTC and is thus the opposite of what you would (or at least I would) expect from that function. For instance, the offset for Seattle currently gets +8, while the time zone is -8. So... in order to let ClientProperties stay the same in case clients depend on it's behavior, I'll make the fix in BrowserInfoPage, changing from '(new Date().getTimezoneOffset() / 60)' to '(new Date().getTimezoneOffset() / -60)'.
",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201188,,,2006-11-23 02:04:57.0,,,,,,0|i0kjof:,118005,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
potential concurrency problem with DateConverter,WICKET-102,12356444,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,ehillenius,ehillenius,23/Nov/06 01:44,24/Oct/12 09:46,14/Mar/19 03:09,23/Nov/06 01:52,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,,,,,0,,,,,,"DateConverter uses a 'cache' (HashMap) with DateFormats. The problem (don't ask me why I never noticed) is that SimpleDateFormats are not thread safe. Never were, never will be (see http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4264153 and http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4228335)

The solution is the remove setDateFormat (which is probably never used by anyone anyway), and always return new instances.
",,,,,,,,,,,,,,WICKET-4833,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-11-23 08:25:45.0,,,no_permission,,,,,,,,,,,,201187,,,Mon Nov 27 22:13:28 UTC 2006,,,,,,0|i0b0ef:,62175,,,,,,,,"23/Nov/06 01:49;ehillenius;I'm also removing lenient; that thing wasn't even used in the first place. So while the documentation said it used non-lenient parsing, it never actually did. I think it is too late to change this now, so I'll leave it lenient (Date/ Calendar's default).",23/Nov/06 01:52;ehillenius;fixed for 1.3 and 2.0. I didn't touch 1.2.4 because - even though it is a potential problem - it means an API break.,"23/Nov/06 08:25;jcompagner;you could keep the setDateFormat method
but then not with a date format but just with the format string:

setDateFormat(Locale,String)","23/Nov/06 19:27;ehillenius;I don't really see a big advantage to that. People can override getDateFormat(Locale) themselves if they want, which gives them all the flexibility they'll ever need. Keeping formats is just more bloat.",27/Nov/06 22:13;dashorst;I had to remove final from DateToStringConvertor because of this change. The ability to Override is now essential for these classes.,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"new window/tab in internet explorer keeps the history of the previous window/tab, then new window check doesn't work when going back",WICKET-98,12356254,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,jcompagner,jcompagner,jcompagner,21/Nov/06 11:13,21/Nov/06 11:13,14/Mar/19 03:09,21/Nov/06 11:13,1.2.3,,,,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"internet explorer fix for window name check.
If you open a new tab/window then you can go back to the history of the previous tab",Internet explorer,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201183,,,2006-11-21 11:13:05.0,,,,,,0|i0kjov:,118007,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
delete and move links from ListView with reuseItems = true don't re-rerender rows properly,WICKET-93,12356102,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,ehillenius,ehillenius,ehillenius,19/Nov/06 06:31,19/Nov/06 06:31,14/Mar/19 03:09,19/Nov/06 06:31,1.2.4,1.3.0-beta1,2.0 branch (discontinued),,,,,,,,,1.3.0-beta1,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"Delete and move links from ListView with reuseItems = true don't re-rerender rows properly. The fix was to remove all children when such a link is clicked, so that a re-render is forced.",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,,,,no_permission,,,,,,,,,,,,201178,,,2006-11-19 06:31:32.0,,,,,,0|i0kjpb:,118009,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FormTester does not set request parameters for unchanged form fields,WICKET-85,12355998,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,jbq,jbq,17/Nov/06 16:09,21/Mar/07 18:27,14/Mar/19 03:09,20/Nov/06 04:26,1.2.3,,,,,,,,,,,,,,wicket,,,,,,,,,,,0,,,,,,"When using the FormTester, the Form is correctly having its field values, but FormTester does not call setFormComponentValue() for every field.  Thus, the request parameters are not set for the next request, when submit() is called.

The workaround is to call setValue() for every field.

The attached patch fixes the problem for AbstractTextComponent.  It also adds a new method getTextComponentValue() as a shortcut to access a field value.",,,,,,,,,,,,,,,,,17/Nov/06 16:10;jbq;20061117-wicket-1.x-FormTester;https://issues.apache.org/jira/secure/attachment/12345236/20061117-wicket-1.x-FormTester,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2007-03-21 18:27:57.16,,,no_permission,,,,,,,,,,,,201171,,,Wed Mar 21 18:27:57 UTC 2007,,,,,,0|i0kjq7:,118013,,,,,,,,"17/Nov/06 16:10;jbq;Patch against branch 1.x, can be applied to trunk as well.",21/Mar/07 18:27;ivaynberg;eelco can you please set whatever the fix version was for this and WICKET-83 so it appears in our changelog,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
header contribution is not rendered anymore after the first render,WICKET-68,12355640,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,,mrmean,mrmean,14/Nov/06 21:40,01/Feb/07 06:34,14/Mar/19 03:09,15/Nov/06 00:46,1.3.0-beta1,,,,,,,,,,,1.3.0-beta1,,,wicket,wicket-extensions,,,,,,,,,,0,,,,,,"In wicket 1.3 the header contribution from the java file is only rendered the first time. This includes and is probably not limited to .js and .css files. Attached is a quickstart that shows the problem for javascript.
Just run the app, notice the javascript dialog pop up. click where it says click here. you are now on the second page which has a reference to the first page. click were it says click here to return to the first page. This time no javascript dialog to greet you. If you inspect the source you will find that the text from header.js is missing the second time you visit the Index page.","tomcat 5.5.17, jdk 1.5.08, wicket 1.3-incubating-20061113.111007-1",,,,,,,,,,,,,WICKET-188,,,14/Nov/06 21:44;mrmean;wicket-quickstart.zip;https://issues.apache.org/jira/secure/attachment/12344988/wicket-quickstart.zip,,,,,,,,1.0,,,,,,,,,,,,,,,,,,,2006-11-15 00:46:12.0,,,no_permission,,,,,,,,,,,,201154,,,Wed Nov 15 00:46:12 UTC 2006,,,,,,0|i0kjqn:,118015,,,,,,,,15/Nov/06 00:46;ivaynberg;please test and close,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
WicketTester doesn't pass PageParameters to bookmarkable pages,WICKET-35,12354770,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Minor,Fixed,frankbille,syl,syl,04/Nov/06 18:30,05/Nov/06 11:16,14/Mar/19 03:09,04/Nov/06 22:13,1.2.2,1.2.3,2.0 branch (discontinued),,,,,,,,,1.2.4,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"I put BookmarkablePageLink on WebPage like this:
firstPage.add( new BookmarkablePageLink( ""link"", SecondPage.class, new
PageParameters( ""id=1"" ) ) );

and then I test it using WicketTester: 
wicketTester.startPage( FirstPage.class );
wicketTester.clickLink( ""link"" );

The problem is that wicketTester doesn't pass PageParameters to SecondPage
(because parameters aren't passed to MockHttpServletRequest).",,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-11-04 21:23:47.0,,,no_permission,,,,,,,,,,,,201123,,,Sun Nov 05 11:16:01 UTC 2006,,,,,,0|i0kjsv:,118025,,,,,,,,04/Nov/06 21:23;frankbille;confirmed,"04/Nov/06 22:13;frankbille;Fixes are in the 1.x branch and 2.0. Can you please confirm them and then close this issue?

1.x: http://svn.apache.org/viewvc?view=rev&revision=471275
2.0: http://svn.apache.org/viewvc?view=rev&revision=471276",05/Nov/06 11:16;frankbille;Fix confirmed by reporter.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
missing base64/ URL encoding,WICKET-16,12353946,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Major,Fixed,frankbille,korbinian,korbinian,25/Oct/06 14:01,29/Oct/06 21:14,14/Mar/19 03:09,25/Oct/06 23:18,1.2.2,2.0 branch (discontinued),,,,,,,,,,1.2.3,2.0 branch (discontinued),,wicket,,,,,,,,,,,0,,,,,,"yesterday i showed the concept of omponents to a friend and stumled into something i dont understand and think it might be a bug. 
 
I have a small panelcompoment that holds a searchform (textfield + submit) nothing special here, the code behind looks like: 
 
 @Override
        public void onSubmit() 
        {
            String suchFeld = getSuchfeld();
            if(suchFeld.length()>0)
            {
                PageParameters params = new PageParameters();
                params.add(""finde"",suchFeld);
                setResponsePage(Suche.class,params);
            }
            else
            {
                setResponsePage(getPage().getClass());
            }  
      }
 
the component is put into a ""BasePage"":
 
 public BasePage() {
        ....    
        add(bar);
        add(new SuchPanel(""SuchPanel""));
        .....
}
 
wich is then extended by the real page:
 
public class Foo extends BasePage{
    
    /** Creates a new instance of Zigarren */
    public Foo() {
        }
 
wich works all fine, however if the class name contains non ascii letters
(e.g: ö ä ü etc.) it gives me a bug if nothing is entered into the search and the part
 
public class Zubehör extends BasePage{
    
    /** Creates a new instance of Zubehör */
    public Zubehör() {
    }
 
""setResponsePage(getPage().getClass());"" comes to action, the trouble is that the page might have the URL:
?wicket:bookmarkablePage=:de.pages.Zubeh%C3%B6r
but the form tries to go to : 
wicket:bookmarkablePage=:de.pages.Zubeh%F6r
 
wich results in a CODE 404 in the App Server 
",any,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-10-25 17:57:13.0,,,no_permission,,,,,,,,,,,,201104,,,Sun Oct 29 21:14:46 UTC 2006,,,,,,0|i0kjtz:,118030,,,,,,,,25/Oct/06 17:57;frankbille;confirmed,25/Oct/06 23:18;frankbille;I have committed a fix to this to both 1.x and 2.0. Can I have you check it out to see if it fixes your problem?,29/Oct/06 21:14;frankbille;Bugfix included in 1.2.3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Page.onBeginRequest() [and consequently .onAttach()] not called when form on page is submitted.,WICKET-4,12353313,Bug,Closed,WICKET,Wicket,software,dashorst,"With proper mark-up/logic separation, a POJO data model, and a refreshing lack of XML, Wicket makes developing web-apps in Java simple and enjoyable again. Swap the boilerplate, complex debugging and brittle code for powerful, reusable components written with plain Java and HTML.",http://wicket.apache.org,Critical,Fixed,jcompagner,paul.milovanov,paul.milovanov,16/Oct/06 17:34,24/May/07 21:22,14/Mar/19 03:09,24/May/07 21:22,1.2.2,,,,,,,,,,,1.3.0-beta2,,,wicket,,,,,,,,,,,1,,,,,,"Page.onBeginRequest() [and consequently .onAttach()] not called when form on page is submitted. Form.onBeginRequest() is not called as well. However, Page.onEndRequest()  and Form.onEndRequest() are called correctly.

In more detail: 
I have a page, FrontPage, and a form LoginForm on it (The form has defaultFormProcessing = true)
onBeginRequest(), onEndRequest() in FrontPage, LoginForm, are overriden as follows:

	protected void onBeginRequest() {
		log.debug(""request begin"");
		...
		super.onBeginRequest();
	}
	protected void onEndRequest() {
		super.onEndRequest();
		...
		log.debug(""request end"");
	}

So I load FrontPage, type in data into the form (that corr. to LoginForm) and submit form.
The log output is as follows

//first load of page
DEBUG <hotline.pages.FrontPage> request begin
...
DEBUG <hotline.pages.FrontPage$LoginForm> request begin
...
DEBUG <hotline.pages.FrontPage> request end 
DEBUG <hotline.pages.FrontPage$LoginForm> request end
...
//form submitted
DEBUG <hotline.pages.FrontPage> request end
DEBUG <hotline.pages.FrontPage$LoginForm> request end

",os = OS X 10.4.8; java version = jre/jdk 1.5.0_06; servlet container =  jetty-5.1.11RC0,,,,,,,,,,,,,,,,,,,,,,,,0.0,,,,,,,,,,,,,,,,,,,2006-11-27 06:49:21.0,,,no_permission,,,,,,,,,,,,59299,,,Thu May 24 21:22:43 UTC 2007,,,,,,0|i0kjuv:,118034,,,,,,,,"16/Oct/06 19:16;paul.milovanov;as expected, this is more general : also getting the same problem when handling a Link.onClick()",17/Oct/06 06:14;paul.milovanov;similar behavoir when using 1.2_rc2,"17/Oct/06 07:03;paul.milovanov;the problem  might be that  the default Page.beforeCallComponent() is just {}

my knowledge of wicket architecture is nil, but so far it seems that after RequestListenerInterface is resolved to IFormSubmitListener (as seems to be the case here), there is just no code which would call Page.internalAttach anywhere","27/Nov/06 06:49;ehillenius;Tested it and it works fine for current 1.x and 2.0. Don't know when it ever was a problem, but it isn't anymore. Are you sure you didn't override it in some super class (base page?) so that the calls don't get delegated further down the line?

Please update your version of Wicket and confirm it works you you. thanks.","27/Nov/06 09:17;bendis;Hi!

I have got a similar problem with current 2.0-SNAPSHOT (updated form svn repo before two hours) that may be related to this bug:

When a Form on page A is submitted and the response page is set to page B (via setResponsePagec(B.class) in the Form#onSubmit() method), the onAttach, onDetach etc. methods of page A are not called - as a consequence, the form model, which was updated (and attached) as a result of form submit, is not detached at the end of the request.

I have created a simple test case: http://sucker.pilsfree.net/wicket-detach.tar.gz

-- IndexPage entered --
27.11.2006 10:09:35 com.cleverlance.wicketdetach.IndexPage onAttach
INFO: onAttach
27.11.2006 10:09:35 com.cleverlance.wicketdetach.IndexPage onDetach
INFO: onDetach

-- FormPage entered --
27.11.2006 10:11:09 com.cleverlance.wicketdetach.FormPage onAttach
INFO: onAttach
27.11.2006 10:11:09 com.cleverlance.wicketdetach.SimpleModel detach
INFO: detaching Model:classname=[com.cleverlance.wicketdetach.SimpleModel]:object=[com.cleverlance.wicketdetach.Data@1f3f16b]
27.11.2006 10:11:09 com.cleverlance.wicketdetach.SimpleModel detach
INFO: detaching Model:classname=[com.cleverlance.wicketdetach.SimpleModel]:object=[com.cleverlance.wicketdetach.Data@1f3f16b]
27.11.2006 10:11:09 com.cleverlance.wicketdetach.SimpleModel detach
INFO: detaching Model:classname=[com.cleverlance.wicketdetach.SimpleModel]:object=[com.cleverlance.wicketdetach.Data@1f3f16b]
27.11.2006 10:11:09 com.cleverlance.wicketdetach.FormPage onDetach
INFO: onDetach

-- ""Submit"" clicked --
27.11.2006 10:11:32 com.cleverlance.wicketdetach.FormPage$1 onSubmit
INFO: form submitted
27.11.2006 10:11:32 com.cleverlance.wicketdetach.FormPage onAttach
INFO: onAttach
27.11.2006 10:11:32 com.cleverlance.wicketdetach.SimpleModel detach
INFO: detaching Model:classname=[com.cleverlance.wicketdetach.SimpleModel]:object=[com.cleverlance.wicketdetach.Data@1f3f16b]
27.11.2006 10:11:32 com.cleverlance.wicketdetach.SimpleModel detach
INFO: detaching Model:classname=[com.cleverlance.wicketdetach.SimpleModel]:object=[com.cleverlance.wicketdetach.Data@1f3f16b]
27.11.2006 10:11:32 com.cleverlance.wicketdetach.SimpleModel detach
INFO: detaching Model:classname=[com.cleverlance.wicketdetach.SimpleModel]:object=[com.cleverlance.wicketdetach.Data@1f3f16b]
27.11.2006 10:11:32 com.cleverlance.wicketdetach.FormPage onDetach
INFO: onDetach

-- ""Submit & Return"" clicked --
27.11.2006 10:11:59 com.cleverlance.wicketdetach.FormPage$1 onSubmit
INFO: form submitted
27.11.2006 10:11:59 com.cleverlance.wicketdetach.IndexPage onAttach
INFO: onAttach
27.11.2006 10:11:59 com.cleverlance.wicketdetach.IndexPage onDetach
INFO: onDetach

",27/Nov/06 16:04;ehillenius;got another use case is seems,"29/Nov/06 16:19;jcompagner;as far as i know it was always this:

onBeginRequest -> only in the render phase not in request phase
onEndRequest -> after render phase.

And then we have onComponentCalled (or what every it is called that was between the interface/request call.


is page.onBeginRequest not called before the listener interface? (form.onsubmit)?
What is exactly the fix?
","31/Jan/07 06:19;ehillenius;Johan, can I assign this to you?","31/Jan/07 06:23;ivaynberg;in the end i do not think we are going to support this because there is no good way to do it.
onattach will be called before render and while the hieararchy can still be modified - like it is now
we were talking about dropping beforerender and renaming onattach to beforerender - because that is what it really is","31/Jan/07 07:54;ehillenius;So Johan, feel free to close it if you agree.","31/Jan/07 09:14;jcompagner;yes onAttach() and onBeforeRender is now purely for the render phase

onDetach() is called always so that models and components are detached correctly.
And detach() must be called even if (the current) attach is not called because of that.

So when you submit a form and then respond/render to another page 
the onAttach is not called for that page with that form. But detach is..

I think this is wrong and i already have said i think on the user list how it should be: (last night i really needed that onattach anyway that i now have found through IPageEntry...)


on submit request comes in respond to same page:

Page.onAttach();
form.onSubmit();
Page.onBeginRender();
Page.render();
Page.onEndRender();
Page.onDetach();


on submit request comes in respond to another page:

Page1.onAttach();
form.onSubmit();
Page2.onAttach();
Page2.onBeginRender();
Page2.render();
Page2.onEndRender();
Page2.onDetach();
Page.1onDetach();

","31/Jan/07 17:40;ivaynberg;yes yes, but can we do it for 2.0? this is a pretty big break in concept. first we have to remove onbeginrender() then rename any onattach to onbeginrender() and then create the new onattach(). this means all users have to do the same in their code! not only that they also need to know to use onbeginrender() instead of onattach() now.

i dont mind doing it in my 2.0 projects, but what about others?

also we need to lock the hierarachy in onattach(), no point in letting someone remove a component whose listener is about to get invoked.
","31/Jan/07 21:24;jcompagner;can't we do it a bit different with a bit different names?
and the depricate and make the make the current methods final?

We could also just keep the current onBeginRender things (they are pretty much in the right place already so whats done there is fine)
and make onAttach final and call it a bit different?

","31/Jan/07 21:35;ivaynberg;what would you call onattach() ? i mean we can just deprecate onattach() and call it from inside onbeginrender()
but onattach is such a good name! and then what? after 2.0 you rename it back or will we be stuck with this new name forever?","31/Jan/07 22:36;jcompagner;attach()/detach() ?
so drop the on? (i know the rest are on....)

","31/Jan/07 22:39;ivaynberg;no that would be horrible. besides we already have attach()/detach() that encapsulate the super-called check.

maybe all we do is this

mark onattach as final and tell people to move to onbeginrender

let that break sit in there for a few weeks to give people a chance to migrate, then go back in and rework onattach","31/Jan/07 22:47;jcompagner;but for how long?
in 1.3 or 2.0?

Because anybody that didn't move in that period but after that has a problem.

onBeginRequest/onEndRequest?

onBegin/onEnd

onRequest/on????

onUse/onNotUsedAnyMoreUntilUsedAgain



why do we have onAttach and attach()? wasn't it the point that we don't need 2 of those?
and when is attach() now called?


","31/Jan/07 22:53;ivaynberg;onAttach() is the listener - you put your code into it and it is invoked at some point for you
attach() is used by the framework to do what it needs to attach the component - which includes invoking the onAttach()
attach() is public final, if java had a better permission system this method would not be visible to users

as far as i know these changes would only be for 2.0",24/May/07 21:22;jcompagner;this is all fixed now,,,,,,,,,,,,,,
